/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x6239=['listenTo','blur','delete','getByInnerView','clear','sort','view','left','remove','_focusTracker','annotationcollection-not-existing-item','getByView','refreshPositioning','focusTracker','get','getIndex','change:isFocused','isFocused','destroy','length','_getOrderInContent','set','add','stopListening','targetRect','focusableElements','has','innerView','from','fire','_viewToAnnotation','focus','_innerViewToAnnotation'];(function(_0x23461a,_0x6239ed){const _0x4b10f3=function(_0x4bc498){while(--_0x4bc498){_0x23461a['push'](_0x23461a['shift']());}};_0x4b10f3(++_0x6239ed);}(_0x6239,0xf8));const _0x4b10=function(_0x23461a,_0x6239ed){_0x23461a=_0x23461a-0x0;let _0x4b10f3=_0x6239[_0x23461a];return _0x4b10f3;};import{CKEditorError as _0x2626b9,Collection as _0x4d184b,FocusTracker as _0x1f8475}from'ckeditor5/src/utils';export default class x extends _0x4d184b{constructor(_0x2f1b7b=[]){super(),this[_0x4b10('0xf')]=new Map(),this[_0x4b10('0xd')]=new Map(),this[_0x4b10('0x19')]=new _0x1f8475(),this['_focusTracker']['on'](_0x4b10('0x20'),(_0x358ac4,_0x7b52d8,_0x43edcc)=>{_0x43edcc||this[_0x4b10('0xc')](_0x4b10('0x11'));});for(const _0x5ce581 of _0x2f1b7b)this['add'](_0x5ce581);}get[_0x4b10('0x0')](){return this[_0x4b10('0x19')][_0x4b10('0x0')];}['add'](_0x4c6b92){if(this[_0x4b10('0x9')](_0x4c6b92))throw new _0x2626b9('annotationcollection-duplicated-item',null);this['_innerViewToAnnotation'][_0x4b10('0x4')](_0x4c6b92['innerView'],_0x4c6b92),this['_viewToAnnotation'][_0x4b10('0x4')](_0x4c6b92[_0x4b10('0x16')],_0x4c6b92);for(const _0xdcec84 of _0x4c6b92[_0x4b10('0x8')])this[_0x4b10('0x19')][_0x4b10('0x5')](_0xdcec84);this[_0x4b10('0x10')](_0x4c6b92[_0x4b10('0x8')],'add',(_0x1a5642,_0x3a327c)=>{this['_focusTracker']['add'](_0x3a327c);}),this['listenTo'](_0x4c6b92[_0x4b10('0x8')],'remove',(_0x3a241b,_0x46a82f)=>{this[_0x4b10('0x19')][_0x4b10('0x18')](_0x46a82f);}),this[_0x4b10('0x10')](_0x4c6b92['view'][_0x4b10('0x1d')],_0x4b10('0x20'),(_0x201759,_0x10bce7,_0x30a0f6)=>{_0x30a0f6&&this['fire'](_0x4b10('0xe'),_0x4c6b92);});const _0x53b8c4=this[_0x4b10('0x3')](_0x4c6b92);super[_0x4b10('0x5')](_0x4c6b92,_0x53b8c4),_0x4c6b92['updateTargetRect']();}[_0x4b10('0x18')](_0x3e70df){if(!this['has'](_0x3e70df))throw new _0x2626b9(_0x4b10('0x1a'),null);this[_0x4b10('0x6')](_0x3e70df[_0x4b10('0x16')]['focusTracker']),this[_0x4b10('0x6')](_0x3e70df[_0x4b10('0x8')]);for(const _0xb8501 of _0x3e70df['focusableElements'])this[_0x4b10('0x19')][_0x4b10('0x18')](_0xb8501);this[_0x4b10('0xd')]['delete'](_0x3e70df['view']),this['_innerViewToAnnotation'][_0x4b10('0x12')](_0x3e70df[_0x4b10('0xa')]),super['remove'](_0x3e70df);}[_0x4b10('0x13')](_0x43e1e4){return this['_innerViewToAnnotation'][_0x4b10('0x1e')](_0x43e1e4);}[_0x4b10('0x1b')](_0x4325b8){return this[_0x4b10('0xd')][_0x4b10('0x1e')](_0x4325b8);}[_0x4b10('0x1')](){super[_0x4b10('0x14')](),this[_0x4b10('0x6')](),this['_innerViewToAnnotation']['clear'](),this[_0x4b10('0xd')][_0x4b10('0x14')](),this[_0x4b10('0x19')][_0x4b10('0x1')]();}[_0x4b10('0x1c')](){for(const _0x300718 of this)_0x300718['updateTargetRect']();this['_sort']();}['_sort'](){const _0x307042=Array[_0x4b10('0xb')](this)[_0x4b10('0x15')]((_0x7caf42,_0x2cc358)=>y(_0x7caf42[_0x4b10('0x7')],_0x2cc358['targetRect']));for(let _0x1d8716=_0x307042[_0x4b10('0x2')]-0x1;_0x1d8716>0x0;_0x1d8716--){const _0x14e801=_0x307042[_0x1d8716];_0x1d8716!==this[_0x4b10('0x1f')](_0x14e801)&&(this[_0x4b10('0x18')](_0x14e801),this['add'](_0x14e801,_0x1d8716));}}[_0x4b10('0x3')](_0x3a968d){let _0xb9264f=0x0;const _0x53d16d=_0x3a968d['targetRect'];if(!_0x53d16d)return this['_items'][_0x4b10('0x2')];for(const _0x1df4ea of this){const _0x3bf1c4=_0x1df4ea[_0x4b10('0x7')];if(_0x3bf1c4){if(y(_0x53d16d,_0x3bf1c4)<0x0)return _0xb9264f;_0xb9264f++;}}return _0xb9264f;}}export function bindAnnotationCollections({source:_0x5b84d8,target:_0x4d8f38,filter:_0x4e10e5}){for(const _0x350bff of _0x5b84d8)_0x4e10e5(_0x350bff)&&_0x4d8f38[_0x4b10('0x5')](_0x350bff);_0x4d8f38[_0x4b10('0x10')](_0x5b84d8,'add',(_0x2ce330,_0xa238a6)=>{_0x4e10e5(_0xa238a6)&&_0x4d8f38[_0x4b10('0x5')](_0xa238a6);}),_0x4d8f38['listenTo'](_0x5b84d8,_0x4b10('0x18'),(_0x18f13a,_0x227824)=>{_0x4d8f38[_0x4b10('0x9')](_0x227824)&&_0x4d8f38[_0x4b10('0x18')](_0x227824);});}function y(_0x80fb6e,_0x20f6a8){if(null===_0x80fb6e&&null===_0x20f6a8)return 0x0;if(null===_0x80fb6e)return-0x1;if(null===_0x20f6a8)return 0x1;const _0x4782cb=_0x80fb6e['top']-_0x20f6a8['top'];return 0x0==_0x4782cb?_0x80fb6e[_0x4b10('0x17')]-_0x20f6a8[_0x4b10('0x17')]:_0x4782cb;}