/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x301a=['innerView','getByView','isFocused','getIndex','stopListening','get','focus','annotationcollection-not-existing-item','targetRect','left','_items','blur','set','change:isFocused','_focusTracker','add','fire','view','delete','remove','sort','_getOrderInContent','length','destroy','focusTracker','listenTo','has','_innerViewToAnnotation','updateTargetRect','getByInnerView','refreshPositioning','annotationcollection-duplicated-item','clear','focusableElements','_sort','top','_viewToAnnotation'];(function(_0x2fab11,_0x301a1f){const _0x3b8900=function(_0x410cb0){while(--_0x410cb0){_0x2fab11['push'](_0x2fab11['shift']());}};_0x3b8900(++_0x301a1f);}(_0x301a,0x12c));const _0x3b89=function(_0x2fab11,_0x301a1f){_0x2fab11=_0x2fab11-0x0;let _0x3b8900=_0x301a[_0x2fab11];return _0x3b8900;};import{CKEditorError as _0x5dbadb,Collection as _0x328276,FocusTracker as _0x4051ef}from'ckeditor5/src/utils';export default class K extends _0x328276{constructor(_0x21dbfd=[]){super(),this['_innerViewToAnnotation']=new Map(),this[_0x3b89('0x20')]=new Map(),this[_0x3b89('0xa')]=new _0x4051ef(),this['_focusTracker']['on'](_0x3b89('0x9'),(_0x49f9bf,_0x12eb26,_0x41787c)=>{_0x41787c||this['fire'](_0x3b89('0x7'));});for(const _0x1e4e7f of _0x21dbfd)this[_0x3b89('0xb')](_0x1e4e7f);}get[_0x3b89('0x23')](){return this[_0x3b89('0xa')][_0x3b89('0x23')];}[_0x3b89('0xb')](_0x21ac5b){if(this['has'](_0x21ac5b))throw new _0x5dbadb(_0x3b89('0x1b'),null);this[_0x3b89('0x17')][_0x3b89('0x8')](_0x21ac5b[_0x3b89('0x21')],_0x21ac5b),this[_0x3b89('0x20')][_0x3b89('0x8')](_0x21ac5b[_0x3b89('0xd')],_0x21ac5b);for(const _0x22fe92 of _0x21ac5b[_0x3b89('0x1d')])this[_0x3b89('0xa')]['add'](_0x22fe92);this[_0x3b89('0x15')](_0x21ac5b[_0x3b89('0x1d')],_0x3b89('0xb'),(_0x957127,_0xfba690)=>{this['_focusTracker'][_0x3b89('0xb')](_0xfba690);}),this[_0x3b89('0x15')](_0x21ac5b[_0x3b89('0x1d')],_0x3b89('0xf'),(_0x1b9f7b,_0x6aec99)=>{this[_0x3b89('0xa')]['remove'](_0x6aec99);}),this[_0x3b89('0x15')](_0x21ac5b[_0x3b89('0xd')]['focusTracker'],_0x3b89('0x9'),(_0xe4e612,_0x4cc8b9,_0x578aaf)=>{_0x578aaf&&this[_0x3b89('0xc')](_0x3b89('0x2'),_0x21ac5b);});const _0xde6c37=this['_getOrderInContent'](_0x21ac5b);super['add'](_0x21ac5b,_0xde6c37),_0x21ac5b[_0x3b89('0x18')]();}[_0x3b89('0xf')](_0x1b4d06){if(!this[_0x3b89('0x16')](_0x1b4d06))throw new _0x5dbadb(_0x3b89('0x3'),null);this[_0x3b89('0x0')](_0x1b4d06[_0x3b89('0xd')][_0x3b89('0x14')]),this['stopListening'](_0x1b4d06[_0x3b89('0x1d')]);for(const _0x3c7fbd of _0x1b4d06[_0x3b89('0x1d')])this['_focusTracker'][_0x3b89('0xf')](_0x3c7fbd);this['_viewToAnnotation']['delete'](_0x1b4d06[_0x3b89('0xd')]),this['_innerViewToAnnotation'][_0x3b89('0xe')](_0x1b4d06['innerView']),super[_0x3b89('0xf')](_0x1b4d06);}[_0x3b89('0x19')](_0x261f5d){return this[_0x3b89('0x17')][_0x3b89('0x1')](_0x261f5d);}[_0x3b89('0x22')](_0x2293cf){return this[_0x3b89('0x20')][_0x3b89('0x1')](_0x2293cf);}[_0x3b89('0x13')](){super[_0x3b89('0x1c')](),this[_0x3b89('0x0')](),this[_0x3b89('0x17')][_0x3b89('0x1c')](),this[_0x3b89('0x20')][_0x3b89('0x1c')](),this['_focusTracker']['destroy']();}[_0x3b89('0x1a')](){for(const _0x57cb9a of this)_0x57cb9a[_0x3b89('0x18')]();this['_sort']();}[_0x3b89('0x1e')](){const _0x7fa241=Array['from'](this)[_0x3b89('0x10')]((_0x1e7b7a,_0x5410bf)=>Q(_0x1e7b7a[_0x3b89('0x4')],_0x5410bf[_0x3b89('0x4')]));for(let _0xbd5239=_0x7fa241[_0x3b89('0x12')]-0x1;_0xbd5239>0x0;_0xbd5239--){const _0x3b8673=_0x7fa241[_0xbd5239];_0xbd5239!==this[_0x3b89('0x24')](_0x3b8673)&&(this[_0x3b89('0xf')](_0x3b8673),this[_0x3b89('0xb')](_0x3b8673,_0xbd5239));}}[_0x3b89('0x11')](_0x1c6c60){let _0x4e838e=0x0;const _0x114213=_0x1c6c60[_0x3b89('0x4')];if(!_0x114213)return this[_0x3b89('0x6')][_0x3b89('0x12')];for(const _0x171986 of this){const _0x24e566=_0x171986['targetRect'];if(_0x24e566){if(Q(_0x114213,_0x24e566)<0x0)return _0x4e838e;_0x4e838e++;}}return _0x4e838e;}}export function bindAnnotationCollections({source:_0x1b3eb1,target:_0x199f4a,filter:_0x31b2ac}){for(const _0x40277e of _0x1b3eb1)_0x31b2ac(_0x40277e)&&_0x199f4a['add'](_0x40277e);_0x199f4a[_0x3b89('0x15')](_0x1b3eb1,_0x3b89('0xb'),(_0x17fec9,_0x40efca)=>{_0x31b2ac(_0x40efca)&&_0x199f4a[_0x3b89('0xb')](_0x40efca);}),_0x199f4a[_0x3b89('0x15')](_0x1b3eb1,_0x3b89('0xf'),(_0x57e918,_0x22856b)=>{_0x199f4a[_0x3b89('0x16')](_0x22856b)&&_0x199f4a['remove'](_0x22856b);});}function Q(_0x2695f0,_0x58a4ef){if(null===_0x2695f0&&null===_0x58a4ef)return 0x0;if(null===_0x2695f0)return-0x1;if(null===_0x58a4ef)return 0x1;const _0x53097f=_0x2695f0[_0x3b89('0x1f')]-_0x58a4ef['top'];return 0x0==_0x53097f?_0x2695f0[_0x3b89('0x5')]-_0x58a4ef['left']:_0x53097f;}