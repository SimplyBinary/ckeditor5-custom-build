/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1c09=['from','_integrateWithEditorAnnotations','plugins','addEventListener','focus','ready','rearrange','WideSidebar','blur','editors','add','_detachFromContainer','wideSidebar','stopListening','hasDomSelection','set:container','register','set','context','init','widesidebar-detach-not-attached','refresh','has','switchTo','removeEventListener','_annotations','_editorAnnotations','addAnnotation','high','activeAnnotation','stop','cancel','setActiveAnnotation','Sidebar','isAttached','change:container','pluginName','listenTo','resize','remove','attach','widesidebar-attach-already-attached','updateTargetRect','uiUpdate','off','EditorAnnotations','requires','detach','_destroyEditorAnnotationsIntegration','refreshPositioning','_throttledPositioningRefresh','ck-sidebar--wide','getOrderedSelectedAnnotations','get'];(function(_0x49e85b,_0x1c090b){const _0x159278=function(_0x8dacd7){while(--_0x8dacd7){_0x49e85b['push'](_0x49e85b['shift']());}};_0x159278(++_0x1c090b);}(_0x1c09,0x19a));const _0x1592=function(_0x49e85b,_0x1c090b){_0x49e85b=_0x49e85b-0x0;let _0x159278=_0x1c09[_0x49e85b];return _0x159278;};import{ContextPlugin as _0x511b34}from'ckeditor5/src/core';import _0x58ba6a from'./annotationsuis';import _0x17ca9a from'./sidebar';import{CKEditorError as _0x3b9337,Collection as _0x13dde0}from'ckeditor5/src/utils';import{throttle as _0x1b46fd}from'lodash-es';export default class i extends _0x511b34{static get[_0x1592('0xe')](){return[_0x17ca9a,_0x58ba6a];}static get[_0x1592('0x4')](){return _0x1592('0x1d');}constructor(_0x4d4e15){super(_0x4d4e15),this[_0x1592('0x2')]=!0x1,this[_0x1592('0x27')](_0x1592('0x33'),null),this[_0x1592('0x2f')]=null,this[_0x1592('0x30')]=new _0x13dde0(),this[_0x1592('0x12')]=_0x1b46fd(()=>{this['_annotations']['refreshPositioning']();},0x190,{'leading':!0x1});}[_0x1592('0x29')](){const _0x3a1b56=this[_0x1592('0x28')][_0x1592('0x18')]['get'](_0x58ba6a),_0xaf092b=this[_0x1592('0x28')][_0x1592('0x18')][_0x1592('0x15')](_0x17ca9a);_0x3a1b56[_0x1592('0x26')](_0x1592('0x22'),this),_0xaf092b['container']&&_0x3a1b56[_0x1592('0x2d')](_0x1592('0x22'));}[_0x1592('0x0')](_0x33cd04){if(_0x33cd04===this[_0x1592('0x33')])return;const _0x2acbfa=this[_0x1592('0x28')][_0x1592('0x18')][_0x1592('0x15')](_0x17ca9a);_0x2acbfa['_activeAnnotation']=_0x33cd04;const _0x2928d7=this['activeAnnotation'];this[_0x1592('0x33')]=_0x33cd04,_0x2acbfa[_0x1592('0x2b')]({'blurredAnnotation':_0x2928d7,'activatedAnnotation':this['activeAnnotation']});}['attach'](_0x525b45){this['_annotations']=_0x525b45;const _0xce7d7d=this[_0x1592('0x28')][_0x1592('0x18')]['get'](_0x1592('0x1'));if(_0xce7d7d[_0x1592('0x2f')]=_0x525b45,this[_0x1592('0x2')])throw new _0x3b9337(_0x1592('0x9'),this);this[_0x1592('0x2')]=!0x0,this['listenTo'](_0xce7d7d,_0x1592('0x25'),()=>{this[_0x1592('0xf')](),this[_0x1592('0x5')](_0xce7d7d,_0x1592('0x3'),_0x470b93=>{_0x470b93[_0x1592('0xc')](),this[_0x1592('0x8')](_0x525b45);});}),_0xce7d7d['_attachToContainer']({'viewClass':_0x1592('0x13')});const _0x493c0c=_0xe918dd=>{_0xe918dd[_0x1592('0xa')](),_0xce7d7d[_0x1592('0x31')](_0xe918dd);};for(const _0x2404a3 of _0x525b45)_0x493c0c(_0x2404a3);this['listenTo'](_0x525b45,'add',(_0x1f0b75,_0x24908a)=>{_0x493c0c(_0x24908a);}),this['listenTo'](_0x525b45,_0x1592('0x7'),(_0xde60ab,_0x3e8ac9,_0xb558d9)=>{_0xce7d7d[_0x1592('0x1c')]({'removedAnnotation':_0x3e8ac9,'previousAnnotation':_0x525b45[_0x1592('0x15')](_0xb558d9-0x1),'nextAnnotation':_0x525b45[_0x1592('0x15')](_0xb558d9+0x1)}),_0x3e8ac9===this['activeAnnotation']&&this[_0x1592('0x0')](null);},{'priority':_0x1592('0x32')}),this[_0x1592('0x5')](_0x525b45,_0x1592('0x1a'),(_0x517bc9,_0x8b97a5)=>{this[_0x1592('0x0')](_0x8b97a5);}),this[_0x1592('0x5')](_0x525b45,'blur',()=>{this[_0x1592('0x0')](null);});const _0x2ab434=this[_0x1592('0x28')][_0x1592('0x1f')]?this[_0x1592('0x28')][_0x1592('0x1f')]:new _0x13dde0([this['context']]);for(const _0xa43372 of _0x2ab434)this[_0x1592('0x17')](_0xa43372);this[_0x1592('0x5')](_0x2ab434,'add',(_0x4747d0,_0x57675b)=>{this[_0x1592('0x5')](_0x57675b,_0x1592('0x1b'),()=>{this['_integrateWithEditorAnnotations'](_0x57675b);});}),this[_0x1592('0x5')](_0x2ab434,_0x1592('0x7'),(_0x3b313e,_0x34a714)=>{_0x34a714[_0x1592('0x18')][_0x1592('0x2c')]('EditorAnnotations')&&this[_0x1592('0x10')](_0x34a714[_0x1592('0x18')][_0x1592('0x15')]('EditorAnnotations'));}),window[_0x1592('0x19')](_0x1592('0x6'),this[_0x1592('0x12')]),this['_annotations'][_0x1592('0x11')]();}[_0x1592('0xf')](){if(!this['isAttached'])throw new _0x3b9337(_0x1592('0x2a'),this);this[_0x1592('0x0')](null);const _0xbc81c4=this['context'][_0x1592('0x18')][_0x1592('0x15')](_0x17ca9a);_0xbc81c4[_0x1592('0x21')](this[_0x1592('0x2f')]),this[_0x1592('0x23')](_0xbc81c4),this[_0x1592('0x23')](this['_annotations']),this['stopListening'](this[_0x1592('0x28')][_0x1592('0x1f')]);for(const _0x3a5e87 of Array[_0x1592('0x16')](this[_0x1592('0x30')]))this[_0x1592('0x10')](_0x3a5e87);window[_0x1592('0x2e')]('resize',this['_throttledPositioningRefresh']),this[_0x1592('0x12')][_0x1592('0x35')](),this[_0x1592('0x33')]=null,this[_0x1592('0x2')]=!0x1;}['destroy'](){this[_0x1592('0x2')]&&this[_0x1592('0xf')]();}[_0x1592('0x17')](_0x57e869){const _0x33505f=_0x57e869['plugins'][_0x1592('0x15')](_0x1592('0xd'));if(!_0x33505f)return;const _0x240285=()=>{const _0xe8f660=_0x33505f[_0x1592('0x14')]({'annotations':this[_0x1592('0x2f')],'activeAnnotation':this[_0x1592('0x33')]});this[_0x1592('0x0')](_0xe8f660[0x0]||null);};this[_0x1592('0x5')](_0x33505f,_0x1592('0x2b'),_0x240285),this['listenTo'](_0x33505f,_0x1592('0x1e'),(_0x410e73,{isAnnotationTracked:_0x367cba})=>{this[_0x1592('0x33')]&&_0x367cba(this[_0x1592('0x33')])&&this['setActiveAnnotation'](null);}),this['listenTo'](_0x33505f,_0x1592('0xb'),()=>{this[_0x1592('0x2f')][_0x1592('0x11')]();}),this[_0x1592('0x5')](this['_annotations'],_0x1592('0x1e'),_0x19992a=>{_0x33505f[_0x1592('0x24')]()&&(_0x240285(),_0x19992a[_0x1592('0x34')]());},{'priority':'high'}),this['_editorAnnotations'][_0x1592('0x20')](_0x33505f);}['_destroyEditorAnnotationsIntegration'](_0x6bb4d6){_0x6bb4d6&&(this[_0x1592('0x23')](_0x6bb4d6),this[_0x1592('0x30')][_0x1592('0x7')](_0x6bb4d6));}}