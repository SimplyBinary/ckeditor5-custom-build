/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x4123=['get','focus','pluginName','refresh','editors','requires','register','context','blur','uiUpdate','from','attach','set:container','WideSidebar','getOrderedSelectedAnnotations','_annotations','resize','switchTo','hasDomSelection','EditorAnnotations','addAnnotation','addEventListener','_throttledPositioningRefresh','_destroyEditorAnnotationsIntegration','_integrateWithEditorAnnotations','container','high','activeAnnotation','detach','stopListening','init','widesidebar-detach-not-attached','plugins','remove','setActiveAnnotation','isAttached','removeEventListener','set','Sidebar','listenTo','destroy','_detachFromContainer','updateTargetRect','refreshPositioning','_editorAnnotations','add','off','wideSidebar'];(function(_0x50ea43,_0x412354){const _0x86ec6d=function(_0x25c884){while(--_0x25c884){_0x50ea43['push'](_0x50ea43['shift']());}};_0x86ec6d(++_0x412354);}(_0x4123,0x1b8));const _0x86ec=function(_0x50ea43,_0x412354){_0x50ea43=_0x50ea43-0x0;let _0x86ec6d=_0x4123[_0x50ea43];return _0x86ec6d;};import{ContextPlugin as _0x44848c}from'ckeditor5/src/core';import _0x454229 from'./annotationsuis';import _0x4dc0e2 from'./sidebar';import{CKEditorError as _0x35c6f7,Collection as _0x771e3c}from'ckeditor5/src/utils';import{throttle as _0x238cfe}from'lodash-es';export default class i extends _0x44848c{static get[_0x86ec('0x2d')](){return[_0x4dc0e2,_0x454229];}static get[_0x86ec('0x2a')](){return _0x86ec('0x5');}constructor(_0x5e3f04){super(_0x5e3f04),this[_0x86ec('0x1b')]=!0x1,this[_0x86ec('0x1d')](_0x86ec('0x13'),null),this[_0x86ec('0x7')]=null,this[_0x86ec('0x24')]=new _0x771e3c(),this[_0x86ec('0xe')]=_0x238cfe(()=>{this[_0x86ec('0x7')][_0x86ec('0x23')]();},0x190,{'leading':!0x1});}[_0x86ec('0x16')](){const _0x3bc1b2=this[_0x86ec('0x2f')]['plugins']['get'](_0x454229),_0x3592f6=this[_0x86ec('0x2f')][_0x86ec('0x18')][_0x86ec('0x28')](_0x4dc0e2);_0x3bc1b2[_0x86ec('0x2e')](_0x86ec('0x27'),this),_0x3592f6[_0x86ec('0x11')]&&_0x3bc1b2[_0x86ec('0x9')](_0x86ec('0x27'));}[_0x86ec('0x1a')](_0x3246b7){if(_0x3246b7===this[_0x86ec('0x13')])return;const _0x3bc7ce=this[_0x86ec('0x2f')][_0x86ec('0x18')][_0x86ec('0x28')](_0x4dc0e2);_0x3bc7ce['_activeAnnotation']=_0x3246b7;const _0x1bc9e0=this['activeAnnotation'];this[_0x86ec('0x13')]=_0x3246b7,_0x3bc7ce[_0x86ec('0x2b')]({'blurredAnnotation':_0x1bc9e0,'activatedAnnotation':this['activeAnnotation']});}[_0x86ec('0x3')](_0x7a36e0){this[_0x86ec('0x7')]=_0x7a36e0;const _0x19ebb5=this['context'][_0x86ec('0x18')][_0x86ec('0x28')](_0x86ec('0x1e'));if(_0x19ebb5[_0x86ec('0x7')]=_0x7a36e0,this[_0x86ec('0x1b')])throw new _0x35c6f7('widesidebar-attach-already-attached',this);this[_0x86ec('0x1b')]=!0x0,this[_0x86ec('0x1f')](_0x19ebb5,_0x86ec('0x4'),()=>{this['detach'](),this[_0x86ec('0x1f')](_0x19ebb5,'change:container',_0x66da8f=>{_0x66da8f[_0x86ec('0x26')](),this[_0x86ec('0x3')](_0x7a36e0);});}),_0x19ebb5['_attachToContainer']({'viewClass':'ck-sidebar--wide'});const _0x534de9=_0x1a0408=>{_0x1a0408[_0x86ec('0x22')](),_0x19ebb5[_0x86ec('0xc')](_0x1a0408);};for(const _0x5b8de0 of _0x7a36e0)_0x534de9(_0x5b8de0);this[_0x86ec('0x1f')](_0x7a36e0,_0x86ec('0x25'),(_0x4f0e30,_0x565c62)=>{_0x534de9(_0x565c62);}),this[_0x86ec('0x1f')](_0x7a36e0,_0x86ec('0x19'),(_0x399ccf,_0x3b6f82,_0x1d85e0)=>{_0x19ebb5['rearrange']({'removedAnnotation':_0x3b6f82,'previousAnnotation':_0x7a36e0['get'](_0x1d85e0-0x1),'nextAnnotation':_0x7a36e0[_0x86ec('0x28')](_0x1d85e0+0x1)}),_0x3b6f82===this[_0x86ec('0x13')]&&this[_0x86ec('0x1a')](null);},{'priority':_0x86ec('0x12')}),this['listenTo'](_0x7a36e0,_0x86ec('0x29'),(_0x3d02d8,_0x29a135)=>{this[_0x86ec('0x1a')](_0x29a135);}),this['listenTo'](_0x7a36e0,_0x86ec('0x0'),()=>{this[_0x86ec('0x1a')](null);});const _0x5b0810=this[_0x86ec('0x2f')][_0x86ec('0x2c')]?this[_0x86ec('0x2f')][_0x86ec('0x2c')]:new _0x771e3c([this[_0x86ec('0x2f')]]);for(const _0x28b762 of _0x5b0810)this['_integrateWithEditorAnnotations'](_0x28b762);this['listenTo'](_0x5b0810,_0x86ec('0x25'),(_0x4e4015,_0x134cf2)=>{this[_0x86ec('0x1f')](_0x134cf2,'ready',()=>{this[_0x86ec('0x10')](_0x134cf2);});}),this[_0x86ec('0x1f')](_0x5b0810,'remove',(_0x278a1f,_0x368e82)=>{_0x368e82['plugins']['has'](_0x86ec('0xb'))&&this[_0x86ec('0xf')](_0x368e82[_0x86ec('0x18')]['get']('EditorAnnotations'));}),window[_0x86ec('0xd')](_0x86ec('0x8'),this['_throttledPositioningRefresh']),this[_0x86ec('0x7')][_0x86ec('0x23')]();}['detach'](){if(!this[_0x86ec('0x1b')])throw new _0x35c6f7(_0x86ec('0x17'),this);this['setActiveAnnotation'](null);const _0x4d7671=this[_0x86ec('0x2f')][_0x86ec('0x18')][_0x86ec('0x28')](_0x4dc0e2);_0x4d7671[_0x86ec('0x21')](this[_0x86ec('0x7')]),this[_0x86ec('0x15')](_0x4d7671),this[_0x86ec('0x15')](this[_0x86ec('0x7')]),this[_0x86ec('0x15')](this[_0x86ec('0x2f')]['editors']);for(const _0x337544 of Array[_0x86ec('0x2')](this[_0x86ec('0x24')]))this['_destroyEditorAnnotationsIntegration'](_0x337544);window[_0x86ec('0x1c')]('resize',this['_throttledPositioningRefresh']),this['_throttledPositioningRefresh']['cancel'](),this[_0x86ec('0x13')]=null,this[_0x86ec('0x1b')]=!0x1;}[_0x86ec('0x20')](){this[_0x86ec('0x1b')]&&this[_0x86ec('0x14')]();}['_integrateWithEditorAnnotations'](_0xb38b30){const _0x761b3d=_0xb38b30[_0x86ec('0x18')]['get'](_0x86ec('0xb'));if(!_0x761b3d)return;const _0x304358=()=>{const _0x2a983a=_0x761b3d[_0x86ec('0x6')]({'annotations':this['_annotations'],'activeAnnotation':this[_0x86ec('0x13')]});this[_0x86ec('0x1a')](_0x2a983a[0x0]||null);};this[_0x86ec('0x1f')](_0x761b3d,'refresh',_0x304358),this[_0x86ec('0x1f')](_0x761b3d,'blur',(_0x345c75,{isAnnotationTracked:_0x3b2a26})=>{this['activeAnnotation']&&_0x3b2a26(this[_0x86ec('0x13')])&&this['setActiveAnnotation'](null);}),this[_0x86ec('0x1f')](_0x761b3d,_0x86ec('0x1'),()=>{this[_0x86ec('0x7')][_0x86ec('0x23')]();}),this['listenTo'](this[_0x86ec('0x7')],'blur',_0x345eb4=>{_0x761b3d[_0x86ec('0xa')]()&&(_0x304358(),_0x345eb4['stop']());},{'priority':_0x86ec('0x12')}),this['_editorAnnotations'][_0x86ec('0x25')](_0x761b3d);}['_destroyEditorAnnotationsIntegration'](_0x34b407){_0x34b407&&(this['stopListening'](_0x34b407),this[_0x86ec('0x24')][_0x86ec('0x19')](_0x34b407));}}