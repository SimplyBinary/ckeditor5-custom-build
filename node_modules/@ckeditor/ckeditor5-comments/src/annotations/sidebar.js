/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x6aa8=['view','_updateLastItem','bind','_sidebarItemViewToAnnotation','refresh','_annotations','container','sidebar.container','isAnimationDisabled','content','_alignAfterItem','getSidebarItemView','context','_getItemAfter','updateHeight','Sidebar','_getTargetTop','top','locale','isActive','_spaceBetweenItems','sidebar.preventScrollOutOfView','get','set','target','unbind','_setItemTop','listenTo','_detachFromContainer','minHeight','appendChild','element','change:top','getIndex','sidebar-setcontainer-invalid-element','stopListening','config','clear','remove','sidebar-attachtocontainer-missing-container','setContainer','bottom','_targetTop','_activeAnnotation','_alignBeforeItem','_alignToTargetRect','max','_destroySidebarItemView','_attachToContainer','init','targetRect','delete','add','_annotationToSidebarItemView','length','destroy','_lastItem','define','change:bottom','_getItemBefore','list','_createSidebarView','_getMaxAvailableTop'];(function(_0x36668f,_0x6aa844){const _0x323597=function(_0x4db177){while(--_0x4db177){_0x36668f['push'](_0x36668f['shift']());}};_0x323597(++_0x6aa844);}(_0x6aa8,0x148));const _0x3235=function(_0x36668f,_0x6aa844){_0x36668f=_0x36668f-0x0;let _0x323597=_0x6aa8[_0x36668f];return _0x323597;};import{ContextPlugin as _0x1fef07}from'ckeditor5/src/core';import _0xdee877 from'./view/sidebarview';import _0x2ac473 from'./view/sidebaritemview';import{Rect as _0x5daed1,CKEditorError as _0xadd2ea}from'ckeditor5/src/utils';import{isElement as _0x1858a1,throttle as _0x3148b1}from'lodash-es';export default class b extends _0x1fef07{static get['pluginName'](){return _0x3235('0x2');}constructor(_0xbd9b9c){super(_0xbd9b9c),this[_0x3235('0xa')]('_lastItem'),this[_0x3235('0x32')]=this['_createSidebarView'](),this[_0x3235('0xa')]('container',null),this[_0x3235('0x7')]=0x19,this[_0x3235('0x35')]=new Map(),this[_0x3235('0x28')]=new Map(),this[_0x3235('0x3e')]['config'][_0x3235('0x2c')](_0x3235('0x8'),!0x1),this['_annotations']=null,this[_0x3235('0x1e')]=null;}[_0x3235('0x24')](){const _0x51826e=this[_0x3235('0x3e')][_0x3235('0x17')][_0x3235('0x9')](_0x3235('0x39'));_0x51826e&&this[_0x3235('0x1b')](_0x51826e);}['setContainer'](_0x3205df){if(!_0x1858a1(_0x3205df))throw new _0xadd2ea(_0x3235('0x15'));this['container']=_0x3205df;}[_0x3235('0x23')]({viewClass:_0x475f80='',spaceBetweenItems:_0x2937d8=0x19}={}){if(!_0x1858a1(this[_0x3235('0x38')]))throw new _0xadd2ea(_0x3235('0x1a'),this);this[_0x3235('0x38')][_0x3235('0x11')](this['view']['element']),this[_0x3235('0x32')]['class']=_0x475f80,this[_0x3235('0x7')]=_0x2937d8;}['rearrange']({removedAnnotation:_0x573a0a,previousAnnotation:_0x2b914f,nextAnnotation:_0x59b599}){const _0xee054b=this['getSidebarItemView'](_0x573a0a);this[_0x3235('0x32')][_0x3235('0x2f')][_0x3235('0x19')](_0xee054b),this['_destroySidebarItemView'](_0x573a0a),_0x2b914f&&this[_0x3235('0x20')](this[_0x3235('0x3d')](_0x2b914f)),_0x59b599&&this[_0x3235('0x20')](this[_0x3235('0x3d')](_0x59b599)),this[_0x3235('0x33')]();}[_0x3235('0x36')]({blurredAnnotation:_0x30ca68,activatedAnnotation:_0x21708b,disableAnimationOnActivatedAnnotation:_0x165f85}){if(this['_activeAnnotation']=_0x21708b,_0x30ca68){_0x30ca68[_0x3235('0x6')]=!0x1;const _0x1560cf=this[_0x3235('0x3d')](_0x30ca68);_0x1560cf&&_0x165f85&&(_0x1560cf['isAnimationDisabled']=!0x1);}if(_0x21708b){const _0x43cf0b=this[_0x3235('0x3d')](_0x21708b);_0x43cf0b&&(_0x21708b[_0x3235('0x6')]=!0x0,_0x165f85&&(_0x43cf0b[_0x3235('0x3a')]=!0x0,_0x43cf0b[_0x3235('0x4')]+=0x1),this[_0x3235('0x20')](_0x43cf0b));}}[_0x3235('0xf')](_0x147c17){this[_0x3235('0x16')](),this[_0x3235('0x32')][_0x3235('0x12')][_0x3235('0x19')]();for(const _0x2d7935 of _0x147c17)this['_destroySidebarItemView'](_0x2d7935);this[_0x3235('0x32')][_0x3235('0x2f')][_0x3235('0x18')](),this[_0x3235('0x32')]['class']='',this[_0x3235('0x2b')]=null;}['addAnnotation'](_0x5dac3f,_0x4bf18c){_0x4bf18c||(_0x4bf18c=_0x5dac3f[_0x3235('0x32')]);const _0x5d8c57=new _0x2ac473(this[_0x3235('0x3e')][_0x3235('0x5')]);this['_sidebarItemViewToAnnotation'][_0x3235('0xa')](_0x5d8c57,_0x5dac3f),this[_0x3235('0x28')][_0x3235('0xa')](_0x5dac3f,_0x5d8c57),_0x5d8c57[_0x3235('0x3b')][_0x3235('0x27')](_0x4bf18c),this[_0x3235('0x20')](_0x5d8c57),this[_0x3235('0xe')](_0x5dac3f[_0x3235('0x32')],'change:targetRect',()=>{const _0x2993d8=this[_0x3235('0x3')](_0x5d8c57);_0x5d8c57[_0x3235('0x1d')]!=_0x2993d8&&(_0x5d8c57[_0x3235('0x1d')]=_0x2993d8,this[_0x3235('0xd')](_0x5d8c57,_0x2993d8));}),this[_0x3235('0xe')](_0x5d8c57,_0x3235('0x13'),_0x3148b1(()=>{if(!_0x5d8c57[_0x3235('0x3b')][_0x3235('0x29')])return;const _0x1943ba=this[_0x3235('0x2e')](_0x5d8c57);if(!_0x1943ba)return;const _0x2bc91c=this[_0x3235('0x35')][_0x3235('0x9')](_0x1943ba),_0x44ef8e=this[_0x3235('0x1e')];_0x44ef8e&&_0x44ef8e===_0x2bc91c?this[_0x3235('0x3c')](_0x1943ba,_0x5d8c57):this[_0x3235('0x1f')](_0x5d8c57,_0x1943ba);},0xa,{'leading':!0x1})),this[_0x3235('0xe')](_0x5d8c57,_0x3235('0x2d'),_0x3148b1(()=>{if(!_0x5d8c57['content'][_0x3235('0x29')])return;const _0x28594a=this[_0x3235('0x0')](_0x5d8c57);if(!_0x28594a)return;const _0x337d2a=this['_sidebarItemViewToAnnotation'][_0x3235('0x9')](_0x28594a),_0x33b2a7=this[_0x3235('0x3e')]['config'][_0x3235('0x9')](_0x3235('0x8')),_0x5b75d5=this['_activeAnnotation'];_0x5b75d5&&_0x5b75d5===_0x337d2a&&_0x33b2a7?(this[_0x3235('0x1f')](_0x28594a,_0x5d8c57),this[_0x3235('0x3c')](_0x5d8c57,_0x28594a)):_0x5b75d5&&_0x5b75d5===_0x337d2a?this[_0x3235('0x1f')](_0x28594a,_0x5d8c57):this[_0x3235('0x3c')](_0x5d8c57,_0x28594a);},0xa,{'leading':!0x1}));const _0x1c8257=this[_0x3235('0x2e')](_0x5d8c57);if(_0x1c8257)this[_0x3235('0x3c')](_0x1c8257,_0x5d8c57)||this['_alignToTargetRect'](_0x5d8c57);else this['_alignToTargetRect'](_0x5d8c57);return this[_0x3235('0x33')](),this['view']['list'][_0x3235('0x27')](_0x5d8c57),_0x5d8c57;}[_0x3235('0x3d')](_0x228598){return this[_0x3235('0x28')][_0x3235('0x9')](_0x228598);}[_0x3235('0x2a')](){this[_0x3235('0x32')][_0x3235('0x2a')]();}[_0x3235('0x22')](_0x3f5415){const _0x32470a=this[_0x3235('0x3d')](_0x3f5415);this[_0x3235('0x16')](_0x32470a),this[_0x3235('0x16')](_0x3f5415[_0x3235('0x32')]),_0x32470a[_0x3235('0x2a')](),this[_0x3235('0x28')]['delete'](_0x3f5415),this['_sidebarItemViewToAnnotation'][_0x3235('0x26')](_0x32470a);}[_0x3235('0x30')](){const _0x256edf=new _0xdee877(this[_0x3235('0x3e')][_0x3235('0x5')]);return _0x256edf['render'](),this['on']('change:_lastItem',(_0x4ad207,_0x3688a0,_0x1edf15,_0x15da7b)=>{_0x15da7b&&_0x256edf[_0x3235('0xc')](_0x3235('0x10')),_0x1edf15?_0x256edf[_0x3235('0x34')](_0x3235('0x10'))['to'](_0x1edf15,_0x3235('0x1c')):_0x256edf['minHeight']=null;}),_0x256edf;}[_0x3235('0x33')](){this[_0x3235('0x2b')]=this['getSidebarItemView'](this[_0x3235('0x37')]['last']);}[_0x3235('0x2e')](_0x2f908a){const _0x3cdc6b=this['_sidebarItemViewToAnnotation']['get'](_0x2f908a),_0x599ff3=this['_annotations'][_0x3235('0x9')](this['_annotations'][_0x3235('0x14')](_0x3cdc6b)-0x1);return _0x599ff3&&this[_0x3235('0x3d')](_0x599ff3);}['_getItemAfter'](_0x2cc8d1){const _0x5cff89=this[_0x3235('0x35')]['get'](_0x2cc8d1),_0x2648ba=this[_0x3235('0x37')]['get'](this[_0x3235('0x37')][_0x3235('0x14')](_0x5cff89)+0x1);return _0x2648ba&&this[_0x3235('0x3d')](_0x2648ba);}[_0x3235('0x1f')](_0x358608,_0x5b65c9){_0x358608['updateHeight']();const _0x298a78=H(_0x5b65c9[_0x3235('0x1c')]+this[_0x3235('0x7')],_0x358608[_0x3235('0x4')]);return!!_0x298a78&&(this[_0x3235('0xd')](_0x5b65c9,_0x5b65c9[_0x3235('0x4')]-_0x298a78),!0x0);}[_0x3235('0x3c')](_0x5673ae,_0x3e5888){_0x5673ae[_0x3235('0x1')]();const _0x10841d=H(_0x5673ae[_0x3235('0x1c')]+this['_spaceBetweenItems'],_0x3e5888[_0x3235('0x4')]);return!!_0x10841d&&(this['_setItemTop'](_0x3e5888,_0x3e5888[_0x3235('0x4')]+_0x10841d,!0x1),!0x0);}[_0x3235('0x20')](_0x23f142){const _0x3a04c2=this[_0x3235('0x35')][_0x3235('0x9')](_0x23f142);if(!_0x3a04c2||!_0x3a04c2[_0x3235('0xb')])return;const _0x596c83=this['_getTargetTop'](_0x23f142);this[_0x3235('0xd')](_0x23f142,_0x596c83);}['_getTargetTop'](_0xc2d715){const _0x29701a=this[_0x3235('0x35')][_0x3235('0x9')](_0xc2d715);if(null===_0x29701a[_0x3235('0x25')])return 0x0;if(_0x29701a[_0x3235('0xb')]instanceof _0x5daed1)return _0x29701a[_0x3235('0x25')][_0x3235('0x4')];{const _0x54d584=new _0x5daed1(this['view'][_0x3235('0x12')])[_0x3235('0x4')];return _0x29701a[_0x3235('0x25')][_0x3235('0x4')]-_0x54d584;}}[_0x3235('0xd')](_0x417629,_0x31890e,_0x5f04dc=this[_0x3235('0x3e')][_0x3235('0x17')][_0x3235('0x9')](_0x3235('0x8'))){_0x5f04dc&&(_0x31890e=Math[_0x3235('0x21')](_0x31890e,this[_0x3235('0x31')](_0x417629))),_0x417629['top']=_0x31890e;}[_0x3235('0x31')](_0x18e052){let _0x8da68c=this[_0x3235('0x2e')](_0x18e052),_0x4ffa46=0x0;for(;_0x8da68c;)_0x8da68c['updateHeight'](),_0x4ffa46+=this[_0x3235('0x7')]+_0x8da68c['height'],_0x8da68c=this[_0x3235('0x2e')](_0x8da68c);return _0x4ffa46;}}function H(_0x57938b,_0x425b67){return Math[_0x3235('0x21')](_0x57938b-_0x425b67,0x0);}