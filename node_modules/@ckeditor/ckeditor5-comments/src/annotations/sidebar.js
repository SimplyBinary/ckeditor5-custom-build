/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x4eea=['_detachFromContainer','addAnnotation','destroy','_getItemBefore','render','height','content','minHeight','listenTo','define','add','getSidebarItemView','_getTargetTop','getIndex','isAnimationDisabled','_getMaxAvailableTop','view','bottom','pluginName','_alignBeforeItem','isActive','_destroySidebarItemView','_spaceBetweenItems','stopListening','list','delete','_setItemTop','target','sidebar-setcontainer-invalid-element','_sidebarItemViewToAnnotation','_targetTop','class','rearrange','refresh','context','config','change:bottom','_annotations','_annotationToSidebarItemView','init','sidebar-attachtocontainer-missing-container','remove','_updateLastItem','sidebar.preventScrollOutOfView','_createSidebarView','locale','appendChild','_alignToTargetRect','Sidebar','_alignAfterItem','set','container','sidebar.container','get','setContainer','updateHeight','max','top','_activeAnnotation','element','_attachToContainer','_lastItem','targetRect','length','_getItemAfter'];(function(_0x3ae4af,_0x4eea32){const _0x3ee09d=function(_0x15aab5){while(--_0x15aab5){_0x3ae4af['push'](_0x3ae4af['shift']());}};_0x3ee09d(++_0x4eea32);}(_0x4eea,0x15b));const _0x3ee0=function(_0x3ae4af,_0x4eea32){_0x3ae4af=_0x3ae4af-0x0;let _0x3ee09d=_0x4eea[_0x3ae4af];return _0x3ee09d;};import{ContextPlugin as _0x68dfe1}from'ckeditor5/src/core';import _0x51e552 from'./view/sidebarview';import _0x25479c from'./view/sidebaritemview';import{Rect as _0x58211e,CKEditorError as _0x12c62f}from'ckeditor5/src/utils';import{isElement as _0x54a130,throttle as _0x34f717}from'lodash-es';export default class it extends _0x68dfe1{static get[_0x3ee0('0x3d')](){return _0x3ee0('0x1a');}constructor(_0x41dbad){super(_0x41dbad),this[_0x3ee0('0x1c')](_0x3ee0('0x27')),this[_0x3ee0('0x3b')]=this[_0x3ee0('0x16')](),this[_0x3ee0('0x1c')](_0x3ee0('0x1d'),null),this[_0x3ee0('0x0')]=0x19,this['_sidebarItemViewToAnnotation']=new Map(),this[_0x3ee0('0x10')]=new Map(),this[_0x3ee0('0xc')][_0x3ee0('0xd')][_0x3ee0('0x34')](_0x3ee0('0x15'),!0x1),this[_0x3ee0('0xf')]=null,this[_0x3ee0('0x24')]=null;}[_0x3ee0('0x11')](){const _0xe5e9df=this['context'][_0x3ee0('0xd')]['get'](_0x3ee0('0x1e'));_0xe5e9df&&this['setContainer'](_0xe5e9df);}[_0x3ee0('0x20')](_0x40e5f4){if(!_0x54a130(_0x40e5f4))throw new _0x12c62f(_0x3ee0('0x6'));this[_0x3ee0('0x1d')]=_0x40e5f4;}[_0x3ee0('0x26')]({viewClass:_0x52a4d9='',spaceBetweenItems:_0x17ed67=0x19}={}){if(!_0x54a130(this['container']))throw new _0x12c62f(_0x3ee0('0x12'),this);this[_0x3ee0('0x1d')][_0x3ee0('0x18')](this[_0x3ee0('0x3b')]['element']),this[_0x3ee0('0x3b')]['class']=_0x52a4d9,this[_0x3ee0('0x0')]=_0x17ed67;}[_0x3ee0('0xa')]({removedAnnotation:_0x10e1af,previousAnnotation:_0x55aadb,nextAnnotation:_0x454736}){const _0xdde4b3=this[_0x3ee0('0x36')](_0x10e1af);this[_0x3ee0('0x3b')]['list'][_0x3ee0('0x13')](_0xdde4b3),this[_0x3ee0('0x40')](_0x10e1af),_0x55aadb&&this[_0x3ee0('0x19')](this[_0x3ee0('0x36')](_0x55aadb)),_0x454736&&this['_alignToTargetRect'](this[_0x3ee0('0x36')](_0x454736)),this[_0x3ee0('0x14')]();}[_0x3ee0('0xb')]({blurredAnnotation:_0x3e0441,activatedAnnotation:_0xc7966d,disableAnimationOnActivatedAnnotation:_0xa5e066}){if(this['_activeAnnotation']=_0xc7966d,_0x3e0441){_0x3e0441[_0x3ee0('0x3f')]=!0x1;const _0x385766=this[_0x3ee0('0x36')](_0x3e0441);_0x385766&&_0xa5e066&&(_0x385766[_0x3ee0('0x39')]=!0x1);}if(_0xc7966d){const _0x59b1b2=this[_0x3ee0('0x36')](_0xc7966d);_0x59b1b2&&(_0xc7966d[_0x3ee0('0x3f')]=!0x0,_0xa5e066&&(_0x59b1b2[_0x3ee0('0x39')]=!0x0,_0x59b1b2[_0x3ee0('0x23')]+=0x1),this[_0x3ee0('0x19')](_0x59b1b2));}}[_0x3ee0('0x2b')](_0x4b1f35){this[_0x3ee0('0x1')](),this[_0x3ee0('0x3b')][_0x3ee0('0x25')][_0x3ee0('0x13')]();for(const _0x371891 of _0x4b1f35)this[_0x3ee0('0x40')](_0x371891);this[_0x3ee0('0x3b')][_0x3ee0('0x2')]['clear'](),this['view'][_0x3ee0('0x9')]='',this['_lastItem']=null;}[_0x3ee0('0x2c')](_0x319d22,_0x3836c3){_0x3836c3||(_0x3836c3=_0x319d22['view']);const _0x39eecc=new _0x25479c(this[_0x3ee0('0xc')][_0x3ee0('0x17')]);this['_sidebarItemViewToAnnotation'][_0x3ee0('0x1c')](_0x39eecc,_0x319d22),this[_0x3ee0('0x10')]['set'](_0x319d22,_0x39eecc),_0x39eecc['content'][_0x3ee0('0x35')](_0x3836c3),this[_0x3ee0('0x19')](_0x39eecc),this[_0x3ee0('0x33')](_0x319d22['view'],'change:targetRect',()=>{const _0x42a51b=this[_0x3ee0('0x37')](_0x39eecc);_0x39eecc[_0x3ee0('0x8')]!=_0x42a51b&&(_0x39eecc[_0x3ee0('0x8')]=_0x42a51b,this[_0x3ee0('0x4')](_0x39eecc,_0x42a51b));}),this['listenTo'](_0x39eecc,'change:top',_0x34f717(()=>{if(!_0x39eecc[_0x3ee0('0x31')][_0x3ee0('0x29')])return;const _0x5e69b7=this['_getItemBefore'](_0x39eecc);if(!_0x5e69b7)return;const _0x218afc=this[_0x3ee0('0x7')][_0x3ee0('0x1f')](_0x5e69b7),_0x5e71ed=this[_0x3ee0('0x24')];_0x5e71ed&&_0x5e71ed===_0x218afc?this[_0x3ee0('0x1b')](_0x5e69b7,_0x39eecc):this['_alignBeforeItem'](_0x39eecc,_0x5e69b7);},0xa,{'leading':!0x1})),this[_0x3ee0('0x33')](_0x39eecc,_0x3ee0('0xe'),_0x34f717(()=>{if(!_0x39eecc[_0x3ee0('0x31')][_0x3ee0('0x29')])return;const _0x32c47b=this[_0x3ee0('0x2a')](_0x39eecc);if(!_0x32c47b)return;const _0x59c6e9=this[_0x3ee0('0x7')][_0x3ee0('0x1f')](_0x32c47b),_0x26067e=this['context'][_0x3ee0('0xd')][_0x3ee0('0x1f')](_0x3ee0('0x15')),_0x14e459=this[_0x3ee0('0x24')];_0x14e459&&_0x14e459===_0x59c6e9&&_0x26067e?(this[_0x3ee0('0x3e')](_0x32c47b,_0x39eecc),this[_0x3ee0('0x1b')](_0x39eecc,_0x32c47b)):_0x14e459&&_0x14e459===_0x59c6e9?this[_0x3ee0('0x3e')](_0x32c47b,_0x39eecc):this[_0x3ee0('0x1b')](_0x39eecc,_0x32c47b);},0xa,{'leading':!0x1}));const _0x196184=this[_0x3ee0('0x2e')](_0x39eecc);if(_0x196184)this[_0x3ee0('0x1b')](_0x196184,_0x39eecc)||this[_0x3ee0('0x19')](_0x39eecc);else this[_0x3ee0('0x19')](_0x39eecc);return this[_0x3ee0('0x14')](),this['view'][_0x3ee0('0x2')][_0x3ee0('0x35')](_0x39eecc),_0x39eecc;}[_0x3ee0('0x36')](_0x2b7e83){return this[_0x3ee0('0x10')][_0x3ee0('0x1f')](_0x2b7e83);}[_0x3ee0('0x2d')](){this[_0x3ee0('0x3b')][_0x3ee0('0x2d')]();}[_0x3ee0('0x40')](_0x16182c){const _0x7b6795=this[_0x3ee0('0x36')](_0x16182c);this['stopListening'](_0x7b6795),this[_0x3ee0('0x1')](_0x16182c[_0x3ee0('0x3b')]),_0x7b6795[_0x3ee0('0x2d')](),this[_0x3ee0('0x10')][_0x3ee0('0x3')](_0x16182c),this['_sidebarItemViewToAnnotation'][_0x3ee0('0x3')](_0x7b6795);}['_createSidebarView'](){const _0x58d6eb=new _0x51e552(this[_0x3ee0('0xc')][_0x3ee0('0x17')]);return _0x58d6eb[_0x3ee0('0x2f')](),this['on']('change:_lastItem',(_0x497f81,_0x4a0e92,_0x566c8b,_0xa99dc9)=>{_0xa99dc9&&_0x58d6eb['unbind'](_0x3ee0('0x32')),_0x566c8b?_0x58d6eb['bind']('minHeight')['to'](_0x566c8b,_0x3ee0('0x3c')):_0x58d6eb[_0x3ee0('0x32')]=null;}),_0x58d6eb;}['_updateLastItem'](){this['_lastItem']=this['getSidebarItemView'](this[_0x3ee0('0xf')]['last']);}[_0x3ee0('0x2e')](_0x42e376){const _0x2ef8db=this['_sidebarItemViewToAnnotation'][_0x3ee0('0x1f')](_0x42e376),_0x1a6767=this[_0x3ee0('0xf')][_0x3ee0('0x1f')](this[_0x3ee0('0xf')]['getIndex'](_0x2ef8db)-0x1);return _0x1a6767&&this[_0x3ee0('0x36')](_0x1a6767);}[_0x3ee0('0x2a')](_0x1a0b25){const _0x387dab=this[_0x3ee0('0x7')][_0x3ee0('0x1f')](_0x1a0b25),_0x44fab4=this[_0x3ee0('0xf')][_0x3ee0('0x1f')](this[_0x3ee0('0xf')][_0x3ee0('0x38')](_0x387dab)+0x1);return _0x44fab4&&this['getSidebarItemView'](_0x44fab4);}[_0x3ee0('0x3e')](_0x1a9db9,_0x51c35e){_0x1a9db9['updateHeight']();const _0x514790=lt(_0x51c35e[_0x3ee0('0x3c')]+this[_0x3ee0('0x0')],_0x1a9db9[_0x3ee0('0x23')]);return!!_0x514790&&(this[_0x3ee0('0x4')](_0x51c35e,_0x51c35e['top']-_0x514790),!0x0);}[_0x3ee0('0x1b')](_0x3e12d3,_0x3d287d){_0x3e12d3[_0x3ee0('0x21')]();const _0x4d09d1=lt(_0x3e12d3[_0x3ee0('0x3c')]+this[_0x3ee0('0x0')],_0x3d287d['top']);return!!_0x4d09d1&&(this['_setItemTop'](_0x3d287d,_0x3d287d[_0x3ee0('0x23')]+_0x4d09d1,!0x1),!0x0);}[_0x3ee0('0x19')](_0x4a00b9){const _0x5d6591=this[_0x3ee0('0x7')][_0x3ee0('0x1f')](_0x4a00b9);if(!_0x5d6591||!_0x5d6591[_0x3ee0('0x5')])return;const _0x52ec68=this[_0x3ee0('0x37')](_0x4a00b9);this[_0x3ee0('0x4')](_0x4a00b9,_0x52ec68);}[_0x3ee0('0x37')](_0x48ff99){const _0x366983=this['_sidebarItemViewToAnnotation']['get'](_0x48ff99);if(null===_0x366983[_0x3ee0('0x28')])return 0x0;if(_0x366983['target']instanceof _0x58211e)return _0x366983[_0x3ee0('0x28')][_0x3ee0('0x23')];{const _0x5ee56b=new _0x58211e(this[_0x3ee0('0x3b')][_0x3ee0('0x25')])[_0x3ee0('0x23')];return _0x366983[_0x3ee0('0x28')][_0x3ee0('0x23')]-_0x5ee56b;}}[_0x3ee0('0x4')](_0x1593f6,_0x20dc09,_0x4f6385=this[_0x3ee0('0xc')][_0x3ee0('0xd')][_0x3ee0('0x1f')](_0x3ee0('0x15'))){_0x4f6385&&(_0x20dc09=Math[_0x3ee0('0x22')](_0x20dc09,this[_0x3ee0('0x3a')](_0x1593f6))),_0x1593f6[_0x3ee0('0x23')]=_0x20dc09;}[_0x3ee0('0x3a')](_0x47b95c){let _0xb404bb=this[_0x3ee0('0x2e')](_0x47b95c),_0x56044=0x0;for(;_0xb404bb;)_0xb404bb[_0x3ee0('0x21')](),_0x56044+=this[_0x3ee0('0x0')]+_0xb404bb[_0x3ee0('0x30')],_0xb404bb=this[_0x3ee0('0x2e')](_0xb404bb);return _0x56044;}}function lt(_0x12bdb5,_0x2f68f3){return Math[_0x3ee0('0x22')](_0x12bdb5-_0x2f68f3,0x0);}