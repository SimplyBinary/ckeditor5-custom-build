/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1771=['has','register','hasActive','AnnotationsUIs','change:activeAnnotation','pluginName','deactivate','find','activeUIs','remove','plugins','annotationsuis-register-invalid-interface','delete','_visibleAnnotations','stopListening','annotationsuis-activate-missing-ui','set','activate','add','_assertAnnotationDoesNotBelongToMultipleUIs','annotationsuis-annotation-mismatch','switchTo','destroy','filter','function','collection','annotationsuis-register-already-registered','from','listenTo','_setSelectedAnnotations','_addActiveAnnotation','push','attach','isActive','setActiveAnnotation','_uisData','length','requires','activeAnnotations','detach','get','context','deactivateAll','_uis','_deactivateAllAnnotations'];(function(_0x2bcf04,_0x17711d){const _0x61d4d9=function(_0x25d091){while(--_0x25d091){_0x2bcf04['push'](_0x2bcf04['shift']());}};_0x61d4d9(++_0x17711d);}(_0x1771,0x11c));const _0x61d4=function(_0x2bcf04,_0x17711d){_0x2bcf04=_0x2bcf04-0x0;let _0x61d4d9=_0x1771[_0x2bcf04];return _0x61d4d9;};import{ContextPlugin as _0x2e6116}from'ckeditor5/src/core';import{CKEditorError as _0x37b069}from'ckeditor5/src/utils';import _0x389cba,{bindAnnotationCollections as _0x6370db}from'./annotationcollection';import _0x126a03 from'./annotations';export default class Y extends _0x2e6116{static get[_0x61d4('0x17')](){return[_0x126a03];}static get[_0x61d4('0x24')](){return _0x61d4('0x22');}constructor(_0x3c0e81){super(_0x3c0e81),this[_0x61d4('0x27')]=new Set(),this[_0x61d4('0x1d')]=new Map(),this[_0x61d4('0x15')]=new Map();}['init'](){const _0x347314=this[_0x61d4('0x1b')]['plugins']['get'](_0x126a03);this[_0x61d4('0xe')](_0x347314,'_activateAnnotation',(_0x52186f,_0x6cf6ed)=>{for(const _0xb77029 of this[_0x61d4('0x27')]){const _0x21af06=this[_0x61d4('0x1d')][_0x61d4('0x1a')](_0xb77029);(0x0,this[_0x61d4('0x15')][_0x61d4('0x1a')](_0xb77029)[_0x61d4('0x9')])(_0x6cf6ed)&&_0x21af06[_0x61d4('0x14')](_0x6cf6ed);}}),this[_0x61d4('0xe')](_0x347314,_0x61d4('0x1e'),()=>{for(const _0x50fba9 of this[_0x61d4('0x27')]){this['_uis'][_0x61d4('0x1a')](_0x50fba9)[_0x61d4('0x14')](null);}}),this[_0x61d4('0xe')](_0x347314[_0x61d4('0x2c')],'add',(_0x1bdcc8,_0x59e592)=>{this['_assertAnnotationDoesNotBelongToMultipleUIs'](_0x59e592);});}[_0x61d4('0x21')](){return this['activeUIs']['size']>0x0;}[_0x61d4('0x13')](_0x3d6fa8){return this[_0x61d4('0x27')][_0x61d4('0x1f')](_0x3d6fa8);}[_0x61d4('0x3')](_0x148b2a,_0x193ba5=()=>!0x0){const _0x3cb378=this[_0x61d4('0x1b')][_0x61d4('0x29')]['get'](_0x126a03);if(!this[_0x61d4('0x1d')]['has'](_0x148b2a))throw new _0x37b069(_0x61d4('0x1'),this,{'uiName':_0x148b2a});this[_0x61d4('0x13')](_0x148b2a)&&this[_0x61d4('0x25')](_0x148b2a),this[_0x61d4('0x27')][_0x61d4('0x4')](_0x148b2a);const _0x1f11bd=new _0x389cba(),_0x4d9ef4=_0x3cb378[_0x61d4('0x2c')];_0x6370db({'source':_0x4d9ef4,'target':_0x1f11bd,'filter':_0x193ba5}),this[_0x61d4('0x15')][_0x61d4('0x2')](_0x148b2a,{'collection':_0x1f11bd,'filter':_0x193ba5});const _0x13b4da=this['_uis'][_0x61d4('0x1a')](_0x148b2a);_0x13b4da[_0x61d4('0x12')](_0x1f11bd),this['listenTo'](_0x13b4da,_0x61d4('0x23'),(_0x52f0f9,_0x5d0035,_0xe70f3e,_0x225b39)=>{_0x225b39&&_0x3cb378['_removeActiveAnnotation'](_0x225b39),_0xe70f3e&&_0x3cb378[_0x61d4('0x10')](_0xe70f3e);});}[_0x61d4('0x25')](_0x1be775){this[_0x61d4('0x27')][_0x61d4('0x2b')](_0x1be775);const _0x2cbcd0=this[_0x61d4('0x1d')][_0x61d4('0x1a')](_0x1be775);_0x2cbcd0[_0x61d4('0x19')](),this[_0x61d4('0x0')](_0x2cbcd0),this[_0x61d4('0x15')][_0x61d4('0x1a')](_0x1be775)['collection'][_0x61d4('0x8')](),this[_0x61d4('0x15')]['delete'](_0x1be775);}[_0x61d4('0x7')](_0x494bbb){const _0x9042c2=this['context'][_0x61d4('0x29')]['get'](_0x126a03),_0x3c98b1=Array[_0x61d4('0xd')](_0x9042c2[_0x61d4('0x18')])[0x0]||null;this[_0x61d4('0x1c')](),this[_0x61d4('0x3')](_0x494bbb);const _0x1d278b=this[_0x61d4('0x1d')][_0x61d4('0x1a')](_0x494bbb);_0x1d278b[_0x61d4('0x14')](_0x3c98b1),_0x1d278b[_0x61d4('0xf')]&&_0x3c98b1&&_0x1d278b[_0x61d4('0xf')]([_0x3c98b1]);}[_0x61d4('0x1c')](){for(const _0x465bea of this[_0x61d4('0x27')])this[_0x61d4('0x25')](_0x465bea);}[_0x61d4('0x20')](_0x16b95c,_0x4cd60e){if(this[_0x61d4('0x1d')][_0x61d4('0x1f')](_0x16b95c))throw new _0x37b069(_0x61d4('0xc'));if(_0x61d4('0xa')!=typeof _0x4cd60e[_0x61d4('0x12')]||_0x61d4('0xa')!=typeof _0x4cd60e[_0x61d4('0x19')]||'function'!=typeof _0x4cd60e[_0x61d4('0x14')])throw new _0x37b069(_0x61d4('0x2a'),null);this['_uis'][_0x61d4('0x2')](_0x16b95c,_0x4cd60e);}['refilterAnnotations'](){const _0x455a46=this[_0x61d4('0x1b')][_0x61d4('0x29')][_0x61d4('0x1a')](_0x126a03)[_0x61d4('0xb')],_0x23be1b=new Map(),_0x2bac67=Array[_0x61d4('0xd')](this[_0x61d4('0x27')]);for(const _0x16c494 of this['activeUIs']){const _0x5a3f4e=this[_0x61d4('0x15')][_0x61d4('0x1a')](_0x16c494)[_0x61d4('0xb')];for(const _0x28b4c1 of _0x5a3f4e)_0x23be1b[_0x61d4('0x2')](_0x28b4c1,_0x16c494);}for(const _0x3dc0c5 of _0x455a46){const _0x5d80ce=_0x23be1b[_0x61d4('0x1a')](_0x3dc0c5);this['_assertAnnotationDoesNotBelongToMultipleUIs'](_0x3dc0c5);const _0x1d02b8=_0x2bac67[_0x61d4('0x26')](_0x91dfbd=>this[_0x61d4('0x15')]['get'](_0x91dfbd)[_0x61d4('0x9')](_0x3dc0c5));_0x5d80ce!==_0x1d02b8&&(_0x5d80ce&&this[_0x61d4('0x15')][_0x61d4('0x1a')](_0x5d80ce)[_0x61d4('0xb')][_0x61d4('0x28')](_0x3dc0c5),_0x1d02b8&&this[_0x61d4('0x15')][_0x61d4('0x1a')](_0x1d02b8)[_0x61d4('0xb')]['add'](_0x3dc0c5));}}['destroy'](){this[_0x61d4('0x1c')](),super[_0x61d4('0x8')]();}[_0x61d4('0x5')](_0x1b2b7b){const _0x2a75fc=[];for(const _0x52f625 of this[_0x61d4('0x27')]){(0x0,this[_0x61d4('0x15')]['get'](_0x52f625)[_0x61d4('0x9')])(_0x1b2b7b)&&_0x2a75fc[_0x61d4('0x11')](_0x52f625);}if(_0x2a75fc[_0x61d4('0x16')]>0x1)throw new _0x37b069(_0x61d4('0x6'),null,{'matchedUIs':_0x2a75fc,'annotationType':_0x1b2b7b['type']});}}