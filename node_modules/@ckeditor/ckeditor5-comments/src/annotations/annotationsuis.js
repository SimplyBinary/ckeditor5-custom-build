/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2e14=['activeAnnotations','listenTo','register','_removeActiveAnnotation','has','plugins','collection','attach','_uis','pluginName','annotationsuis-register-invalid-interface','push','destroy','_uisData','setActiveAnnotation','deactivate','find','add','function','isActive','size','switchTo','hasActive','_deactivateAllAnnotations','from','requires','get','AnnotationsUIs','set','init','deactivateAll','_setSelectedAnnotations','annotationsuis-activate-missing-ui','change:activeAnnotation','_activateAnnotation','context','delete','activate','_addActiveAnnotation','_visibleAnnotations','type','remove','refilterAnnotations','detach','_assertAnnotationDoesNotBelongToMultipleUIs','activeUIs','filter'];(function(_0x44dc65,_0x2e1455){const _0x8a12cd=function(_0x495936){while(--_0x495936){_0x44dc65['push'](_0x44dc65['shift']());}};_0x8a12cd(++_0x2e1455);}(_0x2e14,0x185));const _0x8a12=function(_0x44dc65,_0x2e1455){_0x44dc65=_0x44dc65-0x0;let _0x8a12cd=_0x2e14[_0x44dc65];return _0x8a12cd;};import{ContextPlugin as _0x22036e}from'ckeditor5/src/core';import{CKEditorError as _0x38791a}from'ckeditor5/src/utils';import _0x5e9a40,{bindAnnotationCollections as _0x42ec58}from'./annotationcollection';import _0x335386 from'./annotations';export default class I extends _0x22036e{static get[_0x8a12('0xc')](){return[_0x335386];}static get[_0x8a12('0x2b')](){return _0x8a12('0xe');}constructor(_0xd45566){super(_0xd45566),this[_0x8a12('0x20')]=new Set(),this[_0x8a12('0x2a')]=new Map(),this[_0x8a12('0x0')]=new Map();}[_0x8a12('0x10')](){const _0x29ee7b=this[_0x8a12('0x16')][_0x8a12('0x27')][_0x8a12('0xd')](_0x335386);this[_0x8a12('0x23')](_0x29ee7b,_0x8a12('0x15'),(_0x263c9d,_0x39c43d)=>{for(const _0x548c0a of this[_0x8a12('0x20')]){const _0x42ba85=this[_0x8a12('0x2a')][_0x8a12('0xd')](_0x548c0a);(0x0,this[_0x8a12('0x0')][_0x8a12('0xd')](_0x548c0a)[_0x8a12('0x21')])(_0x39c43d)&&_0x42ba85[_0x8a12('0x1')](_0x39c43d);}}),this[_0x8a12('0x23')](_0x29ee7b,_0x8a12('0xa'),()=>{for(const _0x181d75 of this[_0x8a12('0x20')]){this[_0x8a12('0x2a')][_0x8a12('0xd')](_0x181d75)[_0x8a12('0x1')](null);}}),this[_0x8a12('0x23')](_0x29ee7b[_0x8a12('0x1a')],_0x8a12('0x4'),(_0x2e87d1,_0x2dced1)=>{this[_0x8a12('0x1f')](_0x2dced1);});}[_0x8a12('0x9')](){return this[_0x8a12('0x20')][_0x8a12('0x7')]>0x0;}[_0x8a12('0x6')](_0x39daa3){return this['activeUIs'][_0x8a12('0x26')](_0x39daa3);}[_0x8a12('0x18')](_0xf840b5,_0x247229=()=>!0x0){const _0x5943d2=this[_0x8a12('0x16')][_0x8a12('0x27')]['get'](_0x335386);if(!this[_0x8a12('0x2a')][_0x8a12('0x26')](_0xf840b5))throw new _0x38791a(_0x8a12('0x13'),this,{'uiName':_0xf840b5});this[_0x8a12('0x6')](_0xf840b5)&&this[_0x8a12('0x2')](_0xf840b5),this[_0x8a12('0x20')][_0x8a12('0x4')](_0xf840b5);const _0x4b749c=new _0x5e9a40(),_0x38964d=_0x5943d2['_visibleAnnotations'];_0x42ec58({'source':_0x38964d,'target':_0x4b749c,'filter':_0x247229}),this[_0x8a12('0x0')][_0x8a12('0xf')](_0xf840b5,{'collection':_0x4b749c,'filter':_0x247229});const _0x15adf6=this['_uis'][_0x8a12('0xd')](_0xf840b5);_0x15adf6[_0x8a12('0x29')](_0x4b749c),this[_0x8a12('0x23')](_0x15adf6,_0x8a12('0x14'),(_0x412693,_0x5585f7,_0x2351bb,_0x36b7bb)=>{_0x36b7bb&&_0x5943d2[_0x8a12('0x25')](_0x36b7bb),_0x2351bb&&_0x5943d2[_0x8a12('0x19')](_0x2351bb);});}[_0x8a12('0x2')](_0x265ff8){this[_0x8a12('0x20')][_0x8a12('0x17')](_0x265ff8);const _0x3829ac=this[_0x8a12('0x2a')]['get'](_0x265ff8);_0x3829ac[_0x8a12('0x1e')](),this['stopListening'](_0x3829ac),this[_0x8a12('0x0')]['get'](_0x265ff8)[_0x8a12('0x28')][_0x8a12('0x2e')](),this['_uisData'][_0x8a12('0x17')](_0x265ff8);}[_0x8a12('0x8')](_0x2eba1d){const _0x32d79d=this['context'][_0x8a12('0x27')][_0x8a12('0xd')](_0x335386),_0x1b7495=Array[_0x8a12('0xb')](_0x32d79d[_0x8a12('0x22')])[0x0]||null;this[_0x8a12('0x11')](),this[_0x8a12('0x18')](_0x2eba1d);const _0x183112=this[_0x8a12('0x2a')][_0x8a12('0xd')](_0x2eba1d);_0x183112[_0x8a12('0x1')](_0x1b7495),_0x183112[_0x8a12('0x12')]&&_0x1b7495&&_0x183112['_setSelectedAnnotations']([_0x1b7495]);}[_0x8a12('0x11')](){for(const _0x523c96 of this[_0x8a12('0x20')])this[_0x8a12('0x2')](_0x523c96);}[_0x8a12('0x24')](_0x2e9aab,_0x567385){if(this[_0x8a12('0x2a')][_0x8a12('0x26')](_0x2e9aab))throw new _0x38791a('annotationsuis-register-already-registered');if(_0x8a12('0x5')!=typeof _0x567385[_0x8a12('0x29')]||_0x8a12('0x5')!=typeof _0x567385[_0x8a12('0x1e')]||'function'!=typeof _0x567385[_0x8a12('0x1')])throw new _0x38791a(_0x8a12('0x2c'),null);this[_0x8a12('0x2a')]['set'](_0x2e9aab,_0x567385);}[_0x8a12('0x1d')](){const _0x53b0bb=this[_0x8a12('0x16')][_0x8a12('0x27')][_0x8a12('0xd')](_0x335386)[_0x8a12('0x28')],_0x2ea31f=new Map(),_0x116942=Array[_0x8a12('0xb')](this[_0x8a12('0x20')]);for(const _0x83593e of this[_0x8a12('0x20')]){const _0x34f758=this[_0x8a12('0x0')][_0x8a12('0xd')](_0x83593e)['collection'];for(const _0x26ddac of _0x34f758)_0x2ea31f[_0x8a12('0xf')](_0x26ddac,_0x83593e);}for(const _0x5da9a1 of _0x53b0bb){const _0x301c41=_0x2ea31f[_0x8a12('0xd')](_0x5da9a1);this[_0x8a12('0x1f')](_0x5da9a1);const _0x1a86b5=_0x116942[_0x8a12('0x3')](_0x47de3c=>this['_uisData'][_0x8a12('0xd')](_0x47de3c)[_0x8a12('0x21')](_0x5da9a1));_0x301c41!==_0x1a86b5&&(_0x301c41&&this[_0x8a12('0x0')][_0x8a12('0xd')](_0x301c41)[_0x8a12('0x28')][_0x8a12('0x1c')](_0x5da9a1),_0x1a86b5&&this[_0x8a12('0x0')][_0x8a12('0xd')](_0x1a86b5)[_0x8a12('0x28')][_0x8a12('0x4')](_0x5da9a1));}}[_0x8a12('0x2e')](){this[_0x8a12('0x11')](),super[_0x8a12('0x2e')]();}[_0x8a12('0x1f')](_0x416864){const _0x1e0956=[];for(const _0x2cd6f5 of this[_0x8a12('0x20')]){(0x0,this['_uisData'][_0x8a12('0xd')](_0x2cd6f5)['filter'])(_0x416864)&&_0x1e0956[_0x8a12('0x2d')](_0x2cd6f5);}if(_0x1e0956['length']>0x1)throw new _0x38791a('annotationsuis-annotation-mismatch',null,{'matchedUIs':_0x1e0956,'annotationType':_0x416864[_0x8a12('0x1b')]});}}