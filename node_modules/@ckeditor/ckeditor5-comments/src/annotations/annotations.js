/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x59ce=['activate','fire','activeAnnotations','pluginName','change:isVisible','_removeActiveAnnotation','createAnnotationView','deactivateAll','_visibleAnnotations','refreshVisibility','Annotations','_activateAnnotation','collection','_bindAnnotationsToVisibleAnnotations','delete','add','remove','destroy','set','listenTo','has','getByInnerView','isVisible','refreshPositioning'];(function(_0x15b2b8,_0x59ce5e){const _0x16414c=function(_0xb5eeba){while(--_0xb5eeba){_0x15b2b8['push'](_0x15b2b8['shift']());}};_0x16414c(++_0x59ce5e);}(_0x59ce,0xbf));const _0x1641=function(_0x15b2b8,_0x59ce5e){_0x15b2b8=_0x15b2b8-0x0;let _0x16414c=_0x59ce[_0x15b2b8];return _0x16414c;};import{ContextPlugin as _0x29299a}from'ckeditor5/src/core';import _0x376d19 from'./annotation';import _0x44e106 from'./annotationcollection';import _0x316304 from'./view/annotationview';export default class V extends _0x29299a{static get[_0x1641('0x4')](){return _0x1641('0xb');}constructor(_0x50df98){super(_0x50df98),this[_0x1641('0xd')]=new _0x44e106(),this[_0x1641('0x9')]=new _0x44e106(),this[_0x1641('0x13')](_0x1641('0x3'),new Set()),this[_0x1641('0xe')]();}[_0x1641('0x10')](_0x1f816f){this['collection']['add'](_0x1f816f);}[_0x1641('0x11')](_0x370475){this[_0x1641('0xd')]['remove'](_0x370475),_0x370475[_0x1641('0x12')]();}['refreshVisibility'](){for(const _0x347290 of this[_0x1641('0xd')])_0x347290[_0x1641('0xa')]();}[_0x1641('0x0')](){this['_visibleAnnotations'][_0x1641('0x0')]();}[_0x1641('0x16')](_0x252a8e){return this['collection'][_0x1641('0x16')](_0x252a8e);}[_0x1641('0x8')](){this[_0x1641('0x2')]('_deactivateAllAnnotations');}[_0x1641('0x12')](){for(const _0xca92f6 of this[_0x1641('0xd')])_0xca92f6[_0x1641('0x12')]();this[_0x1641('0x9')][_0x1641('0x12')](),this[_0x1641('0xd')][_0x1641('0x12')](),super['destroy']();}[_0x1641('0x1')](_0x5ca698){this[_0x1641('0x2')](_0x1641('0xc'),_0x5ca698);}['createAnnotation'](_0x47fd55){return new _0x376d19(_0x47fd55);}[_0x1641('0x7')](_0x39865c,_0x1c65e9){return new _0x316304(_0x39865c,_0x1c65e9);}['_addActiveAnnotation'](_0x13a4b2){const _0x4a6e96=new Set(this[_0x1641('0x3')]);_0x4a6e96[_0x1641('0x10')](_0x13a4b2),this[_0x1641('0x3')]=_0x4a6e96;}[_0x1641('0x6')](_0x14bba7){const _0x27c57c=new Set(this[_0x1641('0x3')]);_0x27c57c[_0x1641('0xf')](_0x14bba7),this[_0x1641('0x3')]=_0x27c57c;}[_0x1641('0xe')](){const _0xc7a83a=this[_0x1641('0xd')],_0x232f61=this['_visibleAnnotations'];function _0x3d966a(_0x3579a3){const _0x41b961=_0x3579a3['source'];_0x41b961[_0x1641('0x17')]&&!_0x232f61[_0x1641('0x15')](_0x41b961)?_0x232f61[_0x1641('0x10')](_0x41b961):!_0x41b961[_0x1641('0x17')]&&_0x232f61[_0x1641('0x15')](_0x41b961)&&_0x232f61[_0x1641('0x11')](_0x41b961);}this[_0x1641('0x14')](_0xc7a83a,'add',(_0x113c4b,_0x2fa33a)=>{_0x2fa33a[_0x1641('0x17')]&&_0x232f61[_0x1641('0x10')](_0x2fa33a),this[_0x1641('0x14')](_0x2fa33a,'change:isVisible',_0x3d966a);}),this[_0x1641('0x14')](_0xc7a83a,_0x1641('0x11'),(_0x9eefc9,_0x577f07)=>{_0x232f61[_0x1641('0x15')](_0x577f07)&&_0x232f61[_0x1641('0x11')](_0x577f07),this['stopListening'](_0x577f07,_0x1641('0x5'),_0x3d966a);});}}