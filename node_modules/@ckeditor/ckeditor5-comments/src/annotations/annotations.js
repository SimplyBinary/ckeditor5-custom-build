/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x8c3d=['collection','fire','deactivateAll','stopListening','_bindAnnotationsToVisibleAnnotations','delete','destroy','_visibleAnnotations','source','Annotations','createAnnotationView','isVisible','change:isVisible','pluginName','activeAnnotations','remove','_removeActiveAnnotation','createAnnotation','listenTo','has','add','refreshPositioning','getByInnerView','_deactivateAllAnnotations','refreshVisibility','set'];(function(_0x170be6,_0x8c3d31){const _0x16e62c=function(_0x2320b7){while(--_0x2320b7){_0x170be6['push'](_0x170be6['shift']());}};_0x16e62c(++_0x8c3d31);}(_0x8c3d,0xc4));const _0x16e6=function(_0x170be6,_0x8c3d31){_0x170be6=_0x170be6-0x0;let _0x16e62c=_0x8c3d[_0x170be6];return _0x16e62c;};import{ContextPlugin as _0x307fd9}from'ckeditor5/src/core';import _0x312839 from'./annotation';import _0x559dd2 from'./annotationcollection';import _0x4d6858 from'./view/annotationview';export default class U extends _0x307fd9{static get[_0x16e6('0x19')](){return _0x16e6('0x15');}constructor(_0x171c6b){super(_0x171c6b),this[_0x16e6('0xc')]=new _0x559dd2(),this[_0x16e6('0x13')]=new _0x559dd2(),this[_0x16e6('0xb')](_0x16e6('0x0'),new Set()),this['_bindAnnotationsToVisibleAnnotations']();}[_0x16e6('0x6')](_0x3b67eb){this[_0x16e6('0xc')][_0x16e6('0x6')](_0x3b67eb);}['remove'](_0x2e09ea){this[_0x16e6('0xc')][_0x16e6('0x1')](_0x2e09ea),_0x2e09ea[_0x16e6('0x12')]();}[_0x16e6('0xa')](){for(const _0x2ef05d of this[_0x16e6('0xc')])_0x2ef05d[_0x16e6('0xa')]();}[_0x16e6('0x7')](){this[_0x16e6('0x13')][_0x16e6('0x7')]();}[_0x16e6('0x8')](_0x41d5c1){return this['collection'][_0x16e6('0x8')](_0x41d5c1);}[_0x16e6('0xe')](){this[_0x16e6('0xd')](_0x16e6('0x9'));}['destroy'](){for(const _0x175f79 of this[_0x16e6('0xc')])_0x175f79[_0x16e6('0x12')]();this[_0x16e6('0x13')][_0x16e6('0x12')](),this[_0x16e6('0xc')][_0x16e6('0x12')](),super[_0x16e6('0x12')]();}['activate'](_0x1eaa50){this[_0x16e6('0xd')]('_activateAnnotation',_0x1eaa50);}[_0x16e6('0x3')](_0xf12f05){return new _0x312839(_0xf12f05);}[_0x16e6('0x16')](_0x46c5b6,_0x37e5f9){return new _0x4d6858(_0x46c5b6,_0x37e5f9);}['_addActiveAnnotation'](_0x23a084){const _0x4760aa=new Set(this[_0x16e6('0x0')]);_0x4760aa[_0x16e6('0x6')](_0x23a084),this[_0x16e6('0x0')]=_0x4760aa;}[_0x16e6('0x2')](_0x57561){const _0x2fbc7c=new Set(this[_0x16e6('0x0')]);_0x2fbc7c[_0x16e6('0x11')](_0x57561),this[_0x16e6('0x0')]=_0x2fbc7c;}[_0x16e6('0x10')](){const _0x56d97e=this[_0x16e6('0xc')],_0x1e5482=this[_0x16e6('0x13')];function _0x9c385c(_0x33fdf2){const _0x3ced57=_0x33fdf2[_0x16e6('0x14')];_0x3ced57['isVisible']&&!_0x1e5482[_0x16e6('0x5')](_0x3ced57)?_0x1e5482[_0x16e6('0x6')](_0x3ced57):!_0x3ced57['isVisible']&&_0x1e5482[_0x16e6('0x5')](_0x3ced57)&&_0x1e5482[_0x16e6('0x1')](_0x3ced57);}this[_0x16e6('0x4')](_0x56d97e,_0x16e6('0x6'),(_0x38cf0b,_0x3e20fc)=>{_0x3e20fc[_0x16e6('0x17')]&&_0x1e5482['add'](_0x3e20fc),this[_0x16e6('0x4')](_0x3e20fc,_0x16e6('0x18'),_0x9c385c);}),this[_0x16e6('0x4')](_0x56d97e,'remove',(_0x461e75,_0x477a5b)=>{_0x1e5482[_0x16e6('0x5')](_0x477a5b)&&_0x1e5482['remove'](_0x477a5b),this[_0x16e6('0xf')](_0x477a5b,_0x16e6('0x18'),_0x9c385c);});}}