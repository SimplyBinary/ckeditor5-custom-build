/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3668=['collapse','editorConfig','weight','remove','_rearrangeCollapse','_shouldCollapse','from','bind','destroy','createCollection','visibleViews','formatDateTime','commentViews','_handleRemoveCommentModel','refreshVisibleViews','_updateHasDirtyComment','comments','removeComment','count','render','delete','hasDirtyComment','change:hasDirtyComment','isActive','_config','viewUid','_model','change:isEditMode','CommentView','expand','_collapsedCommentsView','maxThreadTotalWeight','set','maxCommentCharsWhenCollapsed','isEditMode','_rearrangeExpand','get','ck-thread__comments','locale','delegate','updateComment','commentUpdated','setTemplate','element','maxCommentsWhenCollapsed','add','listenTo','_handleNewCommentModel','stopListening','insert','length'];(function(_0x225b3e,_0x3668d2){const _0x2150fe=function(_0x3034c8){while(--_0x3034c8){_0x225b3e['push'](_0x225b3e['shift']());}};_0x2150fe(++_0x3668d2);}(_0x3668,0xf4));const _0x2150=function(_0x225b3e,_0x3668d2){_0x225b3e=_0x225b3e-0x0;let _0x2150fe=_0x3668[_0x225b3e];return _0x2150fe;};import{View as _0x5bd7ed}from'ckeditor5/src/ui';import{diff as _0x27a70e,Collection as _0x19170b}from'ckeditor5/src/utils';import _0x3319dd from'./collapsedcommentsview';export default class ct extends _0x5bd7ed{constructor(_0x5673f2,_0x34e2e9,_0x56410d){super(_0x5673f2),this[_0x2150('0x2b')](_0x2150('0x20'),!0x1),this[_0x2150('0x2b')]('length',_0x34e2e9[_0x2150('0x1b')][_0x2150('0xa')]),this[_0x2150('0x2b')](_0x2150('0x22'),!0x1),this[_0x2150('0x25')]=_0x34e2e9,this[_0x2150('0x23')]=_0x56410d,this['commentViews']=this[_0x2150('0x14')](),this[_0x2150('0x15')]=this[_0x2150('0x14')](),this[_0x2150('0x29')]=new _0x3319dd(_0x5673f2),this[_0x2150('0x29')][_0x2150('0x12')](_0x2150('0x1d'))['to'](this,_0x2150('0xa'),_0x51f9fb=>_0x51f9fb-this['_config'][_0x2150('0x4')]);for(const _0x7a7f6e of _0x34e2e9[_0x2150('0x1b')])this[_0x2150('0x7')](_0x7a7f6e);this[_0x2150('0x6')](_0x34e2e9['comments'],_0x2150('0x5'),(_0x49166c,_0x1c7b3a)=>{this[_0x2150('0xa')]++,this['_handleNewCommentModel'](_0x1c7b3a),this[_0x2150('0x19')]();}),this[_0x2150('0x6')](_0x34e2e9[_0x2150('0x1b')],_0x2150('0xe'),(_0x52092f,_0x4e1df4)=>{this[_0x2150('0xa')]--,this[_0x2150('0x18')](_0x4e1df4),this['refreshVisibleViews']();}),this['listenTo'](_0x34e2e9,_0x2150('0x1'),()=>this[_0x2150('0x19')]()),this['on']('change:isActive',()=>this['refreshVisibleViews']()),this['on'](_0x2150('0x21'),()=>this[_0x2150('0x19')]()),this[_0x2150('0x2')]({'tag':'ul','attributes':{'class':[_0x2150('0x30')]},'children':this[_0x2150('0x15')]});}get[_0x2150('0x10')](){return this[_0x2150('0x25')][_0x2150('0xd')]>this[_0x2150('0x23')][_0x2150('0x2a')]&&!this[_0x2150('0x22')]&&!this[_0x2150('0x20')];}[_0x2150('0x1e')](){super[_0x2150('0x1e')](),this[_0x2150('0x19')]();}['focus'](){this[_0x2150('0x3')]['focus']();}['destroy'](){this['_collapsedCommentsView'][_0x2150('0x13')]();for(const _0x4a1a60 of this[_0x2150('0x17')])_0x4a1a60[_0x2150('0x13')]();super['destroy']();}[_0x2150('0x19')](){this['_shouldCollapse']?this[_0x2150('0xf')]():this[_0x2150('0x2e')]();}[_0x2150('0x7')](_0x2dc06c){const _0x26d130=new this[(_0x2150('0x23'))][(_0x2150('0x27'))](this[_0x2150('0x31')],_0x2dc06c,{'maxCommentCharsWhenCollapsed':this[_0x2150('0x23')][_0x2150('0x2c')],'formatDateTime':this['_config'][_0x2150('0x16')],'editorConfig':this[_0x2150('0x23')][_0x2150('0xc')]});_0x26d130[_0x2150('0x24')]=_0x2dc06c['id'],_0x26d130['delegate'](_0x2150('0x1c'))['to'](this),_0x26d130[_0x2150('0x32')](_0x2150('0x0'))['to'](this),this[_0x2150('0x6')](_0x26d130,_0x2150('0x26'),()=>this[_0x2150('0x1a')]()),this[_0x2150('0x17')]['add'](_0x26d130);}['_handleRemoveCommentModel'](_0x1c8c73){const _0x24f7fb=this['commentViews'][_0x2150('0xe')](_0x1c8c73['id']);this[_0x2150('0x8')](_0x24f7fb),_0x24f7fb[_0x2150('0x2d')]&&this[_0x2150('0x1a')](),_0x24f7fb['destroy']();}[_0x2150('0x1a')](){this[_0x2150('0x20')]=Array['from'](this[_0x2150('0x17')])['some'](_0x4d879e=>_0x4d879e[_0x2150('0x2d')]);}['_rearrangeCollapse'](){const _0x2a9272=function(_0x3c8ed3){const _0x31d901=new _0x19170b();for(const _0x11b52f of _0x3c8ed3)_0x31d901['add'](_0x11b52f);return _0x31d901;}(this[_0x2150('0x17')]),_0x3a9b8e=this[_0x2150('0x29')][_0x2150('0x1d')];for(let _0x3cc20c=0x1;_0x3cc20c<=_0x3a9b8e;_0x3cc20c++)_0x2a9272[_0x2150('0xe')](0x1);for(const _0x4dad2d of _0x2a9272)_0x4dad2d[_0x2150('0xb')]();_0x3a9b8e>0x0&&_0x2a9272[_0x2150('0x5')](this[_0x2150('0x29')],0x1),Ut(_0x27a70e(Array[_0x2150('0x11')](this['visibleViews']),Array[_0x2150('0x11')](_0x2a9272)),this[_0x2150('0x15')],_0x2a9272);}['_rearrangeExpand'](){Ut(_0x27a70e(Array[_0x2150('0x11')](this[_0x2150('0x15')]),Array[_0x2150('0x11')](this[_0x2150('0x17')])),this['visibleViews'],this['commentViews']);for(const _0x3eae68 of this[_0x2150('0x15')])_0x3eae68[_0x2150('0x28')]();}}function Ut(_0x3ab9ad,_0x377459,_0x5af95d){let _0x497c2f=0x0;for(const _0x551ef6 of _0x3ab9ad)switch(_0x551ef6){case _0x2150('0x9'):_0x377459[_0x2150('0x5')](_0x5af95d[_0x2150('0x2f')](_0x497c2f),_0x497c2f),_0x497c2f++;break;case _0x2150('0x1f'):_0x377459[_0x2150('0xe')](_0x497c2f);break;case'equal':_0x497c2f++;}}