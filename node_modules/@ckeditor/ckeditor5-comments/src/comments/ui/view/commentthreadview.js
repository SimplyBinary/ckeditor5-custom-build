/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{mix as _0x23b50a}from'ckeditor5/src/utils';import{ConfirmMixin as Wt}from'ckeditor5-collaboration/src/collaboration-core';import Rt from'./basecommentthreadview';export default class nt extends Rt{constructor(_0x5cfe3b,_0x33e49e,_0x47d701,_0x4e76e2){super(_0x5cfe3b,_0x33e49e,_0x47d701,_0x4e76e2),this['set']('actionIndicator',null),this['containerElement']=null,this['locale']=_0x5cfe3b,this['setTemplate'](this['getTemplate']()),this['on']('change:isActive',(_0x442347,_0x5d51e1,_0x2f112e)=>{_0x2f112e||this['_cancelAllConfirms']();}),this['listenTo'](this['_model'],'change:isReadOnly',(_0x524558,_0x466f88,_0x57e8ac)=>{_0x57e8ac&&this['_cancelAllConfirms']();}),this['length']>0x0?this['_bindFirstCommentView']():this['listenTo'](this['commentsListView']['commentViews'],'add',_0x532627=>{this['_bindFirstCommentView'](),_0x532627['off']();});}['getTemplate'](){const _0x2f83dd=this['bindTemplate'];return{'tag':'div','attributes':{'class':['ck-thread',_0x2f83dd['if']('isActive','ck-thread--active'),_0x2f83dd['if']('isConfirm','ck-thread--remove-confirmation'),_0x2f83dd['to']('actionIndicator',_0x1e563f=>_0x1e563f?'ck-thread--'+_0x1e563f:'')],'data-thread-id':this['_model']['id'],'tabindex':-0x1},'children':[{'tag':'div','attributes':{'class':'ck-thread__container'},'children':[this['commentsListView'],this['commentThreadInputView']]}]};}['render'](){super['render'](),this['containerElement']=this['element']['querySelector']('.ck-thread__container');}['_cancelAllConfirms'](){this['cancelConfirm']();for(const _0x1bf5e7 of this['commentsListView']['commentViews'])_0x1bf5e7['cancelConfirm']();}['_bindFirstCommentView'](){const {t:t}=this['locale'],_0x5df131=this['commentsListView']['commentViews']['get'](0x0);this['bind']('actionIndicator')['to'](_0x5df131,'actionIndicator',_0x1c09a8=>'remove'===_0x1c09a8?'remove':null),_0x5df131['placeholder']=t('Write\x20a\x20comment...'),_0x5df131['removeButton']['on']('execute',_0x34b031=>{_0x34b031['stop'](),this['showConfirm'](t('Delete\x20comment\x20thread?'),this['containerElement'])['then'](()=>{this['fire']('removeCommentThread');});},{'priority':'high'});}}_0x23b50a(nt,Wt);