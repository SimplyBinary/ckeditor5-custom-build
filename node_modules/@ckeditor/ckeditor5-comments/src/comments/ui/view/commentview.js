/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{mix as _0x191255}from'ckeditor5/src/utils';import{ButtonView as mt}from'ckeditor5/src/ui';import{icons as Gt}from'ckeditor5/src/core';import{UserView as It,ConfirmMixin as Wt}from'ckeditor5-collaboration/src/collaboration-core';import Vt from'./basecommentview';import Jt from'../../../../theme/icons/remove-comment.svg';export default class ot extends Vt{constructor(_0x4e6cee,_0x189c42,_0x4f426e){super(_0x4e6cee,_0x189c42,_0x4f426e);const {t:t}=this['locale'];this['set']('actionIndicator',null),this['set']('placeholder',t('Reply...')),this['set']('createdAt',null),this['bind']('createdAt')['to'](_0x189c42),this['editButton']=this['_createEditButton'](),this['removeButton']=this['_createRemoveButton'](),this['userView']=new It(_0x4e6cee,_0x189c42['author']),this['userView']['extendTemplate']({'attributes':{'class':['ck-comment__user','ck-annotation__user']}}),this['listenTo'](_0x189c42,'change:isRemovable',()=>this['cancelConfirm']()),this['setTemplate'](this['getTemplate']());}['getTemplate'](){const _0x1a0af4=this['bindTemplate'];return{'tag':'li','attributes':{'class':['ck-comment__wrapper',_0x1a0af4['if']('isConfirm','ck-comment--remove-confirmation')],'tabindex':-0x1},'children':[{'tag':'div','attributes':{'class':['ck-comment','ck-annotation',_0x1a0af4['if']('isEditMode','ck-comment--edit'),_0x1a0af4['to']('actionIndicator',_0x5b9824=>_0x5b9824?'ck-comment--'+_0x5b9824:'')],'data-author-id':this['_model']['author']['id'],'data-comment-id':this['_model']['id']},'children':[this['userView'],{'tag':'div','attributes':{'class':['ck-comment__main','ck-annotation__main']},'children':[{'tag':'div','attributes':{'class':['ck-comment__info','ck-annotation__info']},'children':[{'tag':'span','children':[{'text':this['userView']['name']}],'attributes':{'class':['ck-comment__info-name','ck-annotation__info-name']}},{'tag':'time','attributes':{'datetime':_0x1a0af4['to']('createdAt'),'class':['ck-comment__info-time','ck-annotation__info-time']},'children':[{'text':_0x1a0af4['to']('createdAt',_0x51fed3=>this['_config']['formatDateTime'](_0x51fed3))}]}]},{'tag':'div','attributes':{'class':['ck-comment__actions','ck-annotation__actions',_0x1a0af4['if']('isEditMode','ck-comment__actions--hidden'),_0x1a0af4['if']('isEditMode','ck-annotation__actions--hidden')]},'children':[this['editButton'],this['removeButton']]},{'tag':'div','attributes':{'class':['ck-annotation__content-wrapper']},'children':this['visibleView']}]}]}]};}['_createEditButton'](){const {t:t}=this['locale'],_0x1e1916=new mt(this['locale']);return _0x1e1916['label']=t('Edit'),_0x1e1916['icon']=Gt['pencil'],_0x1e1916['extendTemplate']({'attributes':{'class':'ck-comment--edit'}}),_0x1e1916['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x15f2b1=>!_0x15f2b1),_0x1e1916['bind']('isVisible')['to'](this['_model'],'isEditable'),_0x1e1916['on']('execute',()=>this['switchToEditMode']()),_0x1e1916;}['_createRemoveButton'](){const {t:t}=this['locale'],_0xaeb519=new mt(this['locale']);return _0xaeb519['label']=t('Remove'),_0xaeb519['icon']=Jt,_0xaeb519['extendTemplate']({'attributes':{'class':'ck-comment--remove'}}),_0xaeb519['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x117c75=>!_0x117c75),_0xaeb519['bind']('isVisible')['to'](this['_model'],'isRemovable'),_0xaeb519['on']('execute',()=>{this['showConfirm'](t('Delete\x20comment?'),this['element'])['then'](()=>{this['fire']('removeComment',this['_model']['id']);});}),_0xaeb519;}['_attachActions'](_0x4bf817,_0x4e6825){this['listenTo'](_0x4bf817,'mouseenter',()=>this['actionIndicator']=_0x4e6825),this['listenTo'](_0x4bf817,'focus',()=>this['actionIndicator']=_0x4e6825),this['listenTo'](_0x4bf817,'mouseleave',()=>this['actionIndicator']=null),this['listenTo'](_0x4bf817,'blur',()=>this['actionIndicator']=null);}['_createCommentInputView'](){const _0xc0a757=super['_createCommentInputView']();return _0xc0a757['bind']('placeholder')['to'](this),_0xc0a757;}['render'](){super['render'](),this['_attachActions'](this['editButton']['element'],'edit'),this['_attachActions'](this['removeButton']['element'],'remove');}}_0x191255(ot,Wt);