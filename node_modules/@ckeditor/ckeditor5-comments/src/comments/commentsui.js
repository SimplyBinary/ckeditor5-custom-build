/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x9a77=['_createUIButton','low','focusTracker','label','locale','execute','removeCommentThread','stop','add','getRange','activeMarker','tooltip','addComment','Comment','comment','getAllMarkersForId','find','length','commands','view','plugins','model','pluginName','highest','get','listenTo','isFocused','innerView','CommentsUI','init','focus','comment:','map','has','hasMarkerForId','hasCommentThread','CommentThreadInputView','editor','editing','requires'];(function(_0x95cd88,_0x9a778c){const _0x1bfb3a=function(_0x381b94){while(--_0x381b94){_0x95cd88['push'](_0x95cd88['shift']());}};_0x1bfb3a(++_0x9a778c);}(_0x9a77,0x8b));const _0x1bfb=function(_0x95cd88,_0x9a778c){_0x95cd88=_0x95cd88-0x0;let _0x1bfb3a=_0x9a77[_0x95cd88];return _0x1bfb3a;};import{Plugin as _0xe1b30d}from'ckeditor5/src/core';import _0x98b260 from'./commentsrepository';import _0x5e1f12 from'./commentsediting';import _0x538c73 from'../annotations/editorannotations';import{ButtonView as _0x347831}from'ckeditor5/src/ui';import _0x522715 from'../../theme/icons/add-comment.svg';import _0xf48111 from'../annotations/annotations';import _0x34cb53 from'./ui/view/commentslistview';import _0x361751 from'./ui/view/commentthreadinputview';import{getTranslation as _0x2a6a65}from'../utils/common-translations';export default class n extends _0xe1b30d{static get[_0x1bfb('0x3')](){return _0x1bfb('0x9');}static get[_0x1bfb('0x14')](){return[_0x98b260,_0x5e1f12,_0x538c73,_0xf48111];}get['CommentsListView'](){return _0x34cb53;}get[_0x1bfb('0x11')](){return _0x361751;}[_0x1bfb('0xa')](){const _0x475faf=this['editor'],_0x10488b=_0x475faf[_0x1bfb('0x1')]['get'](_0x98b260),_0x59f5a5=_0x475faf['plugins'][_0x1bfb('0x5')](_0x5e1f12),_0x2fa6c7=_0x475faf[_0x1bfb('0x1')]['get'](_0xf48111),_0x2e5984=_0x475faf['plugins'][_0x1bfb('0x5')](_0x538c73);_0x475faf['ui']['componentFactory'][_0x1bfb('0x1d')](_0x1bfb('0x23'),()=>this['_createUIButton']()),_0x2e5984['addSourceCollector'](()=>{const _0x37d358=[];for(const [_0x287e5e,_0x5674e8]of _0x10488b['_threadToController']){const _0x4f8c9b=_0x59f5a5[_0x1bfb('0x24')](_0x287e5e['id']),_0xfc4dde=_0x4f8c9b[_0x1bfb('0xd')](_0x121bb6=>_0x121bb6[_0x1bfb('0x1e')]());_0x4f8c9b[_0x1bfb('0x26')]>0x0&&_0x37d358['push']([_0x5674e8['view'],_0xfc4dde]);}return _0x37d358;}),this['listenTo'](_0x2fa6c7,'change:activeAnnotations',(_0x441fdc,_0x320aa6,_0x5ed80e)=>{const _0xb68ac0=Array['from'](_0x5ed80e)[_0x1bfb('0xd')](_0x29ce6e=>_0x29ce6e[_0x1bfb('0x8')])[_0x1bfb('0x25')](_0x22230e=>_0x10488b['_viewToController'][_0x1bfb('0xe')](_0x22230e));if(!_0xb68ac0)return void(_0x59f5a5[_0x1bfb('0x1f')]=null);const _0x5c62c4=_0x10488b['_viewToController'][_0x1bfb('0x5')](_0xb68ac0)[_0x1bfb('0x2')]['id'],_0xc13836=_0x1bfb('0xc')+_0x5c62c4;_0x59f5a5['hasMarkerForId'](_0x5c62c4)?_0x59f5a5[_0x1bfb('0x1f')]=_0xc13836:_0x59f5a5[_0x1bfb('0x1f')]&&(_0x59f5a5['activeMarker']=null);}),this[_0x1bfb('0x6')](_0x10488b,_0x1bfb('0x1b'),(_0x385e6d,{threadId:_0x1c0a07,isFromAdapter:_0x1c918d})=>{!_0x1c918d&&_0x475faf['ui'][_0x1bfb('0x17')][_0x1bfb('0x7')]&&_0x59f5a5[_0x1bfb('0xf')](_0x1c0a07)&&_0x475faf['editing'][_0x1bfb('0x0')][_0x1bfb('0xb')]();},{'priority':_0x1bfb('0x4')}),this['listenTo'](_0x10488b,_0x1bfb('0x21'),(_0x39b7db,{threadId:_0x4d1819,isFromAdapter:_0x56e659})=>{if(_0x56e659||!_0x59f5a5[_0x1bfb('0xf')](_0x4d1819)||!_0x10488b[_0x1bfb('0x10')](_0x4d1819))return;0x1===_0x10488b['getCommentThread'](_0x4d1819)[_0x1bfb('0x26')]&&(_0x475faf[_0x1bfb('0x13')][_0x1bfb('0x0')]['focus'](),_0x39b7db[_0x1bfb('0x1c')]());},{'priority':_0x1bfb('0x16')});}[_0x1bfb('0x15')](){const _0x2a8ee8=this[_0x1bfb('0x12')],_0x2b4ef1=new _0x347831(_0x2a8ee8[_0x1bfb('0x19')]),_0x49b8a0=_0x2a8ee8[_0x1bfb('0x27')][_0x1bfb('0x5')]('addCommentThread');return _0x2b4ef1[_0x1bfb('0x18')]=_0x2a6a65(_0x2a8ee8[_0x1bfb('0x19')],_0x1bfb('0x22')),_0x2b4ef1[_0x1bfb('0x20')]=_0x2a6a65(_0x2a8ee8['locale'],_0x1bfb('0x22')),_0x2b4ef1['icon']=_0x522715,_0x2b4ef1['bind']('isEnabled')['to'](_0x49b8a0),this[_0x1bfb('0x6')](_0x2b4ef1,_0x1bfb('0x1a'),()=>_0x49b8a0[_0x1bfb('0x1a')]()),_0x2b4ef1;}}