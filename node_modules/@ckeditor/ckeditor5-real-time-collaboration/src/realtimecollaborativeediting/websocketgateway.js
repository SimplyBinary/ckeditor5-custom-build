/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x531c=['connection','websocketgateway-invalid-plugin-interface','webSocketUrl','connect','_reconnect','CloudServices','destroy','function','isInReconnectionStack','change:me','then','_reconnectionStack','delete','limitExceeded','websocketgateway-missing-websocket-url','pluginName','_domEmitter','cloudservices-init','_isBrowserOffline','connected','addToReconnectionStack','disconnected','reconnect','connecting','error','_shouldPluginsReconnect','create','state','showWarning','from','cloudservices-reconnection-error','offline','online','get','WebSocketGateway','all','plugins','listenTo','disconnect','removeFromReconnectionStack','requires','context','init','catch','Connected\x20users\x20limit\x20exceeded','token'];(function(_0x5a226f,_0x531cf5){const _0x5eb5e4=function(_0x3998a4){while(--_0x3998a4){_0x5a226f['push'](_0x5a226f['shift']());}};_0x5eb5e4(++_0x531cf5);}(_0x531c,0x1de));const _0x5eb5=function(_0x5a226f,_0x531cf5){_0x5a226f=_0x5a226f-0x0;let _0x5eb5e4=_0x531c[_0x5a226f];return _0x5eb5e4;};import{ContextPlugin as _0x52d907}from'ckeditor5/src/core';import{DomEmitterMixin as _0x2b2603,CKEditorError as _0xeb57d1}from'ckeditor5/src/utils';import _0x5a3486 from'@ckeditor/ckeditor-cloud-services-collaboration/src/websocketgateway/websocketgateway';import{Notification as _0x53e31}from'ckeditor5/src/ui';export default class c extends _0x52d907{static get[_0x5eb5('0x16')](){return[_0x5eb5('0x21'),_0x53e31];}static get[_0x5eb5('0x2b')](){return _0x5eb5('0x10');}[_0x5eb5('0x18')](){const _0x468061=this[_0x5eb5('0x17')],_0x56d2da=_0x468061[_0x5eb5('0x12')][_0x5eb5('0xf')]('CloudServices'),_0x262de3=_0x468061[_0x5eb5('0x12')]['get'](_0x53e31);if(!_0x56d2da[_0x5eb5('0x1b')])throw new _0xeb57d1('websocketgateway-missing-token',this);if(!_0x56d2da['webSocketUrl'])throw new _0xeb57d1(_0x5eb5('0x2a'),this);return this['set'](_0x5eb5('0x9'),_0x5eb5('0x5')),this['set'](_0x5eb5('0x0'),!0x1),this[_0x5eb5('0x27')]=new Set(),this[_0x5eb5('0x7')]=!0x1,this[_0x5eb5('0x2c')]=Object[_0x5eb5('0x8')](_0x2b2603),this['_domEmitter'][_0x5eb5('0x13')](window,_0x5eb5('0xd'),()=>this[_0x5eb5('0x0')]=!0x0),this['_domEmitter'][_0x5eb5('0x13')](window,_0x5eb5('0xe'),()=>this['_isBrowserOffline']=!0x1),c[_0x5eb5('0x10')][_0x5eb5('0x1f')](_0x56d2da[_0x5eb5('0x1b')],_0x56d2da[_0x5eb5('0x1e')],{'disconnectOnUnload':!0x1})['then'](_0x599b5f=>{if(this[_0x5eb5('0x1c')]=_0x599b5f,this['bind'](_0x5eb5('0x9'))['to'](_0x599b5f,_0x5eb5('0x9'),this,'_isBrowserOffline',(_0x34313c,_0x8fcc7c)=>('connected'!==_0x34313c&&(this[_0x5eb5('0x7')]=!0x0),_0x8fcc7c||_0x5eb5('0x1')!==_0x34313c?_0x5eb5('0x3'):_0x5eb5('0x3')==this[_0x5eb5('0x9')]&&this[_0x5eb5('0x7')]?(this[_0x5eb5('0x7')]=!0x1,this[_0x5eb5('0x20')](),_0x5eb5('0x5')):_0x5eb5('0x1'))),this[_0x5eb5('0x1c')]['on']('error',(_0x400f04,_0x43a5bb)=>{if(_0x5eb5('0x29')!==_0x43a5bb['code'])throw console[_0x5eb5('0x6')](_0x43a5bb),new _0xeb57d1(_0x5eb5('0x2d'),null,{'originalError':_0x43a5bb});_0x262de3[_0x5eb5('0xa')]('The\x20limit\x20of\x20maximum\x20concurrent\x20connections\x20that\x20the\x20collaboration\x20server\x20can\x20handle\x20has\x20been\x20reached.\x20Try\x20opening\x20the\x20document\x20again\x20in\x20a\x20few\x20minutes.\x20Please\x20contact\x20your\x20system\x20administrator\x20if\x20the\x20problem\x20persists.',{'title':_0x5eb5('0x1a'),'namespace':'real-time-collaboration'});}),!_0x599b5f['me'])return new Promise(_0x17ccc0=>_0x599b5f['on'](_0x5eb5('0x25'),_0x17ccc0));})[_0x5eb5('0x19')](_0x4a6d52=>{throw console['error'](_0x4a6d52),new _0xeb57d1(_0x5eb5('0x2d'),null,{'originalError':_0x4a6d52});});}[_0x5eb5('0x2')](_0x27c855){if(_0x5eb5('0x23')!=typeof _0x27c855[_0x5eb5('0x4')])throw new _0xeb57d1(_0x5eb5('0x1d'),this);if(this[_0x5eb5('0x24')](_0x27c855))throw new _0xeb57d1('websocketgateway-plugin-already-registered',this,{'name':_0x27c855['constructor'][_0x5eb5('0x2b')]});this[_0x5eb5('0x27')]['add'](_0x27c855);}[_0x5eb5('0x15')](_0x1196b3){this['_reconnectionStack'][_0x5eb5('0x28')](_0x1196b3);}[_0x5eb5('0x24')](_0x34e1f6){return this[_0x5eb5('0x27')]['has'](_0x34e1f6);}[_0x5eb5('0x20')](){return this[_0x5eb5('0x1c')]['reconnect']()[_0x5eb5('0x26')](()=>Promise[_0x5eb5('0x11')](Array[_0x5eb5('0xb')](this[_0x5eb5('0x27')],_0x106f8c=>_0x106f8c['reconnect']())))[_0x5eb5('0x26')](()=>this[_0x5eb5('0x9')]=_0x5eb5('0x1'))[_0x5eb5('0x19')](_0x872d74=>{throw console['error'](_0x872d74),new _0xeb57d1(_0x5eb5('0xc'),this[_0x5eb5('0x17')]);});}[_0x5eb5('0x22')](){this[_0x5eb5('0x1c')]&&this[_0x5eb5('0x1c')][_0x5eb5('0x14')](),this['state']=_0x5eb5('0x3'),this[_0x5eb5('0x2c')]['stopListening'](),super['destroy']();}}c[_0x5eb5('0x10')]=_0x5a3486,c['initialReconnectionInterval']=0x3e8;