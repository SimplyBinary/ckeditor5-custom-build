/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3f26=['showWarning','websocketgateway-invalid-plugin-interface','requires','create','constructor','real-time-collaboration','addToReconnectionStack','from','token','then','state','all','connected','websocketgateway-missing-token','cloudservices-init','disconnected','isInReconnectionStack','code','listenTo','WebSocketGateway','catch','context','add','Connected\x20users\x20limit\x20exceeded','websocketgateway-plugin-already-registered','function','bind','connection','set','connecting','_isBrowserOffline','delete','init','_shouldPluginsReconnect','_reconnectionStack','_domEmitter','error','websocketgateway-missing-websocket-url','reconnect','plugins','destroy','limitExceeded','connect','webSocketUrl','_reconnect'];(function(_0x3511b8,_0x3f26ea){const _0x5cf508=function(_0x2f4efa){while(--_0x2f4efa){_0x3511b8['push'](_0x3511b8['shift']());}};_0x5cf508(++_0x3f26ea);}(_0x3f26,0x143));const _0x5cf5=function(_0x3511b8,_0x3f26ea){_0x3511b8=_0x3511b8-0x0;let _0x5cf508=_0x3f26[_0x3511b8];return _0x5cf508;};import{ContextPlugin as _0x252b36}from'ckeditor5/src/core';import{DomEmitterMixin as _0x2a0c96,CKEditorError as _0x275b4f}from'ckeditor5/src/utils';import _0x421e29 from'@ckeditor/ckeditor-cloud-services-collaboration/src/websocketgateway/websocketgateway';import{Notification as _0x3103a4}from'ckeditor5/src/ui';export default class c extends _0x252b36{static get[_0x5cf5('0x27')](){return['CloudServices',_0x3103a4];}static get['pluginName'](){return _0x5cf5('0xb');}[_0x5cf5('0x18')](){const _0x5bb3ad=this[_0x5cf5('0xd')],_0x307039=_0x5bb3ad['plugins']['get']('CloudServices'),_0x4b5656=_0x5bb3ad[_0x5cf5('0x1f')]['get'](_0x3103a4);if(!_0x307039[_0x5cf5('0x0')])throw new _0x275b4f(_0x5cf5('0x5'),this);if(!_0x307039[_0x5cf5('0x23')])throw new _0x275b4f(_0x5cf5('0x1d'),this);return this['set'](_0x5cf5('0x2'),_0x5cf5('0x15')),this[_0x5cf5('0x14')](_0x5cf5('0x16'),!0x1),this[_0x5cf5('0x1a')]=new Set(),this[_0x5cf5('0x19')]=!0x1,this[_0x5cf5('0x1b')]=Object[_0x5cf5('0x28')](_0x2a0c96),this[_0x5cf5('0x1b')][_0x5cf5('0xa')](window,'offline',()=>this[_0x5cf5('0x16')]=!0x0),this['_domEmitter'][_0x5cf5('0xa')](window,'online',()=>this[_0x5cf5('0x16')]=!0x1),c[_0x5cf5('0xb')][_0x5cf5('0x22')](_0x307039[_0x5cf5('0x0')],_0x307039[_0x5cf5('0x23')],{'disconnectOnUnload':!0x1})['then'](_0x1c8d26=>{if(this[_0x5cf5('0x13')]=_0x1c8d26,this[_0x5cf5('0x12')](_0x5cf5('0x2'))['to'](_0x1c8d26,_0x5cf5('0x2'),this,_0x5cf5('0x16'),(_0x5c5ca5,_0x127e3d)=>('connected'!==_0x5c5ca5&&(this[_0x5cf5('0x19')]=!0x0),_0x127e3d||_0x5cf5('0x4')!==_0x5c5ca5?_0x5cf5('0x7'):_0x5cf5('0x7')==this[_0x5cf5('0x2')]&&this[_0x5cf5('0x19')]?(this[_0x5cf5('0x19')]=!0x1,this['_reconnect'](),_0x5cf5('0x15')):'connected')),this[_0x5cf5('0x13')]['on'](_0x5cf5('0x1c'),(_0x2cd13c,_0x8d7620)=>{if(_0x5cf5('0x21')!==_0x8d7620[_0x5cf5('0x9')])throw console[_0x5cf5('0x1c')](_0x8d7620),new _0x275b4f('cloudservices-init',null,{'originalError':_0x8d7620});_0x4b5656[_0x5cf5('0x25')]('The\x20limit\x20of\x20maximum\x20concurrent\x20connections\x20that\x20the\x20collaboration\x20server\x20can\x20handle\x20has\x20been\x20reached.\x20Try\x20opening\x20the\x20document\x20again\x20in\x20a\x20few\x20minutes.\x20Please\x20contact\x20your\x20system\x20administrator\x20if\x20the\x20problem\x20persists.',{'title':_0x5cf5('0xf'),'namespace':_0x5cf5('0x2a')});}),!_0x1c8d26['me'])return new Promise(_0x1c11e1=>_0x1c8d26['on']('change:me',_0x1c11e1));})[_0x5cf5('0xc')](_0xde0ce6=>{throw console[_0x5cf5('0x1c')](_0xde0ce6),new _0x275b4f(_0x5cf5('0x6'),null,{'originalError':_0xde0ce6});});}[_0x5cf5('0x2b')](_0x49f8aa){if(_0x5cf5('0x11')!=typeof _0x49f8aa[_0x5cf5('0x1e')])throw new _0x275b4f(_0x5cf5('0x26'),this);if(this['isInReconnectionStack'](_0x49f8aa))throw new _0x275b4f(_0x5cf5('0x10'),this,{'name':_0x49f8aa[_0x5cf5('0x29')]['pluginName']});this[_0x5cf5('0x1a')][_0x5cf5('0xe')](_0x49f8aa);}['removeFromReconnectionStack'](_0x3ef6fb){this[_0x5cf5('0x1a')][_0x5cf5('0x17')](_0x3ef6fb);}[_0x5cf5('0x8')](_0xf5b58b){return this[_0x5cf5('0x1a')]['has'](_0xf5b58b);}[_0x5cf5('0x24')](){return this['connection'][_0x5cf5('0x1e')]()[_0x5cf5('0x1')](()=>Promise[_0x5cf5('0x3')](Array[_0x5cf5('0x2c')](this[_0x5cf5('0x1a')],_0x3761df=>_0x3761df[_0x5cf5('0x1e')]())))[_0x5cf5('0x1')](()=>this[_0x5cf5('0x2')]=_0x5cf5('0x4'))[_0x5cf5('0xc')](_0x239dd0=>{throw console[_0x5cf5('0x1c')](_0x239dd0),new _0x275b4f('cloudservices-reconnection-error',this['context']);});}['destroy'](){this['connection']&&this[_0x5cf5('0x13')]['disconnect'](),this[_0x5cf5('0x2')]=_0x5cf5('0x7'),this['_domEmitter']['stopListening'](),super[_0x5cf5('0x20')]();}}c['WebSocketGateway']=_0x421e29,c['initialReconnectionInterval']=0x3e8;