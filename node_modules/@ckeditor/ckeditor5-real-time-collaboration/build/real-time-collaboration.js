!function(e){const t=e.en=e.en||{};t.dictionary=Object.assign(t.dictionary||{},{CONNECTED_USERS:["1 connected user (me)","%0 connected users"],PENDING_ACTION_SENDING_DATA:"Sending data to the server.","Synchronization issue":"Synchronization issue","The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.":"The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.","The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.":"The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.","The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.":"The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.","The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor.":"The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor."})}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),
/*!
 * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(()=>{var __webpack_modules__={2299:(e,t,s)=>{"use strict";var r;s.r(t),s.d(t,{NIL:()=>N,parse:()=>m,stringify:()=>d,v1:()=>y,v3:()=>T,v4:()=>k,v5:()=>R,validate:()=>a,version:()=>j});var n=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const a=function(e){return"string"==typeof e&&o.test(e)};for(var c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));const d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!a(s))throw TypeError("Stringified UUID is invalid");return s};var l,h,f=0,p=0;const y=function(e,t,s){var r=t&&s||0,n=t||new Array(16),o=(e=e||{}).node||l,a=void 0!==e.clockseq?e.clockseq:h;if(null==o||null==a){var c=e.random||(e.rng||i)();null==o&&(o=l=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==a&&(a=h=16383&(c[6]<<8|c[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),y=void 0!==e.nsecs?e.nsecs:p+1,m=u-f+(y-p)/1e4;if(m<0&&void 0===e.clockseq&&(a=a+1&16383),(m<0||u>f)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=u,p=y,h=a;var v=(1e4*(268435455&(u+=122192928e5))+y)%4294967296;n[r++]=v>>>24&255,n[r++]=v>>>16&255,n[r++]=v>>>8&255,n[r++]=255&v;var x=u/4294967296*1e4&268435455;n[r++]=x>>>8&255,n[r++]=255&x,n[r++]=x>>>24&15|16,n[r++]=x>>>16&255,n[r++]=a>>>8|128,n[r++]=255&a;for(var _=0;_<6;++_)n[r+_]=o[_];return t||d(n)};const m=function(e){if(!a(e))throw TypeError("Invalid UUID");var t,s=new Uint8Array(16);return s[0]=(t=parseInt(e.slice(0,8),16))>>>24,s[1]=t>>>16&255,s[2]=t>>>8&255,s[3]=255&t,s[4]=(t=parseInt(e.slice(9,13),16))>>>8,s[5]=255&t,s[6]=(t=parseInt(e.slice(14,18),16))>>>8,s[7]=255&t,s[8]=(t=parseInt(e.slice(19,23),16))>>>8,s[9]=255&t,s[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,s[11]=t/4294967296&255,s[12]=t>>>24&255,s[13]=t>>>16&255,s[14]=t>>>8&255,s[15]=255&t,s};function v(e,t,s){function r(e,r,n,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],s=0;s<e.length;++s)t.push(e.charCodeAt(s));return t}(e)),"string"==typeof r&&(r=m(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+e.length);if(o.set(r),o.set(e,r.length),(o=s(o))[6]=15&o[6]|t,o[8]=63&o[8]|128,n){i=i||0;for(var a=0;a<16;++a)n[i+a]=o[a];return n}return d(o)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function x(e){return 14+(e+64>>>9<<4)+1}function _(e,t){var s=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(s>>16)<<16|65535&s}function g(e,t,s,r,n,i){return _((o=_(_(t,e),_(r,i)))<<(a=n)|o>>>32-a,s);var o,a}function b(e,t,s,r,n,i,o){return g(t&s|~t&r,e,t,n,i,o)}function w(e,t,s,r,n,i,o){return g(t&r|s&~r,e,t,n,i,o)}function O(e,t,s,r,n,i,o){return g(t^s^r,e,t,n,i,o)}function S(e,t,s,r,n,i,o){return g(s^(t|~r),e,t,n,i,o)}const E=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var s=0;s<t.length;++s)e[s]=t.charCodeAt(s)}return function(e){for(var t=[],s=32*e.length,r="0123456789abcdef",n=0;n<s;n+=8){var i=e[n>>5]>>>n%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[x(t)-1]=t;for(var s=1732584193,r=-271733879,n=-1732584194,i=271733878,o=0;o<e.length;o+=16){var a=s,c=r,u=n,d=i;s=b(s,r,n,i,e[o],7,-680876936),i=b(i,s,r,n,e[o+1],12,-389564586),n=b(n,i,s,r,e[o+2],17,606105819),r=b(r,n,i,s,e[o+3],22,-1044525330),s=b(s,r,n,i,e[o+4],7,-176418897),i=b(i,s,r,n,e[o+5],12,1200080426),n=b(n,i,s,r,e[o+6],17,-1473231341),r=b(r,n,i,s,e[o+7],22,-45705983),s=b(s,r,n,i,e[o+8],7,1770035416),i=b(i,s,r,n,e[o+9],12,-1958414417),n=b(n,i,s,r,e[o+10],17,-42063),r=b(r,n,i,s,e[o+11],22,-1990404162),s=b(s,r,n,i,e[o+12],7,1804603682),i=b(i,s,r,n,e[o+13],12,-40341101),n=b(n,i,s,r,e[o+14],17,-1502002290),s=w(s,r=b(r,n,i,s,e[o+15],22,1236535329),n,i,e[o+1],5,-165796510),i=w(i,s,r,n,e[o+6],9,-1069501632),n=w(n,i,s,r,e[o+11],14,643717713),r=w(r,n,i,s,e[o],20,-373897302),s=w(s,r,n,i,e[o+5],5,-701558691),i=w(i,s,r,n,e[o+10],9,38016083),n=w(n,i,s,r,e[o+15],14,-660478335),r=w(r,n,i,s,e[o+4],20,-405537848),s=w(s,r,n,i,e[o+9],5,568446438),i=w(i,s,r,n,e[o+14],9,-1019803690),n=w(n,i,s,r,e[o+3],14,-187363961),r=w(r,n,i,s,e[o+8],20,1163531501),s=w(s,r,n,i,e[o+13],5,-1444681467),i=w(i,s,r,n,e[o+2],9,-51403784),n=w(n,i,s,r,e[o+7],14,1735328473),s=O(s,r=w(r,n,i,s,e[o+12],20,-1926607734),n,i,e[o+5],4,-378558),i=O(i,s,r,n,e[o+8],11,-2022574463),n=O(n,i,s,r,e[o+11],16,1839030562),r=O(r,n,i,s,e[o+14],23,-35309556),s=O(s,r,n,i,e[o+1],4,-1530992060),i=O(i,s,r,n,e[o+4],11,1272893353),n=O(n,i,s,r,e[o+7],16,-155497632),r=O(r,n,i,s,e[o+10],23,-1094730640),s=O(s,r,n,i,e[o+13],4,681279174),i=O(i,s,r,n,e[o],11,-358537222),n=O(n,i,s,r,e[o+3],16,-722521979),r=O(r,n,i,s,e[o+6],23,76029189),s=O(s,r,n,i,e[o+9],4,-640364487),i=O(i,s,r,n,e[o+12],11,-421815835),n=O(n,i,s,r,e[o+15],16,530742520),s=S(s,r=O(r,n,i,s,e[o+2],23,-995338651),n,i,e[o],6,-198630844),i=S(i,s,r,n,e[o+7],10,1126891415),n=S(n,i,s,r,e[o+14],15,-1416354905),r=S(r,n,i,s,e[o+5],21,-57434055),s=S(s,r,n,i,e[o+12],6,1700485571),i=S(i,s,r,n,e[o+3],10,-1894986606),n=S(n,i,s,r,e[o+10],15,-1051523),r=S(r,n,i,s,e[o+1],21,-2054922799),s=S(s,r,n,i,e[o+8],6,1873313359),i=S(i,s,r,n,e[o+15],10,-30611744),n=S(n,i,s,r,e[o+6],15,-1560198380),r=S(r,n,i,s,e[o+13],21,1309151649),s=S(s,r,n,i,e[o+4],6,-145523070),i=S(i,s,r,n,e[o+11],10,-1120210379),n=S(n,i,s,r,e[o+2],15,718787259),r=S(r,n,i,s,e[o+9],21,-343485551),s=_(s,a),r=_(r,c),n=_(n,u),i=_(i,d)}return[s,r,n,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,s=new Uint32Array(x(t)),r=0;r<t;r+=8)s[r>>5]|=(255&e[r/8])<<r%32;return s}(e),8*e.length))};const T=v("v3",48,E);const k=function(e,t,s){var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){s=s||0;for(var n=0;n<16;++n)t[s+n]=r[n];return t}return d(r)};function C(e,t,s,r){switch(e){case 0:return t&s^~t&r;case 1:case 3:return t^s^r;case 2:return t&s^t&r^s&r}}function I(e,t){return e<<t|e>>>32-t}const A=function(e){var t=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var n=0;n<r.length;++n)e.push(r.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),d=0;d<16;++d)u[d]=e[64*c+4*d]<<24|e[64*c+4*d+1]<<16|e[64*c+4*d+2]<<8|e[64*c+4*d+3];a[c]=u}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<o;++l){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[l][f];for(var p=16;p<80;++p)h[p]=I(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var y=s[0],m=s[1],v=s[2],x=s[3],_=s[4],g=0;g<80;++g){var b=Math.floor(g/20),w=I(y,5)+C(b,m,v,x)+_+t[b]+h[g]>>>0;_=x,x=v,v=I(m,30)>>>0,m=y,y=w}s[0]=s[0]+y>>>0,s[1]=s[1]+m>>>0,s[2]=s[2]+v>>>0,s[3]=s[3]+x>>>0,s[4]=s[4]+_>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,255&s[0],s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,255&s[1],s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,255&s[2],s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,255&s[3],s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,255&s[4]]};const R=v("v5",80,A),N="00000000-0000-0000-0000-000000000000";const j=function(e){if(!a(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},357:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(2209);class n extends r.CKEditorError{constructor(e,t,s=null,r={}){super("cloud-services-internal-error: "+e,t,r),this.code=s}static fromPublicError(e,t){const{message:s,traceId:r="",data:i={},code:o=null}=e;return new n(s+" "+(r?"Error Trace id: "+r+".":""),t,o,i)}}t.default=n},7622:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._SERVICE=void 0;const n=s(2299),i=s(2209),o=r(s(3596)),a=r(s(7026)),c=r(s(7839)),u=r(s(5132)),d=r(s(4148)),l=r(s(223)),h=r(s(2968)),f=r(s(7158)),p=r(s(357)),y=r(s(6314)),m=r(s(6148)),v=r(s(961));t._SERVICE=1;class x{constructor(e,t){if(!e)throw new TypeError('Param "bundleVersion" must be provided.');this._id=null!=t?t:(0,n.v4)(),this._isConnected=!1,this._bundleVersion=e}getId(){return this._id}isConnected(){return this._isConnected}connect(e,t={buffers:[],types:[]},s){const r=new c.default(this.getId(),t.buffers,t.types,this._bundleVersion,s);return this._connect(e,r)}reconnect(e,t){if(this.isConnected())throw new p.default("Cannot reconnect to already connected service.",e);return this._connect(e,new d.default(this.getId(),t,this._bundleVersion))}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._connectedSessions&&(this._connectedSessions.disconnect(),this._connectedSessions=void 0),this.fire("disconnected"),this.stopListening())}async getDocumentDetails(){const e=new v.default(this.getId());if(!this._wsGateway)throw new y.default("Collaborative Editing",this);const s=await this._wsGateway._sendRequest(t._SERVICE,v.default.TYPE,o.default.encode(e));return o.default.decode(s,m.default)}async sendOperations(e,s,r){if(!e||!e.types||!e.types.length)throw new p.default("Cannot send empty update.",this._wsGateway);const n="number"==typeof s?s:parseInt(s);if(!Number.isInteger(n)||n<0)throw new p.default("Base version not provided.",this._wsGateway);const i=new u.default(this.getId(),e.buffers,e.types,n,[],r);if(!this._wsGateway||!this._isConnected)throw new y.default("Collaborative Editing",this);const a=await this._wsGateway._sendRequest(t._SERVICE,u.default.TYPE,o.default.encode(i));return o.default.decode(a,l.default)}async getConnectedSessions(){if(!this._isConnected)throw new y.default("Collaborative Editing",this);return this._connectedSessions||(this._connectedSessions=await a.default.getConnectedSessions(this._wsGateway,this._id,t._SERVICE)),this._connectedSessions}static getConnectedSessions(e,s){return a.default.getConnectedSessions(e,s,t._SERVICE)}async _connect(e,s){if(this.isConnected())return;if(e.state!==f.default.STATE_CONNECTED)throw new p.default("WebSocket Gateway is not connected.",e);this._wsGateway=e,this.stopListening(e,"change:state");const r=await e._sendRequest(t._SERVICE,s.constructor.TYPE,o.default.encode(s)),n=o.default.decode(r,h.default);return this.listenTo(e,"change:state",((e,t,s)=>this._onWsGatewayStateChange(s)),{priority:f.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(e,n.channel),this._isConnected=!0,this.fire("connected"),n}_connectToChannel(e,s){this._channel=e._getChannel(t._SERVICE,s),this.listenTo(this._channel,this._channel.getEventName(u.default.TYPE),((e,t)=>{const s=o.default.decode(t,u.default);this.fire("operationsReceived",s.baseVersion,s.data,s.metadata)}))}_onWsGatewayStateChange(e){e===f.default.STATE_DISCONNECTED&&this.disconnect()}}x._SERVICE=t._SERVICE,(0,i.mix)(x,i.EmitterMixin),t.default=x},8677:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{static toJSON({createdAt:e,...t}){const s={...t};return e instanceof Date&&(s.createdAt=e.toISOString()),s}static fromJSON({createdAt:e,...t}){const s={...t};return e&&(s.createdAt=new Date(e)),s}}t.default=i,i.DESCRIPTOR_NAME="OperationMetadataDescriptor",i.DESCRIPTOR={fields:{userId:{type:"string",id:1},type:{type:"string",id:2},createdAt:{type:"string",id:3}}}},6685:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static prepareMetadataForOperations(e,t){if(!(e&&e.length&&t&&t.length))return[];const s=[];let r=0;for(const n of e)if(0!==n){if(!t[r])throw new Error("Missing metadata for a operation");s.push(t[r]),r++}else s.push(s[s.length-1]);return s}static removeUnnecessaryMetadata(e,t){if(!(e&&e.length&&t&&t.length))return[];const s=[];for(let r=0;r<e.length;r++)if(0!==e[r]){if(!t[r])throw new Error("Missing metadata for a operation");s.push(t[r])}return s}}},7839:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s,r,n=""){super(),this.id=e,this.buffers=t,this.types=s,this.bundleVersion=r,this.lastOperationId=n}toJSON(){return{id:this.id,buffers:this.buffers,types:this.types,bundleVersion:this.bundleVersion,lastOperationId:this.lastOperationId}}static fromJSON(e){return new i(e.id,e.buffers,e.types,e.bundleVersion,e.lastOperationId)}}t.default=i,i.TYPE="11",i.READABLE_TYPE_NAME="connectToDocument",i.DESCRIPTOR_NAME="CollaborativeEditingConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},bundleVersion:{type:"string",id:2},buffers:{rule:"repeated",type:"bytes",id:3},types:{rule:"repeated",type:"uint32",id:4},lastOperationId:{type:"string",id:5}}}},4148:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s){super(),this.id=e,this.lastKnowVersion=t,this.bundleVersion=s}toJSON(){return{id:this.id,bundleVersion:this.bundleVersion,lastKnowVersion:this.lastKnowVersion}}static fromJSON(e){return new i(e.id,e.lastKnowVersion,e.bundleVersion)}}t.default=i,i.TYPE="12",i.READABLE_TYPE_NAME="reconnectToDocument",i.DESCRIPTOR_NAME="CollaborativeEditingReconnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},bundleVersion:{type:"string",id:2},lastKnowVersion:{type:"uint32",id:3}}}},5132:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(6685)),o=r(s(8677));class a extends n.default{constructor(e,t,s,r,n=[],i=""){super(),this.id=e,this.buffers=t,this.types=s,this.baseVersion=r,this.metadata=n,this.lastOperationId=i}get data(){return{buffers:this.buffers,types:this.types,baseVersion:this.baseVersion,lastOperationId:this.lastOperationId}}toJSON(){return{id:this.id,buffers:this.buffers,types:this.types,baseVersion:this.baseVersion,metadata:i.default.removeUnnecessaryMetadata(this.types,this.metadata).map(o.default.toJSON),lastOperationId:this.lastOperationId}}static fromJSON(e){return new a(e.id,e.buffers,e.types,e.baseVersion,i.default.prepareMetadataForOperations(e.types,e.metadata).map(o.default.fromJSON),e.lastOperationId)}}t.default=a,a.TYPE="13",a.READABLE_TYPE_NAME="updateDocument",a.DESCRIPTOR_NAME="CollaborativeEditingUpdateMessage",a.DESCRIPTOR={fields:{id:{type:"string",id:1},baseVersion:{type:"uint32",id:2},buffers:{rule:"repeated",type:"bytes",id:3},types:{rule:"repeated",type:"uint32",id:4},metadata:{rule:"repeated",type:"OperationMetadataDescriptor",id:6},lastOperationId:{type:"string",id:7}}}},961:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.documentId=e}get data(){return{documentId:this.documentId}}toJSON(){return{documentId:this.documentId}}static fromJSON(e){return new i(e.documentId)}}t.default=i,i.TYPE="14",i.READABLE_TYPE_NAME="getDocumentDetails",i.DESCRIPTOR_NAME="GetDocumentDetailsMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1},environmentId:{type:"string",id:2}}}},2968:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(6685)),o=r(s(8677));class a extends n.default{constructor(e,t,s=[],r=[],n=0,i=[],o=null,a="",c="",u=null){super(),this.channel=e,this.version=t,this.buffers=s,this.types=r,this.offset=n,this.metadata=i,this.initData=o,this.sessionId=a,this.lastOperationId=c,this.sessionCreatedAt=u}get data(){return{buffers:this.buffers,types:this.types,baseVersion:this.version-this.types.length,lastOperationId:this.lastOperationId,sessionCreatedAt:this.sessionCreatedAt}}get wereChangesApplied(){var e;return!(null===(e=this.types)||void 0===e?void 0:e.length)&&null===this.initData}toJSON(){var e;return{channel:this.channel,version:this.version,sessionId:this.sessionId,buffers:this.buffers,types:this.types,offset:this.offset,metadata:i.default.removeUnnecessaryMetadata(this.types,this.metadata).map(o.default.toJSON),initData:null!==(e=this.initData)&&void 0!==e?e:"",isInitialized:"string"==typeof this.initData,lastOperationId:this.lastOperationId,sessionCreatedAt:this.sessionCreatedAt?this.sessionCreatedAt.toISOString():null}}static create(e){return new a(e.channel,e.version,e.buffers,e.types,e.offset,e.metadata,e.initData,e.sessionId,e.lastOperationId,e.sessionCreatedAt)}static fromJSON(e){var t;let s=null;return!0===e.isInitialized?s=null!==(t=e.initData)&&void 0!==t?t:"":"boolean"!=typeof e.isInitialized&&e.initData&&(s=e.initData),a.create({channel:e.channel,version:e.version,buffers:e.buffers,types:e.types,offset:e.offset,metadata:i.default.prepareMetadataForOperations(e.types,e.metadata).map(o.default.fromJSON),initData:s,sessionId:e.sessionId,lastOperationId:e.lastOperationId,sessionCreatedAt:e.sessionCreatedAt?new Date(e.sessionCreatedAt):null})}}t.default=a,a.DESCRIPTOR_NAME="CollaborativeEditingConnectResponse",a.DESCRIPTOR={fields:{channel:{type:"string",id:1},offset:{type:"uint32",id:2},version:{type:"uint32",id:3},buffers:{rule:"repeated",type:"bytes",id:4},types:{rule:"repeated",type:"uint32",id:5},metadata:{rule:"repeated",type:o.default.DESCRIPTOR_NAME,id:7},initData:{type:"string",id:8},isInitialized:{type:"bool",id:9},sessionId:{type:"string",id:10},lastOperationId:{type:"string",id:11},sessionCreatedAt:{type:"string",id:12}}}},223:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(6685)),o=r(s(8677));class a extends n.default{constructor(e,t=[],s=[],r=[],n="",i=null){super(),this.version=e,this.buffers=t,this.types=s,this.metadata=r,this.lastOperationId=n,this.lastOperationAcceptedAt=i}get data(){return{buffers:this.buffers,types:this.types,baseVersion:this.version-this.types.length,lastOperationId:this.lastOperationId,lastOperationAcceptedAt:this.lastOperationAcceptedAt}}get wereChangesApplied(){var e;return!(null===(e=this.types)||void 0===e?void 0:e.length)}toJSON(){return{version:this.version,buffers:this.buffers,types:this.types,metadata:i.default.removeUnnecessaryMetadata(this.types,this.metadata).map(o.default.toJSON),lastOperationId:this.lastOperationId,lastOperationAcceptedAt:this.lastOperationAcceptedAt instanceof Date?this.lastOperationAcceptedAt.toISOString():this.lastOperationAcceptedAt}}static fromJSON(e){return new a(e.version,e.buffers,e.types,i.default.prepareMetadataForOperations(e.types,e.metadata).map(o.default.fromJSON),e.lastOperationId,e.lastOperationAcceptedAt?new Date(e.lastOperationAcceptedAt):null)}static create(e){return new a(e.version,e.buffers,e.types,e.metadata,e.lastOperationId,e.lastOperationAcceptedAt?new Date(e.lastOperationAcceptedAt):null)}}t.default=a,a.DESCRIPTOR_NAME="CollaborativeEditingResponse",a.DESCRIPTOR={fields:{version:{type:"uint32",id:1},buffers:{rule:"repeated",type:"bytes",id:2},types:{rule:"repeated",type:"uint32",id:3},metadata:{rule:"repeated",type:"OperationMetadataDescriptor",id:5},lastOperationId:{type:"string",id:6},lastOperationAcceptedAt:{type:"string",id:7}}}},6148:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t){super(),this.lastDocumentSession=e,this.currentDocumentSession=t}get data(){var e,t,s,r,n;return{lastDocumentSessionId:null===(e=this.lastDocumentSession)||void 0===e?void 0:e.id,lastDocumentSessionOperationId:null===(t=this.lastDocumentSession)||void 0===t?void 0:t.lastOperationId,currentDocumentSessionId:null===(s=this.currentDocumentSession)||void 0===s?void 0:s.id,currentDocumentSessionVersion:null===(r=this.currentDocumentSession)||void 0===r?void 0:r.version,currentDocumentSessionOperationId:null===(n=this.currentDocumentSession)||void 0===n?void 0:n.lastOperationId}}toJSON(){var e,t,s,r,n;return{lastDocumentSessionId:null===(e=this.lastDocumentSession)||void 0===e?void 0:e.id,lastDocumentSessionOperationId:null===(t=this.lastDocumentSession)||void 0===t?void 0:t.lastOperationId,currentDocumentSessionId:null===(s=this.currentDocumentSession)||void 0===s?void 0:s.id,currentDocumentSessionVersion:null===(r=this.currentDocumentSession)||void 0===r?void 0:r.version,currentDocumentSessionOperationId:null===(n=this.currentDocumentSession)||void 0===n?void 0:n.lastOperationId}}static fromJSON(e){const t=e.lastDocumentSessionId?{id:e.lastDocumentSessionId,lastOperationId:e.lastDocumentSessionOperationId}:void 0,s=e.currentDocumentSessionId?{lastOperationId:e.currentDocumentSessionOperationId,version:e.currentDocumentSessionVersion,id:e.currentDocumentSessionId}:void 0;return new i(t,s)}}t.default=i,i.DESCRIPTOR_NAME="GetDocumentDetailsResponse",i.DESCRIPTOR={fields:{lastDocumentSessionId:{type:"string",id:1},lastDocumentSessionOperationId:{type:"string",id:2},currentDocumentSessionId:{type:"string",id:3},currentDocumentSessionVersion:{type:"uint32",id:4},currentDocumentSessionOperationId:{type:"string",id:5}}}},6042:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._SERVICE=void 0;const a=s(2209),c=o(s(3596)),u=o(s(5420)),d=o(s(2280)),l=o(s(6376)),h=o(s(7608)),f=o(s(6178)),p=o(s(5711)),y=o(s(7955)),m=o(s(939)),v=o(s(6523)),x=o(s(1926)),_=o(s(7952)),g=i(s(7158)),b=o(s(357)),w=o(s(7026)),O=o(s(6314));t._SERVICE=9;class S{constructor(e){this._documentId=e,this._isConnected=!1}get isConnected(){return this._isConnected}async connect(e){if(this._isConnected)return;if(e.state!==g.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new b.default("WebSocket Gateway is not connected.",e);const s=new l.default(this._documentId);this._wsGateway=e,this.stopListening(e,"change:state");const r=await e._sendRequest(t._SERVICE,l.default.TYPE,c.default.encode(s)),{channel:n,threads:i}=c.default.decode(r,h.default);return this.listenTo(e,"change:state",((e,t,s)=>this._onWsGatewayStateChange(s)),{priority:g.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(e,n),this._isConnected=!0,this.fire("connected"),i}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._connectedSessions&&(this._connectedSessions.disconnect(),this._connectedSessions=void 0),this.fire("disconnected"),this.stopListening())}async addComment(e,t,s,r){const n=new u.default(this._documentId,e,s,t,void 0,void 0,r),i=await this._sendRequest(u.default.TYPE,n);return c.default.decode(i,d.default)}async updateComment(e,t,s,r){const n=void 0!==r,i=new y.default(this._documentId,e,t,s,r,n);await this._sendRequest(y.default.TYPE,i)}async removeComment(e,t){const s=new f.default(this._documentId,e,t);await this._sendRequest(f.default.TYPE,s)}async removeCommentThread(e){const t=new p.default(this._documentId,e);await this._sendRequest(p.default.TYPE,t)}async getCommentThread(e,t=1){const s=new m.default(e,this._documentId);try{const e=await this._sendRequest(m.default.TYPE,s),{comments:t,commentThreadId:r}=c.default.decode(e,v.default);return{comments:t,commentThreadId:r}}catch(s){if(s instanceof b.default&&"404"===s.code&&t<5)return await(r=100*t,new Promise((e=>{setTimeout(e,r)}))),this.getCommentThread(e,t+1);if(s instanceof b.default)throw s;throw new b.default(s.message,this._wsGateway)}var r}async getDocumentThreads(){const e=new x.default(this._documentId),t=await this._sendRequest(x.default.TYPE,e),{threads:s}=c.default.decode(t,_.default);return{threads:s}}async getConnectedSessions(){if(!this._isConnected)throw new O.default("Comments",this);return this._connectedSessions||(this._connectedSessions=await w.default.getConnectedSessions(this._wsGateway,this._documentId,t._SERVICE)),this._connectedSessions}_connectToChannel(e,t){this._channel=e._getChannel(S._SERVICE,t),this._channel&&(this.listenTo(this._channel,this._channel.getEventName(u.default.TYPE),((e,t)=>{const s=c.default.decode(t,u.default);this.fire("commentAdded",s)})),this.listenTo(this._channel,this._channel.getEventName(f.default.TYPE),((e,t)=>{const s=c.default.decode(t,f.default);this.fire("commentRemoved",s)})),this.listenTo(this._channel,this._channel.getEventName(y.default.TYPE),((e,t)=>{const s=c.default.decode(t,y.default);this.fire("commentUpdated",s)})),this.listenTo(this._channel,this._channel.getEventName(p.default.TYPE),((e,t)=>{const s=c.default.decode(t,p.default);this.fire("commentThreadRemoved",s)})))}_onWsGatewayStateChange(e){e===g.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}_sendRequest(e,s){if(!this._wsGateway||!this._isConnected)throw new O.default("Comments",this);return this._wsGateway._sendRequest(t._SERVICE,e,c.default.encode(s))}}S._SERVICE=t._SERVICE,(0,a.mix)(S,a.EmitterMixin),t.default=S},2529:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{static toJSON(e){var t;return{...e,createdAt:null===(t=e.createdAt)||void 0===t?void 0:t.toISOString(),attributes:e.attributes?JSON.stringify(e.attributes):null}}static fromJSON(e){return{...e,createdAt:new Date(e.createdAt),attributes:e.attributes?JSON.parse(e.attributes):null}}}t.default=i,i.DESCRIPTOR_NAME="CommentDescriptor",i.DESCRIPTOR={fields:{commentId:{id:1,type:"string"},commentThreadId:{id:2,type:"string"},userId:{id:3,type:"string"},content:{id:4,type:"string"},documentId:{id:5,type:"string"},createdAt:{id:6,type:"string"},attributes:{id:7,type:"string"}}}},1578:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(5945)),i=r(s(2529));class o extends n.default{static toJSON(e){var t;return{...e,comments:null===(t=e.comments)||void 0===t?void 0:t.map(i.default.toJSON)}}static fromJSON(e){var t;return{...e,comments:null===(t=e.comments)||void 0===t?void 0:t.map(i.default.fromJSON)}}}t.default=o,o.DESCRIPTOR_NAME="CommentsThreadDescriptor",o.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},comments:{type:"CommentDescriptor",rule:"repeated",id:2}}}},5420:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s,r="",n,i="",o=null){super(),this.documentId=e,this.commentThreadId=t,this.content=s,this.commentId=r,this.userId=i,this.attributes=o,this.createdAt=n?new Date(n):""}toJSON(){return{commentThreadId:this.commentThreadId,content:this.content,documentId:this.documentId,commentId:this.commentId,createdAt:this.createdAt instanceof Date?this.createdAt.toISOString():this.createdAt,userId:this.userId,attributes:JSON.stringify(this.attributes)}}static fromJSON(e){return new i(e.documentId,e.commentThreadId,e.content,e.commentId?e.commentId:void 0,e.createdAt?new Date(e.createdAt):void 0,e.userId?e.userId:void 0,e.attributes?JSON.parse(e.attributes):{})}}t.default=i,i.TYPE="91",i.READABLE_TYPE_NAME="addComment",i.DESCRIPTOR_NAME="CommentsV2AddCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},content:{type:"string",id:2},documentId:{type:"string",id:3},commentId:{type:"string",id:4},createdAt:{type:"string",id:5},userId:{type:"string",id:6},attributes:{type:"string",id:7}}}},6376:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.documentId=e}toJSON(){return{documentId:this.documentId}}static fromJSON(e){return new i(e.documentId)}}t.default=i,i.TYPE="92",i.READABLE_TYPE_NAME="connectToComment",i.DESCRIPTOR_NAME="CommentsV2ConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},939:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t){super(),this.commentThreadId=e,this.documentId=t}toJSON(){return{commentThreadId:this.commentThreadId,documentId:this.documentId}}static fromJSON(e){return new i(e.commentThreadId,e.documentId)}}t.default=i,i.TYPE="93",i.READABLE_TYPE_NAME="getComment",i.DESCRIPTOR_NAME="CommentsV2GetCommentThreadMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},documentId:{type:"string",id:2}}}},1926:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.documentId=e}toJSON(){return{documentId:this.documentId}}static fromJSON(e){return new i(e.documentId)}}t.default=i,i.TYPE="94",i.READABLE_TYPE_NAME="getDocumentThreads",i.DESCRIPTOR_NAME="CommentsV2GetDocumentThreadsMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},6178:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s){super(),this.documentId=e,this.commentThreadId=t,this.commentId=s}toJSON(){return{documentId:this.documentId,commentThreadId:this.commentThreadId,commentId:this.commentId}}static fromJSON(e){return new i(e.documentId,e.commentThreadId,e.commentId)}}t.default=i,i.TYPE="95",i.READABLE_TYPE_NAME="removeComment",i.DESCRIPTOR_NAME="CommentsV2RemoveCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},documentId:{type:"string",id:3}}}},5711:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t){super(),this.documentId=e,this.commentThreadId=t}toJSON(){return{documentId:this.documentId,commentThreadId:this.commentThreadId}}static fromJSON(e){return new i(e.documentId,e.commentThreadId)}}t.default=i,i.TYPE="97",i.READABLE_TYPE_NAME="removeCommentThread",i.DESCRIPTOR_NAME="CommentsV2RemoveCommentThreadMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},documentId:{type:"string",id:2}}}},7955:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s,r,n=null,i=!1){super(),this.documentId=e,this.commentThreadId=t,this.commentId=s,this.content=r,this.attributes=n,this.isAttributesUpdated=i}toJSON(){return{documentId:this.documentId,commentThreadId:this.commentThreadId,commentId:this.commentId,content:this.content,attributes:this.attributes?JSON.stringify(this.attributes):null,isAttributesUpdated:this.isAttributesUpdated}}static fromJSON(e){return new i(e.documentId,e.commentThreadId,e.commentId,e.content,e.attributes?JSON.parse(e.attributes):null,e.isAttributesUpdated)}}t.default=i,i.TYPE="96",i.READABLE_TYPE_NAME="updateComment",i.DESCRIPTOR_NAME="CommentsV2UpdateCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},content:{type:"string",id:3},documentId:{type:"string",id:4},attributes:{type:"string",id:5},isAttributesUpdated:{type:"bool",id:6}}}},2280:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s){super(),this.commentThreadId=e,this.commentId=t,this.createdAt=new Date(s)}toJSON(){return{commentThreadId:this.commentThreadId,commentId:this.commentId,createdAt:this.createdAt.toISOString()}}static fromJSON(e){return new i(e.commentThreadId,e.commentId,e.createdAt)}}t.default=i,i.DESCRIPTOR_NAME="CommentsV2AddCommentResponse",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},createdAt:{type:"string",id:3}}}},7608:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(1578));class o extends n.default{constructor(e,t,s){super(),this.channel=e,this._threads=t,this._threadsV2=s,this.threads=(null==s?void 0:s.length)?s:t}toJSON(){var e,t;return{channel:this.channel,threads:null===(e=this._threads)||void 0===e?void 0:e.map((e=>JSON.stringify(e))),threadsV2:null===(t=this._threadsV2)||void 0===t?void 0:t.map(i.default.toJSON)}}static fromJSON(e){var t,s;return new o(e.channel,null===(t=e.threads)||void 0===t?void 0:t.map((e=>JSON.parse(e))),null===(s=e.threadsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}t.default=o,o.DESCRIPTOR_NAME="CommentsV2ConnectResponse",o.DESCRIPTOR={fields:{channel:{type:"string",id:1},threads:{type:"string",rule:"repeated",id:2},threadsV2:{type:"CommentsThreadDescriptor",rule:"repeated",id:3}}}},6523:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(2529));class o extends n.default{constructor(e,t,s){super(),this.commentThreadId=e,this._comments=t,this._commentsV2=s,this.comments=(null==s?void 0:s.length)?s:t}toJSON(){var e,t;return{commentThreadId:this.commentThreadId,comments:null===(e=this._comments)||void 0===e?void 0:e.map((e=>JSON.stringify(e))),commentsV2:null===(t=this._commentsV2)||void 0===t?void 0:t.map(i.default.toJSON)}}static fromJSON(e){var t,s;return new o(e.commentThreadId,null===(t=e.comments)||void 0===t?void 0:t.map((e=>function(e){const t=JSON.parse(e);return{...t,createdAt:new Date(t.createdAt)}}(e))),null===(s=e.commentsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}t.default=o,o.DESCRIPTOR_NAME="CommentsV2GetCommentThreadResponse",o.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},comments:{type:"string",rule:"repeated",id:2},commentsV2:{type:"CommentDescriptor",rule:"repeated",id:3}}}},7952:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(1578));class o extends n.default{constructor(e,t){super(),this._threads=e,this._threadsV2=t,this.threads=(null==t?void 0:t.length)?t:e}toJSON(){var e,t;return{threads:null===(e=this._threads)||void 0===e?void 0:e.map((e=>JSON.stringify(e))),threadsV2:null===(t=this._threadsV2)||void 0===t?void 0:t.map(i.default.toJSON)}}static fromJSON(e){var t,s;return new o(null===(t=e.threads)||void 0===t?void 0:t.map((e=>function(e){var t;const s=JSON.parse(e),r={...s};return s.comments&&(r.comments=null===(t=s.comments)||void 0===t?void 0:t.map((e=>({...e,createdAt:new Date(e.createdAt)})))),r}(e))),null===(s=e.threadsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}t.default=o,o.DESCRIPTOR_NAME="CommentsV2GetDocumentThreadsResponse",o.DESCRIPTOR={fields:{threads:{type:"string",rule:"repeated",id:1},threadsV2:{type:"CommentsThreadDescriptor",rule:"repeated",id:2}}}},5945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(...e){}}},6345:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{}t.default=i,i.DESCRIPTOR_NAME="KeyValueDescriptor",i.DESCRIPTOR={fields:{key:{type:"string",id:1},value:{type:"string",id:2}}}},8689:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._SERVICE=void 0;const n=s(2209),i=r(s(3596)),o=s(7158),a=r(s(6052)),c=r(s(4910)),u=r(s(357));t._SERVICE=13;class d{static async isBundleUploaded(e,t){const s=new a.default(t);if(e.state!==o.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new u.default("WebSocket Gateway is not connected.",e);const r=await e._sendRequest(d._SERVICE,a.default.TYPE,i.default.encode(s));return i.default.decode(r,c.default).isUploaded}}d._SERVICE=t._SERVICE,(0,n.mix)(d,n.EmitterMixin),t.default=d},6052:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.bundleVersion=e}toJSON(){return{bundleVersion:this.bundleVersion}}static fromJSON(e){return new i(e.bundleVersion)}}t.default=i,i.TYPE="131",i.READABLE_TYPE_NAME="isEditorBundleUploaded",i.DESCRIPTOR_NAME="IsEditorBundleUploadedMessage",i.DESCRIPTOR={fields:{bundleVersion:{type:"string",id:1}}}},4910:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.isUploaded=e}toJSON(){return{isUploaded:this.isUploaded}}static fromJSON(e){return new i(e.isUploaded)}}t.default=i,i.DESCRIPTOR_NAME="IsEditorBundleUploadedResponse",i.DESCRIPTOR={fields:{isUploaded:{type:"bool",id:1}}}},6314:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(357));class i extends n.default{constructor(e,t){super(e+" Service is not connected.",t)}}t.default=i},3545:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{constructor(...e){super()}static fromJSON(e){throw new TypeError("Must be implemented in a child class!")}}t.default=i,i.TYPE="1000"},3596:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(s(6154)),c=o(s(6783)),u=o(s(8677)),d=o(s(6345)),l=o(s(7618)),h=o(s(2529)),f=o(s(1578)),p=o(s(1706)),y=o(s(9883)),m=[d.default,c.default,u.default,l.default,h.default,f.default,p.default,y.default],v=a.Root.fromJSON({nested:m.reduce(((e,t)=>(e[t.DESCRIPTOR_NAME]=t.DESCRIPTOR,e)),{})});function x(e){return t=e,v.lookup(t.DESCRIPTOR_NAME)||v.addJSON({[t.DESCRIPTOR_NAME]:t.DESCRIPTOR}),v.lookupType(e.DESCRIPTOR_NAME);var t}t.default=class{static decode(e,t){const s=x(t).decode("undefined"==typeof window?e:new Uint8Array(e));return t.fromJSON({...s})}static encode(e){const t=x(e.constructor),s=e.toJSON(),r=t.verify(s);if(r)throw Error(r);return t.encode(t.create(s)).finish()}}},9883:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{static create(e){return{revisionId:e.id,name:e.name,creatorId:e.creatorId,createdAt:e.createdAt,fromVersion:e.fromVersion,toVersion:e.toVersion,isEmptyCurrent:e.isEmptyCurrent,diffData:e.diffData?JSON.stringify(e.diffData):void 0,attributes:e.attributes,authorsIds:e.authorsIds}}static toJSON(e){var t;return{revisionId:e.revisionId,name:e.name,creatorId:e.creatorId,authorsIds:e.authorsIds?JSON.stringify(e.authorsIds):void 0,diffData:e.diffData,createdAt:null===(t=e.createdAt)||void 0===t?void 0:t.toISOString(),attributes:e.attributes?JSON.stringify(e.attributes):void 0,toVersion:e.toVersion,fromVersion:e.fromVersion,isEmptyCurrent:e.isEmptyCurrent}}static fromJSON(e){return{revisionId:(e={...e}).revisionId,name:e.name,creatorId:e.creatorId,authorsIds:e.authorsIds?JSON.parse(e.authorsIds):void 0,diffData:e.diffData,createdAt:e.createdAt?new Date(e.createdAt):void 0,attributes:e.attributes?JSON.parse(e.attributes):void 0,toVersion:e.toVersion,fromVersion:e.fromVersion,isEmptyCurrent:e.isEmptyCurrent}}static toObject(e){return function(e){for(const[t,s]of Object.entries(e))void 0===s&&delete e[t];return e}({id:e.revisionId,name:e.name,creatorId:e.creatorId,createdAt:e.createdAt,fromVersion:e.fromVersion,toVersion:e.toVersion,isEmptyCurrent:e.isEmptyCurrent,diffData:e.diffData?JSON.parse(e.diffData):void 0,attributes:e.attributes,authorsIds:e.authorsIds})}}t.default=i,i.DESCRIPTOR_NAME="RevisionDescriptor",i.DESCRIPTOR={fields:{revisionId:{type:"string",id:1},name:{type:"string",id:2},creatorId:{type:"string",id:3},authorsIds:{type:"string",id:4},diffData:{type:"string",id:5},createdAt:{type:"string",id:6},attributes:{type:"string",id:7},toVersion:{type:"uint32",id:8},fromVersion:{type:"uint32",id:9},isEmptyCurrent:{type:"bool",id:10}}}},801:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.documentId=e}toJSON(){return{documentId:this.documentId}}static fromJSON(e){return new i(e.documentId)}}t.default=i,i.TYPE="121",i.READABLE_TYPE_NAME="connectToRevisionHistory",i.DESCRIPTOR_NAME="RevisionHistoryConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},3667:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t){super(),this.documentId=e,this.revisionId=t}toJSON(){return{documentId:this.documentId,revisionId:this.revisionId}}static fromJSON(e){return new i(e.documentId,e.revisionId)}}t.default=i,i.TYPE="123",i.READABLE_TYPE_NAME="getRevision",i.DESCRIPTOR_NAME="RevisionHistoryGetRevisionMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1},revisionId:{type:"string",id:2}}}},8702:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t){super(),this.documentId=e,this.requestId=t}toJSON(){return{documentId:this.documentId,requestId:this.requestId}}static fromJSON(e){return new i(e.documentId,e.requestId)}}t.default=i,i.TYPE="122",i.READABLE_TYPE_NAME="reconnectToRevisionHistory",i.DESCRIPTOR_NAME="RevisionHistoryReconnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1},requestId:{type:"uint32",id:2}}}},6120:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(9883));class o extends n.default{constructor(e,t,s){super(),this.documentId=e,this.requestId=t,this.revisions=s}toJSON(){return{documentId:this.documentId,requestId:this.requestId,revisions:this.revisions.map(i.default.toJSON)}}toObject(){return{documentId:this.documentId,requestId:this.requestId,revisions:this.revisions.map(i.default.toObject)}}static create(e){return new o(e.documentId,e.requestId,e.revisions.map(i.default.create))}static fromJSON(e){return new o(e.documentId,e.requestId,e.revisions.map(i.default.fromJSON))}}t.default=o,o.TYPE="124",o.READABLE_TYPE_NAME="updateRevisions",o.DESCRIPTOR_NAME="RevisionHistoryUpdateRevisionsMessage",o.DESCRIPTOR={fields:{documentId:{type:"string",id:1},requestId:{type:"uint32",id:2},revisions:{type:"RevisionDescriptor",id:3,rule:"repeated"}}}},5218:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(9883));class o extends n.default{constructor(e,t,s){super(),this.channel=e,this.requestId=t,this.revisions=s}toJSON(){return{channel:this.channel,requestId:this.requestId,revisions:this.revisions.map(i.default.toJSON)}}toObject(){return{channel:this.channel,requestId:this.requestId,revisions:this.revisions.map(i.default.toObject)}}static fromJSON(e){return new o(e.channel,e.requestId,e.revisions.map(i.default.fromJSON))}}t.default=o,o.DESCRIPTOR_NAME="RevisionHistoryConnectResponse",o.DESCRIPTOR={fields:{channel:{type:"string",id:1},requestId:{type:"uint32",id:2},revisions:{type:"RevisionDescriptor",id:3,rule:"repeated"}}}},6311:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(9883));class o extends n.default{constructor(e,t,s,r,n,i,o,a,c,u){super(),this.revisionId=e,this.name=t,this.creatorId=s,this.authorsIds=r,this.createdAt=n,this.diffData=i,this.attributes=o,this.fromVersion=a,this.toVersion=c,this.isEmptyCurrent=u}toJSON(){return i.default.toJSON(this)}toObject(){return i.default.toObject(this)}static create(e){return new o(e.revisionId,e.name,e.creatorId,e.authorsIds,e.createdAt,e.diffData,e.attributes,e.fromVersion,e.toVersion,e.isEmptyCurrent)}static fromJSON(e){return new o(e.revisionId,e.name,e.creatorId,e.authorsIds?JSON.parse(e.authorsIds):void 0,e.createdAt?new Date(e.createdAt):void 0,e.diffData,e.attributes?JSON.parse(e.attributes):void 0,e.fromVersion,e.toVersion,e.isEmptyCurrent)}}t.default=o,o.DESCRIPTOR_NAME="RevisionHistoryGetRevisionResponse",o.DESCRIPTOR=i.default.DESCRIPTOR},1655:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.requestId=e}toJSON(){return{requestId:this.requestId}}static fromJSON(e){return new i(e.requestId)}}t.default=i,i.DESCRIPTOR_NAME="RevisionHistoryUpdateRevisionsResponse",i.DESCRIPTOR={fields:{requestId:{type:"uint32",id:1}}}},8811:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._SERVICE=void 0;const a=s(2209),c=o(s(3596)),u=o(s(3667)),d=o(s(6311)),l=o(s(6120)),h=o(s(1655)),f=o(s(801)),p=o(s(5218)),y=o(s(8702)),m=o(s(357)),v=i(s(7158)),x=o(s(6314));t._SERVICE=12;class _{constructor(e){this._documentId=e,this._isConnected=!1}get isConnected(){return this._isConnected}connect(e){return this._isConnected?Promise.resolve():this._connect(e,new f.default(this._documentId))}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this.fire("disconnected"),this.stopListening())}reconnect(e,t){if(this.isConnected)throw new m.default("Cannot reconnect to already connected service.",e);return this._connect(e,new y.default(this._documentId,t))}async updateRevisions(e,t){const s=l.default.create({documentId:this._documentId,requestId:t,revisions:e}),r=await this._sendRequest(l.default.TYPE,s),{requestId:n}=c.default.decode(r,h.default);return n}async getRevision(e){const t=new u.default(this._documentId,e),s=await this._sendRequest(u.default.TYPE,t);return c.default.decode(s,d.default).toObject()}async _connect(e,s){if(e.state!==v.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new m.default("WebSocket Gateway is not connected.",e);this._wsGateway=e,this.stopListening(e,"change:state");const r=await e._sendRequest(t._SERVICE,s.constructor.TYPE,c.default.encode(s)),{channel:n,requestId:i,revisions:o}=c.default.decode(r,p.default).toObject();return this.listenTo(e,"change:state",((e,t,s)=>this._onWsGatewayStateChange(s)),{priority:v.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(e,n),this._isConnected=!0,this.fire("connected"),{revisions:o,requestId:i}}_connectToChannel(e,t){this._channel=e._getChannel(_._SERVICE,t),this._channel&&this.listenTo(this._channel,this._channel.getEventName(l.default.TYPE),((e,t)=>{const{documentId:s,requestId:r,revisions:n}=c.default.decode(t,l.default).toObject();this.fire("revisionsUpdated",{documentId:s,requestId:r,revisionsData:n})}))}_onWsGatewayStateChange(e){e===v.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}_sendRequest(e,s){if(!this._wsGateway||!this._isConnected)throw new x.default("Revision History",this);return this._wsGateway._sendRequest(t._SERVICE,e,c.default.encode(s))}}_._SERVICE=t._SERVICE,(0,a.mix)(_,a.EmitterMixin),t.default=_},6783:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{}t.default=i,i.DESCRIPTOR_NAME="SessionsSocketDescriptor",i.DESCRIPTOR={fields:{session:{type:"string",id:1},user:{type:"string",id:2},role:{id:3,type:"string"},permissions:{rule:"repeated",type:"string",id:4}}}},2366:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t){super(),this.id=e,this.sessionType=t}toJSON(){return{id:this.id,sessionType:this.sessionType}}static fromJSON(e){return new i(e.id,e.sessionType)}}t.default=i,i.TYPE="31",i.READABLE_TYPE_NAME="getConnectedSockets",i.DESCRIPTOR_NAME="SessionsConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},sessionType:{type:"uint32",id:2}}}},2414:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s,r){super(),this.id=e,this.userId=t,this.role=s,this.permissions=r}toJSON(){var e,t,s;return{id:this.id,userId:null!==(e=this.userId)&&void 0!==e?e:void 0,role:null!==(t=this.role)&&void 0!==t?t:void 0,permissions:null!==(s=this.permissions)&&void 0!==s?s:void 0}}static fromJSON(e){return new i(e.id,e.userId,e.role,e.permissions)}}t.default=i,i.TYPE="32",i.READABLE_TYPE_NAME="connectSocket",i.DESCRIPTOR_NAME="SocketConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},userId:{type:"string",id:2},role:{type:"string",id:3},permissions:{rule:"repeated",type:"string",id:4}}}},4194:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.id=e}toJSON(){return{id:this.id}}static fromJSON(e){return new i(e.id)}}t.default=i,i.TYPE="33",i.READABLE_TYPE_NAME="disconnectSocket",i.DESCRIPTOR_NAME="SocketDisconnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1}}}},6145:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t=[]){super(),this.channel=e,this.sockets=t}toJSON(){return{channel:this.channel,sockets:this.sockets.map((e=>({user:e.userId,session:e.id,role:e.role,permissions:e.permissions})))}}static fromJSON(e){return new i(e.channel,e.sockets.map((e=>({id:e.session,userId:e.user,role:e.role,permissions:e.permissions}))))}}t.default=i,i.DESCRIPTOR_NAME="SessionsConnectResponse",i.DESCRIPTOR={fields:{channel:{type:"string",id:1},sockets:{rule:"repeated",type:"SessionsSocketDescriptor",id:2}}}},2690:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(2209),i=s(7026),o=r(s(7530)),a=r(s(7158)),c=r(s(6145)),u=r(s(2366)),d=r(s(2414)),l=r(s(4194)),h=r(s(3596));class f extends n.Collection{constructor(e,t){super({idProperty:"id"}),this._id=e,this._sessionType=t,this._handlers=new Map,this._eventsQueue=[],this._isRunning=!1}async connect(e){this._wsGateway=e,this.stopListening(e,"change:state");const t=new u.default(this._id,this._sessionType);let s;try{const e=await this._wsGateway._sendRequest(i._SERVICE,u.default.TYPE,h.default.encode(t));s=h.default.decode(e,c.default)}catch(e){s=new c.default(this._id,[])}this._connectToChannel(this._wsGateway,s.channel,this._sessionType);const r=await async function(e,t){const s=t.map((e=>e.userId)),r=s.length?await o.default.getMany(e,s):[];return t.map((e=>{const t={id:e.id,role:e.role,permissions:e.permissions};return t.user=e.userId&&r.find((t=>t.id===e.userId))||new o.default,t}))}(this._wsGateway,s.sockets);for(const e of r)super.add(e);this._connected=!0,this.fire("connected"),this.listenTo(this._wsGateway,"change:state",((e,t,s)=>this._onWsGatewayStateChange(s)),{priority:a.default._CHANGE_STATE_EVENT_PRIORITY}),await this._runQueue()}disconnect(e=!0){if(this._connected){for(this._connected=!1,this._eventsQueue=[];this.length;)super.remove(0);this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._wsGateway&&e&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this.fire("disconnected"),e&&this.stopListening()}}add(e,t){throw new TypeError("The collection is read-only.")}remove(e){throw new TypeError("The collection is read-only.")}_connectToChannel(e,t,s){this._channel=e._getChannel(s,t),this._channel&&(this._addHandler(this._channel,d.default.TYPE,(async t=>{const s=h.default.decode(t,d.default);if(-1===this.getIndex(s.id)){const t={id:s.id,role:s.role,permissions:s.permissions};s.userId&&(t.user=await o.default.get(e,s.userId)),super.add(t)}})),this._addHandler(this._channel,l.default.TYPE,(e=>{const t=h.default.decode(e,l.default);-1!==this.getIndex(t.id)&&super.remove(t.id)})))}async _onWsGatewayStateChange(e){e===a.default.STATE_DISCONNECTED&&this.disconnect(!1),e===a.default.STATE_CONNECTED&&await this.connect(this._wsGateway)}async _runQueue(){if(this._isRunning||!this._connected)return;let e;for(this._isRunning=!0;e=this._eventsQueue.shift();){const t=this._handlers.get(e.eventName);t&&await t(e.data)}this._isRunning=!1}_addHandler(e,t,s){const r=e.getEventName(t,!0);this.listenTo(e,r,(async(e,t)=>{const s=e.name;this._eventsQueue.push({eventName:s,data:t}),await this._runQueue()})),this._handlers.set(r,s)}}t.default=f},7026:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._SERVICE=void 0;const n=r(s(2690));t._SERVICE=3,t.default=class{static async getConnectedSessions(e,t,s){const r=new n.default(t,s);return await r.connect(e),r}}},1706:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{static toJSON(e){var t;return{...e,data:e.data?JSON.stringify(e.data):e.data,attributes:e.attributes?JSON.stringify(e.attributes):e.attributes,createdAt:null===(t=e.createdAt)||void 0===t?void 0:t.toISOString()}}static fromJSON(e){return{...e,data:e.data?JSON.parse(e.data):e.data,attributes:e.attributes?JSON.parse(e.attributes):e.attributes,createdAt:e.createdAt?new Date(e.createdAt):void 0}}}t.default=i,i.DESCRIPTOR_NAME="SuggestionDescriptor",i.DESCRIPTOR={fields:{id:{id:1,type:"string"},authorId:{id:2,type:"string"},type:{id:3,type:"string"},createdAt:{id:4,type:"string"},data:{id:5,type:"string"},hasComments:{id:6,type:"bool"},state:{id:7,type:"string"},attributes:{id:8,type:"string"}}}},597:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s,r={},n=null,i=null){super(),this.id=e,this.documentId=t,this.type=s,this.data=r,this.originalSuggestionId=n,this.attributes=i}toJSON(){return{id:this.id,documentId:this.documentId,type:this.type,data:JSON.stringify(this.data),originalSuggestionId:this.originalSuggestionId,attributes:JSON.stringify(this.attributes)}}static fromJSON(e){var t;return new i(e.id,e.documentId,e.type,JSON.parse(e.data),null!==(t=e.originalSuggestionId)&&void 0!==t?t:null,e.attributes?JSON.parse(e.attributes):null)}}t.default=i,i.TYPE="101",i.READABLE_TYPE_NAME="addSuggestion",i.DESCRIPTOR_NAME="TrackChangesAddSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2},type:{type:"string",id:3},data:{type:"string",id:4},originalSuggestionId:{type:"string",id:5},attributes:{type:"string",id:6}}}},144:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.documentId=e}toJSON(){return{documentId:this.documentId}}static fromJSON(e){return new i(e.documentId)}}t.default=i,i.TYPE="105",i.READABLE_TYPE_NAME="connectToSuggestions",i.DESCRIPTOR_NAME="TrackChangesConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},2679:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.documentId=e}toJSON(){return{documentId:this.documentId}}static fromJSON(e){return new i(e.documentId)}}t.default=i,i.TYPE="102",i.READABLE_TYPE_NAME="getAllSuggestions",i.DESCRIPTOR_NAME="TrackChangesGetAllSuggestionMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},1659:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t){super(),this.id=e,this.documentId=t}toJSON(){return{id:this.id,documentId:this.documentId}}static fromJSON(e){return new i(e.id,e.documentId)}}t.default=i,i.TYPE="103",i.READABLE_TYPE_NAME="getSuggestion",i.DESCRIPTOR_NAME="TrackChangesGetSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2}}}},598:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s,r,n,i=null){super(),this.id=e,this.documentId=t,this.hasComments=s,this.isHasCommentsModified=r,this.state=n,this.attributes=i}toJSON(){return{id:this.id,documentId:this.documentId,hasComments:this.hasComments,isHasCommentsModified:this.isHasCommentsModified,state:this.state,attributes:JSON.stringify(this.attributes)}}static fromJSON(e){return new i(e.id,e.documentId,e.hasComments,e.isHasCommentsModified,e.state,e.attributes?JSON.parse(e.attributes):null)}}t.default=i,i.TYPE="104",i.READABLE_TYPE_NAME="updateSuggestion",i.DESCRIPTOR_NAME="TrackChangesUpdateSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2},hasComments:{type:"bool",id:3},isHasCommentsModified:{type:"bool",id:4},state:{type:"string",id:5},attributes:{type:"string",id:6}}}},3111:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s,r,n,i,o={},a=null){super(),this.id=e,this.authorId=t,this.type=s,this.hasComments=n,this.state=i,this.data=o,this.attributes=a,this.createdAt=r?new Date(r):void 0}toJSON(){var e;return{id:this.id,authorId:this.authorId,type:this.type,createdAt:null===(e=this.createdAt)||void 0===e?void 0:e.toISOString(),data:JSON.stringify(this.data),hasComments:this.hasComments,state:this.state,attributes:JSON.stringify(this.attributes)}}static fromJSON(e){return new i(e.id,e.authorId,e.type,e.createdAt,e.hasComments,e.state,JSON.parse(e.data),e.attributes?JSON.parse(e.attributes):null)}}t.default=i,i.DESCRIPTOR_NAME="TrackChangesAddSuggestionResponse",i.DESCRIPTOR={fields:{id:{type:"string",id:1},authorId:{type:"string",id:2},type:{type:"string",id:3},createdAt:{type:"string",id:4},data:{type:"string",id:5},hasComments:{type:"bool",id:6},state:{type:"string",id:7},attributes:{type:"string",id:8}}}},701:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(1706));class o extends n.default{constructor(e,t,s){super(),this.channel=e,this._suggestions=t,this._suggestionsV2=s,this.suggestions=(null==s?void 0:s.length)?s:t}toJSON(){var e,t;return{channel:this.channel,suggestions:null===(e=this._suggestions)||void 0===e?void 0:e.map((e=>JSON.stringify(e))),suggestionsV2:null===(t=this._suggestionsV2)||void 0===t?void 0:t.map(i.default.toJSON)}}static fromJSON(e){var t,s;return new o(e.channel,null===(t=e.suggestions)||void 0===t?void 0:t.map((e=>JSON.parse(e))),null===(s=e.suggestionsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}t.default=o,o.DESCRIPTOR_NAME="TrackChangesConnectResponse",o.DESCRIPTOR={fields:{channel:{type:"string",id:1},suggestions:{type:"string",rule:"repeated",id:2},suggestionsV2:{type:"SuggestionDescriptor",rule:"repeated",id:3}}}},3390:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(1706));class o extends n.default{constructor(e,t){super(),this._suggestions=e,this._suggestionsV2=t,this.suggestions=(null==t?void 0:t.length)?t:e}toJSON(){var e,t;return{suggestions:null===(e=this._suggestions)||void 0===e?void 0:e.map((e=>JSON.stringify(e))),suggestionsV2:null===(t=this._suggestionsV2)||void 0===t?void 0:t.map(i.default.toJSON)}}static fromJSON(e){var t,s;return new o(null===(t=e.suggestions)||void 0===t?void 0:t.map(a),null===(s=e.suggestionsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}function a(e){const t=JSON.parse(e);return t.createdAt=t.createdAt?new Date(t.createdAt):void 0,t}t.default=o,o.DESCRIPTOR_NAME="TrackChangesGetAllSuggestionsResponse",o.DESCRIPTOR={fields:{suggestions:{type:"string",rule:"repeated",id:1},suggestionsV2:{type:"SuggestionDescriptor",rule:"repeated",id:2}}}},5930:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s,r,n,i,o={},a=null){super(),this.id=e,this.authorId=t,this.type=s,this.hasComments=n,this.state=i,this.data=o,this.attributes=a,this.createdAt=new Date(r)}toJSON(){return{id:this.id,authorId:this.authorId,type:this.type,createdAt:this.createdAt.toISOString(),data:JSON.stringify(this.data),hasComments:this.hasComments,state:this.state,attributes:JSON.stringify(this.attributes)}}static fromJSON(e){return new i(e.id,e.authorId,e.type,e.createdAt,e.hasComments,e.state,JSON.parse(e.data),e.attributes?JSON.parse(e.attributes):null)}}t.default=i,i.DESCRIPTOR_NAME="TrackChangesGetSuggestionResponse",i.DESCRIPTOR={fields:{id:{type:"string",id:1},authorId:{type:"string",id:2},type:{type:"string",id:3},createdAt:{type:"string",id:4},data:{type:"string",id:5},hasComments:{type:"bool",id:6},state:{type:"string",id:7},attributes:{type:"string",id:8}}}},125:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._SERVICE=void 0;const a=s(2209),c=o(s(3596)),u=o(s(597)),d=o(s(3111)),l=o(s(1659)),h=o(s(5930)),f=o(s(2679)),p=o(s(3390)),y=o(s(598)),m=o(s(144)),v=o(s(701)),x=o(s(357)),_=i(s(7158)),g=o(s(6314));t._SERVICE=10;class b{constructor(e){this._documentId=e,this._isConnected=!1}get isConnected(){return this._isConnected}async connect(e){if(this._isConnected)return;if(e.state!==_.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new x.default("WebSocket Gateway is not connected.",e);const s=new m.default(this._documentId);this._wsGateway=e,this.stopListening(e,"change:state");const r=await e._sendRequest(t._SERVICE,m.default.TYPE,c.default.encode(s)),n=c.default.decode(r,v.default);return this.listenTo(e,"change:state",((e,t,s)=>this._onWsGatewayStateChange(s)),{priority:_.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(e,n.channel),this._isConnected=!0,this.fire("connected"),n.suggestions}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this.fire("disconnected"),this.stopListening())}async add(e,t,s,r=null,n){const i=new u.default(e,this._documentId,t,s,r,n),o=await this._sendRequest(u.default.TYPE,i);return c.default.decode(o,d.default)}async get(e,t=1){const s=new l.default(e,this._documentId);try{const e=await this._sendRequest(l.default.TYPE,s);return c.default.decode(e,h.default)}catch(s){if(s instanceof x.default&&"404"===s.code&&t<5)return await(r=100*t,new Promise((e=>{setTimeout(e,r)}))),this.get(e,t+1);if(s instanceof x.default)throw s;throw new x.default(s.message,this._wsGateway)}var r}async getAll(){const e=new f.default(this._documentId),t=await this._sendRequest(f.default.TYPE,e),{suggestions:s}=c.default.decode(t,p.default);return s}async update(e,t={}){const{hasComments:s,state:r,attributes:n}=t,i=void 0!==s,o=new y.default(e,this._documentId,s,i,r,n);await this._sendRequest(y.default.TYPE,o)}_connectToChannel(e,t){this._channel=e._getChannel(b._SERVICE,t),this._channel&&this.listenTo(this._channel,this._channel.getEventName(y.default.TYPE),((e,t)=>{const s=c.default.decode(t,y.default);this.fire("suggestionUpdated",s)}))}_onWsGatewayStateChange(e){e===_.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}_sendRequest(e,s){if(!this._wsGateway||!this._isConnected)throw new g.default("Track Changes",this);return this._wsGateway._sendRequest(t._SERVICE,e,c.default.encode(s))}}b._SERVICE=t._SERVICE,(0,a.mix)(b,a.EmitterMixin),t.default=b},7618:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{}t.default=i,i.DESCRIPTOR_NAME="UserDescriptor",i.DESCRIPTOR={fields:{attributes:{rule:"repeated",type:"KeyValueDescriptor",id:1}}}},7204:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.ids=e}toJSON(){return{ids:this.ids}}static fromJSON(e){return new i(e.ids)}}t.default=i,i.TYPE="22",i.READABLE_TYPE_NAME="getManyUsers",i.DESCRIPTOR_NAME="GetManyUsersMessage",i.DESCRIPTOR={fields:{ids:{id:1,type:"string",rule:"repeated"}}}},1779:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.id=e}toJSON(){return{id:this.id}}static fromJSON(e){return new i(e.id)}}t.default=i,i.TYPE="21",i.READABLE_TYPE_NAME="getUser",i.DESCRIPTOR_NAME="GetUserMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1}}}},624:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.users=e}toJSON(){return{users:this.users.map(o)}}static fromJSON(e){return new i(e.users.map(a))}}function o(e){return{attributes:Object.keys(e).map((t=>({key:t,value:JSON.stringify(e[t])})))}}function a(e){return e.attributes.reduce(((e,t)=>(e[t.key]=t.value?JSON.parse(t.value):null,e)),{})}t.default=i,i.DESCRIPTOR_NAME="GetManyUsersResponse",i.DESCRIPTOR={fields:{users:{rule:"repeated",type:"UserDescriptor",id:1}}}},2184:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e){super(),this.attributes=e}toJSON(){return{attributes:Object.keys(this.attributes).map((e=>({key:e,value:JSON.stringify(this.attributes[e])})))}}static fromJSON(e){const t=e.attributes.reduce(((e,t)=>(e[t.key]=t.value?JSON.parse(t.value):null,e)),{});return new i(t)}}t.default=i,i.DESCRIPTOR_NAME="GetUserResponse",i.DESCRIPTOR={fields:{attributes:{rule:"repeated",type:"KeyValueDescriptor",id:1}}}},7530:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(1779)),i=r(s(2184)),o=r(s(3596)),a=r(s(7204)),c=r(s(624));class u{constructor(e={}){this._attributes=new Map;for(const t of Object.keys(e))"id"!==t?(this._attributes.set(t,e[t]),Object.defineProperty(this,t,{enumerable:!0,configurable:!1,get:()=>this._attributes.get(t)})):this.id=e.id}static fromData(e){return new u(e)}static async get(e,t){const s=new n.default(t);try{const t=await e._sendRequest(u._SERVICE,n.default.TYPE,o.default.encode(s)),r=o.default.decode(t,i.default);return new u(r.attributes)}catch(e){return new u({id:t})}}static async getMany(e,t){const s=new a.default(t);try{const t=await e._sendRequest(u._SERVICE,a.default.TYPE,o.default.encode(s));return o.default.decode(t,c.default).users.map((e=>new u(e)))}catch(e){return t.map((e=>new u({id:e})))}}}u._SERVICE=2,t.default=u},6754:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="32.0.0"},1573:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(2209),i=r(s(3554)),o=r(s(3596));class a{constructor(e,t,s){this._channelName=e,this._wsGateway=t,this._socket=s,this._subscribeToChannel()}remove(){this._socket.off(this._channelName)}getEventName(e,t=!1){let s="";return t&&(s+="all:"),s+="event",e&&(s+=":"+e),s}_subscribeToChannel(){this._socket.on(this._channelName,(e=>{const t=o.default.decode(e,i.default);this.fire(this.getEventName(t.type,!0),t.data,t.socketId),t.socketId!==this._wsGateway.socketId&&this.fire(this.getEventName(t.type),t.data,t.socketId)}))}}(0,n.mix)(a,n.EmitterMixin),t.default=a},3554:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t,s){super(),this.type=e,this.socketId=t,this.data=s}toJSON(){return{type:this.type,socketId:this.socketId,data:this.data}}static fromJSON(e){return new i(e.type,e.socketId,e.data)}}t.default=i,i.DESCRIPTOR_NAME="ChannelMessage",i.DESCRIPTOR={fields:{type:{type:"uint32",id:1},socketId:{type:"string",id:2},data:{type:"bytes",id:3}}}},8735:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(4990)),i=r(s(3596));t.default=class{encode(e,t,s,r="/",o={}){if(t.length>2)throw new Error("PacketParser supports only 2 elements in data");const a={type:e,data:t,id:s,nsp:r};return i.default.encode(n.default.create(a,o))}decode(e){const t=i.default.decode(e,n.default);return{packet:{id:t.id,type:t.type,data:t.packetData,nsp:t.nsp},options:{flags:t.options.flags,rooms:t.options.rooms,except:t.options.except}}}}},2854:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(e){return new u(e.data,e.data1)}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.BUFFER,c.MessageDataTypes.BUFFER),u.DESCRIPTOR_NAME="BytesBytesPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"bytes",id:1},data1:{type:"bytes",id:2}}}},4253:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(e){return new u(e.data,e.data1)}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.NUMBER,c.MessageDataTypes.BUFFER),u.DESCRIPTOR_NAME="NumberBytesPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"bytes",id:2}}}},1433:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(e){return new u(e.data,e.data1)}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.NUMBER,c.MessageDataTypes.NUMBER),u.DESCRIPTOR_NAME="NumberNumberPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"uint32",id:2}}}},2272:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data,data1:this.data1?JSON.stringify(this.data1):void 0}}static fromJSON(e){return new u(e.data,e.data1&&JSON.parse(e.data1))}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.NUMBER,c.MessageDataTypes.OBJECT),u.DESCRIPTOR_NAME="NumberObjectPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"string",id:2}}}},1692:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(e){return new u(e.data,e.data1)}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.NUMBER,c.MessageDataTypes.STRING),u.DESCRIPTOR_NAME="NumberStringPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"string",id:2}}}},7239:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data?JSON.stringify(this.data):void 0,data1:this.data1}}static fromJSON(e){return new u(e.data&&JSON.parse(e.data),e.data1)}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.OBJECT,c.MessageDataTypes.BUFFER),u.DESCRIPTOR_NAME="ObjectBufferPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"bytes",id:2}}}},9075:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data?JSON.stringify(this.data):void 0,data1:this.data1?JSON.stringify(this.data1):void 0}}static fromJSON(e){return new u(e.data&&JSON.parse(e.data),e.data1&&JSON.parse(e.data1))}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.OBJECT,c.MessageDataTypes.OBJECT),u.DESCRIPTOR_NAME="ObjectObjectPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},799:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{static create(e,t){throw new TypeError("Must be implemented in a child class!")}}t.default=i,e.exports=i},4990:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3596)),i=r(s(3545)),o=r(s(338)),a=r(s(817)),c=r(s(4253)),u=r(s(6335)),d=r(s(2854)),l=r(s(9769)),h=r(s(2272)),f=r(s(9075)),p=r(s(7239)),y=r(s(1797)),m=r(s(1694)),v=r(s(1433)),x=r(s(1692)),_=[c.default,u.default,d.default,l.default,h.default,f.default,p.default,y.default,m.default,v.default,x.default].reduce(((e,t)=>(e[t.TYPE]=t,e)),{});class g extends i.default{constructor(e,t,s,r="/",n=new o.default){super(),this.type=e,this.data=t,this.id=s,this.nsp=r,this.options=n}get packetData(){return void 0===this.data.data&&void 0===this.data.data1?[]:this.data.data&&void 0===this.data.data1?[this.data.data]:[this.data.data,this.data.data1]}toJSON(){const e=n.default.encode(this.options),t=n.default.encode(this.data);return{type:this.type+10*this.data.constructor.TYPE,id:this.id,nsp:"/"===this.nsp?void 0:this.nsp,data:t,options:e}}static fromJSON(e){const t=Math.floor(e.type/10);return new g(e.type-10*t,n.default.decode(e.data,_[t]),e.id,e.nsp,e.options?n.default.decode(e.options,o.default):new o.default)}static create(e,t={}){var s;const r=a.default.getPacketType(a.default.getType(e.data[0]),a.default.getType(null!==(s=e.data[1])&&void 0!==s?s:e.data[0]));return new g(e.type,_[r].create(e.data[0],e.data[1]),e.id,e.nsp,new o.default(t.flags,t.rooms,t.except))}}t.default=g,g.TYPE=10,g.DESCRIPTOR_NAME="PacketMessage",g.DESCRIPTOR={fields:{type:{type:"uint32",id:1},id:{type:"uint32",id:2},nsp:{type:"string",id:3},data:{type:"bytes",id:4},options:{type:"bytes",id:5}}}},338:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(e,t=[],s=[]){super(),this.flags=e,this.rooms=t,this.except=s}toJSON(){var e,t;return{flags:this.flags?JSON.stringify(this.flags):void 0,rooms:(null===(e=this.rooms)||void 0===e?void 0:e.length)?this.rooms:void 0,except:(null===(t=this.except)||void 0===t?void 0:t.length)?this.except:void 0}}static fromJSON(e){return new i(e.flags&&JSON.parse(e.flags),e.rooms,e.except)}}t.default=i,i.TYPE=11,i.DESCRIPTOR_NAME="PacketOptionsMessage",i.DESCRIPTOR={fields:{flags:{type:"string",id:1},rooms:{type:"string",id:2,rule:"repeated"},except:{type:"string",id:3,rule:"repeated"}}}},6335:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(e){return new u(e.data,e.data1)}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.STRING,c.MessageDataTypes.BUFFER),u.DESCRIPTOR_NAME="StringBytesPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"bytes",id:2}}}},1694:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(e){return new u(e.data,e.data1)}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.STRING,c.MessageDataTypes.NUMBER),u.DESCRIPTOR_NAME="StringNumberPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"uint32",id:2}}}},9769:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data,data1:this.data1?JSON.stringify(this.data1):void 0}}static fromJSON(e){return new u(e.data,e.data1&&JSON.parse(e.data1))}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.STRING,c.MessageDataTypes.OBJECT),u.DESCRIPTOR_NAME="StringObjectPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},1797:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(e,t){super(),this.data=e,this.data1=t}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(e){return new u(e.data,e.data1)}static create(e,t){return new u(e,t)}}t.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.STRING,c.MessageDataTypes.STRING),u.DESCRIPTOR_NAME="StringStringPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},2069:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.ENCODED_TYPES=void 0;const n=s(170),i=r(s(8735)),o=r(s(817));t.ENCODED_TYPES=[n.PacketType.EVENT,n.PacketType.ACK,n.PacketType.BINARY_ACK,n.PacketType.BINARY_EVENT];class a extends n.Encoder{constructor(e=new i.default){super(),this._packetParser=e}encode(e){if(t.ENCODED_TYPES.includes(e.type))try{return[this._packetParser.encode(e.type,e.data,e.id,e.nsp)]}catch(e){console.error("Can not properly serialize or deserialize messages. Check the original error.",{originalError:{message:e.message}})}return super.encode(e)}}t.Encoder=a;class c extends n.Decoder{constructor(e=new i.default){super(),this._packetParser=e}add(e){if(!o.default.isBuffer(e))return super.add(e);let t;try{t=this._packetParser.decode(e).packet}catch(t){return super.add(e)}super.emitReserved("decoded",t)}}t.Decoder=c},817:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataTypes=void 0;const s=!("undefined"==typeof process||!process.versions||!process.versions.node);var r,n;(n=r=t.MessageDataTypes||(t.MessageDataTypes={}))[n.BUFFER=1]="BUFFER",n[n.STRING=2]="STRING",n[n.NUMBER=3]="NUMBER",n[n.OBJECT=4]="OBJECT";class i{static getPacketType(...e){let t=0;for(let s=0;s<e.length;s++)t+=e[s]*Math.pow(10,e.length-s-1);return t}static getType(e){if(i.isBuffer(e))return r.BUFFER;const t=typeof e;return"string"===t?r.STRING:"number"===t?r.NUMBER:r.OBJECT}static isBuffer(e){return s&&Buffer.isBuffer(e)||e instanceof ArrayBuffer||e instanceof Uint8Array||this._isBufferView(e)}static _isBufferView(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}t.default=i},1113:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(357));class i{constructor(e,t){this._context=e,this._deferredPromise=function(){let e,t;const s=new Promise(((s,r)=>{e=s,t=r}));return{resolve:e,reject:t,promise:s}}(),this.timeout=setTimeout((()=>this.error(new n.default("Request timeout.",this._context))),t)}get promise(){return this._deferredPromise.promise}response(e){this._deferredPromise.resolve(e)}error(e){this._deferredPromise.reject(e)}}t.default=class{constructor(e){this._context=e,this._requests=new Set}async send(e,t=1e4){const s=this._createRequest(t);try{return e(s),await s.promise}finally{this._finishRequest(s)}}errorAll(e){for(const t of this._requests)t.error(e)}_createRequest(e){const t=new i(this._context,e);return this._requests.add(t),t}_finishRequest(e){this._requests.delete(e),clearTimeout(e.timeout)}}},7158:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_SOCKET_GATEWAY_STATES=void 0;const n=s(8623),i=r(s(9655)),o=s(2209),a=r(s(1573)),c=r(s(7530)),u=r(s(6754)),d=r(s(357)),l=s(2069),h=r(s(1113));var f,p;(p=f=t.WEB_SOCKET_GATEWAY_STATES||(t.WEB_SOCKET_GATEWAY_STATES={})).DISCONNECTED="disconnected",p.CONNECTING="connecting",p.CONNECTED="connected";class y{constructor(e,t,s={},r=n.io,o=c.default.get){if(this._token=t,this._options=s,this._connectionProvider=r,this._userFactory=o,this._requestsManager=new h.default(this),this._channels=new Map,this._connectionAttempt=0,!e)throw new TypeError("Api address must be provided.");if(!this._token)throw new TypeError("Token must be provided.");this._options.requestTimeout||(this._options.requestTimeout=1e4),this._url=(0,i.default)(e.replace(/^(?!(?:\w+:)?\/\/)/,"https://")),this.set("state","disconnected"),this.set("socketId",void 0),this.set("me",void 0),this.on("change:state",(async(e,t,s)=>{var r;if(s!==y.STATE_CONNECTED){if(s===y.STATE_DISCONNECTED)return this._requestsManager.errorAll(new d.default("Not connected.",this))}else try{this.me=await this._userFactory.call(c.default,this,null===(r=this._socketAuth)||void 0===r?void 0:r.userId)}catch(e){}}),{priority:y._CHANGE_STATE_EVENT_PRIORITY}),this.on("error",((e,t)=>{this._options.onError?this._options.onError(t):console.log(t)}))}get sessionId(){return this.socketId}disconnect(){var e;this.state!==f.DISCONNECTED&&(null===(e=this._socket)||void 0===e||e.disconnect(),this._socket=void 0,this.state=f.DISCONNECTED)}async reconnect(){this._socket||this.state!==f.DISCONNECTED||(await this._token.refreshToken(),await this._connect())}static async connect(e,t="local.cs.dev:443/ws-v2",s={},r=n.io,i=c.default.get){const o=new y(t,e,s,r,i);return await o._connect(),o}_sendRequest(e,t,s){if(!e)throw new d.default("`serviceName` must be provided.",this);if(this.state!==y.STATE_CONNECTED)throw new d.default("Not connected.",this);if(!this._socketAuth||!this._socketAuth.isAuthenticated)throw new d.default("Not authenticated.",this);const r=new ArrayBuffer(s.length+2),n=new Uint8Array(r);return n[0]=e,n[1]=parseInt(t),n.set(s,2),this._emit(1,n)}_getChannel(e,t){const s=""+e+t;return!this._channels.has(s)&&this._socket&&this._channels.set(s,new a.default(s,this,this._socket)),this._channels.get(s)}_connect(){return new Promise(((e,t)=>{const s=this._setupSocket();!this.socketId&&s.io.on("reconnect_error",(()=>{this._reconnectionAttemptError(t)})),s.once("connect",(async()=>{try{await this._onConnect(),e()}catch(e){t(e)}})),s.connect()}))}_setupSocket(){var e;if(this._socket)return this._socket;const t=this._url.port||("http:"===this._url.protocol?80:443),s=(this._url.protocol||"https:")+"//"+this._url.hostname+":"+t,r=this._connectionProvider(s,{parser:{Encoder:l.Encoder,Decoder:l.Decoder},path:"/ws-v2/ws",transports:["websocket"],timeout:void 0!==this._options.timeout?this._options.timeout:5e3,reconnection:void 0===this._options.autoReconnect||this._options.autoReconnect,reconnectionDelay:1e3,reconnectionDelayMax:5e3,rejectUnauthorized:void 0===this._options.rejectUnauthorized||this._options.rejectUnauthorized,query:{version:u.default},agent:null!==(e=this._options.agent)&&void 0!==e&&e});return this.state=f.CONNECTING,r.on("connect",(()=>{this.socketId=r.id})),r.on("connect_error",this._onError.bind(this)),r.on("disconnect",this._onDisconnect.bind(this)),r.io.on("reconnect",this._onReconnect.bind(this)),r.io.on("reconnect_attempt",(e=>{this.state=f.CONNECTING,this._connectionAttempt=e})),r.on("unauthorized",this._onUnauthorized.bind(this)),this._socket=r,r}_emit(e,t){const s=this._socket;return this._requestsManager.send((r=>{s.emit(e,t,((e,t)=>{if(e)return r.error(d.default.fromPublicError(e,this));r.response(t)}))}),this._options.requestTimeout)}_addAuthData(e,t){this._socketAuth={environmentId:e,userId:t,isAuthenticated:!0}}_removeAuthData(){this._socketAuth=void 0}async _onConnect(){await this._authenticate(this._token.value),this.state=f.CONNECTED;const e=async(e,t,s)=>{try{await this._authenticate(s)}catch(e){}};this._token.on("change:value",e),this._socket.io.off("reconnect_error"),this.on("disconnect",(()=>{this._token.off("change:value",e)}))}async _onReconnect(){await this._token.refreshToken(),await this._onConnect()}_onDisconnect(){this.state=f.DISCONNECTED,this._connectionAttempt=0,this.fire("disconnect");for(const e of this._channels.values())e.remove();this._channels.clear(),void 0===this._options.autoReconnect||this._options.autoReconnect||(this._socket=void 0)}_onError(e){console.warn("Connection to WebSocket server failed. Details: ",{originalError:e})}_reconnectionAttemptError(e){this._connectionAttempt>=2&&(this.disconnect(),e(new d.default("The number of initial connection attempts exceeded.")))}_onUnauthorized({error:e}){this._removeAuthData(),this.fire("error",d.default.fromPublicError(e,this))}async _authenticate(e){try{const t=await this._emit(2,{token:e});this._addAuthData(t.environmentId,t.userId)}catch(e){throw this._removeAuthData(),e}}}y.STATE_DISCONNECTED=f.DISCONNECTED,y.STATE_CONNECTING=f.CONNECTING,y.STATE_CONNECTED=f.CONNECTED,y._CHANGE_STATE_EVENT_PRIORITY=o.priorities.get("highest")+999999,(0,o.mix)(y,o.ObservableMixin),t.default=y},9933:(e,t,s)=>{"use strict";e.exports=s(6386)},2777:(e,t,s)=>{"use strict";var r=t,n=s(238),i=s(7886);function o(e,t,s,r){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(d%s){",r);for(var i=t.resolvedType.values,o=Object.keys(i),a=0;a<o.length;++a)t.repeated&&i[o[a]]===t.typeDefault&&e("default:"),e("case%j:",o[a])("case %i:",i[o[a]])("m%s=%j",r,i[o[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,s,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,s,r){if(t.resolvedType)t.resolvedType instanceof n?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,s,r,r):e("d%s=types[%i].toObject(m%s,o)",r,s,r);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,i?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,s=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return s("return new this.ctor");s("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),c=i.safeProp(a.name);a.map?(s("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(s,a,r,c+"[ks[i]]")("}")("}")):a.repeated?(s("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(s,a,r,c+"[i]")("}")("}")):(a.resolvedType instanceof n||s("if(d%s!=null){",c),o(s,a,r,c),a.resolvedType instanceof n||s("}"))}return s("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var s=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],o=[],c=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?r:t[u].map?o:c).push(t[u]);if(r.length){for(s("if(o.arrays||o.defaults){"),u=0;u<r.length;++u)s("d%s=[]",i.safeProp(r[u].name));s("}")}if(o.length){for(s("if(o.objects||o.defaults){"),u=0;u<o.length;++u)s("d%s={}",i.safeProp(o[u].name));s("}")}if(c.length){for(s("if(o.defaults){"),u=0;u<c.length;++u){var d=c[u],l=i.safeProp(d.name);if(d.resolvedType instanceof n)s("d%s=o.enums===String?%j:%j",l,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)s("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var h="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";s("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",l,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else s("d%s=%j",l,d.typeDefault)}s("}")}var f=!1;for(u=0;u<t.length;++u){d=t[u];var p=e._fieldsArray.indexOf(d);l=i.safeProp(d.name);d.map?(f||(f=!0,s("var ks2")),s("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),a(s,d,p,l+"[ks2[j]]")("}")):d.repeated?(s("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),a(s,d,p,l+"[j]")("}")):(s("if(m%s!=null&&m.hasOwnProperty(%j)){",l,d.name),a(s,d,p,l),d.partOf&&s("if(o.oneofs)")("d%s=%j",i.safeProp(d.partOf.name),d.name)),s("}")}return s("return d")}},8159:(e,t,s)=>{"use strict";e.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var s=0;s<e.fieldsArray.length;++s){var a=e._fieldsArray[s].resolve(),c=a.resolvedType instanceof r?"int32":a.type,u="m"+i.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[a.keyType]?t("k=%j",n.defaults[a.keyType]):t("k=null"),void 0!==n.defaults[c]?t("value=%j",n.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===n.basic[c]?t("value=types[%i].decode(r,r.uint32())",s):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',u):t("%s[k]=value",u)):a.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==n.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===n.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,s):t("%s.push(r.%s())",u,c)):void 0===n.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,s):t("%s=r.%s()",u,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),s=0;s<e._fieldsArray.length;++s){var d=e._fieldsArray[s];d.required&&t("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",o(d))}return t("return m")};var r=s(238),n=s(8372),i=s(7886);function o(e){return"missing required '"+e.name+"'"}},8357:(e,t,s)=>{"use strict";e.exports=function(e){for(var t,s=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(i.compareFieldsById),c=0;c<a.length;++c){var u=a[c].resolve(),d=e._fieldsArray.indexOf(u),l=u.resolvedType instanceof r?"int32":u.type,h=n.basic[l];t="m"+i.safeProp(u.name),u.map?(s("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|n.mapKey[u.keyType],u.keyType),void 0===h?s("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,t):s(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,l,t),s("}")("}")):u.repeated?(s("if(%s!=null&&%s.length){",t,t),u.packed&&void 0!==n.packed[l]?s("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",l,t)("w.ldelim()"):(s("for(var i=0;i<%s.length;++i)",t),void 0===h?o(s,u,d,t+"[i]"):s("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,l,t)),s("}")):(u.optional&&s("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,u.name),void 0===h?o(s,u,d,t):s("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,l,t))}return s("return w")};var r=s(238),n=s(8372),i=s(7886);function o(e,t,s,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",s,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",s,r,(t.id<<3|2)>>>0)}},238:(e,t,s)=>{"use strict";e.exports=o;var r=s(6913);((o.prototype=Object.create(r.prototype)).constructor=o).className="Enum";var n=s(9587),i=s(7886);function o(e,t,s,n,i){if(r.call(this,e,s),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=i||{},this.reserved=void 0,t)for(var o=Object.keys(t),a=0;a<o.length;++a)"number"==typeof t[o[a]]&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}o.fromJSON=function(e,t){var s=new o(e,t.values,t.options,t.comment,t.comments);return s.reserved=t.reserved,s},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,s){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=s||null,this},o.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)}},5263:(e,t,s)=>{"use strict";e.exports=u;var r=s(6913);((u.prototype=Object.create(r.prototype)).constructor=u).className="Field";var n,i=s(238),o=s(8372),a=s(7886),c=/^required|optional|repeated$/;function u(e,t,s,n,i,u,d){if(a.isObject(n)?(d=i,u=n,n=i=void 0):a.isObject(i)&&(d=u,u=i,i=void 0),r.call(this,e,u),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(s))throw TypeError("type must be a string");if(void 0!==n&&!c.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!a.isString(i))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=s,this.id=t,this.extend=i||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[s],this.bytes="bytes"===s,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=d}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,s){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,s)},u.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},u.d=function(e,t,s,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(n,i){a.decorateType(n.constructor).add(new u(i,e,t,s,{default:r}))}},u._configure=function(e){n=e}},6386:(e,t,s)=>{"use strict";var r=e.exports=s(2877);r.build="light",r.load=function(e,t,s){return"function"==typeof t?(s=t,t=new r.Root):t||(t=new r.Root),t.load(e,s)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=s(8357),r.decoder=s(8159),r.verifier=s(5669),r.converter=s(2777),r.ReflectionObject=s(6913),r.Namespace=s(9587),r.Root=s(6720),r.Enum=s(238),r.Type=s(396),r.Field=s(5263),r.OneOf=s(8930),r.MapField=s(6977),r.Service=s(5280),r.Method=s(9455),r.Message=s(5986),r.wrappers=s(2016),r.types=s(8372),r.util=s(7886),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},2877:(e,t,s)=>{"use strict";var r=t;function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=s(3117),r.BufferWriter=s(4766),r.Reader=s(9924),r.BufferReader=s(6515),r.util=s(4652),r.rpc=s(8607),r.roots=s(9188),r.configure=n,n()},6977:(e,t,s)=>{"use strict";e.exports=o;var r=s(5263);((o.prototype=Object.create(r.prototype)).constructor=o).className="MapField";var n=s(8372),i=s(7886);function o(e,t,s,n,o,a){if(r.call(this,e,t,n,void 0,void 0,o,a),!i.isString(s))throw TypeError("keyType must be a string");this.keyType=s,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},o.d=function(e,t,s){return"function"==typeof s?s=i.decorateType(s).name:s&&"object"==typeof s&&(s=i.decorateEnum(s).name),function(r,n){i.decorateType(r.constructor).add(new o(n,e,t,s))}}},5986:(e,t,s)=>{"use strict";e.exports=n;var r=s(4652);function n(e){if(e)for(var t=Object.keys(e),s=0;s<t.length;++s)this[t[s]]=e[t[s]]}n.create=function(e){return this.$type.create(e)},n.encode=function(e,t){return this.$type.encode(e,t)},n.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},n.decode=function(e){return this.$type.decode(e)},n.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},n.verify=function(e){return this.$type.verify(e)},n.fromObject=function(e){return this.$type.fromObject(e)},n.toObject=function(e,t){return this.$type.toObject(e,t)},n.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},9455:(e,t,s)=>{"use strict";e.exports=i;var r=s(6913);((i.prototype=Object.create(r.prototype)).constructor=i).className="Method";var n=s(7886);function i(e,t,s,i,o,a,c,u,d){if(n.isObject(o)?(c=o,o=a=void 0):n.isObject(a)&&(c=a,a=void 0),void 0!==t&&!n.isString(t))throw TypeError("type must be a string");if(!n.isString(s))throw TypeError("requestType must be a string");if(!n.isString(i))throw TypeError("responseType must be a string");r.call(this,e,c),this.type=t||"rpc",this.requestType=s,this.requestStream=!!o||void 0,this.responseType=i,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=d}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},9587:(e,t,s)=>{"use strict";e.exports=l;var r=s(6913);((l.prototype=Object.create(r.prototype)).constructor=l).className="Namespace";var n,i,o,a=s(5263),c=s(8930),u=s(7886);function d(e,t){if(e&&e.length){for(var s={},r=0;r<e.length;++r)s[e[r].name]=e[r].toJSON(t);return s}}function l(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}l.fromJSON=function(e,t){return new l(e,t.options).addJSON(t.nested)},l.arrayToJSON=d,l.isReservedId=function(e,t){if(e)for(var s=0;s<e.length;++s)if("string"!=typeof e[s]&&e[s][0]<=t&&e[s][1]>t)return!0;return!1},l.isReservedName=function(e,t){if(e)for(var s=0;s<e.length;++s)if(e[s]===t)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),l.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",d(this.nestedArray,e)])},l.prototype.addJSON=function(e){if(e)for(var t,s=Object.keys(e),r=0;r<s.length;++r)t=e[s[r]],this.add((void 0!==t.fields?n.fromJSON:void 0!==t.values?o.fromJSON:void 0!==t.methods?i.fromJSON:void 0!==t.id?a.fromJSON:l.fromJSON)(s[r],t));return this},l.prototype.get=function(e){return this.nested&&this.nested[e]||null},l.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},l.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof n||e instanceof o||e instanceof i||e instanceof l||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof l&&e instanceof l)||t instanceof n||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var s=t.nestedArray,r=0;r<s.length;++r)e.add(s[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},l.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},l.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var s=this;e.length>0;){var r=e.shift();if(s.nested&&s.nested[r]){if(!((s=s.nested[r])instanceof l))throw Error("path conflicts with non-namespace objects")}else s.add(s=new l(r))}return t&&s.addJSON(t),s},l.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof l?e[t++].resolveAll():e[t++].resolve();return this.resolve()},l.prototype.lookup=function(e,t,s){if("boolean"==typeof t?(s=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof l&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var n=0;n<this.nestedArray.length;++n)if(this._nestedArray[n]instanceof l&&(r=this._nestedArray[n].lookup(e,t,!0)))return r;return null===this.parent||s?null:this.parent.lookup(e,t)},l.prototype.lookupType=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such type: "+e);return t},l.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},l.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[n,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},l.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},l._configure=function(e,t,s){n=e,i=t,o=s}},6913:(e,t,s)=>{"use strict";e.exports=i,i.className="ReflectionObject";var r,n=s(7886);function i(e,t){if(!n.isString(e))throw TypeError("name must be a string");if(t&&!n.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},i.prototype.getOption=function(e){if(this.options)return this.options[e]},i.prototype.setOption=function(e,t,s){return s&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},i.prototype.setParsedOption=function(e,t,s){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(s){var i=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(i){var o=i[e];n.setProperty(o,s,t)}else(i={})[e]=n.setProperty({},s,t),r.push(i)}else{var a={};a[e]=t,r.push(a)}return this},i.prototype.setOptions=function(e,t){if(e)for(var s=Object.keys(e),r=0;r<s.length;++r)this.setOption(s[r],e[s[r]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){r=e}},8930:(e,t,s)=>{"use strict";e.exports=o;var r=s(6913);((o.prototype=Object.create(r.prototype)).constructor=o).className="OneOf";var n=s(5263),i=s(7886);function o(e,t,s,n){if(Array.isArray(t)||(s=t,t=void 0),r.call(this,e,s),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=n}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var s=e.get(this.oneof[t]);s&&!s.partOf&&(s.partOf=this,this.fieldsArray.push(s))}a(this)},o.prototype.onRemove=function(e){for(var t,s=0;s<this.fieldsArray.length;++s)(t=this.fieldsArray[s]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,s){i.decorateType(t.constructor).add(new o(s,e)),Object.defineProperty(t,s,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}},9924:(e,t,s)=>{"use strict";e.exports=c;var r,n=s(4652),i=n.LongBits,o=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},l=function(){return n.Buffer?function(e){return(c.create=function(e){return n.Buffer.isBuffer(e)?new r(e):d(e)})(e)}:d};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new i(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,s=this.pos+e;if(s>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,s):t===s?new this.buf.constructor(0):this._slice.call(this.buf,t,s)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=l(),r._configure();var t=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},6515:(e,t,s)=>{"use strict";e.exports=i;var r=s(9924);(i.prototype=Object.create(r.prototype)).constructor=i;var n=s(4652);function i(e){r.call(this,e)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},6720:(e,t,s)=>{"use strict";e.exports=l;var r=s(9587);((l.prototype=Object.create(r.prototype)).constructor=l).className="Root";var n,i,o,a=s(5263),c=s(238),u=s(8930),d=s(7886);function l(e){r.call(this,"",e),this.deferred=[],this.files=[]}function h(){}l.fromJSON=function(e,t){return t||(t=new l),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},l.prototype.resolvePath=d.path.resolve,l.prototype.fetch=d.fetch,l.prototype.load=function e(t,s,r){"function"==typeof s&&(r=s,s=void 0);var n=this;if(!r)return d.asPromise(e,n,t,s);var a=r===h;function c(e,t){if(r){var s=r;if(r=null,a)throw e;s(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var s=e.substring(t);if(s in o)return s}return null}function l(e,t){try{if(d.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),d.isString(t)){i.filename=e;var r,o=i(t,n,s),l=0;if(o.imports)for(;l<o.imports.length;++l)(r=u(o.imports[l])||n.resolvePath(e,o.imports[l]))&&f(r);if(o.weakImports)for(l=0;l<o.weakImports.length;++l)(r=u(o.weakImports[l])||n.resolvePath(e,o.weakImports[l]))&&f(r,!0)}else n.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||p||c(null,n)}function f(e,t){if(!(n.files.indexOf(e)>-1))if(n.files.push(e),e in o)a?l(e,o[e]):(++p,setTimeout((function(){--p,l(e,o[e])})));else if(a){var s;try{s=d.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}l(e,s)}else++p,n.fetch(e,(function(s,i){--p,r&&(s?t?p||c(null,n):c(s):l(e,i))}))}var p=0;d.isString(t)&&(t=[t]);for(var y,m=0;m<t.length;++m)(y=n.resolvePath("",t[m]))&&f(y);if(a)return n;p||c(null,n)},l.prototype.loadSync=function(e,t){if(!d.isNode)throw Error("not supported");return this.load(e,t,h)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var s=t.parent.lookup(t.extend);if(s){var r=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.declaringField=t,t.extensionField=r,s.add(r),!0}return!1}l.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||p(0,e)||this.deferred.push(e);else if(e instanceof c)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof n)for(var t=0;t<this.deferred.length;)p(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var s=0;s<e.nestedArray.length;++s)this._handleAdd(e._nestedArray[s]);f.test(e.name)&&(e.parent[e.name]=e)}},l.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var s=0;s<e.nestedArray.length;++s)this._handleRemove(e._nestedArray[s]);f.test(e.name)&&delete e.parent[e.name]}},l._configure=function(e,t,s){n=e,i=t,o=s}},9188:e=>{"use strict";e.exports={}},8607:(e,t,s)=>{"use strict";t.Service=s(8887)},8887:(e,t,s)=>{"use strict";e.exports=n;var r=s(4652);function n(e,t,s){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(s)}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,s,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return r.asPromise(e,a,t,s,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,s[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,s){if(e)return a.emit("error",e,t),o(e);if(null!==s){if(!(s instanceof n))try{s=n[a.responseDelimited?"decodeDelimited":"decode"](s)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",s,t),o(null,s)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},5280:(e,t,s)=>{"use strict";e.exports=a;var r=s(9587);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var n=s(9455),i=s(7886),o=s(8607);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var s=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),i=0;i<r.length;++i)s.add(n.fromJSON(r[i],t.methods[r[i]]));return t.nested&&s.addJSON(t.nested),s.comment=t.comment,s},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),s=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",s?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof n?(this.methods[e.name]=e,e.parent=this,c(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof n){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,s){for(var r,n=new o.Service(e,t,s),a=0;a<this.methodsArray.length;++a){var c=i.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");n[c]=i.codegen(["r","c"],i.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return n}},396:(e,t,s)=>{"use strict";e.exports=x;var r=s(9587);((x.prototype=Object.create(r.prototype)).constructor=x).className="Type";var n=s(238),i=s(8930),o=s(5263),a=s(6977),c=s(5280),u=s(5986),d=s(9924),l=s(3117),h=s(7886),f=s(8357),p=s(8159),y=s(5669),m=s(2777),v=s(2016);function x(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(x.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var s=this.fields[e[t]],r=s.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=s}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=x.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,u,!0),this._ctor=e;for(var s=0;s<this.fieldsArray.length;++s)this._fieldsArray[s].resolve();var r={};for(s=0;s<this.oneofsArray.length;++s)r[this._oneofsArray[s].resolve().name]={get:h.oneOfGetter(this._oneofsArray[s].oneof),set:h.oneOfSetter(this._oneofsArray[s].oneof)};s&&Object.defineProperties(e.prototype,r)}}}),x.generateConstructor=function(e){for(var t,s=h.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?s("this%s={}",h.safeProp(t.name)):t.repeated&&s("this%s=[]",h.safeProp(t.name));return s("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},x.fromJSON=function(e,t){var s=new x(e,t.options);s.extensions=t.extensions,s.reserved=t.reserved;for(var u=Object.keys(t.fields),d=0;d<u.length;++d)s.add((void 0!==t.fields[u[d]].keyType?a.fromJSON:o.fromJSON)(u[d],t.fields[u[d]]));if(t.oneofs)for(u=Object.keys(t.oneofs),d=0;d<u.length;++d)s.add(i.fromJSON(u[d],t.oneofs[u[d]]));if(t.nested)for(u=Object.keys(t.nested),d=0;d<u.length;++d){var l=t.nested[u[d]];s.add((void 0!==l.id?o.fromJSON:void 0!==l.fields?x.fromJSON:void 0!==l.values?n.fromJSON:void 0!==l.methods?c.fromJSON:r.fromJSON)(u[d],l))}return t.extensions&&t.extensions.length&&(s.extensions=t.extensions),t.reserved&&t.reserved.length&&(s.reserved=t.reserved),t.group&&(s.group=!0),t.comment&&(s.comment=t.comment),s},x.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),s=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",s?this.comment:void 0])},x.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var s=this.oneofsArray;for(t=0;t<s.length;)s[t++].resolve();return r.prototype.resolveAll.call(this)},x.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},x.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),_(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),_(this)):r.prototype.add.call(this,e)},x.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),_(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),_(this)}return r.prototype.remove.call(this,e)},x.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},x.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},x.prototype.create=function(e){return new this.ctor(e)},x.prototype.setup=function(){for(var e=this.fullName,t=[],s=0;s<this.fieldsArray.length;++s)t.push(this._fieldsArray[s].resolve().resolvedType);this.encode=f(this)({Writer:l,types:t,util:h}),this.decode=p(this)({Reader:d,types:t,util:h}),this.verify=y(this)({types:t,util:h}),this.fromObject=m.fromObject(this)({types:t,util:h}),this.toObject=m.toObject(this)({types:t,util:h});var r=v[e];if(r){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(n),n.toObject=this.toObject,this.toObject=r.toObject.bind(n)}return this},x.prototype.encode=function(e,t){return this.setup().encode(e,t)},x.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},x.prototype.decode=function(e,t){return this.setup().decode(e,t)},x.prototype.decodeDelimited=function(e){return e instanceof d||(e=d.create(e)),this.decode(e,e.uint32())},x.prototype.verify=function(e){return this.setup().verify(e)},x.prototype.fromObject=function(e){return this.setup().fromObject(e)},x.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},x.d=function(e){return function(t){h.decorateType(t,e)}}},8372:(e,t,s)=>{"use strict";var r=t,n=s(7886),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var s=0,r={};for(t|=0;s<e.length;)r[i[s+t]]=e[s++];return r}r.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),r.long=o([0,0,0,1,1],7),r.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},7886:(e,t,s)=>{"use strict";var r,n,i=e.exports=s(4652),o=s(9188);i.codegen=s(6348),i.fetch=s(7803),i.path=s(1272),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),s=new Array(t.length),r=0;r<t.length;)s[r]=e[t[r++]];return s}return[]},i.toObject=function(e){for(var t={},s=0;s<e.length;){var r=e[s++],n=e[s++];void 0!==n&&(t[r]=n)}return t};var a=/\\/g,c=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(i.decorateRoot.remove(e.$type),e.$type.name=t,i.decorateRoot.add(e.$type)),e.$type;r||(r=s(396));var n=new r(t||e.name);return i.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:!1}),n};var d=0;i.decorateEnum=function(e){if(e.$type)return e.$type;n||(n=s(238));var t=new n("Enum"+d++,e);return i.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},i.setProperty=function(e,t,s){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,s,r){var n=s.shift();if("__proto__"===n)return t;if(s.length>0)t[n]=e(t[n]||{},s,r);else{var i=t[n];i&&(r=[].concat(i).concat(r)),t[n]=r}return t}(e,t=t.split("."),s)},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(s(6720)))}})},7658:(e,t,s)=>{"use strict";e.exports=n;var r=s(4652);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var s=e>>>0,r=(e-s)/4294967296>>>0;return t&&(r=~r>>>0,s=~s>>>0,++s>4294967295&&(s=0,++r>4294967295&&(r=0))),new n(s,r)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(r.isString(e)){if(!r.Long)return n.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,s=~this.hi>>>0;return t||(s=s+1>>>0),-(t+4294967296*s)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===o?i:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return 0===s?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:s<128?9:10}},4652:function(e,t,s){"use strict";var r=t;function n(e,t,s){for(var r=Object.keys(t),n=0;n<r.length;++n)void 0!==e[r[n]]&&s||(e[r[n]]=t[r[n]]);return e}function i(e){function t(e,s){if(!(this instanceof t))return new t(e,s);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),s&&n(this,s)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=s(537),r.base64=s(9745),r.EventEmitter=s(4459),r.float=s(897),r.inquire=s(3229),r.utf8=s(113),r.pool=s(7986),r.LongBits=s(7658),r.isNode=Boolean(void 0!==s.g&&s.g&&s.g.process&&s.g.process.versions&&s.g.process.versions.node),r.global=r.isNode&&s.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var s=e[t];return!(null==s||!e.hasOwnProperty(t))&&("object"!=typeof s||(Array.isArray(s)?s.length:Object.keys(s).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var s=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(s.lo,s.hi,t):s.toNumber(Boolean(t))},r.merge=n,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},s=0;s<e.length;++s)t[e[s]]=1;return function(){for(var e=Object.keys(this),s=e.length-1;s>-1;--s)if(1===t[e[s]]&&void 0!==this[e[s]]&&null!==this[e[s]])return e[s]}},r.oneOfSetter=function(e){return function(t){for(var s=0;s<e.length;++s)e[s]!==t&&delete this[e[s]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,s){return new e(t,s)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},5669:(e,t,s)=>{"use strict";e.exports=function(e){var t=n.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),s=e.oneofsArray,r={};s.length&&t("var p={}");for(var c=0;c<e.fieldsArray.length;++c){var u=e._fieldsArray[c].resolve(),d="m"+n.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",d,u.name),u.map)t("if(!util.isObject(%s))",d)("return%j",i(u,"object"))("var k=Object.keys(%s)",d)("for(var i=0;i<k.length;++i){"),a(t,u,"k[i]"),o(t,u,c,d+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",d)("return%j",i(u,"array"))("for(var i=0;i<%s.length;++i){",d),o(t,u,c,d+"[i]")("}");else{if(u.partOf){var l=n.safeProp(u.partOf.name);1===r[u.partOf.name]&&t("if(p%s===1)",l)("return%j",u.partOf.name+": multiple values"),r[u.partOf.name]=1,t("p%s=1",l)}o(t,u,c,d)}u.optional&&t("}")}return t("return null")};var r=s(238),n=s(7886);function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,s,n){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",n)("default:")("return%j",i(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",s,n)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",n)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',n)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',n)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",n)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",i(t,"buffer"))}return e}function a(e,t,s){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",s)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",s)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",s)("return%j",i(t,"boolean key"))}return e}},2016:(e,t,s)=>{"use strict";var r=t,n=s(5986);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),s=this.lookup(t);if(s){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:s.encode(s.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var s="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),s=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var i=this.lookup(r);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof n){var o=e.$type.toObject(e,t);return""===s&&(s="type.googleapis.com/"),r=s+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),o["@type"]=r,o}return this.toObject(e,t)}}},3117:(e,t,s)=>{"use strict";e.exports=l;var r,n=s(4652),i=n.LongBits,o=n.base64,a=n.utf8;function c(e,t,s){this.fn=e,this.len=t,this.next=void 0,this.val=s}function u(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function l(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(l.create=function(){return new r})()}:function(){return new l}};function f(e,t,s){t[s]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,s){for(;e.hi;)t[s++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[s++]=127&e.lo|128,e.lo=e.lo>>>7;t[s++]=e.lo}function m(e,t,s){t[s]=255&e,t[s+1]=e>>>8&255,t[s+2]=e>>>16&255,t[s+3]=e>>>24}l.create=h(),l.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(l.alloc=n.pool(l.alloc,n.Array.prototype.subarray)),l.prototype._push=function(e,t,s){return this.tail=this.tail.next=new c(e,t,s),this.len+=t,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(e,t,s){for(;e>127;)t[s++]=127&e|128,e>>>=7;t[s]=e},l.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},l.prototype.int32=function(e){return e<0?this._push(y,10,i.fromNumber(e)):this.uint32(e)},l.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},l.prototype.uint64=function(e){var t=i.from(e);return this._push(y,t.length(),t)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(y,t.length(),t)},l.prototype.bool=function(e){return this._push(f,1,e?1:0)},l.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(e){var t=i.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},l.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var v=n.Array.prototype.set?function(e,t,s){t.set(e,s)}:function(e,t,s){for(var r=0;r<e.length;++r)t[s+r]=e[r]};l.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(n.isString(e)){var s=l.alloc(t=o.length(e));o.decode(e,s,0),e=s}return this.uint32(t)._push(v,t,e)},l.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},l.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(u,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},l.prototype.ldelim=function(){var e=this.head,t=this.tail,s=this.len;return this.reset().uint32(s),s&&(this.tail.next=e.next,this.tail=t,this.len+=s),this},l.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),s=0;e;)e.fn(e.val,t,s),s+=e.len,e=e.next;return t},l._configure=function(e){r=e,l.create=h(),r._configure()}},4766:(e,t,s)=>{"use strict";e.exports=i;var r=s(3117);(i.prototype=Object.create(r.prototype)).constructor=i;var n=s(4652);function i(){r.call(this)}function o(e,t,s){e.length<40?n.utf8.write(e,t,s):t.utf8Write?t.utf8Write(e,s):t.write(e,s)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,s){t.set(e,s)}:function(e,t,s){if(e.copy)e.copy(t,s,0,e.length);else for(var r=0;r<e.length;)t[s++]=e[r++]}},i.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()},537:e=>{"use strict";e.exports=function(e,t){var s=new Array(arguments.length-1),r=0,n=2,i=!0;for(;n<arguments.length;)s[r++]=arguments[n++];return new Promise((function(n,o){s[r]=function(e){if(i)if(i=!1,e)o(e);else{for(var t=new Array(arguments.length-1),s=0;s<t.length;)t[s++]=arguments[s];n.apply(null,t)}};try{e.apply(t||null,s)}catch(e){i&&(i=!1,o(e))}}))}},9745:(e,t)=>{"use strict";var s=t;s.length=function(e){var t=e.length;if(!t)return 0;for(var s=0;--t%4>1&&"="===e.charAt(t);)++s;return Math.ceil(3*e.length)/4-s};for(var r=new Array(64),n=new Array(123),i=0;i<64;)n[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;s.encode=function(e,t,s){for(var n,i=null,o=[],a=0,c=0;t<s;){var u=e[t++];switch(c){case 0:o[a++]=r[u>>2],n=(3&u)<<4,c=1;break;case 1:o[a++]=r[n|u>>4],n=(15&u)<<2,c=2;break;case 2:o[a++]=r[n|u>>6],o[a++]=r[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=r[n],o[a++]=61,1===c&&(o[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";s.decode=function(e,t,s){for(var r,i=s,a=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=n[u]))throw Error(o);switch(a){case 0:r=u,a=1;break;case 1:t[s++]=r<<2|(48&u)>>4,r=u,a=2;break;case 2:t[s++]=(15&r)<<4|(60&u)>>2,r=u,a=3;break;case 3:t[s++]=(3&r)<<6|u,a=0}}if(1===a)throw Error(o);return s-i},s.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},6348:e=>{"use strict";function t(e,s){"string"==typeof e&&(s=e,e=void 0);var r=[];function n(e){if("string"!=typeof e){var s=i();if(t.verbose&&console.log("codegen: "+s),s="return "+s,e){for(var o=Object.keys(e),a=new Array(o.length+1),c=new Array(o.length),u=0;u<o.length;)a[u]=o[u],c[u]=e[o[u++]];return a[u]=s,Function.apply(null,a).apply(null,c)}return Function(s)()}for(var d=new Array(arguments.length-1),l=0;l<d.length;)d[l]=arguments[++l];if(l=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var s=d[l++];switch(t){case"d":case"f":return String(Number(s));case"i":return String(Math.floor(s));case"j":return JSON.stringify(s);case"s":return String(s)}return"%"})),l!==d.length)throw Error("parameter count mismatch");return r.push(e),n}function i(t){return"function "+(t||s||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return n.toString=i,n}e.exports=t,t.verbose=!1},4459:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,s){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:s||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var s=this._listeners[e],r=0;r<s.length;)s[r].fn===t?s.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var s=[],r=1;r<arguments.length;)s.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,s)}return this}},7803:(e,t,s)=>{"use strict";e.exports=i;var r=s(537),n=s(3229)("fs");function i(e,t,s){return"function"==typeof t?(s=t,t={}):t||(t={}),s?!t.xhr&&n&&n.readFile?n.readFile(e,(function(r,n){return r&&"undefined"!=typeof XMLHttpRequest?i.xhr(e,t,s):r?s(r):s(null,t.binary?n:n.toString("utf8"))})):i.xhr(e,t,s):r(i,this,e,t)}i.xhr=function(e,t,s){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return s(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var n=0;n<r.responseText.length;++n)e.push(255&r.responseText.charCodeAt(n))}return s(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return s(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},897:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),s=new Uint8Array(t.buffer),r=128===s[3];function n(e,r,n){t[0]=e,r[n]=s[0],r[n+1]=s[1],r[n+2]=s[2],r[n+3]=s[3]}function i(e,r,n){t[0]=e,r[n]=s[3],r[n+1]=s[2],r[n+2]=s[1],r[n+3]=s[0]}function o(e,r){return s[0]=e[r],s[1]=e[r+1],s[2]=e[r+2],s[3]=e[r+3],t[0]}function a(e,r){return s[3]=e[r],s[2]=e[r+1],s[1]=e[r+2],s[0]=e[r+3],t[0]}e.writeFloatLE=r?n:i,e.writeFloatBE=r?i:n,e.readFloatLE=r?o:a,e.readFloatBE=r?a:o}():function(){function t(e,t,s,r){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,s,r);else if(isNaN(t))e(2143289344,s,r);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,s,r);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,s,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((n<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,s,r)}}function o(e,t,s){var r=e(t,s),n=2*(r>>31)+1,i=r>>>23&255,o=8388607&r;return 255===i?o?NaN:n*(1/0):0===i?1401298464324817e-60*n*o:n*Math.pow(2,i-150)*(o+8388608)}e.writeFloatLE=t.bind(null,s),e.writeFloatBE=t.bind(null,r),e.readFloatLE=o.bind(null,n),e.readFloatBE=o.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),s=new Uint8Array(t.buffer),r=128===s[7];function n(e,r,n){t[0]=e,r[n]=s[0],r[n+1]=s[1],r[n+2]=s[2],r[n+3]=s[3],r[n+4]=s[4],r[n+5]=s[5],r[n+6]=s[6],r[n+7]=s[7]}function i(e,r,n){t[0]=e,r[n]=s[7],r[n+1]=s[6],r[n+2]=s[5],r[n+3]=s[4],r[n+4]=s[3],r[n+5]=s[2],r[n+6]=s[1],r[n+7]=s[0]}function o(e,r){return s[0]=e[r],s[1]=e[r+1],s[2]=e[r+2],s[3]=e[r+3],s[4]=e[r+4],s[5]=e[r+5],s[6]=e[r+6],s[7]=e[r+7],t[0]}function a(e,r){return s[7]=e[r],s[6]=e[r+1],s[5]=e[r+2],s[4]=e[r+3],s[3]=e[r+4],s[2]=e[r+5],s[1]=e[r+6],s[0]=e[r+7],t[0]}e.writeDoubleLE=r?n:i,e.writeDoubleBE=r?i:n,e.readDoubleLE=r?o:a,e.readDoubleBE=r?a:o}():function(){function t(e,t,s,r,n,i){var o=r<0?1:0;if(o&&(r=-r),0===r)e(0,n,i+t),e(1/r>0?0:2147483648,n,i+s);else if(isNaN(r))e(0,n,i+t),e(2146959360,n,i+s);else if(r>17976931348623157e292)e(0,n,i+t),e((o<<31|2146435072)>>>0,n,i+s);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,n,i+t),e((o<<31|a/4294967296)>>>0,n,i+s);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,n,i+t),e((o<<31|c+1023<<20|1048576*a&1048575)>>>0,n,i+s)}}}function o(e,t,s,r,n){var i=e(r,n+t),o=e(r,n+s),a=2*(o>>31)+1,c=o>>>20&2047,u=4294967296*(1048575&o)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,s,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=o.bind(null,n,0,4),e.readDoubleBE=o.bind(null,i,4,0)}(),e}function s(e,t,s){t[s]=255&e,t[s+1]=e>>>8&255,t[s+2]=e>>>16&255,t[s+3]=e>>>24}function r(e,t,s){t[s]=e>>>24,t[s+1]=e>>>16&255,t[s+2]=e>>>8&255,t[s+3]=255&e}function n(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},3229:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},1272:(e,t)=>{"use strict";var s=t,r=s.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},n=s.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),s=r(e),n="";s&&(n=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?i>0&&".."!==t[i-1]?t.splice(--i,2):s?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return n+t.join("/")};s.resolve=function(e,t,s){return s||(t=n(t)),r(t)?t:(s||(e=n(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?n(e+"/"+t):t)}},7986:e=>{"use strict";e.exports=function(e,t,s){var r=s||8192,n=r>>>1,i=null,o=r;return function(s){if(s<1||s>n)return e(s);o+s>r&&(i=e(r),o=0);var a=t.call(i,o,o+=s);return 7&o&&(o=1+(7|o)),a}}},113:(e,t)=>{"use strict";var s=t;s.length=function(e){for(var t=0,s=0,r=0;r<e.length;++r)(s=e.charCodeAt(r))<128?t+=1:s<2048?t+=2:55296==(64512&s)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},s.read=function(e,t,s){if(s-t<1)return"";for(var r,n=null,i=[],o=0;t<s;)(r=e[t++])<128?i[o++]=r:r>191&&r<224?i[o++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[o++]=55296+(r>>10),i[o++]=56320+(1023&r)):i[o++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,i)),o=0);return n?(o&&n.push(String.fromCharCode.apply(String,i.slice(0,o))),n.join("")):String.fromCharCode.apply(String,i.slice(0,o))},s.write=function(e,t,s){for(var r,n,i=s,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t[s++]=r:r<2048?(t[s++]=r>>6|192,t[s++]=63&r|128):55296==(64512&r)&&56320==(64512&(n=e.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&n),++o,t[s++]=r>>18|240,t[s++]=r>>12&63|128,t[s++]=r>>6&63|128,t[s++]=63&r|128):(t[s++]=r>>12|224,t[s++]=r>>6&63|128,t[s++]=63&r|128);return s-i}},3717:(e,t)=>{function s(e){if(e)return function(e){for(var t in s.prototype)e[t]=s.prototype[t];return e}(e)}t.Emitter=s,s.prototype.on=s.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},s.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<r.length;n++)if((s=r[n])===t||s.fn===t){r.splice(n,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},s.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(s){r=0;for(var n=(s=s.slice(0)).length;r<n;++r)s[r].apply(this,t)}return this},s.prototype.emitReserved=s.prototype.emit,s.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},s.prototype.hasListeners=function(e){return!!this.listeners(e).length}},7672:e=>{function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-s:e+s}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},3286:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(7758),n=s.n(r)()((function(e){return e[1]}));n.push([e.id,'.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{-webkit-backface-visibility:hidden;pointer-events:none;position:absolute}.ck.ck-tooltip{display:none;opacity:0;visibility:hidden;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";height:0;width:0}:root{--ck-color-presence-list-dropdown-background:#fff;--ck-color-presence-list-dropdown-arrow-border:#ebebeb;--ck-presence-list-dropdown-list-max-width:250px;--ck-presence-list-dropdown-list-min-width:180px;--ck-presence-list-users-tooltip-max-width:120px;--ck-presence-list-users-tooltip-min-width:25px}.ck.ck-presence-list{align-items:center;display:flex;font-size:var(--ck-font-size-base);margin-right:var(--ck-spacing-standard);transition:margin-right .2s ease-in-out}.ck.ck-presence-list *{box-sizing:border-box}.ck.ck-presence-list__list{display:flex;justify-content:flex-end}.ck.ck-presence-list__counter{color:var(--ck-color-base-text)}.ck.ck-presence-list__counter--hidden{display:none}.ck.ck-presence-list__list-item{background:none;border:0;color:inherit;font:inherit;margin-left:var(--ck-spacing-standard);outline:none;padding:0;position:relative}.ck.ck-presence-list__list-item:hover .ck-tooltip{opacity:1;visibility:visible}.ck.ck-presence-list__list-item .ck.ck-tooltip{display:block}.ck.ck-presence-list__list-item .ck-tooltip__text span{display:block;max-width:var(--ck-presence-list-users-tooltip-max-width);overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap}.ck.ck-presence-list__marker{display:block;height:3px;margin-top:3px;position:relative;width:100%}.ck.ck-presence-list--collapsed .ck-presence-list__list{margin-left:var(--ck-spacing-standard);min-width:calc(var(--ck-user-avatar-size)*1.5)}.ck.ck-presence-list--collapsed .ck-presence-list__list *{cursor:pointer;transition:all .4s ease-in-out}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item{margin-left:calc(var(--ck-user-avatar-size)*-1 + 5px)}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item .ck-tooltip{display:none}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(5){opacity:.15}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(4){opacity:.35}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(3){opacity:.55}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(2){opacity:.75}.ck.ck-presence-list__balloon{--ck-color-panel-border:var(--ck-color-presence-list-dropdown-arrow-border);--ck-color-panel-background:var(--ck-color-presence-list-dropdown-background);animation:fadeIn .3s ease-in-out;background-color:var(--ck-color-presence-list-dropdown-background);border:0;opacity:1}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-wrapper{border-radius:var(--ck-border-radius);max-height:80vh;max-width:var(--ck-presence-list-dropdown-list-max-width);min-width:var(--ck-presence-list-dropdown-list-min-width);overflow-x:hidden;overflow-y:auto}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item{align-items:center;background:none;border:0;color:inherit;display:flex;font:inherit;outline:none;padding:0;padding:var(--ck-spacing-standard);position:relative}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item:first-of-type .ck-presence-list__marker{border-top-left-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item:last-of-type .ck-presence-list__marker{border-bottom-left-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list .ck-user__full-name{color:var(--ck-color-base-text);margin-left:var(--ck-spacing-standard);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list .ck.ck-presence-list__marker{height:100%;left:0;margin:0;position:absolute;width:3px}.ck-presence-list__balloon button.ck-presence-list__dropdown-list-item *,.ck-presence-list__list button.ck-presence-list__list-item *{cursor:pointer}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}',""]);const i=n},9940:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(7758),n=s.n(r)()((function(e){return e[1]}));n.push([e.id,".ck .ck-user__marker{cursor:default;display:inline;position:relative}.ck .ck-user__marker:after{color:#fff;content:attr(data-name);display:none;font-family:Georgia,sans-serif;font-size:var(--ck-font-size-base);font-style:normal;font-weight:400;left:0;line-height:1;opacity:0;padding:var(--ck-spacing-small);position:absolute;top:-20px;transition:opacity .2s linear,transform .3s ease-in-out;white-space:nowrap;z-index:99999}.ck .ck-user__marker:hover .ck-user__marker-dot{width:0}.ck .ck-user__marker:hover:after{animation:fadeInLeft .3s ease-in-out;display:block;opacity:1}.ck .ck-user__marker-line{bottom:0;height:100%;position:absolute;width:0}.ck .ck-user__marker-dot{border-radius:50%;cursor:default;display:block;height:var(--ck-user-dot-size);left:50%;position:absolute;top:calc((var(--ck-user-dot-size)/2)*-1);transform:translate(-50%,-50%);width:var(--ck-user-dot-size)}.ck .ck-placeholder .ck-user__marker{display:none}@keyframes fadeInLeft{0%{opacity:0;transform:translateX(-10px)}to{opacity:1;transform:translateX(0)}}",""]);const i=n},7758:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=e(t);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,r){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);r&&n[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),t.push(c))}},t}},7154:e=>{var t=1e3,s=60*t,r=60*s,n=24*r,i=7*n,o=365.25*n;function a(e,t,s,r){var n=t>=1.5*s;return Math.round(e/s)+" "+r+(n?"s":"")}e.exports=function(e,c){c=c||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*n;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*s;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return c.long?function(e){var i=Math.abs(e);if(i>=n)return a(e,i,n,"day");if(i>=r)return a(e,i,r,"hour");if(i>=s)return a(e,i,s,"minute");if(i>=t)return a(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=n)return Math.round(e/n)+"d";if(i>=r)return Math.round(e/r)+"h";if(i>=s)return Math.round(e/s)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},5579:(e,t,s)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;t.splice(1,0,s,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(n=r))})),t.splice(n,0,s)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=s(3847)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},3847:(e,t,s)=>{e.exports=function(e){function t(e){let s,n,i,o=null;function a(...e){if(!a.enabled)return;const r=a,n=Number(new Date),i=n-(s||n);r.diff=i,r.prev=s,r.curr=n,s=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((s,n)=>{if("%%"===s)return"%";o++;const i=t.formatters[n];if("function"==typeof i){const t=e[o];s=i.call(r,t),e.splice(o,1),o--}return s})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,s){const r=t(this.namespace+(void 0===s?":":s)+e);return r.log=this.log,r}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let s;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(s=0;s<n;s++)r[s]&&("-"===(e=r[s].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let s,r;for(s=0,r=t.skips.length;s<r;s++)if(t.skips[s].test(e))return!1;for(s=0,r=t.names.length;s<r;s++)if(t.names[s].test(e))return!0;return!1},t.humanize=s(7154),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t),s|=0;return t.colors[Math.abs(s)%t.colors.length]},t.enable(t.load()),t}},4568:e=>{try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},9827:(e,t)=>{t.encode=function(e){var t="";for(var s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t},t.decode=function(e){for(var t={},s=e.split("&"),r=0,n=s.length;r<n;r++){var i=s[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},5977:e=>{var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var r=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));for(var o,a,c=t.exec(e||""),u={},d=14;d--;)u[s[d]]=c[d]||"";return-1!=n&&-1!=i&&(u.source=r,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=function(e,t){var s=/\/{2,9}/g,r=t.replace(s,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,u.path),u.queryKey=(o=u.query,a={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,s){t&&(a[t]=s)})),a),u}},6154:(e,t,s)=>{"use strict";e.exports=s(7278)},6274:(e,t,s)=>{"use strict";var r=t,n=s(4937),i=s(7572);function o(e,t,s,r){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(d%s){",r);for(var i=t.resolvedType.values,o=Object.keys(i),a=0;a<o.length;++a)t.repeated&&i[o[a]]===t.typeDefault&&e("default:"),e("case%j:",o[a])("case %i:",i[o[a]])("m%s=%j",r,i[o[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,s,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,s,r){if(t.resolvedType)t.resolvedType instanceof n?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,s,r,r):e("d%s=types[%i].toObject(m%s,o)",r,s,r);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,i?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,s=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return s("return new this.ctor");s("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),c=i.safeProp(a.name);a.map?(s("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(s,a,r,c+"[ks[i]]")("}")("}")):a.repeated?(s("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(s,a,r,c+"[i]")("}")("}")):(a.resolvedType instanceof n||s("if(d%s!=null){",c),o(s,a,r,c),a.resolvedType instanceof n||s("}"))}return s("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var s=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],o=[],c=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?r:t[u].map?o:c).push(t[u]);if(r.length){for(s("if(o.arrays||o.defaults){"),u=0;u<r.length;++u)s("d%s=[]",i.safeProp(r[u].name));s("}")}if(o.length){for(s("if(o.objects||o.defaults){"),u=0;u<o.length;++u)s("d%s={}",i.safeProp(o[u].name));s("}")}if(c.length){for(s("if(o.defaults){"),u=0;u<c.length;++u){var d=c[u],l=i.safeProp(d.name);if(d.resolvedType instanceof n)s("d%s=o.enums===String?%j:%j",l,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)s("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var h="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";s("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",l,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else s("d%s=%j",l,d.typeDefault)}s("}")}var f=!1;for(u=0;u<t.length;++u){d=t[u];var p=e._fieldsArray.indexOf(d);l=i.safeProp(d.name);d.map?(f||(f=!0,s("var ks2")),s("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),a(s,d,p,l+"[ks2[j]]")("}")):d.repeated?(s("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),a(s,d,p,l+"[j]")("}")):(s("if(m%s!=null&&m.hasOwnProperty(%j)){",l,d.name),a(s,d,p,l),d.partOf&&s("if(o.oneofs)")("d%s=%j",i.safeProp(d.partOf.name),d.name)),s("}")}return s("return d")}},4799:(e,t,s)=>{"use strict";e.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var s=0;s<e.fieldsArray.length;++s){var a=e._fieldsArray[s].resolve(),c=a.resolvedType instanceof r?"int32":a.type,u="m"+i.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[a.keyType]?t("k=%j",n.defaults[a.keyType]):t("k=null"),void 0!==n.defaults[c]?t("value=%j",n.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===n.basic[c]?t("value=types[%i].decode(r,r.uint32())",s):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',u):t("%s[k]=value",u)):a.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==n.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===n.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,s):t("%s.push(r.%s())",u,c)):void 0===n.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,s):t("%s=r.%s()",u,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),s=0;s<e._fieldsArray.length;++s){var d=e._fieldsArray[s];d.required&&t("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",o(d))}return t("return m")};var r=s(4937),n=s(8997),i=s(7572);function o(e){return"missing required '"+e.name+"'"}},6382:(e,t,s)=>{"use strict";e.exports=function(e){for(var t,s=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(i.compareFieldsById),c=0;c<a.length;++c){var u=a[c].resolve(),d=e._fieldsArray.indexOf(u),l=u.resolvedType instanceof r?"int32":u.type,h=n.basic[l];t="m"+i.safeProp(u.name),u.map?(s("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|n.mapKey[u.keyType],u.keyType),void 0===h?s("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,t):s(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,l,t),s("}")("}")):u.repeated?(s("if(%s!=null&&%s.length){",t,t),u.packed&&void 0!==n.packed[l]?s("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",l,t)("w.ldelim()"):(s("for(var i=0;i<%s.length;++i)",t),void 0===h?o(s,u,d,t+"[i]"):s("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,l,t)),s("}")):(u.optional&&s("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,u.name),void 0===h?o(s,u,d,t):s("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,l,t))}return s("return w")};var r=s(4937),n=s(8997),i=s(7572);function o(e,t,s,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",s,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",s,r,(t.id<<3|2)>>>0)}},4937:(e,t,s)=>{"use strict";e.exports=o;var r=s(4154);((o.prototype=Object.create(r.prototype)).constructor=o).className="Enum";var n=s(512),i=s(7572);function o(e,t,s,n,i){if(r.call(this,e,s),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=i||{},this.reserved=void 0,t)for(var o=Object.keys(t),a=0;a<o.length;++a)"number"==typeof t[o[a]]&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}o.fromJSON=function(e,t){var s=new o(e,t.values,t.options,t.comment,t.comments);return s.reserved=t.reserved,s},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,s){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=s||null,this},o.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)}},5891:(e,t,s)=>{"use strict";e.exports=u;var r=s(4154);((u.prototype=Object.create(r.prototype)).constructor=u).className="Field";var n,i=s(4937),o=s(8997),a=s(7572),c=/^required|optional|repeated$/;function u(e,t,s,n,i,u,d){if(a.isObject(n)?(d=i,u=n,n=i=void 0):a.isObject(i)&&(d=u,u=i,i=void 0),r.call(this,e,u),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(s))throw TypeError("type must be a string");if(void 0!==n&&!c.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!a.isString(i))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=s,this.id=t,this.extend=i||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[s],this.bytes="bytes"===s,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=d}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,s){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,s)},u.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},u.d=function(e,t,s,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(n,i){a.decorateType(n.constructor).add(new u(i,e,t,s,{default:r}))}},u._configure=function(e){n=e}},7278:(e,t,s)=>{"use strict";var r=e.exports=s(3278);r.build="light",r.load=function(e,t,s){return"function"==typeof t?(s=t,t=new r.Root):t||(t=new r.Root),t.load(e,s)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=s(6382),r.decoder=s(4799),r.verifier=s(8600),r.converter=s(6274),r.ReflectionObject=s(4154),r.Namespace=s(512),r.Root=s(2613),r.Enum=s(4937),r.Type=s(4560),r.Field=s(5891),r.OneOf=s(3044),r.MapField=s(8911),r.Service=s(877),r.Method=s(4935),r.Message=s(4777),r.wrappers=s(3375),r.types=s(8997),r.util=s(7572),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},3278:(e,t,s)=>{"use strict";var r=t;function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=s(2944),r.BufferWriter=s(2178),r.Reader=s(9867),r.BufferReader=s(2676),r.util=s(4155),r.rpc=s(3290),r.roots=s(284),r.configure=n,n()},8911:(e,t,s)=>{"use strict";e.exports=o;var r=s(5891);((o.prototype=Object.create(r.prototype)).constructor=o).className="MapField";var n=s(8997),i=s(7572);function o(e,t,s,n,o,a){if(r.call(this,e,t,n,void 0,void 0,o,a),!i.isString(s))throw TypeError("keyType must be a string");this.keyType=s,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},o.d=function(e,t,s){return"function"==typeof s?s=i.decorateType(s).name:s&&"object"==typeof s&&(s=i.decorateEnum(s).name),function(r,n){i.decorateType(r.constructor).add(new o(n,e,t,s))}}},4777:(e,t,s)=>{"use strict";e.exports=n;var r=s(4155);function n(e){if(e)for(var t=Object.keys(e),s=0;s<t.length;++s)this[t[s]]=e[t[s]]}n.create=function(e){return this.$type.create(e)},n.encode=function(e,t){return this.$type.encode(e,t)},n.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},n.decode=function(e){return this.$type.decode(e)},n.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},n.verify=function(e){return this.$type.verify(e)},n.fromObject=function(e){return this.$type.fromObject(e)},n.toObject=function(e,t){return this.$type.toObject(e,t)},n.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},4935:(e,t,s)=>{"use strict";e.exports=i;var r=s(4154);((i.prototype=Object.create(r.prototype)).constructor=i).className="Method";var n=s(7572);function i(e,t,s,i,o,a,c,u,d){if(n.isObject(o)?(c=o,o=a=void 0):n.isObject(a)&&(c=a,a=void 0),void 0!==t&&!n.isString(t))throw TypeError("type must be a string");if(!n.isString(s))throw TypeError("requestType must be a string");if(!n.isString(i))throw TypeError("responseType must be a string");r.call(this,e,c),this.type=t||"rpc",this.requestType=s,this.requestStream=!!o||void 0,this.responseType=i,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=d}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},512:(e,t,s)=>{"use strict";e.exports=l;var r=s(4154);((l.prototype=Object.create(r.prototype)).constructor=l).className="Namespace";var n,i,o,a=s(5891),c=s(3044),u=s(7572);function d(e,t){if(e&&e.length){for(var s={},r=0;r<e.length;++r)s[e[r].name]=e[r].toJSON(t);return s}}function l(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}l.fromJSON=function(e,t){return new l(e,t.options).addJSON(t.nested)},l.arrayToJSON=d,l.isReservedId=function(e,t){if(e)for(var s=0;s<e.length;++s)if("string"!=typeof e[s]&&e[s][0]<=t&&e[s][1]>t)return!0;return!1},l.isReservedName=function(e,t){if(e)for(var s=0;s<e.length;++s)if(e[s]===t)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),l.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",d(this.nestedArray,e)])},l.prototype.addJSON=function(e){if(e)for(var t,s=Object.keys(e),r=0;r<s.length;++r)t=e[s[r]],this.add((void 0!==t.fields?n.fromJSON:void 0!==t.values?o.fromJSON:void 0!==t.methods?i.fromJSON:void 0!==t.id?a.fromJSON:l.fromJSON)(s[r],t));return this},l.prototype.get=function(e){return this.nested&&this.nested[e]||null},l.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},l.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof n||e instanceof o||e instanceof i||e instanceof l||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof l&&e instanceof l)||t instanceof n||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var s=t.nestedArray,r=0;r<s.length;++r)e.add(s[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},l.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},l.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var s=this;e.length>0;){var r=e.shift();if(s.nested&&s.nested[r]){if(!((s=s.nested[r])instanceof l))throw Error("path conflicts with non-namespace objects")}else s.add(s=new l(r))}return t&&s.addJSON(t),s},l.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof l?e[t++].resolveAll():e[t++].resolve();return this.resolve()},l.prototype.lookup=function(e,t,s){if("boolean"==typeof t?(s=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof l&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var n=0;n<this.nestedArray.length;++n)if(this._nestedArray[n]instanceof l&&(r=this._nestedArray[n].lookup(e,t,!0)))return r;return null===this.parent||s?null:this.parent.lookup(e,t)},l.prototype.lookupType=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such type: "+e);return t},l.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},l.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[n,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},l.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},l._configure=function(e,t,s){n=e,i=t,o=s}},4154:(e,t,s)=>{"use strict";e.exports=i,i.className="ReflectionObject";var r,n=s(7572);function i(e,t){if(!n.isString(e))throw TypeError("name must be a string");if(t&&!n.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},i.prototype.getOption=function(e){if(this.options)return this.options[e]},i.prototype.setOption=function(e,t,s){return s&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},i.prototype.setParsedOption=function(e,t,s){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(s){var i=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(i){var o=i[e];n.setProperty(o,s,t)}else(i={})[e]=n.setProperty({},s,t),r.push(i)}else{var a={};a[e]=t,r.push(a)}return this},i.prototype.setOptions=function(e,t){if(e)for(var s=Object.keys(e),r=0;r<s.length;++r)this.setOption(s[r],e[s[r]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){r=e}},3044:(e,t,s)=>{"use strict";e.exports=o;var r=s(4154);((o.prototype=Object.create(r.prototype)).constructor=o).className="OneOf";var n=s(5891),i=s(7572);function o(e,t,s,n){if(Array.isArray(t)||(s=t,t=void 0),r.call(this,e,s),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=n}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var s=e.get(this.oneof[t]);s&&!s.partOf&&(s.partOf=this,this.fieldsArray.push(s))}a(this)},o.prototype.onRemove=function(e){for(var t,s=0;s<this.fieldsArray.length;++s)(t=this.fieldsArray[s]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,s){i.decorateType(t.constructor).add(new o(s,e)),Object.defineProperty(t,s,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}},9867:(e,t,s)=>{"use strict";e.exports=c;var r,n=s(4155),i=n.LongBits,o=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},l=function(){return n.Buffer?function(e){return(c.create=function(e){return n.Buffer.isBuffer(e)?new r(e):d(e)})(e)}:d};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new i(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,s=this.pos+e;if(s>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,s):t===s?new this.buf.constructor(0):this._slice.call(this.buf,t,s)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=l(),r._configure();var t=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},2676:(e,t,s)=>{"use strict";e.exports=i;var r=s(9867);(i.prototype=Object.create(r.prototype)).constructor=i;var n=s(4155);function i(e){r.call(this,e)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},2613:(e,t,s)=>{"use strict";e.exports=l;var r=s(512);((l.prototype=Object.create(r.prototype)).constructor=l).className="Root";var n,i,o,a=s(5891),c=s(4937),u=s(3044),d=s(7572);function l(e){r.call(this,"",e),this.deferred=[],this.files=[]}function h(){}l.fromJSON=function(e,t){return t||(t=new l),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},l.prototype.resolvePath=d.path.resolve,l.prototype.fetch=d.fetch,l.prototype.load=function e(t,s,r){"function"==typeof s&&(r=s,s=void 0);var n=this;if(!r)return d.asPromise(e,n,t,s);var a=r===h;function c(e,t){if(r){var s=r;if(r=null,a)throw e;s(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var s=e.substring(t);if(s in o)return s}return null}function l(e,t){try{if(d.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),d.isString(t)){i.filename=e;var r,o=i(t,n,s),l=0;if(o.imports)for(;l<o.imports.length;++l)(r=u(o.imports[l])||n.resolvePath(e,o.imports[l]))&&f(r);if(o.weakImports)for(l=0;l<o.weakImports.length;++l)(r=u(o.weakImports[l])||n.resolvePath(e,o.weakImports[l]))&&f(r,!0)}else n.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||p||c(null,n)}function f(e,t){if(!(n.files.indexOf(e)>-1))if(n.files.push(e),e in o)a?l(e,o[e]):(++p,setTimeout((function(){--p,l(e,o[e])})));else if(a){var s;try{s=d.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}l(e,s)}else++p,n.fetch(e,(function(s,i){--p,r&&(s?t?p||c(null,n):c(s):l(e,i))}))}var p=0;d.isString(t)&&(t=[t]);for(var y,m=0;m<t.length;++m)(y=n.resolvePath("",t[m]))&&f(y);if(a)return n;p||c(null,n)},l.prototype.loadSync=function(e,t){if(!d.isNode)throw Error("not supported");return this.load(e,t,h)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var s=t.parent.lookup(t.extend);if(s){var r=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.declaringField=t,t.extensionField=r,s.add(r),!0}return!1}l.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||p(0,e)||this.deferred.push(e);else if(e instanceof c)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof n)for(var t=0;t<this.deferred.length;)p(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var s=0;s<e.nestedArray.length;++s)this._handleAdd(e._nestedArray[s]);f.test(e.name)&&(e.parent[e.name]=e)}},l.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var s=0;s<e.nestedArray.length;++s)this._handleRemove(e._nestedArray[s]);f.test(e.name)&&delete e.parent[e.name]}},l._configure=function(e,t,s){n=e,i=t,o=s}},284:e=>{"use strict";e.exports={}},3290:(e,t,s)=>{"use strict";t.Service=s(979)},979:(e,t,s)=>{"use strict";e.exports=n;var r=s(4155);function n(e,t,s){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(s)}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,s,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return r.asPromise(e,a,t,s,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,s[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,s){if(e)return a.emit("error",e,t),o(e);if(null!==s){if(!(s instanceof n))try{s=n[a.responseDelimited?"decodeDelimited":"decode"](s)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",s,t),o(null,s)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},877:(e,t,s)=>{"use strict";e.exports=a;var r=s(512);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var n=s(4935),i=s(7572),o=s(3290);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var s=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),i=0;i<r.length;++i)s.add(n.fromJSON(r[i],t.methods[r[i]]));return t.nested&&s.addJSON(t.nested),s.comment=t.comment,s},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),s=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",s?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof n?(this.methods[e.name]=e,e.parent=this,c(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof n){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,s){for(var r,n=new o.Service(e,t,s),a=0;a<this.methodsArray.length;++a){var c=i.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");n[c]=i.codegen(["r","c"],i.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return n}},4560:(e,t,s)=>{"use strict";e.exports=x;var r=s(512);((x.prototype=Object.create(r.prototype)).constructor=x).className="Type";var n=s(4937),i=s(3044),o=s(5891),a=s(8911),c=s(877),u=s(4777),d=s(9867),l=s(2944),h=s(7572),f=s(6382),p=s(4799),y=s(8600),m=s(6274),v=s(3375);function x(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(x.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var s=this.fields[e[t]],r=s.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=s}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=x.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,u,!0),this._ctor=e;for(var s=0;s<this.fieldsArray.length;++s)this._fieldsArray[s].resolve();var r={};for(s=0;s<this.oneofsArray.length;++s)r[this._oneofsArray[s].resolve().name]={get:h.oneOfGetter(this._oneofsArray[s].oneof),set:h.oneOfSetter(this._oneofsArray[s].oneof)};s&&Object.defineProperties(e.prototype,r)}}}),x.generateConstructor=function(e){for(var t,s=h.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?s("this%s={}",h.safeProp(t.name)):t.repeated&&s("this%s=[]",h.safeProp(t.name));return s("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},x.fromJSON=function(e,t){var s=new x(e,t.options);s.extensions=t.extensions,s.reserved=t.reserved;for(var u=Object.keys(t.fields),d=0;d<u.length;++d)s.add((void 0!==t.fields[u[d]].keyType?a.fromJSON:o.fromJSON)(u[d],t.fields[u[d]]));if(t.oneofs)for(u=Object.keys(t.oneofs),d=0;d<u.length;++d)s.add(i.fromJSON(u[d],t.oneofs[u[d]]));if(t.nested)for(u=Object.keys(t.nested),d=0;d<u.length;++d){var l=t.nested[u[d]];s.add((void 0!==l.id?o.fromJSON:void 0!==l.fields?x.fromJSON:void 0!==l.values?n.fromJSON:void 0!==l.methods?c.fromJSON:r.fromJSON)(u[d],l))}return t.extensions&&t.extensions.length&&(s.extensions=t.extensions),t.reserved&&t.reserved.length&&(s.reserved=t.reserved),t.group&&(s.group=!0),t.comment&&(s.comment=t.comment),s},x.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),s=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",s?this.comment:void 0])},x.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var s=this.oneofsArray;for(t=0;t<s.length;)s[t++].resolve();return r.prototype.resolveAll.call(this)},x.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},x.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),_(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),_(this)):r.prototype.add.call(this,e)},x.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),_(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),_(this)}return r.prototype.remove.call(this,e)},x.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},x.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},x.prototype.create=function(e){return new this.ctor(e)},x.prototype.setup=function(){for(var e=this.fullName,t=[],s=0;s<this.fieldsArray.length;++s)t.push(this._fieldsArray[s].resolve().resolvedType);this.encode=f(this)({Writer:l,types:t,util:h}),this.decode=p(this)({Reader:d,types:t,util:h}),this.verify=y(this)({types:t,util:h}),this.fromObject=m.fromObject(this)({types:t,util:h}),this.toObject=m.toObject(this)({types:t,util:h});var r=v[e];if(r){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(n),n.toObject=this.toObject,this.toObject=r.toObject.bind(n)}return this},x.prototype.encode=function(e,t){return this.setup().encode(e,t)},x.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},x.prototype.decode=function(e,t){return this.setup().decode(e,t)},x.prototype.decodeDelimited=function(e){return e instanceof d||(e=d.create(e)),this.decode(e,e.uint32())},x.prototype.verify=function(e){return this.setup().verify(e)},x.prototype.fromObject=function(e){return this.setup().fromObject(e)},x.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},x.d=function(e){return function(t){h.decorateType(t,e)}}},8997:(e,t,s)=>{"use strict";var r=t,n=s(7572),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var s=0,r={};for(t|=0;s<e.length;)r[i[s+t]]=e[s++];return r}r.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),r.long=o([0,0,0,1,1],7),r.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},7572:(e,t,s)=>{"use strict";var r,n,i=e.exports=s(4155),o=s(284);i.codegen=s(6348),i.fetch=s(7803),i.path=s(1272),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),s=new Array(t.length),r=0;r<t.length;)s[r]=e[t[r++]];return s}return[]},i.toObject=function(e){for(var t={},s=0;s<e.length;){var r=e[s++],n=e[s++];void 0!==n&&(t[r]=n)}return t};var a=/\\/g,c=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(i.decorateRoot.remove(e.$type),e.$type.name=t,i.decorateRoot.add(e.$type)),e.$type;r||(r=s(4560));var n=new r(t||e.name);return i.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:!1}),n};var d=0;i.decorateEnum=function(e){if(e.$type)return e.$type;n||(n=s(4937));var t=new n("Enum"+d++,e);return i.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},i.setProperty=function(e,t,s){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,s,r){var n=s.shift();if(s.length>0)t[n]=e(t[n]||{},s,r);else{var i=t[n];i&&(r=[].concat(i).concat(r)),t[n]=r}return t}(e,t=t.split("."),s)},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(s(2613)))}})},8950:(e,t,s)=>{"use strict";e.exports=n;var r=s(4155);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var s=e>>>0,r=(e-s)/4294967296>>>0;return t&&(r=~r>>>0,s=~s>>>0,++s>4294967295&&(s=0,++r>4294967295&&(r=0))),new n(s,r)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(r.isString(e)){if(!r.Long)return n.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,s=~this.hi>>>0;return t||(s=s+1>>>0),-(t+4294967296*s)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===o?i:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return 0===s?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:s<128?9:10}},4155:function(e,t,s){"use strict";var r=t;function n(e,t,s){for(var r=Object.keys(t),n=0;n<r.length;++n)void 0!==e[r[n]]&&s||(e[r[n]]=t[r[n]]);return e}function i(e){function t(e,s){if(!(this instanceof t))return new t(e,s);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),s&&n(this,s)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=s(537),r.base64=s(9745),r.EventEmitter=s(4459),r.float=s(897),r.inquire=s(3229),r.utf8=s(113),r.pool=s(7986),r.LongBits=s(8950),r.isNode=Boolean(void 0!==s.g&&s.g&&s.g.process&&s.g.process.versions&&s.g.process.versions.node),r.global=r.isNode&&s.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var s=e[t];return!(null==s||!e.hasOwnProperty(t))&&("object"!=typeof s||(Array.isArray(s)?s.length:Object.keys(s).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var s=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(s.lo,s.hi,t):s.toNumber(Boolean(t))},r.merge=n,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},s=0;s<e.length;++s)t[e[s]]=1;return function(){for(var e=Object.keys(this),s=e.length-1;s>-1;--s)if(1===t[e[s]]&&void 0!==this[e[s]]&&null!==this[e[s]])return e[s]}},r.oneOfSetter=function(e){return function(t){for(var s=0;s<e.length;++s)e[s]!==t&&delete this[e[s]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,s){return new e(t,s)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},8600:(e,t,s)=>{"use strict";e.exports=function(e){var t=n.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),s=e.oneofsArray,r={};s.length&&t("var p={}");for(var c=0;c<e.fieldsArray.length;++c){var u=e._fieldsArray[c].resolve(),d="m"+n.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",d,u.name),u.map)t("if(!util.isObject(%s))",d)("return%j",i(u,"object"))("var k=Object.keys(%s)",d)("for(var i=0;i<k.length;++i){"),a(t,u,"k[i]"),o(t,u,c,d+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",d)("return%j",i(u,"array"))("for(var i=0;i<%s.length;++i){",d),o(t,u,c,d+"[i]")("}");else{if(u.partOf){var l=n.safeProp(u.partOf.name);1===r[u.partOf.name]&&t("if(p%s===1)",l)("return%j",u.partOf.name+": multiple values"),r[u.partOf.name]=1,t("p%s=1",l)}o(t,u,c,d)}u.optional&&t("}")}return t("return null")};var r=s(4937),n=s(7572);function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,s,n){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",n)("default:")("return%j",i(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",s,n)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",n)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',n)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',n)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",n)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",i(t,"buffer"))}return e}function a(e,t,s){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",s)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",s)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",s)("return%j",i(t,"boolean key"))}return e}},3375:(e,t,s)=>{"use strict";var r=t,n=s(4777);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),s=this.lookup(t);if(s){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:s.encode(s.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var s="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),s=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var i=this.lookup(r);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof n){var o=e.$type.toObject(e,t);return""===s&&(s="type.googleapis.com/"),r=s+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),o["@type"]=r,o}return this.toObject(e,t)}}},2944:(e,t,s)=>{"use strict";e.exports=l;var r,n=s(4155),i=n.LongBits,o=n.base64,a=n.utf8;function c(e,t,s){this.fn=e,this.len=t,this.next=void 0,this.val=s}function u(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function l(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(l.create=function(){return new r})()}:function(){return new l}};function f(e,t,s){t[s]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,s){for(;e.hi;)t[s++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[s++]=127&e.lo|128,e.lo=e.lo>>>7;t[s++]=e.lo}function m(e,t,s){t[s]=255&e,t[s+1]=e>>>8&255,t[s+2]=e>>>16&255,t[s+3]=e>>>24}l.create=h(),l.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(l.alloc=n.pool(l.alloc,n.Array.prototype.subarray)),l.prototype._push=function(e,t,s){return this.tail=this.tail.next=new c(e,t,s),this.len+=t,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(e,t,s){for(;e>127;)t[s++]=127&e|128,e>>>=7;t[s]=e},l.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},l.prototype.int32=function(e){return e<0?this._push(y,10,i.fromNumber(e)):this.uint32(e)},l.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},l.prototype.uint64=function(e){var t=i.from(e);return this._push(y,t.length(),t)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(y,t.length(),t)},l.prototype.bool=function(e){return this._push(f,1,e?1:0)},l.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(e){var t=i.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},l.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var v=n.Array.prototype.set?function(e,t,s){t.set(e,s)}:function(e,t,s){for(var r=0;r<e.length;++r)t[s+r]=e[r]};l.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(n.isString(e)){var s=l.alloc(t=o.length(e));o.decode(e,s,0),e=s}return this.uint32(t)._push(v,t,e)},l.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},l.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(u,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},l.prototype.ldelim=function(){var e=this.head,t=this.tail,s=this.len;return this.reset().uint32(s),s&&(this.tail.next=e.next,this.tail=t,this.len+=s),this},l.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),s=0;e;)e.fn(e.val,t,s),s+=e.len,e=e.next;return t},l._configure=function(e){r=e,l.create=h(),r._configure()}},2178:(e,t,s)=>{"use strict";e.exports=i;var r=s(2944);(i.prototype=Object.create(r.prototype)).constructor=i;var n=s(4155);function i(){r.call(this)}function o(e,t,s){e.length<40?n.utf8.write(e,t,s):t.utf8Write?t.utf8Write(e,s):t.write(e,s)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,s){t.set(e,s)}:function(e,t,s){if(e.copy)e.copy(t,s,0,e.length);else for(var r=0;r<e.length;)t[s++]=e[r++]}},i.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()},1829:(e,t)=>{"use strict";var s=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function n(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,i,o=[];for(i in"string"!=typeof t&&(t="?"),e)if(s.call(e,i)){if((r=e[i])||null!=r&&!isNaN(r)||(r=""),i=n(i),r=n(r),null===i||null===r)continue;o.push(i+"="+r)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,s=/([^=?#&]+)=?([^&]*)/g,n={};t=s.exec(e);){var i=r(t[1]),o=r(t[2]);null===i||null===o||i in n||(n[i]=o)}return n}},3722:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},7594:(e,t,s)=>{"use strict";var r,n=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),o=[];function a(e){for(var t=-1,s=0;s<o.length;s++)if(o[s].identifier===e){t=s;break}return t}function c(e,t){for(var s={},r=[],n=0;n<e.length;n++){var i=e[n],c=t.base?i[0]+t.base:i[0],u=s[c]||0,d="".concat(c," ").concat(u);s[c]=u+1;var l=a(d),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==l?(o[l].references++,o[l].updater(h)):o.push({identifier:d,updater:m(h,t),references:1}),r.push(d)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var n=s.nc;n&&(r.nonce=n)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var d,l=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,s,r){var n=s?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,n);else{var i=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function f(e,t,s){var r=s.css,n=s.media,i=s.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,y=0;function m(e,t){var s,r,n;if(t.singleton){var i=y++;s=p||(p=u(t)),r=h.bind(null,s,i,!1),n=h.bind(null,s,i,!0)}else s=u(t),r=f.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var s=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<s.length;r++){var n=a(s[r]);o[n].references--}for(var i=c(e,t),u=0;u<s.length;u++){var d=a(s[u]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}s=i}}}},9655:(e,t,s)=>{"use strict";var r=s(3722),n=s(1829),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function l(e){return(e||"").toString().replace(i,"")}var h=[["#","hash"],["?","query"],function(e,t){return y(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function p(e){var t,r=("undefined"!=typeof window?window:void 0!==s.g?s.g:"undefined"!=typeof self?self:{}).location||{},n={},i=typeof(e=e||r);if("blob:"===e.protocol)n=new v(unescape(e.pathname),{});else if("string"===i)for(t in n=new v(e,{}),f)delete n[t];else if("object"===i){for(t in e)t in f||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=a.test(e.href))}return n}function y(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=(e=l(e)).replace(o,""),t=t||{};var s,r=u.exec(e),n=r[1]?r[1].toLowerCase():"",i=!!r[2],a=!!r[3],c=0;return i?a?(s=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(s=r[2]+r[4],c=r[2].length):a?(s=r[3]+r[4],c=r[3].length):s=r[4],"file:"===n?c>=2&&(s=s.slice(2)):y(n)?s=r[4]:n?i&&(s=s.slice(2)):c>=2&&y(t.protocol)&&(s=r[4]),{protocol:n,slashes:i||y(n),slashesCount:c,rest:s}}function v(e,t,s){if(e=(e=l(e)).replace(o,""),!(this instanceof v))return new v(e,t,s);var i,a,c,u,f,x,_=h.slice(),g=typeof t,b=this,w=0;for("object"!==g&&"string"!==g&&(s=t,t=null),s&&"function"!=typeof s&&(s=n.parse),i=!(a=m(e||"",t=p(t))).protocol&&!a.slashes,b.slashes=a.slashes||i&&t.slashes,b.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||d.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!y(b.protocol)))&&(_[3]=[/(.*)/,"pathname"]);w<_.length;w++)"function"!=typeof(u=_[w])?(c=u[0],x=u[1],c!=c?b[x]=e:"string"==typeof c?~(f="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof u[2]?(b[x]=e.slice(0,f),e=e.slice(f+u[2])):(b[x]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(b[x]=f[1],e=e.slice(0,f.index)),b[x]=b[x]||i&&u[3]&&t[x]||"",u[4]&&(b[x]=b[x].toLowerCase())):e=u(e,b);s&&(b.query=s(b.query)),i&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var s=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=s.length,n=s[r-1],i=!1,o=0;r--;)"."===s[r]?s.splice(r,1):".."===s[r]?(s.splice(r,1),o++):o&&(0===r&&(i=!0),s.splice(r,1),o--);return i&&s.unshift(""),"."!==n&&".."!==n||s.push(""),s.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&y(b.protocol)&&(b.pathname="/"+b.pathname),r(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(f=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,f),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(f+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&y(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}v.prototype={set:function(e,t,s){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(s||n.parse)(t)),i[e]=t;break;case"port":i[e]=t,r(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,c.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!s;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";i[e]=t.charAt(0)!==o?o+t:t}else i[e]=t;break;case"username":case"password":i[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(i.username=t.slice(0,a),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=t.slice(a+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(t))}for(var u=0;u<h.length;u++){var d=h[u];d[4]&&(i[d[1]]=i[d[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&y(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=n.stringify);var t,s=this,r=s.host,i=s.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var o=i+(s.protocol&&s.slashes||y(s.protocol)?"//":"");return s.username?(o+=s.username,s.password&&(o+=":"+s.password),o+="@"):s.password?(o+=":"+s.password,o+="@"):"file:"!==s.protocol&&y(s.protocol)&&!r&&"/"!==s.pathname&&(o+="@"),(":"===r[r.length-1]||c.test(s.hostname)&&!s.port)&&(r+=":"),o+=r+s.pathname,(t="object"==typeof s.query?e(s.query):s.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),s.hash&&(o+=s.hash),o}},v.extractProtocol=m,v.location=p,v.trimLeft=l,v.qs=n,e.exports=v},9347:e=>{"use strict";var t,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},n=0,i=0;function o(e){var t="";do{t=s[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function a(){var e=o(+new Date);return e!==t?(n=0,t=e):e+"."+o(n++)}for(;i<64;i++)r[s[i]]=i;a.encode=o,a.decode=function(e){var t=0;for(i=0;i<e.length;i++)t=64*t+r[e.charAt(i)];return t},e.exports=a},2417:(e,t,s)=>{e.exports=s(7720)("./src/collaboration-core.js")},2704:(e,t,s)=>{e.exports=s(7079)("./src/core.js")},1492:(e,t,s)=>{e.exports=s(7079)("./src/engine.js")},9273:(e,t,s)=>{e.exports=s(7079)("./src/ui.js")},2209:(e,t,s)=>{e.exports=s(7079)("./src/utils.js")},7720:e=>{"use strict";e.exports=CKEditor5.collaborationDll},7079:e=>{"use strict";e.exports=CKEditor5.dll},66:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},5769:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installTimerFunctions=t.transports=t.Transport=t.protocol=t.Socket=void 0;const r=s(1187);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return r.Socket}}),t.protocol=r.Socket.protocol;var n=s(4291);Object.defineProperty(t,"Transport",{enumerable:!0,get:function(){return n.Transport}});var i=s(6449);Object.defineProperty(t,"transports",{enumerable:!0,get:function(){return i.transports}});var o=s(102);Object.defineProperty(t,"installTimerFunctions",{enumerable:!0,get:function(){return o.installTimerFunctions}})},1187:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const n=s(6449),i=s(102),o=r(s(9827)),a=r(s(5977)),c=r(s(5579)),u=s(3717),d=s(4755),l=(0,c.default)("engine.io-client:socket");class h extends u.Emitter{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=(0,a.default)(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=(0,a.default)(t.host).host),(0,i.installTimerFunctions)(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=o.default.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){l('creating transport "%s"',e);const t=function(e){const t={};for(let s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}(this.opts.query);t.EIO=d.protocol,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return l("options: %j",s),new n.transports[e](s)}open(){let e;if(this.opts.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return l("error while creating transport: %s",e),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){l("setting transport %s",e.name),this.transport&&(l("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(e){l('probing transport "%s"',e);let t=this.createTransport(e),s=!1;h.priorWebsocketSuccess=!1;const r=()=>{s||(l('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(r=>{if(!s)if("pong"===r.type&&"probe"===r.data){if(l('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;h.priorWebsocketSuccess="websocket"===t.name,l('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{s||"closed"!==this.readyState&&(l("changing transport and sending upgrade packet"),u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{l('probe transport "%s" failed',e);const s=new Error("probe error");s.transport=t.name,this.emitReserved("upgradeError",s)}})))};function n(){s||(s=!0,u(),t.close(),t=null)}const i=s=>{const r=new Error("probe error: "+s);r.transport=t.name,n(),l('probe transport "%s" failed because of error: %s',e,s),this.emitReserved("upgradeError",r)};function o(){i("transport closed")}function a(){i("socket closed")}function c(e){t&&e.name!==t.name&&(l('"%s" works - aborting "%s"',e.name,t.name),n())}const u=()=>{t.removeListener("open",r),t.removeListener("error",i),t.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};t.once("open",r),t.once("error",i),t.once("close",o),this.once("close",a),this.once("upgrading",c),t.open()}onOpen(){if(l("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){l("starting upgrade probes");let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(l('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}else l('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(l("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(e,t,s){return this.sendPacket("message",e,t,s),this}send(e,t,s){return this.sendPacket("message",e,t,s),this}sendPacket(e,t,s,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof s&&(r=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const n={type:e,data:t,options:s};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),l("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?s():e()})):this.upgrading?s():e()),this}onError(e){l("socket error %j",e),h.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(l('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let s=0;const r=e.length;for(;s<r;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}t.Socket=h,h.protocol=d.protocol},4291:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;const n=s(4755),i=s(3717),o=s(102),a=(0,r(s(5579)).default)("engine.io-client:transport");class c extends i.Emitter{constructor(e){super(),this.writable=!1,(0,o.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const s=new Error(e);return s.type="TransportError",s.description=t,super.emit("error",s),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):a("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(e){const t=(0,n.decodePacket)(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emit("packet",e)}onClose(){this.readyState="closed",super.emit("close")}}t.Transport=c},6449:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transports=void 0;const r=s(9814),n=s(4199);t.transports={websocket:n.WS,polling:r.XHR}},9814:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.XHR=void 0;const n=r(s(4582)),i=r(s(5579)),o=r(s(66)),a=s(102),c=s(3717),u=s(3737),d=(0,i.default)("engine.io-client:polling-xhr");function l(){}const h=null!=new n.default({xdomain:!1}).responseType;class f extends u.Polling{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let s=location.port;s||(s=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=h&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new p(this.uri(),e)}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(e=>{this.onError("xhr post error",e)}))}doPoll(){d("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e=>{this.onError("xhr poll error",e)})),this.pollXhr=e}}t.XHR=f;class p extends c.Emitter{constructor(e,t){super(),(0,a.installTimerFunctions)(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=(0,a.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new n.default(e);try{d("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof t.status?t.status:0)}),0))},d("xhr data %s",this.data),t.send(this.data)}catch(e){return void this.setTimeoutFn((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&this.onData(e)}abort(){this.cleanup()}}if(t.Request=p,p.requestsCount=0,p.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",y);else if("function"==typeof addEventListener){const e="onpagehide"in o.default?"pagehide":"unload";addEventListener(e,y,!1)}function y(){for(let e in p.requests)p.requests.hasOwnProperty(e)&&p.requests[e].abort()}},3737:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Polling=void 0;const n=s(4291),i=r(s(5579)),o=r(s(9347)),a=r(s(9827)),c=s(4755),u=(0,i.default)("engine.io-client:polling");class d extends n.Transport{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{u("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(u("we are currently polling - waiting to pause"),e++,this.once("pollComplete",(function(){u("pre-pause polling complete"),--e||t()}))),this.writable||(u("we are currently writing - waiting to pause"),e++,this.once("drain",(function(){u("pre-pause writing complete"),--e||t()})))}else t()}poll(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){u("polling got data %s",e);(0,c.decodePayload)(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose(),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{u("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,c.encodePayload)(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let s="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=(0,o.default)()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(s=":"+this.opts.port);const r=a.default.encode(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(r.length?"?"+r:"")}}t.Polling=d},9233:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBinaryType=t.usingBrowserWebSocket=t.WebSocket=t.nextTick=void 0;const n=r(s(66));t.nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),t.WebSocket=n.default.WebSocket||n.default.MozWebSocket,t.usingBrowserWebSocket=!0,t.defaultBinaryType="arraybuffer"},4199:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WS=void 0;const n=s(4291),i=r(s(9827)),o=r(s(9347)),a=s(102),c=s(9233),u=r(s(5579)),d=s(4755),l=(0,u.default)("engine.io-client:websocket"),h="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class f extends n.Transport{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,s=h?{}:(0,a.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=c.usingBrowserWebSocket&&!h?t?new c.WebSocket(e,t):new c.WebSocket(e):new c.WebSocket(e,t,s)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||c.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;(0,d.encodePacket)(s,this.supportsBinary,(e=>{const t={};if(!c.usingBrowserWebSocket&&(s.options&&(t.compress=s.options.compress),this.opts.perMessageDeflate)){("string"==typeof e?Buffer.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(t.compress=!1)}try{c.usingBrowserWebSocket?this.ws.send(e):this.ws.send(e,t)}catch(e){l("websocket closed before onclose event")}r&&(0,c.nextTick)((()=>{this.writable=!0,this.emit("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let s="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(s=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=(0,o.default)()),this.supportsBinary||(e.b64=1);const r=i.default.encode(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(r.length?"?"+r:"")}check(){return!(!c.WebSocket||"__initialize"in c.WebSocket&&this.name===f.prototype.name)}}t.WS=f},4582:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(s(4568)),i=r(s(66));t.default=function(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n.default))return new XMLHttpRequest}catch(e){}if(!t)try{return new(i.default[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},102:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.installTimerFunctions=t.pick=void 0;const n=r(s(66));t.pick=function(e,...t){return t.reduce(((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t)),{})};const i=setTimeout,o=clearTimeout;t.installTimerFunctions=function(e,t){t.useNativeTimers?(e.setTimeoutFn=i.bind(n.default),e.clearTimeoutFn=o.bind(n.default)):(e.setTimeoutFn=setTimeout.bind(n.default),e.clearTimeoutFn=clearTimeout.bind(n.default))}},9782:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_PACKET=t.PACKET_TYPES_REVERSE=t.PACKET_TYPES=void 0;const s=Object.create(null);t.PACKET_TYPES=s,s.open="0",s.close="1",s.ping="2",s.pong="3",s.message="4",s.upgrade="5",s.noop="6";const r=Object.create(null);t.PACKET_TYPES_REVERSE=r,Object.keys(s).forEach((e=>{r[s[e]]=e}));t.ERROR_PACKET={type:"error",data:"parser error"}},6502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<s.length;e++)r[s.charCodeAt(e)]=e;t.encode=e=>{let t,r=new Uint8Array(e),n=r.length,i="";for(t=0;t<n;t+=3)i+=s[r[t]>>2],i+=s[(3&r[t])<<4|r[t+1]>>4],i+=s[(15&r[t+1])<<2|r[t+2]>>6],i+=s[63&r[t+2]];return n%3==2?i=i.substring(0,i.length-1)+"=":n%3==1&&(i=i.substring(0,i.length-2)+"=="),i};t.decode=e=>{let t,s,n,i,o,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);const d=new ArrayBuffer(a),l=new Uint8Array(d);for(t=0;t<c;t+=4)s=r[e.charCodeAt(t)],n=r[e.charCodeAt(t+1)],i=r[e.charCodeAt(t+2)],o=r[e.charCodeAt(t+3)],l[u++]=s<<2|n>>4,l[u++]=(15&n)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return d}},3108:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(9782),n=s(6502),i="function"==typeof ArrayBuffer,o=(e,t)=>{if(i){const s=(0,n.decode)(e);return a(s,t)}return{base64:!0,data:e}},a=(e,t)=>"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e;t.default=(e,t)=>{if("string"!=typeof e)return{type:"message",data:a(e,t)};const s=e.charAt(0);if("b"===s)return{type:"message",data:o(e.substring(1),t)};return r.PACKET_TYPES_REVERSE[s]?e.length>1?{type:r.PACKET_TYPES_REVERSE[s],data:e.substring(1)}:{type:r.PACKET_TYPES_REVERSE[s]}:r.ERROR_PACKET}},4895:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(9782),n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),i="function"==typeof ArrayBuffer,o=(e,t)=>{const s=new FileReader;return s.onload=function(){const e=s.result.split(",")[1];t("b"+e)},s.readAsDataURL(e)};t.default=({type:e,data:t},s,a)=>{return n&&t instanceof Blob?s?a(t):o(t,a):i&&(t instanceof ArrayBuffer||(c=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer))?s?a(t):o(new Blob([t]),a):a(r.PACKET_TYPES[e]+(t||""));var c}},4755:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodePayload=t.decodePacket=t.encodePayload=t.encodePacket=t.protocol=void 0;const r=s(4895);t.encodePacket=r.default;const n=s(3108);t.decodePacket=n.default;const i=String.fromCharCode(30);t.encodePayload=(e,t)=>{const s=e.length,n=new Array(s);let o=0;e.forEach(((e,a)=>{(0,r.default)(e,!1,(e=>{n[a]=e,++o===s&&t(n.join(i))}))}))};t.decodePayload=(e,t)=>{const s=e.split(i),r=[];for(let e=0;e<s.length;e++){const i=(0,n.default)(s[e],t);if(r.push(i),"error"===i.type)break}return r},t.protocol=4},8623:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.connect=t.io=t.Socket=t.Manager=t.protocol=void 0;const n=s(4197),i=s(3288);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return i.Manager}});const o=s(3232);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=r(s(5579)).default("socket.io-client"),c={};function u(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const s=n.url(e,t.path||"/socket.io"),r=s.source,o=s.id,u=s.path,d=c[o]&&u in c[o].nsps;let l;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(a("ignoring socket cache for %s",r),l=new i.Manager(r,t)):(c[o]||(a("new io instance for %s",r),c[o]=new i.Manager(r,t)),l=c[o]),s.query&&!t.query&&(t.query=s.queryKey),l.socket(s.path,t)}t.io=u,t.connect=u,t.default=u,Object.assign(u,{Manager:i.Manager,Socket:o.Socket,io:u,connect:u});var d=s(170);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return d.protocol}}),e.exports=u},3288:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const a=s(5769),c=s(3232),u=i(s(170)),d=s(6263),l=o(s(7672)),h=s(3717),f=o(s(5579)).default("socket.io-client:manager");class p extends h.Emitter{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,a.installTimerFunctions(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=t.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new l.default({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||u;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(f("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=new a.Socket(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=d.on(t,"open",(function(){s.onopen(),e&&e()})),n=d.on(t,"error",(t=>{f("error"),s.cleanup(),s._readyState="closed",this.emitReserved("error",t),e?e(t):s.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;f("connect attempt will timeout after %d",e),0===e&&r();const s=this.setTimeoutFn((()=>{f("connect attempt timed out after %d",e),r(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(r),this.subs.push(n),this}connect(e){return this.open(e)}onopen(){f("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(d.on(e,"ping",this.onping.bind(this)),d.on(e,"data",this.ondata.bind(this)),d.on(e,"error",this.onerror.bind(this)),d.on(e,"close",this.onclose.bind(this)),d.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){f("error",e),this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s||(s=new c.Socket(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const e of t){if(this.nsps[e].active)return void f("socket %s is still active, skipping close",e)}this._close()}_packet(e){f("writing packet %j",e);const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){f("cleanup"),this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){f("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){f("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();f("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const s=this.setTimeoutFn((()=>{e.skipReconnect||(f("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(f("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(f("reconnect success"),e.onreconnect())})))}),t);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}t.Manager=p},6263:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,s){return e.on(t,s),function(){e.off(t,s)}}},3232:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const n=s(170),i=s(6263),o=s(3717),a=r(s(5579)).default("socket.io-client:socket"),c=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class u extends o.Emitter{constructor(e,t,s){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[i.on(e,"open",this.onopen.bind(this)),i.on(e,"packet",this.onpacket.bind(this)),i.on(e,"error",this.onerror.bind(this)),i.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(c.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const s={type:n.PacketType.EVENT,data:t,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++;a("emitting packet with ack id %d",e);const r=t.pop();this._registerAckCallback(e,r),s.id=e}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)?a("discard packet as the transport is not currently writable"):this.connected?this.packet(s):this.sendBuffer.push(s),this.flags={},this}_registerAckCallback(e,t){const s=this.flags.timeout;if(void 0===s)return void(this.acks[e]=t);const r=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&(a("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(t,1));a("event with ack id %d has timed out after %d ms",e,s),t.call(this,new Error("operation has timed out"))}),s);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(r),t.apply(this,[null,...e])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth((e=>{this.packet({type:n.PacketType.CONNECT,data:e})})):this.packet({type:n.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){a("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case n.PacketType.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case n.PacketType.EVENT:case n.PacketType.BINARY_EVENT:this.onevent(e);break;case n.PacketType.ACK:case n.PacketType.BINARY_ACK:this.onack(e);break;case n.PacketType.DISCONNECT:this.ondisconnect();break;case n.PacketType.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];a("emitting event %j",t),null!=e.id&&(a("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let s=!1;return function(...r){s||(s=!0,a("sending ack %j",r),t.packet({type:n.PacketType.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(a("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):a("bad ack %s",e.id)}onconnect(e){a("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>this.packet(e))),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:n.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}t.Socket=u},4197:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;const n=r(s(5977)),i=r(s(5579)).default("socket.io-client:url");t.url=function(e,t="",s){let r=e;s=s||"undefined"!=typeof location&&location,null==e&&(e=s.protocol+"//"+s.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?s.protocol+e:s.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==s?s.protocol+"//"+e:"https://"+e),i("parse %s",e),r=n.default(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(s&&s.port===r.port?"":":"+r.port),r}},2830:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;const r=s(3980);function n(e,t){if(!e)return e;if(r.isBinary(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}if(Array.isArray(e)){const s=new Array(e.length);for(let r=0;r<e.length;r++)s[r]=n(e[r],t);return s}if("object"==typeof e&&!(e instanceof Date)){const s={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=n(e[r],t));return s}return e}function i(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=i(e[s],t);else if("object"==typeof e)for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=i(e[s],t));return e}t.deconstructPacket=function(e){const t=[],s=e.data,r=e;return r.data=n(s,t),r.attachments=t.length,{packet:r,buffers:t}},t.reconstructPacket=function(e,t){return e.data=i(e.data,t),e.attachments=void 0,e}},170:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const r=s(3717),n=s(2830),i=s(3980),o=s(5579).default("socket.io-parser");var a;t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(a=t.PacketType||(t.PacketType={}));t.Encoder=class{encode(e){return o("encoding packet %j",e),e.type!==a.EVENT&&e.type!==a.ACK||!i.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==a.BINARY_EVENT&&e.type!==a.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),o("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=n.deconstructPacket(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}};class c extends r.Emitter{constructor(){super()}add(e){let t;if("string"==typeof e)t=this.decodeString(e),t.type===a.BINARY_EVENT||t.type===a.BINARY_ACK?(this.reconstructor=new u(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t);else{if(!i.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(void 0===a[s.type])throw new Error("unknown packet type "+s.type);if(s.type===a.BINARY_EVENT||s.type===a.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const n=e.substring(r,t);if(n!=Number(n)||"-"!==e.charAt(t))throw new Error("Illegal attachments");s.attachments=Number(n)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}s.nsp=e.substring(r,t)}else s.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const s=e.charAt(t);if(null==s||Number(s)!=s){--t;break}if(t===e.length)break}s.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!c.isPayloadValid(s.type,r))throw new Error("invalid payload");s.data=r}return o("decoded %s as %j",e,s),s}static isPayloadValid(e,t){switch(e){case a.CONNECT:return"object"==typeof t;case a.DISCONNECT:return void 0===t;case a.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}t.Decoder=c;class u{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},3980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;const s="function"==typeof ArrayBuffer,r=Object.prototype.toString,n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function o(e){return s&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||n&&e instanceof Blob||i&&e instanceof File}t.isBinary=o,t.hasBinary=function e(t,s){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let s=0,r=t.length;s<r;s++)if(e(t[s]))return!0;return!1}if(o(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return!0;return!1}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var s=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CloudServicesCommentsAdapter:()=>Li,CloudServicesRevisionHistoryAdapter:()=>_o,CloudServicesTrackChangesAdapter:()=>Zi,PresenceList:()=>Ta,RealTimeCollaborativeComments:()=>no,RealTimeCollaborativeEditing:()=>Pi,RealTimeCollaborativeRevisionHistory:()=>Eo,RealTimeCollaborativeTrackChanges:()=>uo});var e=__webpack_require__(2704),t=__webpack_require__(2209),s=__webpack_require__(1492),r=__webpack_require__(9273),n=__webpack_require__(2417),i=__webpack_require__(7158),o=__webpack_require__.n(i);const a=["connection","websocketgateway-invalid-plugin-interface","webSocketUrl","connect","_reconnect","CloudServices","destroy","function","isInReconnectionStack","change:me","then","_reconnectionStack","delete","limitExceeded","websocketgateway-missing-websocket-url","pluginName","_domEmitter","cloudservices-init","_isBrowserOffline","connected","addToReconnectionStack","disconnected","reconnect","connecting","error","_shouldPluginsReconnect","create","state","showWarning","from","cloudservices-reconnection-error","offline","online","get","WebSocketGateway","all","plugins","listenTo","disconnect","removeFromReconnectionStack","requires","context","init","catch","Connected users limit exceeded","token"];var c,u;c=a,u=478,function(e){for(;--e;)c.push(c.shift())}(++u);const d=function(e,t){return a[e-=0]};class l extends e.ContextPlugin{static get[d("0x16")](){return[d("0x21"),r.Notification]}static get[d("0x2b")](){return d("0x10")}[d("0x18")](){const e=this[d("0x17")],s=e[d("0x12")][d("0xf")]("CloudServices"),n=e[d("0x12")].get(r.Notification);if(!s[d("0x1b")])throw new t.CKEditorError("websocketgateway-missing-token",this);if(!s.webSocketUrl)throw new t.CKEditorError(d("0x2a"),this);return this.set(d("0x9"),d("0x5")),this.set(d("0x0"),!1),this[d("0x27")]=new Set,this[d("0x7")]=!1,this[d("0x2c")]=Object[d("0x8")](t.DomEmitterMixin),this._domEmitter[d("0x13")](window,d("0xd"),(()=>this[d("0x0")]=!0)),this._domEmitter[d("0x13")](window,d("0xe"),(()=>this._isBrowserOffline=!1)),l[d("0x10")][d("0x1f")](s[d("0x1b")],s[d("0x1e")],{disconnectOnUnload:!1}).then((e=>{if(this[d("0x1c")]=e,this.bind(d("0x9")).to(e,d("0x9"),this,"_isBrowserOffline",((e,t)=>("connected"!==e&&(this[d("0x7")]=!0),t||d("0x1")!==e?d("0x3"):d("0x3")==this[d("0x9")]&&this[d("0x7")]?(this[d("0x7")]=!1,this[d("0x20")](),d("0x5")):d("0x1")))),this[d("0x1c")].on("error",((e,s)=>{if(d("0x29")!==s.code)throw console[d("0x6")](s),new t.CKEditorError(d("0x2d"),null,{originalError:s});n[d("0xa")]("The limit of maximum concurrent connections that the collaboration server can handle has been reached. Try opening the document again in a few minutes. Please contact your system administrator if the problem persists.",{title:d("0x1a"),namespace:"real-time-collaboration"})})),!e.me)return new Promise((t=>e.on(d("0x25"),t)))}))[d("0x19")]((e=>{throw console.error(e),new t.CKEditorError(d("0x2d"),null,{originalError:e})}))}[d("0x2")](e){if(d("0x23")!=typeof e[d("0x4")])throw new t.CKEditorError(d("0x1d"),this);if(this[d("0x24")](e))throw new t.CKEditorError("websocketgateway-plugin-already-registered",this,{name:e.constructor[d("0x2b")]});this[d("0x27")].add(e)}[d("0x15")](e){this._reconnectionStack[d("0x28")](e)}[d("0x24")](e){return this[d("0x27")].has(e)}[d("0x20")](){return this[d("0x1c")].reconnect()[d("0x26")]((()=>Promise[d("0x11")](Array[d("0xb")](this[d("0x27")],(e=>e.reconnect())))))[d("0x26")]((()=>this[d("0x9")]=d("0x1")))[d("0x19")]((e=>{throw console.error(e),new t.CKEditorError(d("0xc"),this[d("0x17")])}))}[d("0x22")](){this[d("0x1c")]&&this[d("0x1c")][d("0x14")](),this.state=d("0x3"),this[d("0x2c")].stopListening(),super.destroy()}}l[d("0x10")]=o(),l.initialReconnectionInterval=1e3;const h=["init","allConnectedUsers","fire","clear","listenTo","context","sessionAdd:","getUserSessions","pluginName","has","change:state","sessions-register-already-registered","_handleSessionAdd","values","delete","forEach","channelConnectedUsers","_registeredSessions","_handleSessionRemove","user","channelSessions","getUser","state","Sessions","role","connection","size","unregister","connected","get","requires","defineMe","assign","register","getUserBySessionId","set","orderNumber","addUser","plugins","_users","remove","_createUser","_uniqueUsersCount","sessions-unregister-not-exist","mySessionId","add","sessionId"];var f,p;f=h,p=349,function(e){for(;--e;)f.push(f.shift())}(++p);const y=function(e,t){return h[e-=0]};class m extends e.ContextPlugin{static get[y("0x23")](){return y("0x3")}static get[y("0xa")](){return[l,n.Users]}[y("0x1b")](){const e=this[y("0x20")],s=e[y("0x12")][y("0x9")](l);this[y("0x0")]=new Map,this[y("0x2b")]=new Map,this[y("0x1c")]=new t.Collection,this[y("0x2c")]=new Map,this[y("0x16")]=0,this._users=e[y("0x12")][y("0x9")](n.Users),this[y("0x1f")](s,y("0x25"),((e,t,s)=>{if(y("0x8")!==s)this[y("0x0")][y("0x2a")]((e=>e[y("0x1e")]())),this[y("0x2b")].forEach((e=>e[y("0x1e")]())),this.allConnectedUsers[y("0x1e")]();else for(const[e,t]of this[y("0x2c")])for(const s of t)this[y("0x27")](e,s)})),this[y("0x15")](s[y("0x5")].me,!0)}[y("0xd")](e,s){if(this[y("0x2c")][y("0x24")](e))throw new t.CKEditorError(y("0x26"),null,{channelId:e});this[y("0x2c")].set(e,s),this[y("0x0")][y("0xf")](e,new t.Collection),this[y("0x2b")].set(e,new t.Collection),this.listenTo(s,y("0x19"),((t,s)=>this[y("0x27")](e,s))),this[y("0x1f")](s,y("0x14"),((t,s)=>this[y("0x2d")](e,s)));for(const t of s)this[y("0x27")](e,t)}[y("0x7")](e){if(!this[y("0x2c")][y("0x24")](e))throw new t.CKEditorError(y("0x17"),null,{channelId:e});const s=this._registeredSessions[y("0x9")](e);this.stopListening(s);for(const t of s)y("0x8")===this[y("0x20")][y("0x12")][y("0x9")](l).state&&this[y("0x2d")](e,t);this[y("0x2c")][y("0x29")](e),this[y("0x0")][y("0x29")](e),this.channelConnectedUsers[y("0x29")](e)}get[y("0x18")](){return this[y("0x20")][y("0x12")].get(l).connection[y("0x1a")]}[y("0xe")](e){for(const t of this[y("0x0")].values())for(const s of t)if(s.id===e)return s[y("0x2e")]}getUserSessions(e,t){const s=t?[this[y("0x0")][y("0x9")](t)]:this[y("0x0")][y("0x28")](),r=new Set;for(const t of s)for(const s of t)s[y("0x2e")].id===e.id&&r[y("0x19")](s.id);return r}getUserRole(e){for(const t of this.channelSessions.values())for(const s of t)if(s[y("0x2e")]===e)return s[y("0x4")]}[y("0x27")](e,t){if(y("0x8")!==this[y("0x20")][y("0x12")][y("0x9")](l)[y("0x2")])return;const s=t[y("0x2e")],r=this._users[y("0x1")](s.id)||this[y("0x15")](s),n=Object[y("0xc")]({},t,{user:r});this.channelSessions[y("0x9")](e)[y("0x19")](n);const i=this[y("0x2b")][y("0x9")](e);i.has(r.id)||i[y("0x19")](r),this[y("0x1c")][y("0x24")](r.id)||this[y("0x1c")].add(r),this[y("0x1d")](y("0x21")+e,{channelId:e,session:n})}[y("0x2d")](e,t){if("connected"!==this[y("0x20")][y("0x12")][y("0x9")](l)[y("0x2")])return;const s=this[y("0x2b")].get(e),r=t[y("0x2e")];this[y("0x0")][y("0x9")](e).remove(t.id),s[y("0x24")](r.id)&&!this.getUserSessions(r,e)[y("0x6")]&&s[y("0x14")](r.id),this[y("0x1c")].get(r.id)&&!this[y("0x22")](r)[y("0x6")]&&this[y("0x1c")].remove(r.id)}[y("0x15")](e,t){const s=this[y("0x13")][y("0x11")](e);return t&&this._users[y("0xb")](e.id),s[y("0x10")]=this[y("0x16")]++,s}}var v=__webpack_require__(7594),x=__webpack_require__.n(v),_=__webpack_require__(9940),g={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};x()(_.Z,g);_.Z.locals;const b=["markerRange","orderNumber","clear","toDomElement","removeMarker","newRange","delete","ck-user__marker ","batch","updateMarker","end","user:range","mySessionId","update:user:range","addMarker","root","hasContent","getPositions","requires","data-session-id","setCustomProperty","$text","oldRange","getFirstRange","document","set","afterInit","view","editing","markerToElement","isCollapsed","for","markerName","isSimilar","getRange","user:range:","user:position:","markerToHighlight","commands","selection","createRange","enqueueChange","get","editor","deletionPosition","name","schema","reconvertMarker","user:position","getSelectionClass","change:range","color","model","start","size","render","rootName","contenteditable","tableCell","highest","getAttribute","parent","getUserBySessionId","conversion","change","getContainedElement","editingDowncast","markers","userPositionMarker","checkChild","isInline","toRange","isObject","plugins","startsWith","has","isLimit","split","priority","createUIElement","fromRange","$graveyard","detach","nodeAfter","undo","getCustomProperty","user:","init","pluginName"];var w,O;w=b,O=187,function(e){for(;--e;)w.push(w.shift())}(++O);const S=function(e,t){return b[e-=0]};class E extends e.Plugin{static get[S("0x9")](){return[m]}static get[S("0x4f")](){return"UserMarkers"}[S("0x4e")](){const e=this[S("0x22")],t=e.plugins.get(m);e[S("0x36")].for(S("0x39"))[S("0x14")]({model:S("0x27"),view:(s,{writer:r})=>function(e,t,s,r){const n=e[S("0x17")][S("0x44")](":")[2],i=s[S("0x35")](n);if(!i||n===s.mySessionId)return;if(!r[S("0x2b")][S("0x25")].checkChild(e[S("0x50")][S("0x2c")],S("0xc")))return;const o={class:S("0x57")+i[S("0x2a")].getMarkerClass(),"data-name":i[S("0x24")],"data-session-id":n},a=r[S("0x2b")][S("0x3a")][S("0x21")](e[S("0x17")]).getStart(),c=a[S("0x4a")],u=r[S("0x2b")][S("0x25")];if(c&&u[S("0x3f")](c)&&u[S("0x3d")](c)&&!r.model.markers[S("0x21")](S("0x1a")+n).getRange()[S("0x15")])return;const d=a[S("0x34")];r[S("0x2b")].schema[S("0x43")](d)&&!r[S("0x2b")][S("0x7")](d)&&(o[S("0x30")]=!1);const l=function(e,t){const s=e[S("0x46")]("span",t);return e[S("0xb")](S("0x3b"),!0,s),s[S("0x2e")]=function(e){const t=this[S("0x53")](e);return t.innerHTML='&#8203;<span class="ck-user__marker-line"><span class="ck-user__marker-dot"></span></span>',t},s[S("0x18")]=function(e){return this[S("0x4c")](S("0x3b"))&&e[S("0x4c")](S("0x3b"))&&this.getAttribute(S("0xa"))==e[S("0x33")]("data-session-id")},s}(t,o);return l[S("0x45")]=1e3+i[S("0x51")],l}(s,r,t,e)}),e[S("0x36")][S("0x16")](S("0x39"))[S("0x1c")]({model:S("0x2"),view:e=>function(e,t){const s=e.markerName[S("0x44")](":")[2];if(s===t[S("0x3")])return;const r=t[S("0x35")](s);return r?{id:s,classes:["ck-user__selection",r[S("0x2a")][S("0x28")]()],attributes:{"data-session-id":s},priority:2e3+r[S("0x51")]}:{id:s}}(e,t)}),function(e){const t=e[S("0x2b")],r=new Map,n=e[S("0x40")][S("0x21")](m);t[S("0x3a")].on(S("0x4"),((i,o,a,c)=>{if(!c&&r[S("0x21")](o[S("0x24")]))return r[S("0x21")](o.name)[S("0x49")](),void r[S("0x56")](o[S("0x24")]);const u=o[S("0x24")][S("0x44")](":")[2];if(u===n[S("0x3")])return;const d=S("0x1b")+u;t[S("0x3a")][S("0x42")](d)&&e[S("0x13")][S("0x26")](d),o.on(S("0x29"),((e,n,i)=>{if(S("0x48")!=n.root[S("0x2f")]&&S("0x48")==o.getRange()[S("0x6")][S("0x2f")]&&!r.has(o[S("0x24")])){const e=t[S("0x25")].getNearestSelectionRange(i[S("0x23")]);if(e){const n=s.LiveRange[S("0x47")](e);r[S("0x10")](o[S("0x24")],n),n.on("change:range",((e,s,i)=>{if(S("0x48")==n[S("0x6")][S("0x2f")]){const e=t[S("0x25")].getNearestSelectionRange(i[S("0x23")]);e?(n.start=e[S("0x2c")],n[S("0x1")]=e[S("0x1")]):(r.delete(o[S("0x24")]),n[S("0x49")]())}}))}}}))})),t[S("0xf")].on(S("0x37"),(()=>{r[S("0x2d")]>0&&t.enqueueChange({isUndoable:!1},(e=>{for(const[s,n]of r)"$graveyard"==t.markers[S("0x21")](s)[S("0x19")]()[S("0x6")].rootName&&(T(s[S("0x44")](":")[2],n[S("0x3e")](),t,e),n[S("0x49")]());r[S("0x52")]()}))}))}(e)}[S("0x11")](){const e=this[S("0x22")],t=e[S("0x1d")].get(S("0x4b"));t&&e[S("0x2b")].on("applyOperation",((s,r)=>{const n=r[0];if("marker"!=n.type||!n[S("0x24")][S("0x41")](S("0x4d")))return;const i=n[S("0x58")];t._createdBatches.has(i)&&(n[S("0x55")]=n.oldRange?e.model[S("0x1f")](n.oldRange.start,n[S("0xd")][S("0x1")]):null)}),{priority:S("0x32")})}createUserMarkerOperations(){const e=this[S("0x22")],t=e[S("0x2b")][S("0xf")],s=e.plugins[S("0x21")](m);e[S("0x2b")][S("0x20")]({isUndoable:!1},(r=>{const n=S("0x1a")+s[S("0x3")],i=S("0x1b")+s[S("0x3")],o=e[S("0x2b")].markers.has(n);e[S("0x13")][S("0x12")].hasDomSelection?T(s[S("0x3")],t[S("0x1e")][S("0xe")](),e[S("0x2b")],r):o&&(r[S("0x54")](n),r[S("0x54")](i))}))}}function T(e,t,s,r){const n=S("0x1a")+e,i=S("0x1b")+e,o=t[S("0x38")]();let a=t.start;o&&o.is("element",S("0x31"))&&(a=function(e,t){for(const s of e[S("0x8")]())if(t[S("0x25")][S("0x3c")](s,"$text"))return s}(t,s),t=r[S("0x1f")](a)),a=r[S("0x1f")](a),s[S("0x3a")][S("0x42")](n)?(r[S("0x0")](n,{range:t}),r[S("0x0")](i,{range:a})):(r[S("0x5")](n,{range:t,usingOperation:!0}),r.addMarker(i,{range:a,usingOperation:!0}))}function k(e,t,s){const r=e.t;switch(t){case"PENDING_ACTION_SENDING_DATA":return r({string:"Sending data to the server.",id:"PENDING_ACTION_SENDING_DATA"});case"The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor.":return r("The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor.");case"The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.":return r("The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.");case"The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.":return r("The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.");case"The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.":return r("The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.");case"Synchronization issue":return r("Synchronization issue");case"PENDING_ACTION_REVISION_HISTORY":return r({string:"Unsaved change in revision history.",id:"PENDING_ACTION_REVISION_HISTORY"});case"CONNECTED_USERS":return r({string:"1 connected user (me)",plural:"%0 connected users",id:"CONNECTED_USERS"},s)}}var C=__webpack_require__(9933),I=__webpack_require__.n(C);const A=function(){this.__data__=[],this.size=0};const R=function(e,t){return e===t||e!=e&&t!=t};const N=function(e,t){for(var s=e.length;s--;)if(R(e[s][0],t))return s;return-1};var j=Array.prototype.splice;const P=function(e){var t=this.__data__,s=N(t,e);return!(s<0)&&(s==t.length-1?t.pop():j.call(t,s,1),--this.size,!0)};const D=function(e){var t=this.__data__,s=N(t,e);return s<0?void 0:t[s][1]};const M=function(e){return N(this.__data__,e)>-1};const B=function(e,t){var s=this.__data__,r=N(s,e);return r<0?(++this.size,s.push([e,t])):s[r][1]=t,this};function J(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}J.prototype.clear=A,J.prototype.delete=P,J.prototype.get=D,J.prototype.has=M,J.prototype.set=B;const U=J;const V=function(){this.__data__=new U,this.size=0};const F=function(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s};const q=function(e){return this.__data__.get(e)};const L=function(e){return this.__data__.has(e)};const Y="object"==typeof global&&global&&global.Object===Object&&global;var G="object"==typeof self&&self&&self.Object===Object&&self;const z=Y||G||Function("return this")();const $=z.Symbol;var W=Object.prototype,H=W.hasOwnProperty,K=W.toString,Z=$?$.toStringTag:void 0;const X=function(e){var t=H.call(e,Z),s=e[Z];try{e[Z]=void 0;var r=!0}catch(e){}var n=K.call(e);return r&&(t?e[Z]=s:delete e[Z]),n};var Q=Object.prototype.toString;const ee=function(e){return Q.call(e)};var te=$?$.toStringTag:void 0;const se=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":te&&te in Object(e)?X(e):ee(e)};const re=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const ne=function(e){if(!re(e))return!1;var t=se(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const ie=z["__core-js_shared__"];var oe,ae=(oe=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||""))?"Symbol(src)_1."+oe:"";const ce=function(e){return!!ae&&ae in e};var ue=Function.prototype.toString;const de=function(e){if(null!=e){try{return ue.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var le=/^\[object .+?Constructor\]$/,he=Function.prototype,fe=Object.prototype,pe=he.toString,ye=fe.hasOwnProperty,me=RegExp("^"+pe.call(ye).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ve=function(e){return!(!re(e)||ce(e))&&(ne(e)?me:le).test(de(e))};const xe=function(e,t){return null==e?void 0:e[t]};const _e=function(e,t){var s=xe(e,t);return ve(s)?s:void 0};const ge=_e(z,"Map");const be=_e(Object,"create");const we=function(){this.__data__=be?be(null):{},this.size=0};const Oe=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var Se=Object.prototype.hasOwnProperty;const Ee=function(e){var t=this.__data__;if(be){var s=t[e];return"__lodash_hash_undefined__"===s?void 0:s}return Se.call(t,e)?t[e]:void 0};var Te=Object.prototype.hasOwnProperty;const ke=function(e){var t=this.__data__;return be?void 0!==t[e]:Te.call(t,e)};const Ce=function(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=be&&void 0===t?"__lodash_hash_undefined__":t,this};function Ie(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}Ie.prototype.clear=we,Ie.prototype.delete=Oe,Ie.prototype.get=Ee,Ie.prototype.has=ke,Ie.prototype.set=Ce;const Ae=Ie;const Re=function(){this.size=0,this.__data__={hash:new Ae,map:new(ge||U),string:new Ae}};const Ne=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const je=function(e,t){var s=e.__data__;return Ne(t)?s["string"==typeof t?"string":"hash"]:s.map};const Pe=function(e){var t=je(this,e).delete(e);return this.size-=t?1:0,t};const De=function(e){return je(this,e).get(e)};const Me=function(e){return je(this,e).has(e)};const Be=function(e,t){var s=je(this,e),r=s.size;return s.set(e,t),this.size+=s.size==r?0:1,this};function Je(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}Je.prototype.clear=Re,Je.prototype.delete=Pe,Je.prototype.get=De,Je.prototype.has=Me,Je.prototype.set=Be;const Ue=Je;const Ve=function(e,t){var s=this.__data__;if(s instanceof U){var r=s.__data__;if(!ge||r.length<199)return r.push([e,t]),this.size=++s.size,this;s=this.__data__=new Ue(r)}return s.set(e,t),this.size=s.size,this};function Fe(e){var t=this.__data__=new U(e);this.size=t.size}Fe.prototype.clear=V,Fe.prototype.delete=F,Fe.prototype.get=q,Fe.prototype.has=L,Fe.prototype.set=Ve;const qe=Fe;const Le=function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r&&!1!==t(e[s],s,e););return e};const Ye=function(){try{var e=_e(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();const Ge=function(e,t,s){"__proto__"==t&&Ye?Ye(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s};var ze=Object.prototype.hasOwnProperty;const $e=function(e,t,s){var r=e[t];ze.call(e,t)&&R(r,s)&&(void 0!==s||t in e)||Ge(e,t,s)};const We=function(e,t,s,r){var n=!s;s||(s={});for(var i=-1,o=t.length;++i<o;){var a=t[i],c=r?r(s[a],e[a],a,s,e):void 0;void 0===c&&(c=e[a]),n?Ge(s,a,c):$e(s,a,c)}return s};const He=function(e,t){for(var s=-1,r=Array(e);++s<e;)r[s]=t(s);return r};const Ke=function(e){return null!=e&&"object"==typeof e};const Ze=function(e){return Ke(e)&&"[object Arguments]"==se(e)};var Xe=Object.prototype,Qe=Xe.hasOwnProperty,et=Xe.propertyIsEnumerable;const tt=Ze(function(){return arguments}())?Ze:function(e){return Ke(e)&&Qe.call(e,"callee")&&!et.call(e,"callee")};const st=Array.isArray;const rt=function(){return!1};var nt="object"==typeof exports&&exports&&!exports.nodeType&&exports,it=nt&&"object"==typeof module&&module&&!module.nodeType&&module,ot=it&&it.exports===nt?z.Buffer:void 0;const at=(ot?ot.isBuffer:void 0)||rt;var ct=/^(?:0|[1-9]\d*)$/;const ut=function(e,t){var s=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==s||"symbol"!=s&&ct.test(e))&&e>-1&&e%1==0&&e<t};const dt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var lt={};lt["[object Float32Array]"]=lt["[object Float64Array]"]=lt["[object Int8Array]"]=lt["[object Int16Array]"]=lt["[object Int32Array]"]=lt["[object Uint8Array]"]=lt["[object Uint8ClampedArray]"]=lt["[object Uint16Array]"]=lt["[object Uint32Array]"]=!0,lt["[object Arguments]"]=lt["[object Array]"]=lt["[object ArrayBuffer]"]=lt["[object Boolean]"]=lt["[object DataView]"]=lt["[object Date]"]=lt["[object Error]"]=lt["[object Function]"]=lt["[object Map]"]=lt["[object Number]"]=lt["[object Object]"]=lt["[object RegExp]"]=lt["[object Set]"]=lt["[object String]"]=lt["[object WeakMap]"]=!1;const ht=function(e){return Ke(e)&&dt(e.length)&&!!lt[se(e)]};const ft=function(e){return function(t){return e(t)}};var pt="object"==typeof exports&&exports&&!exports.nodeType&&exports,yt=pt&&"object"==typeof module&&module&&!module.nodeType&&module,mt=yt&&yt.exports===pt&&Y.process;const vt=function(){try{var e=yt&&yt.require&&yt.require("util").types;return e||mt&&mt.binding&&mt.binding("util")}catch(e){}}();var xt=vt&&vt.isTypedArray;const _t=xt?ft(xt):ht;var gt=Object.prototype.hasOwnProperty;const bt=function(e,t){var s=st(e),r=!s&&tt(e),n=!s&&!r&&at(e),i=!s&&!r&&!n&&_t(e),o=s||r||n||i,a=o?He(e.length,String):[],c=a.length;for(var u in e)!t&&!gt.call(e,u)||o&&("length"==u||n&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ut(u,c))||a.push(u);return a};var wt=Object.prototype;const Ot=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||wt)};const St=function(e,t){return function(s){return e(t(s))}};const Et=St(Object.keys,Object);var Tt=Object.prototype.hasOwnProperty;const kt=function(e){if(!Ot(e))return Et(e);var t=[];for(var s in Object(e))Tt.call(e,s)&&"constructor"!=s&&t.push(s);return t};const Ct=function(e){return null!=e&&dt(e.length)&&!ne(e)};const It=function(e){return Ct(e)?bt(e):kt(e)};const At=function(e,t){return e&&We(t,It(t),e)};const Rt=function(e){var t=[];if(null!=e)for(var s in Object(e))t.push(s);return t};var Nt=Object.prototype.hasOwnProperty;const jt=function(e){if(!re(e))return Rt(e);var t=Ot(e),s=[];for(var r in e)("constructor"!=r||!t&&Nt.call(e,r))&&s.push(r);return s};const Pt=function(e){return Ct(e)?bt(e,!0):jt(e)};const Dt=function(e,t){return e&&We(t,Pt(t),e)};var Mt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bt=Mt&&"object"==typeof module&&module&&!module.nodeType&&module,Jt=Bt&&Bt.exports===Mt?z.Buffer:void 0,Ut=Jt?Jt.allocUnsafe:void 0;const Vt=function(e,t){if(t)return e.slice();var s=e.length,r=Ut?Ut(s):new e.constructor(s);return e.copy(r),r};const Ft=function(e,t){var s=-1,r=e.length;for(t||(t=Array(r));++s<r;)t[s]=e[s];return t};const qt=function(e,t){for(var s=-1,r=null==e?0:e.length,n=0,i=[];++s<r;){var o=e[s];t(o,s,e)&&(i[n++]=o)}return i};const Lt=function(){return[]};var Yt=Object.prototype.propertyIsEnumerable,Gt=Object.getOwnPropertySymbols;const zt=Gt?function(e){return null==e?[]:(e=Object(e),qt(Gt(e),(function(t){return Yt.call(e,t)})))}:Lt;const $t=function(e,t){return We(e,zt(e),t)};const Wt=function(e,t){for(var s=-1,r=t.length,n=e.length;++s<r;)e[n+s]=t[s];return e};const Ht=St(Object.getPrototypeOf,Object);const Kt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Wt(t,zt(e)),e=Ht(e);return t}:Lt;const Zt=function(e,t){return We(e,Kt(e),t)};const Xt=function(e,t,s){var r=t(e);return st(e)?r:Wt(r,s(e))};const Qt=function(e){return Xt(e,It,zt)};const es=function(e){return Xt(e,Pt,Kt)};const ts=_e(z,"DataView");const ss=_e(z,"Promise");const rs=_e(z,"Set");const ns=_e(z,"WeakMap");var is="[object Map]",os="[object Promise]",as="[object Set]",cs="[object WeakMap]",us="[object DataView]",ds=de(ts),ls=de(ge),hs=de(ss),fs=de(rs),ps=de(ns),ys=se;(ts&&ys(new ts(new ArrayBuffer(1)))!=us||ge&&ys(new ge)!=is||ss&&ys(ss.resolve())!=os||rs&&ys(new rs)!=as||ns&&ys(new ns)!=cs)&&(ys=function(e){var t=se(e),s="[object Object]"==t?e.constructor:void 0,r=s?de(s):"";if(r)switch(r){case ds:return us;case ls:return is;case hs:return os;case fs:return as;case ps:return cs}return t});const ms=ys;var vs=Object.prototype.hasOwnProperty;const xs=function(e){var t=e.length,s=new e.constructor(t);return t&&"string"==typeof e[0]&&vs.call(e,"index")&&(s.index=e.index,s.input=e.input),s};const _s=z.Uint8Array;const gs=function(e){var t=new e.constructor(e.byteLength);return new _s(t).set(new _s(e)),t};const bs=function(e,t){var s=t?gs(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)};var ws=/\w*$/;const Os=function(e){var t=new e.constructor(e.source,ws.exec(e));return t.lastIndex=e.lastIndex,t};var Ss=$?$.prototype:void 0,Es=Ss?Ss.valueOf:void 0;const Ts=function(e){return Es?Object(Es.call(e)):{}};const ks=function(e,t){var s=t?gs(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)};const Cs=function(e,t,s){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return gs(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return bs(e,s);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ks(e,s);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Os(e);case"[object Symbol]":return Ts(e)}};var Is=Object.create;const As=function(){function e(){}return function(t){if(!re(t))return{};if(Is)return Is(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}}();const Rs=function(e){return"function"!=typeof e.constructor||Ot(e)?{}:As(Ht(e))};const Ns=function(e){return Ke(e)&&"[object Map]"==ms(e)};var js=vt&&vt.isMap;const Ps=js?ft(js):Ns;const Ds=function(e){return Ke(e)&&"[object Set]"==ms(e)};var Ms=vt&&vt.isSet;const Bs=Ms?ft(Ms):Ds;var Js="[object Arguments]",Us="[object Function]",Vs="[object Object]",Fs={};Fs[Js]=Fs["[object Array]"]=Fs["[object ArrayBuffer]"]=Fs["[object DataView]"]=Fs["[object Boolean]"]=Fs["[object Date]"]=Fs["[object Float32Array]"]=Fs["[object Float64Array]"]=Fs["[object Int8Array]"]=Fs["[object Int16Array]"]=Fs["[object Int32Array]"]=Fs["[object Map]"]=Fs["[object Number]"]=Fs["[object Object]"]=Fs["[object RegExp]"]=Fs["[object Set]"]=Fs["[object String]"]=Fs["[object Symbol]"]=Fs["[object Uint8Array]"]=Fs["[object Uint8ClampedArray]"]=Fs["[object Uint16Array]"]=Fs["[object Uint32Array]"]=!0,Fs["[object Error]"]=Fs[Us]=Fs["[object WeakMap]"]=!1;const qs=function e(t,s,r,n,i,o){var a,c=1&s,u=2&s,d=4&s;if(r&&(a=i?r(t,n,i,o):r(t)),void 0!==a)return a;if(!re(t))return t;var l=st(t);if(l){if(a=xs(t),!c)return Ft(t,a)}else{var h=ms(t),f=h==Us||"[object GeneratorFunction]"==h;if(at(t))return Vt(t,c);if(h==Vs||h==Js||f&&!i){if(a=u||f?{}:Rs(t),!c)return u?Zt(t,Dt(a,t)):$t(t,At(a,t))}else{if(!Fs[h])return i?t:{};a=Cs(t,h,c)}}o||(o=new qe);var p=o.get(t);if(p)return p;o.set(t,a),Bs(t)?t.forEach((function(n){a.add(e(n,s,r,n,t,o))})):Ps(t)&&t.forEach((function(n,i){a.set(i,e(n,s,r,i,t,o))}));var y=l?void 0:(d?u?es:Qt:u?Pt:It)(t);return Le(y||t,(function(n,i){y&&(n=t[i=n]),$e(a,i,e(n,s,r,i,t,o))})),a};const Ls=function(e){return qs(e,5)},Ys=["decompress","lookupType","_description","_protobufRoot","finish","Root","_protobuf","encode","protobuffactory-cannot-get-descriptor-before-build","toObject","create","getDescriptor"];var Gs,zs;Gs=Ys,zs=176,function(e){for(;--e;)Gs.push(Gs.shift())}(++zs);const $s=function(e,t){return Ys[e-=0]};class Ws{constructor(){this[$s("0x6")]={nested:{}}}registerDescriptor(e,t){this[$s("0x6")].nested[e]=Ls(t)}build(){this[$s("0x7")]=I()[$s("0x9")].fromJSON(this[$s("0x6")])}[$s("0x3")](e){if(!this._protobufRoot)throw new t.CKEditorError($s("0x0"),this);return new Hs(this[$s("0x7")][$s("0x5")](e))}}class Hs{constructor(e){this._protobuf=e}compress(e){const t=this[$s("0xa")].verify(e);if(t)throw Error(t);return this[$s("0xa")][$s("0xb")](this._protobuf[$s("0x2")](e))[$s("0x8")]()}[$s("0x4")](e){return this[$s("0xa")][$s("0x1")](this[$s("0xa")].decode(e),{oneofs:!0})}}var Ks,Zs,Xs=["uint32","Element","Position","bool","repeated","string"];Ks=Xs,Zs=469,function(e){for(;--e;)Ks.push(Ks.shift())}(++Zs);var Qs=function(e,t){return Xs[e-=0]};const er={Position:{fields:{root:{type:Qs("0x4"),id:1},rootMain:{type:"bool",id:2},rootGraveyard:{type:Qs("0x2"),id:3},path:{rule:Qs("0x3"),type:Qs("0x5"),id:4},stickiness:{type:Qs("0x4"),id:5}}},Range:{fields:{start:{type:Qs("0x1"),id:1},end:{type:Qs("0x1"),id:2}}},Element:{fields:{name:{type:Qs("0x4"),id:1},children:{rule:Qs("0x3"),type:Qs("0x0"),id:2},data:{type:Qs("0x4"),id:3},attributesBoolean:{keyType:Qs("0x4"),type:"bool",id:4},attributesJson:{type:Qs("0x4"),id:5}}}};const tr=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const sr=function(e){return this.__data__.has(e)};function rr(e){var t=-1,s=null==e?0:e.length;for(this.__data__=new Ue;++t<s;)this.add(e[t])}rr.prototype.add=rr.prototype.push=tr,rr.prototype.has=sr;const nr=rr;const ir=function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r;)if(t(e[s],s,e))return!0;return!1};const or=function(e,t){return e.has(t)};const ar=function(e,t,s,r,n,i){var o=1&s,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var l=-1,h=!0,f=2&s?new nr:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var p=e[l],y=t[l];if(r)var m=o?r(y,p,l,t,e,i):r(p,y,l,e,t,i);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!ir(t,(function(e,t){if(!or(f,t)&&(p===e||n(p,e,s,r,i)))return f.push(t)}))){h=!1;break}}else if(p!==y&&!n(p,y,s,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h};const cr=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e,r){s[++t]=[r,e]})),s};const ur=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e){s[++t]=e})),s};var dr=$?$.prototype:void 0,lr=dr?dr.valueOf:void 0;const hr=function(e,t,s,r,n,i,o){switch(s){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new _s(e),new _s(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return R(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=cr;case"[object Set]":var c=1&r;if(a||(a=ur),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=2,o.set(e,t);var d=ar(a(e),a(t),r,n,i,o);return o.delete(e),d;case"[object Symbol]":if(lr)return lr.call(e)==lr.call(t)}return!1};var fr=Object.prototype.hasOwnProperty;const pr=function(e,t,s,r,n,i){var o=1&s,a=Qt(e),c=a.length;if(c!=Qt(t).length&&!o)return!1;for(var u=c;u--;){var d=a[u];if(!(o?d in t:fr.call(t,d)))return!1}var l=i.get(e),h=i.get(t);if(l&&h)return l==t&&h==e;var f=!0;i.set(e,t),i.set(t,e);for(var p=o;++u<c;){var y=e[d=a[u]],m=t[d];if(r)var v=o?r(m,y,d,t,e,i):r(y,m,d,e,t,i);if(!(void 0===v?y===m||n(y,m,s,r,i):v)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var x=e.constructor,_=t.constructor;x==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(f=!1)}return i.delete(e),i.delete(t),f};var yr="[object Arguments]",mr="[object Array]",vr="[object Object]",xr=Object.prototype.hasOwnProperty;const _r=function(e,t,s,r,n,i){var o=st(e),a=st(t),c=o?mr:ms(e),u=a?mr:ms(t),d=(c=c==yr?vr:c)==vr,l=(u=u==yr?vr:u)==vr,h=c==u;if(h&&at(e)){if(!at(t))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new qe),o||_t(e)?ar(e,t,s,r,n,i):hr(e,t,c,s,r,n,i);if(!(1&s)){var f=d&&xr.call(e,"__wrapped__"),p=l&&xr.call(t,"__wrapped__");if(f||p){var y=f?e.value():e,m=p?t.value():t;return i||(i=new qe),n(y,m,s,r,i)}}return!!h&&(i||(i=new qe),pr(e,t,s,r,n,i))};const gr=function e(t,s,r,n,i){return t===s||(null==t||null==s||!Ke(t)&&!Ke(s)?t!=t&&s!=s:_r(t,s,r,n,e,i))};const br=function(e,t){return gr(e,t)},wr=["nodes","path","length","rootGraveyard","$graveyard","root","rootMain"];var Or,Sr;Or=wr,Sr=173,function(e){for(;--e;)Or.push(Or.shift())}(++Sr);const Er=function(e,t){return wr[e-=0]};function Tr(e,t){const s=Ls(e);return s[Er("0x3")][s[Er("0x3")][Er("0x4")]-1]+=t,s}function kr(e,t){return e.root===t[Er("0x0")]&&br(e.path,t[Er("0x3")])}function Cr(e){Ar(e,(e=>("main"==e.root?(e[Er("0x1")]=!0,delete e[Er("0x0")]):"$graveyard"==e.root&&(e.rootGraveyard=!0,delete e.root),e)))}function Ir(e){Ar(e,(e=>(e[Er("0x1")]?(e[Er("0x0")]="main",delete e.rootMain):e[Er("0x5")]&&(e[Er("0x0")]=Er("0x6"),delete e[Er("0x5")]),e)))}function Ar(e,t){for(const s in e){const r=e[s];Er("0x2")!==s&&re(r)&&(r.path&&(r[Er("0x0")]||r[Er("0x1")]||r[Er("0x5")])?e[s]=t(r):Ar(r,t))}return e}const Rr=["shift","__className","decompress","buffers","operationName","compress","_protobufDescriptor","push","types"];var Nr,jr;Nr=Rr,jr=298,function(e){for(;--e;)Nr.push(Nr.shift())}(++jr);const Pr=function(e,t){return Rr[e-=0]};class Dr{constructor(e,t,s){this.id=e,this.operationName=t,this[Pr("0x5")]=s}[Pr("0x4")](e,t){const s=t[Pr("0x8")]();Cr(s),e[Pr("0x2")][Pr("0x6")](this[Pr("0x5")].compress(s)),e[Pr("0x7")][Pr("0x6")](this.id)}[Pr("0x1")](e,t){t.types[Pr("0x8")]();const s=this._protobufDescriptor[Pr("0x1")](t[Pr("0x2")][Pr("0x8")]());Ir(s),s[Pr("0x0")]=this[Pr("0x3")],e.push(s)}}const Mr=["Boolean","Range","shift","Json","string","operationName","bool","buffers","__className","parse","_protobufDescriptor","boolean","compress","push"];var Br,Jr;Br=Mr,Jr=232,function(e){for(;--e;)Br.push(Br.shift())}(++Jr);const Ur=function(e,t){return Mr[e-=0]};class Vr extends Dr{static get description(){return{fields:{range:{type:Ur("0x7"),id:1},key:{type:Ur("0xa"),id:2},oldValueBoolean:{type:Ur("0xc"),id:3},oldValueJson:{type:"string",id:4},newValueBoolean:{type:Ur("0xc"),id:5},newValueJson:{type:Ur("0xa"),id:6},wasUndone:{type:Ur("0xc"),id:7}}}}compress(e,t){const s=t[Ur("0x8")]();Fr("oldValue",s),Fr("newValue",s),Cr(s),e[Ur("0xd")][Ur("0x5")](this[Ur("0x2")][Ur("0x4")](s)),e.types[Ur("0x5")](this.id)}decompress(e,t){const{types:s,buffers:r}=t,n=this[Ur("0x2")].decompress(r[Ur("0x8")]());s[Ur("0x8")](),qr("oldValue",n),qr("newValue",n),Ir(n),n[Ur("0x0")]=this[Ur("0xb")],e.push(n)}}function Fr(e,t){const s=t[e];Ur("0x3")==typeof s?t[e+Ur("0x6")]=s:t[e+Ur("0x9")]=JSON.stringify(s)}function qr(e,t){const s=e+Ur("0x9");t[s]?(t[e]=JSON[Ur("0x1")](t[s]),delete t[s]):(t[e]=t[e+Ur("0x6")],delete t[e+Ur("0x6")])}const Lr=["operationName","types","decompress","Element","children","nodes","__className","repeated","attributesJson","every","keys","_protobufDescriptor","compress","buffers","stringify","shift","attributes","Position","parse","bool","description","attributesBoolean","push"];var Yr,Gr;Yr=Lr,Gr=341,function(e){for(;--e;)Yr.push(Yr.shift())}(++Gr);const zr=function(e,t){return Lr[e-=0]};class $r extends Dr{static get[zr("0x1")](){return{fields:{position:{type:zr("0x15"),id:1},nodes:{rule:zr("0xb"),type:zr("0x7"),id:2},shouldReceiveAttributes:{type:zr("0x0"),id:3},wasUndone:{type:"bool",id:4}}}}[zr("0x10")](e,t){const s=t[zr("0x13")]();Wr(s.nodes),Cr(s),e[zr("0x11")].push(this[zr("0xf")][zr("0x10")](s)),e[zr("0x5")][zr("0x3")](this.id)}[zr("0x6")](e,t){const{types:s,buffers:r}=t,n=this[zr("0xf")].decompress(r[zr("0x13")]());s[zr("0x13")](),n.nodes||(n[zr("0x9")]=[]),Hr(n[zr("0x9")]),Ir(n),n[zr("0xa")]=this[zr("0x4")],e[zr("0x3")](n)}}function Wr(e){for(const t of e){if(t[zr("0x14")]){const e=t.attributes;Kr(e)?t[zr("0x2")]=e:t[zr("0xc")]=JSON[zr("0x12")](e)}t[zr("0x8")]&&Wr(t[zr("0x8")])}}function Hr(e){for(const t of e)(t.attributesBoolean||t[zr("0xc")])&&(t[zr("0x2")]?(t[zr("0x14")]=t.attributesBoolean,delete t[zr("0x2")]):(t[zr("0x14")]=JSON[zr("0x16")](t[zr("0xc")]),delete t[zr("0xc")])),t[zr("0x8")]&&Hr(t[zr("0x8")])}function Kr(e){return Object[zr("0xe")](e)[zr("0xd")]((t=>"boolean"==typeof e[t]))}const Zr=["description","length","bool","newRange","Range","oldRange","decompress"];var Xr,Qr;Xr=Zr,Qr=369,function(e){for(;--e;)Xr.push(Xr.shift())}(++Qr);const en=function(e,t){return Zr[e-=0]};class tn extends Dr{static get[en("0x2")](){return{fields:{name:{type:"string",id:1},oldRange:{type:en("0x6"),id:2},newRange:{type:en("0x6"),id:3},affectsData:{type:en("0x4"),id:4},wasUndone:{type:en("0x4"),id:5}}}}decompress(e,t){super[en("0x1")](e,t);const s=e[e[en("0x3")]-1];s[en("0x0")]||(s[en("0x0")]=null),s[en("0x5")]||(s[en("0x5")]=null)}}var sn,rn,nn=["description","Position","bool"];sn=nn,rn=413,function(e){for(;--e;)sn.push(sn.shift())}(++rn);var on=function(e,t){return nn[e-=0]};class an extends Dr{static get[on("0x1")](){return{fields:{sourcePosition:{type:on("0x2"),id:1},targetPosition:{type:on("0x2"),id:2},graveyardPosition:{type:on("0x2"),id:3},howMany:{type:"uint32",id:4},wasUndone:{type:on("0x0"),id:5}}}}}var cn,un,dn=["bool","description","uint32","Position"];cn=dn,un=139,function(e){for(;--e;)cn.push(cn.shift())}(++un);var ln=function(e,t){return dn[e-=0]};class hn extends Dr{static get[ln("0x2")](){return{fields:{sourcePosition:{type:ln("0x0"),id:1},howMany:{type:ln("0x3"),id:2},targetPosition:{type:"Position",id:3},wasUndone:{type:ln("0x1"),id:4}}}}}var fn,pn,yn=["description","string"];fn=yn,pn=266,function(e){for(;--e;)fn.push(fn.shift())}(++pn);var mn=function(e,t){return yn[e-=0]};class vn extends Dr{static get[mn("0x0")](){return{fields:{position:{type:"Position",id:1},oldName:{type:mn("0x1"),id:2},newName:{type:mn("0x1"),id:3},wasUndone:{type:"bool",id:4}}}}}const xn=["fields","description","string","range","root"];var _n,gn;_n=xn,gn=402,function(e){for(;--e;)_n.push(_n.shift())}(++gn);const bn=function(e,t){return xn[e-=0]};class wn extends Vr{static get[bn("0x4")](){const e=Vr[bn("0x4")];return delete e.fields[bn("0x1")],e[bn("0x3")][bn("0x2")]={type:bn("0x0"),id:1},e}}var On,Sn,En=["uint32","Position","description","bool"];On=En,Sn=479,function(e){for(;--e;)On.push(On.shift())}(++Sn);var Tn=function(e,t){return En[e-=0]};class kn extends Dr{static get[Tn("0x3")](){return{fields:{splitPosition:{type:Tn("0x2"),id:1},graveyardPosition:{type:Tn("0x2"),id:2},howMany:{type:Tn("0x1"),id:3},insertionPosition:{type:Tn("0x2"),id:4},wasUndone:{type:Tn("0x0"),id:5}}}}}var Cn,In,An=["push","decompress","compress","shift","types","operationName"];Cn=An,In=265,function(e){for(;--e;)Cn.push(Cn.shift())}(++In);var Rn=function(e,t){return An[e-=0]};class Nn extends Dr{[Rn("0x1")](e,t){t[Rn("0x2")](),e[Rn("0x3")][Rn("0x5")](this.id)}[Rn("0x0")](e,t){t[Rn("0x3")].shift(),e[Rn("0x5")]({__className:this[Rn("0x4")]})}}const jn=["compress","_omittedNamespace","MarkerOperation","decompress","name","replace","__className"];var Pn,Dn;Pn=jn,Dn=142,function(e){for(;--e;)Pn.push(Pn.shift())}(++Dn);const Mn=function(e,t){return jn[e-=0]};class Bn extends tn{constructor(e,t,s,r){super(e,t,s),this._omittedNamespace=r+":"}[Mn("0x5")](e,t){return!(Mn("0x0")!=t[0][Mn("0x4")]||!t[0][Mn("0x2")].startsWith(this._omittedNamespace)||(t[0][Mn("0x2")]=t[0][Mn("0x2")][Mn("0x3")](new RegExp("^"+this[Mn("0x6")]),""),super.compress(e,t),0))}[Mn("0x1")](e,t){super[Mn("0x1")](e,t);const s=e[e.length-1];s.name=this[Mn("0x6")]+s.name}}const Jn=["push","types","shift","_decompressSingleOperation","compress","_splitCurrent","_combineNext","buffers","_compareOperations"];var Un,Vn;Un=Jn,Vn=424,function(e){for(;--e;)Un.push(Un.shift())}(++Vn);const Fn=function(e,t){return Jn[e-=0]};class qn{constructor(e,t){this.id=e,this._context=t}[Fn("0x3")](e,t){let s;for(;t.length>1&&this[Fn("0x7")](t[0],t[1]);)s?(s=this[Fn("0x5")](t[Fn("0x1")](),s),e[Fn("0x0")].push(0)):(s=Ls(t[Fn("0x1")]()),e[Fn("0x0")][Fn("0x8")](this.id));return!!s&&(s=this[Fn("0x5")](t[Fn("0x1")](),s),e.types[Fn("0x8")](0),e[Fn("0x6")][Fn("0x8")](this._compressSingleOperation(s)),!0)}decompress(e,t){const s=this[Fn("0x2")](t);for(;0==t[Fn("0x0")][0];)t[Fn("0x0")].shift(),e[Fn("0x8")](this[Fn("0x4")](s));e[Fn("0x8")](s)}}const Ln=["keys","attributes","next","compress","_context","data","nodes","_getCompressorByName","wasUndone","length","__className","decompress","_combineNext","_compressSingleOperation","InsertOperation","position","buffers","substr","_compareOperations"];var Yn,Gn;Yn=Ln,Gn=443,function(e){for(;--e;)Yn.push(Yn.shift())}(++Gn);const zn=function(e,t){return Ln[e-=0]};class $n extends qn{[zn("0x6")](e,t){return t.nodes[0][zn("0x12")]+=e.nodes[0].data,t}_splitCurrent(e){const t=Ls(e),s=t.nodes[0],r=e[zn("0x0")][0],n=r.data[Symbol.iterator]()[zn("0xf")]().value,i=n[zn("0x3")];return s[zn("0x12")]=n,r[zn("0x12")]=r[zn("0x12")][zn("0xb")](i),e[zn("0x9")]=Tr(e.position,i),t}[zn("0xc")](e,t){if(Wn(e)&&Wn(t)){const s=e[zn("0x0")][0].data[zn("0x3")],r=kr(Tr(e[zn("0x9")],s),t[zn("0x9")]),n=e[zn("0x0")][0],i=t.nodes[0];return r&&function(e,t){const s=Object[zn("0xd")](e[zn("0xe")]||{}),r=Object.keys(t[zn("0xe")]||{});return s[zn("0x3")]===r[zn("0x3")]&&s.every((s=>t.attributes[s]&&t[zn("0xe")][s]===e[zn("0xe")][s]))}(n,i)}return!1}[zn("0x7")](e){const t={types:[],buffers:[],baseVersion:0};return this._context[zn("0x1")](zn("0x8"))[zn("0x10")](t,[e]),t[zn("0xa")][0]}_decompressSingleOperation(e){const t=[];return this[zn("0x11")]._getCompressorByName(zn("0x8"))[zn("0x5")](t,e),t[0]}}function Wn(e){return"InsertOperation"==e[zn("0x4")]&&1==e[zn("0x0")].length&&e.nodes[0].data&&!e[zn("0x2")]&&1==Array.from(e[zn("0x0")][0][zn("0x12")])[zn("0x3")]}const Hn=["sourcePosition","howMany","MoveOperation","_getCompressorByName","buffers","__className","targetPosition","wasUndone","decompress","_combineNext","_compareOperations"];var Kn,Zn;Kn=Hn,Zn=438,function(e){for(;--e;)Kn.push(Kn.shift())}(++Zn);const Xn=function(e,t){return Hn[e-=0]};class Qn extends qn{[Xn("0x0")](e,t){return t[Xn("0x3")]++,t[Xn("0x2")]=Ls(e.sourcePosition),t}_splitCurrent(e){const t=Ls(e);return e[Xn("0x3")]--,t[Xn("0x3")]=1,t[Xn("0x2")]=Tr(t.sourcePosition,e[Xn("0x3")]),t}[Xn("0x1")](e,t){return!(!ei(e)||!ei(t))&&kr(Tr(e[Xn("0x2")],-1),t[Xn("0x2")])&&kr(e[Xn("0x8")],t[Xn("0x8")])}_compressSingleOperation(e){const t={types:[],buffers:[],baseVersion:0};return this._context[Xn("0x5")](Xn("0x4")).compress(t,[e]),t[Xn("0x6")][0]}_decompressSingleOperation(e){const t=[];return this._context[Xn("0x5")](Xn("0x4"))[Xn("0xa")](t,e),t[0]}}function ei(e){return Xn("0x4")==e[Xn("0x7")]&&"$graveyard"==e[Xn("0x8")].root&&1==e.howMany&&!e[Xn("0x9")]}const ti=["howMany","_decompressSingleOperation","_combineNext","targetPosition","root","buffers","_compareOperations","__className","_splitCurrent","decompress","_context","compress","_getCompressorByName","sourcePosition","MoveOperation"];var si,ri;si=ti,ri=401,function(e){for(;--e;)si.push(si.shift())}(++ri);const ni=function(e,t){return ti[e-=0]};class ii extends qn{[ni("0x6")](e,t){return t[ni("0x4")]++,t}[ni("0xc")](e){const t=Ls(e);return t[ni("0x4")]=1,e[ni("0x4")]--,t}[ni("0xa")](e,t){return!(!oi(e)||!oi(t))&&kr(e[ni("0x2")],t[ni("0x2")])&&kr(e[ni("0x7")],t.targetPosition)}_compressSingleOperation(e){const t={types:[],buffers:[],baseVersion:0};return this._context[ni("0x1")](ni("0x3"))[ni("0x0")](t,[e]),t[ni("0x9")][0]}[ni("0x5")](e){const t=[];return this[ni("0xe")]._getCompressorByName("MoveOperation")[ni("0xd")](t,e),t[0]}}function oi(e){return"MoveOperation"==e[ni("0xb")]&&"$graveyard"==e.targetPosition[ni("0x8")]&&1==e[ni("0x4")]&&!e.wasUndone}const ai=["name","toNone","start","buffers","startsWith","decompress","push","_decompressSingleOperation","_getCompressorByName","MarkerOperation","user:position:","shift","_compressSingleOperation","__className","user:","newRange","compress","_context","end","types"];var ci,ui;ci=ai,ui=221,function(e){for(;--e;)ci.push(ci.shift())}(++ui);const di=function(e,t){return ai[e-=0]};class li extends qn{[di("0xf")](e,t){if(s=t[0],r=t[1],!(s&&r&&di("0x8")==s[di("0xc")]&&"MarkerOperation"==r[di("0xc")]&&s[di("0x13")][di("0x3")](di("0xd"))&&r.name[di("0x3")](di("0xd"))&&s[di("0x13")]!=r.name))return!1;var s,r;const n=t.shift();return n.oldRange=null,n[di("0xe")]&&kr(n[di("0xe")].start,n[di("0xe")][di("0x11")])&&(n[di("0xe")][di("0x11")]=null),t.shift(),e[di("0x12")].push(this.id),e.types.push(0),e[di("0x2")][di("0x5")](this[di("0xb")](n)),!0}[di("0x4")](e,t){const s=this[di("0x6")](t);s[di("0xe")]&&!s.newRange[di("0x11")]&&(s[di("0xe")][di("0x11")]=Ls(s[di("0xe")][di("0x1")]));const r=Ls(s);r.newRange&&(r[di("0xe")][di("0x1")].stickiness=di("0x0"),r.newRange.end=Ls(r[di("0xe")][di("0x1")])),r[di("0x13")]=di("0x9")+r[di("0x13")].split(":")[2],t.types[di("0xa")](),e.push(s),e.push(r)}[di("0xb")](e){const t={types:[],buffers:[],baseVersion:0};return this[di("0x10")][di("0x7")](di("0x8"))[di("0xf")](t,[e]),t[di("0x2")][0]}[di("0x6")](e){const t=[];return this[di("0x10")]._getCompressorByName(di("0x8"))[di("0x4")](t,e),t[0]}}const hi=["MergeOperation","getDescriptor","description","RootAttributeOperation","CommentMarkerOperation","_compressorById","TypingAction","set","_registerCompressor","compress","MoveOperation","comment","registerDescriptor","SuggestionMarkerOperation","MarkerOperation","DeletingAction","AttributeOperation","RenameOperation","types","Position","get","_compressorByName","InsertOperation","__className","_getCompressorByName","length","SplitOperation","baseVersion","NoOperation","ForwardDeletingAction","Element","UserSelectionAction","forEach","_protobufFactory","_registerOperationCompressor","_registerActionCompressor"];var fi,pi;fi=hi,pi=260,function(e){for(;--e;)fi.push(fi.shift())}(++pi);const yi=function(e,t){return hi[e-=0]};class mi{constructor(){this[yi("0x21")]=new Map,this[yi("0xd")]=new Map,this[yi("0x19")]=new Ws,this[yi("0x19")].registerDescriptor(yi("0xb"),er[yi("0xb")]),this[yi("0x19")][yi("0x4")]("Range",er.Range),this[yi("0x19")].registerDescriptor(yi("0x16"),er[yi("0x16")]),this._protobufFactory.registerDescriptor(yi("0x8"),Vr.description),this[yi("0x19")][yi("0x4")](yi("0xe"),$r[yi("0x1e")]),this[yi("0x19")][yi("0x4")](yi("0x6"),tn[yi("0x1e")]),this[yi("0x19")].registerDescriptor("MergeOperation",an[yi("0x1e")]),this._protobufFactory[yi("0x4")](yi("0x2"),hn[yi("0x1e")]),this[yi("0x19")][yi("0x4")](yi("0x9"),vn[yi("0x1e")]),this[yi("0x19")][yi("0x4")]("RootAttributeOperation",wn[yi("0x1e")]),this[yi("0x19")].registerDescriptor(yi("0x12"),kn[yi("0x1e")]),this[yi("0x19")].build(),this[yi("0x0")](1,yi("0x14"),new Nn(1,yi("0x14"))),this[yi("0x1a")](10,"AttributeOperation",Vr),this[yi("0x1a")](11,yi("0xe"),$r),this[yi("0x1a")](12,yi("0x6"),tn),this[yi("0x1a")](13,yi("0x1c"),an),this[yi("0x1a")](14,yi("0x2"),hn),this[yi("0x1a")](15,yi("0x9"),vn),this[yi("0x1a")](16,yi("0x1f"),wn),this._registerOperationCompressor(17,yi("0x12"),kn);const e=this[yi("0x19")][yi("0x1d")](yi("0x6"));this[yi("0x0")](18,yi("0x20"),new Bn(18,yi("0x6"),e,yi("0x3"))),this._registerCompressor(19,yi("0x5"),new Bn(19,yi("0x6"),e,"suggestion")),this[yi("0x1b")](100,yi("0x22"),$n),this[yi("0x1b")](101,yi("0x7"),Qn),this[yi("0x1b")](102,"ForwardDeletingAction",ii),this[yi("0x1b")](103,yi("0x17"),li)}[yi("0x1a")](e,t,s){const r=new s(e,t,this._protobufFactory[yi("0x1d")](t));this[yi("0x0")](e,t,r)}[yi("0x1b")](e,t,s){const r=new s(e,this);this._registerCompressor(e,t,r)}[yi("0x0")](e,t,s){this[yi("0x21")].set(e,s),this[yi("0xd")][yi("0x23")](t,s)}_getCompressorByName(e){return this._compressorByName[yi("0xc")](e)}[yi("0x1")](e){if(!e||!e[0])throw new t.CKEditorError("no-operations-provided",this);const s={types:[],buffers:[],baseVersion:e[0][yi("0x13")]};for(;e[yi("0x11")];)this[yi("0x10")](yi("0x17"))[yi("0x1")](s,e)||this[yi("0x10")](yi("0x22"))[yi("0x1")](s,e)||this[yi("0x10")](yi("0x7"))[yi("0x1")](s,e)||this[yi("0x10")](yi("0x15"))[yi("0x1")](s,e)||this._getCompressorByName(yi("0x20"))[yi("0x1")](s,e)||this._getCompressorByName(yi("0x5"))[yi("0x1")](s,e)||this[yi("0x10")](e[0][yi("0xf")]).compress(s,e);return s}decompress(e){const t=[];for(;e[yi("0xa")][yi("0x11")];)this[yi("0x21")].get(e.types[0]).decompress(t,e);return t[yi("0x18")](((t,s)=>t.baseVersion=e[yi("0x13")]+s)),t}}var vi=__webpack_require__(7622),xi=__webpack_require__.n(vi),_i=__webpack_require__(7530),gi=__webpack_require__.n(_i);const bi=["from","apply","collaboration.channelId","enableReadOnlyMode","_currentBufferDelay","_hasSynchronizationProblem","_crash","disconnect","createUserMarkerOperations","realtimecollaborationclient-initservice-incorrect-server-operation","_shouldSendUpdate","_connectService","getOperationAuthor","_saveOperationInBuffer","_updateServerHistory","editor","_lastServerVersion","_handleExternalOperations","_initThrowingOnDataSet","_isConnected","The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.","_knownOperations","_setUpDataInit","_ignoredOperations","compress","permissions","version","_operationIdentifier","_handleServerResponse","_shouldSendSelectionUpdate","code","sendOperations","change:_isEditingAllowed","high","_handleSendingSelectionMarkers","mySessionId","unregister","realtimecollaborationclient-handleserverresponse","markers","sessionId","Synchronization issue","reconnect","lastOperationAcceptedAt","round","CollaborativeEditingService","wereChangesApplied","The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.","RealTimeCollaborationClient","off","_applyOperationsSet","offset","getOperations","suppressErrorInCollaboration","sessionCreatedAt","parse","has","_channelId","plugins","message","getUser","_isInit","real-time-collaboration","getConnectedSessions","then","disableReadOnlyMode","_refreshUserSelectionMarkers","config","_sendBufferedOperationsDelayId","_fetchMissingUsers","length","cloudDocumentVersion","_compressOperations","_offset","lastDocumentSession","map","realtimecollaborationclient-init-session-connection-error","_isPendingUpdate","initData","history","409","Notification","change:range","baseVersion","wasUndone","fromJSON","enqueueChange","disconnected","model","register","_service","serverHistory","_disconnectionOperations","_disconnectService","createPositionFromPath","type","document:write","isReadOnly","rtc-offline","sessionAdd:","lastSyncVersion","realtimecollaborationclient-init-connection-failed","applyOperation","_handleReconnectionResponse","CommentsOnly","currentDocumentSession","cloud-services-internal-error: Not connected.","forEach","_pendingAction","createPositionAt","_bufferedOperations","fire","remove","_connectAfterSessionHasBeenFlushed","PENDING_ACTION_SENDING_DATA","_setPendingAction","filter","realtimecollaborationclient-sendbufferedoperations","_operationToId","_lastSyncedOperationId","_assignOperationsMetaData","cloud-services-internal-error: Collaborative Editing Service is not connected.","listenTo","_sendBufferedOperations","_hasSelectionChanged","document","init","requires","removeFromReconnectionStack","end","_decompressOperations","reset","userId","isEnabled","setIdForTheLastOperation","includes","slice","collaboration","_sendBufferedOperationsDelayed","isUndoneOperation","string","catch","clone","start","batch","_isEditingAllowed","get","_handleInitialConnectionData","cloudServices.bundleVersion","_isDisconnection","channelSessions","_compressor","The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.","lastOperationId","reconnection: flushed session","_authorId","showWarning","path","_handleReceivedOperations","_getOperationsFromInitData","locale","_document","define","stop","realtimecollaborationclient-init-non-existent-root","_initSessionsHandling","addToReconnectionStack","_clearPendingAction","connection","_handleReconnectionError","connect","editing","add","view","data","_sendBufferedOperationsDelay","selection","rtc-destroyed","toJSON","_baseBufferDelay","createdAt","error","decompress","all","change:hasDomSelection","affectsData","metadata","set","addOperation","return","stopListening","bind","The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor.","startsWith","destroy","push","getIdOfTheLastOperation","keys"];var wi,Oi;wi=bi,Oi=357,function(e){for(;--e;)wi.push(wi.shift())}(++Oi);const Si=function(e,t){return bi[e-=0]};let Ei=1;class Ti extends e.Plugin{static get[Si("0xa3")](){return[l,m,E,e.PendingActions,n.Users,r.Notification]}static get pluginName(){return Si("0x54")}get[Si("0x6b")](){return this[Si("0x35")]+this._offset}get[Si("0x35")](){return this.serverHistory[Si("0x3f")]-this[Si("0x6d")]}get lastSyncVersion(){const e=this[Si("0x7f")][Si("0x58")]();for(let t=e[Si("0x6a")]-1;t>=0;t--){const s=e[t];if(!this[Si("0x80")][Si("0x5c")](s))return s[Si("0x77")]+1-this[Si("0x6d")]}return 0}[Si("0xa2")](){const e=this[Si("0x34")],r=e.plugins[Si("0xb6")](n.Users),i=e.plugins[Si("0xb6")](l);if(this[Si("0x6d")]=0,this[Si("0x4c")]=null,this.serverHistory=new s.History,this[Si("0x34")][Si("0x67")][Si("0x1")](Si("0xad"),{}),this[Si("0x5d")]=e[Si("0x67")][Si("0xb6")](Si("0x27")),!this[Si("0x5d")])throw new t.CKEditorError("collaboration-missing-channelid",this);this[Si("0x9e")](r,Si("0x31"),((e,t)=>{const s=t[0];s[Si("0xbf")]&&(e.return=r[Si("0x60")](s[Si("0xbf")]),e[Si("0x2")]()),null===s._authorId&&(e[Si("0x1c")]=null,e[Si("0x2")]())}),{priority:Si("0x46")});const o=e[Si("0x67")][Si("0xb6")](Si("0xb8"))||t.version;this[Si("0x7e")]=new(Ti[Si("0x51")])(o,this[Si("0x5d")]),this[Si("0x0")]=this.editor[Si("0x7c")][Si("0xa1")],this[Si("0xbb")]=new mi,this._bufferedOperations=[],this._knownOperations=new WeakSet,this[Si("0x1a")](Si("0x71"),!1),this[Si("0x1a")]("_hasSynchronizationProblem",!1),this[Si("0x90")]=null,this[Si("0xa0")]=!1,this._sendBufferedOperationsDelayId=null,this[Si("0x12")]=300,this[Si("0x29")]=this[Si("0x12")],this._lastSyncedOperationId=null,this._disconnectionOperations=new WeakSet,this[Si("0x40")]=new Ii(this[Si("0x80")]),this.listenTo(e[Si("0x7c")][Si("0xa1")][Si("0xf")],Si("0x76"),((e,t)=>{t.directChange&&this[Si("0x66")]()})),this[Si("0x9e")](e[Si("0xa")][Si("0xc")],Si("0x17"),(()=>{this._refreshUserSelectionMarkers()})),this._initThrowingOnDataSet(),e[Si("0x5e")][Si("0xb6")](l)[Si("0x5")](this),e.model.on(Si("0x8a"),((e,t)=>{const s=t[0];s.isDocumentOperation&&(this[Si("0x32")](s),this[Si("0x2f")]()&&this[Si("0xae")]())})),this[Si("0x3b")](),this[Si("0x1e")](Si("0xb5")).to(i,"state",this,Si("0x2a"),((e,t)=>"connected"===e&&!t)),this.on(Si("0x45"),(()=>{this[Si("0xb5")]?e[Si("0x65")](Si("0x86")):e[Si("0x28")]("rtc-offline")})),this[Si("0xb5")]?e[Si("0x65")](Si("0x86")):e.enableReadOnlyMode("rtc-offline"),this[Si("0x1a")]("_isConnected",!1)}async reconnect(){const e=this.editor.plugins.get(m),t=this.editor[Si("0x5e")][Si("0xb6")](l);try{this._isPendingUpdate=!0,e[Si("0x49")](this[Si("0x5d")]);const s=await this._service[Si("0x4e")](t[Si("0x7")],this[Si("0x88")]);await this[Si("0x8b")](s)&&(this[Si("0x71")]=!1,this[Si("0x6")]());const r=await this._service[Si("0x63")]();e[Si("0x7d")](this[Si("0x5d")],r),this[Si("0x47")](),this[Si("0x38")]=!0}catch(e){if("404"===e[Si("0x43")]&&this[Si("0x4c")])await this[Si("0x95")]();else if(s=e,Si("0x74")===s[Si("0x43")]){const e=k(this[Si("0x34")].locale,Si("0xbc"));this[Si("0x8")](e)}else{if(!(e instanceof ki))throw e;this[Si("0x8")]()}}var s}destroy(){const e=this[Si("0x34")][Si("0x5e")].get(l),t=this.editor[Si("0x5e")][Si("0xb6")](m);this[Si("0x34")][Si("0x28")](Si("0x10")),t.channelSessions[Si("0x5c")](this._channelId)&&t.unregister(this[Si("0x5d")]),e[Si("0xa4")](this),this[Si("0x81")](),super[Si("0x21")]()}async _handleReconnectionResponse(e){if(this.sessionId!==e.sessionId&&this[Si("0x9b")]!==e[Si("0xbd")])throw new ki;return this.sessionId=e[Si("0x4c")],this[Si("0x41")]([],{...e,wereChangesApplied:!1,data:e[Si("0xd")]},Si("0x4e"))}async[Si("0x30")](e,t=!1){const{connection:s}=this[Si("0x34")].plugins[Si("0xb6")](l);Ti.CollaborativeEditingService[Si("0x63")](s,this[Si("0x5d")])[Si("0x64")]((e=>this[Si("0x4")](e))).catch((e=>{this[Si("0x2b")](Si("0x70"),e)})),this.listenTo(this._service,"operationsReceived",this[Si("0xc2")][Si("0x1e")](this)),this.listenTo(this._service,Si("0x14"),((e,t)=>{this[Si("0x2b")]("realtimecollaborationclient-initservice-internal-error",t)})),this.listenTo(this[Si("0x7e")],Si("0x7b"),(()=>{this[Si("0x38")]=!1}));const r=this[Si("0x40")].getIdOfTheLastOperation(e),n=await this._service[Si("0x9")](s,this[Si("0x6c")](e),r);if(this[Si("0x4c")]=n[Si("0x4c")],n[Si("0x52")]&&(this[Si("0x71")]=!1,this[Si("0x6")]()),t){if(!n[Si("0x52")])return void this._handleReconnectionError();this.serverHistory[Si("0xa7")](),this[Si("0x6d")]=n[Si("0x57")],this[Si("0x7f")][Si("0x3f")]=this[Si("0x6d")],await this._handleServerResponse(e,n,Si("0xbe"))}else await this[Si("0xb7")](n,e);this[Si("0x47")](),this[Si("0x38")]=!0}[Si("0x47")](){const e=this[Si("0x34")][Si("0x5e")].get(m),t=e[Si("0xba")][Si("0xb6")](this[Si("0x5d")]);t&&t[Si("0x6a")]>1?(this[Si("0xa0")]=!0,this[Si("0xae")]()):this[Si("0x9e")](e,Si("0x87")+this[Si("0x5d")],(t=>{e[Si("0xba")][Si("0xb6")](this[Si("0x5d")])[Si("0x6a")]>1&&(this[Si("0xa0")]=!0,this._sendBufferedOperationsDelayed(),t.off())}))}async _handleReceivedOperations(e,t,s,r){if(!this._isPendingUpdate&&this[Si("0x0")][Si("0x3f")]==t){const e=this[Si("0xa6")](s,r);await this._fetchMissingUsers(e),this[Si("0x36")](e,t,s[Si("0xbd")])||this[Si("0x2b")](Si("0x2e"))}}async[Si("0x95")](){this._disconnectService();const{locale:e}=this[Si("0x34")];let t;try{t=await this._service.getDocumentDetails()}catch(t){const s=k(e,Si("0x53"));return void this[Si("0x8")](s)}const s=t[Si("0x8d")]||t[Si("0x6e")];if(this[Si("0x9b")]===s.lastOperationId)await this._connectService(this.editor.model[Si("0xa1")].history[Si("0x58")](),!0);else{const t=k(e,Si("0x39"));this._handleReconnectionError(t)}}[Si("0x81")](){this[Si("0x7e")][Si("0x2c")](),this._bufferedOperations=[],clearTimeout(this[Si("0xe")]),this[Si("0x1d")](this[Si("0x7e")])}[Si("0x4")](e){const t=this[Si("0x34")][Si("0x5e")][Si("0xb6")](m);this[Si("0x9e")](t,"sessionAdd:"+this._channelId,((e,{session:s})=>{if(s.id===t[Si("0x48")]){e[Si("0x55")]();const t=this[Si("0x34")][Si("0x5e")].has(Si("0x8c"))&&this[Si("0x34")][Si("0x5e")][Si("0xb6")](Si("0x8c"));let r=s[Si("0x3e")];t&&t[Si("0xa9")]&&(r=r[Si("0x98")]((e=>Si("0x84")!==e))),this.editor[Si("0x5e")].get("Permissions").setPermissions(r,this[Si("0x5d")])}})),t.register(this[Si("0x5d")],e)}[Si("0x37")](){const e=this[Si("0x34")][Si("0xd")][Si("0x1a")];this[Si("0x34")][Si("0xd")][Si("0x1a")]=(...s)=>{if(!s[s.length-1][Si("0x59")])throw new t.CKEditorError("realtimecollaborationclient-editor-setdata-and-editor-data-set-are-forbidden-in-real-time-collaboration",this);e[Si("0x26")](this[Si("0x34")][Si("0xd")],s)}}_setUpDataInit(){this.editor[Si("0xd")].on("init",((e,[s])=>{if(this[Si("0x0")].version)throw new t.CKEditorError("realtimecollaborationclient-init-document-already-initialized",this);e[Si("0x2")](),this._setPendingAction();const r=this[Si("0xc3")](s);e[Si("0x1c")]=this[Si("0x30")](r)[Si("0x64")]((()=>{this.editor[Si("0xd")][Si("0x93")]("ready")}))[Si("0xb1")]((e=>this[Si("0x2b")](Si("0x89"),e))).finally((()=>this[Si("0x6")]()))}),{priority:Si("0x46")})}[Si("0x69")](e){const t=this.editor[Si("0x5e")][Si("0xb6")](n.Users),{connection:s}=this[Si("0x34")][Si("0x5e")][Si("0xb6")](l),r=new Set;for(const s of e)(i=s[Si("0xbf")])&&!t[Si("0x60")](i)&&r[Si("0xb")](i);var i;return Promise[Si("0x16")](Array[Si("0x25")](r,(async e=>{const r=await gi()[Si("0xb6")](s,e);t[Si("0x60")](e)||t.addUser(r)})))}[Si("0xc3")](e){const r=this[Si("0x34")][Si("0x7c")],n=[];let i=0;const o=Si("0xb0")==typeof e?{main:e}:e;for(const e of Object[Si("0x24")](o)){if(!this[Si("0x0")].roots[Si("0x5c")](e))throw new t.CKEditorError(Si("0x3"),this);const a=this.editor[Si("0xd")][Si("0x5b")](o[e]),c=this[Si("0x0")].getRoot(e),u=new s.InsertOperation(r[Si("0x91")](c,0),a,i++);n.push(u);for(const[e,t]of a[Si("0x4b")]){const o=r.createRange(r[Si("0x82")](c,t[Si("0xb3")][Si("0xc1")][Si("0xac")]()),r[Si("0x82")](c,t[Si("0xa5")][Si("0xc1")][Si("0xac")]())),a=new s.MarkerOperation(e,null,o,r[Si("0x4b")],!0,i++);n[Si("0x22")](a)}}return n}async[Si("0xb7")](e,t){let s;this[Si("0x6d")]=e[Si("0x57")];const r=e[Si("0x52")]&&!e[Si("0x72")],n=r?0:e[Si("0xd")][Si("0x77")];if(r)s=t,s[Si("0x8f")]((t=>{t[Si("0x13")]=e[Si("0x5a")],t[Si("0x61")]=!0,t[Si("0xbf")]=null})),this._applyOperationsSet(s,r);else{if(e.initData){const t=this._getOperationsFromInitData(e[Si("0x72")]);this[Si("0x0")].history[Si("0x3f")]=-t.length,t.forEach((s=>{s.baseVersion-=t.length,s[Si("0x13")]=e[Si("0x5a")],s[Si("0x61")]=!0,s._authorId=null})),this._applyOperationsSet(t,!0),this[Si("0x7f")][Si("0x3f")]=-t.length+this[Si("0x6d")],this[Si("0x33")](t)}this[Si("0x0")].history[Si("0x3f")]=n,s=this[Si("0xa6")](e[Si("0xd")],e[Si("0x19")]),await this[Si("0x69")](s),this._applyOperationsSet(s,r)}e[Si("0xbd")]&&(this[Si("0x40")].setIdForTheLastOperation(s,e.lastOperationId),this[Si("0x9b")]=e[Si("0xbd")]),this[Si("0x7f")].version=n+this[Si("0x6d")],this._updateServerHistory(s)}_crash(e,s){throw this[Si("0x71")]=!0,s&&console[Si("0x14")](s),new t.CKEditorError(e,this.editor)}[Si("0x32")](e){this._knownOperations[Si("0x5c")](e)||(this._knownOperations.add(e),this._bufferedOperations[Si("0x22")](e),this[Si("0x90")]||"marker"==e[Si("0x83")]&&!e[Si("0x18")]||this[Si("0x97")]())}_sendBufferedOperationsDelayed(e=!1){!e&&this._isPendingUpdate||(this._isPendingUpdate=!0,clearTimeout(this[Si("0x68")]),this[Si("0x68")]=setTimeout((()=>{this[Si("0x9f")]()[Si("0x64")]((e=>{e&&(this[Si("0x6")](),this[Si("0x71")]=!1)}))[Si("0xb1")]((e=>{if(this._clearPendingAction(),this[Si("0x71")]=!1,!((t=e)[Si("0x5f")][Si("0x20")](Si("0x8e"))||t.message[Si("0x20")](Si("0x9d"))||t.message.startsWith("cloud-services-internal-error: Request timeout.")))throw e;var t}))}),this[Si("0x29")]))}async[Si("0x9f")](){const e=this.editor[Si("0x5e")][Si("0xb6")](E);if(this[Si("0x42")]()&&(e[Si("0x2d")](),this[Si("0xa0")]=!1),!this._shouldSendUpdate())return!0;const t=[...this[Si("0x92")]];for(const e of t)e[Si("0x78")]=this[Si("0x0")][Si("0x73")][Si("0xaf")](e);const s=this._operationIdentifier.getIdOfTheLastOperation(t),r=Ei++,n=this._compressOperations(t),i=await this._service[Si("0x44")](n,n.baseVersion,s);try{return await this._handleServerResponse(t,i,r)}catch(e){return this._crash(Si("0x99"),e)}}async[Si("0x41")](e,t,s){if(t[Si("0x14")])throw t.error;let r=!1;if(t[Si("0x52")]){t[Si("0xbd")]&&(this[Si("0x9b")]=t.lastOperationId),this[Si("0x92")]=this[Si("0x92")].filter((t=>!e[Si("0xab")](t)));for(const s of e)s[Si("0x13")]=t[Si("0x4f")];this[Si("0x33")](e),r=!0,this[Si("0x29")]=this[Si("0x12")]}else{const e=this[Si("0xa6")](t[Si("0xd")],t[Si("0x19")])[Si("0x98")]((e=>e[Si("0x77")]>=this[Si("0x35")]));await this[Si("0x69")](e),r=this[Si("0x36")](e,t[Si("0x3f")],t.lastOperationId),this[Si("0x29")]=Math[Si("0x50")](this[Si("0x29")]/2)}return r?!this[Si("0x2f")]()||(this._sendBufferedOperationsDelayed(!0),!1):this[Si("0x2b")](Si("0x4a"))}[Si("0x36")](e,t,r){try{const n={document:this._document,useRelations:!1,padWithNoOps:!0},{operationsA:i,operationsB:o,originalOperations:a}=(0,s.transformSets)(e,this[Si("0x92")],n);Ci(i,this[Si("0x0")][Si("0x3f")]),Ci(o,t);for(const e of i){const t=a[Si("0xb6")](e);e[Si("0xbf")]=t?t._authorId:null}r&&(this[Si("0x40")][Si("0xaa")](e,r),this[Si("0x9b")]=r),this[Si("0x92")]=[...o],this[Si("0x56")](i),this[Si("0x33")](e)}catch(e){return console[Si("0x14")](e),!1}return!0}[Si("0x56")](e,t=!1){this[Si("0x34")][Si("0x7c")][Si("0x7a")]({isUndoable:!1,isLocal:!1},(t=>{for(const s of e)this[Si("0x3a")].add(s),t[Si("0xb4")][Si("0x1b")](s),this[Si("0x34")][Si("0x7c")].applyOperation(s)}))}_updateServerHistory(e){e[Si("0x8f")]((e=>{const t=e[Si("0xb2")]();t[Si("0xbf")]=e[Si("0xbf")],t._isInit=!!e._isInit,t[Si("0x13")]=e[Si("0x13")],t.baseVersion+=this[Si("0x6d")],e[Si("0xb9")]&&this._disconnectionOperations[Si("0xb")](t),this[Si("0x7f")][Si("0x1b")](t)}))}[Si("0x8")](e){const t=this[Si("0x34")].plugins[Si("0xb6")](Si("0x75")),s=this[Si("0x34")][Si("0xc4")];e||(e=k(s,Si("0x1f"))),t[Si("0xc0")](e,{title:k(s,Si("0x4d")),namespace:Si("0x62")}),this[Si("0x2a")]=!0,clearTimeout(this[Si("0x68")]),this[Si("0x92")]=[],this.editor[Si("0x5e")].get(l)[Si("0x21")]()}[Si("0x97")](){this[Si("0x90")]||(this._pendingAction=this[Si("0x34")][Si("0x5e")][Si("0xb6")](e.PendingActions)[Si("0xb")](k(this.editor[Si("0xc4")],Si("0x96"))))}_clearPendingAction(){this[Si("0x90")]&&(this[Si("0x34")][Si("0x5e")][Si("0xb6")](e.PendingActions)[Si("0x94")](this[Si("0x90")]),this._pendingAction=null)}_compressOperations(e){const t=e.map((e=>e[Si("0x11")]()));return this[Si("0xbb")][Si("0x3d")](t)}_decompressOperations(e,t){const r=this[Si("0xbb")][Si("0x15")](e)[Si("0x6f")](((e,r)=>{const n=s.OperationFactory[Si("0x79")](e,this[Si("0x0")]);return n.wasUndone=e[Si("0x78")],"cs:removeUser"===t[r][Si("0x83")]&&(n._isDisconnection=!0),n}));return this[Si("0x9c")](r,t),r}[Si("0x9c")](e,t){for(let s=0;s<e[Si("0x6a")];s++)Si("0xa2")==t[s][Si("0x83")]?(e[s][Si("0x61")]=!0,e[s][Si("0xbf")]=null):(e[s][Si("0x61")]=!1,e[s][Si("0xbf")]=t[s][Si("0xa8")]),e[s][Si("0x13")]=t[s].createdAt}[Si("0x66")](){this._hasSelectionChanged=!0,this[Si("0x42")]()&&this[Si("0xae")]()}[Si("0x42")](){const e=this[Si("0x34")][Si("0x5e")][Si("0xb6")](m)[Si("0xba")][Si("0xb6")](this[Si("0x5d")]);return!this[Si("0x34")][Si("0x85")]&&e&&e[Si("0x6a")]>1&&this[Si("0xa0")]}_shouldSendUpdate(){return this[Si("0x92")].length>0||this[Si("0x42")]()}}class ki extends Error{}function Ci(e,t){for(const s of e)s.baseVersion=t++}Ti[Si("0x51")]=xi();class Ii{constructor(e){this[Si("0x3c")]=e,this[Si("0x9a")]=new WeakMap}[Si("0x23")](e){let s=e[Si("0x6a")];for(;s--;){const r=e[s];if(!this._ignoredOperations[Si("0x5c")](r)){if(!this._operationToId[Si("0x5c")](r)){const e=(0,t.uid)()[Si("0xac")](1,18);this._operationToId[Si("0x1a")](r,e)}return this._operationToId.get(r)}}}[Si("0xaa")](e,t){if(!t)return;let s=e[Si("0x6a")];for(;s--;){const r=e[s];this[Si("0x3c")][Si("0x5c")](r)||this[Si("0x9a")].set(r,t)}}}var Ai,Ri,Ni=["pluginName","RealTimeCollaborativeEditing"];Ai=Ni,Ri=360,function(e){for(;--e;)Ai.push(Ai.shift())}(++Ri);var ji=function(e,t){return Ni[e-=0]};class Pi extends e.Plugin{static get requires(){return[Ti]}static get[ji("0x0")](){return ji("0x1")}}var Di=__webpack_require__(125),Mi=__webpack_require__.n(Di),Bi=__webpack_require__(6042),Ji=__webpack_require__.n(Bi);const Ui=["catch","remove","from","sessionAdd:","requires","unregister","hasCommentThread","content","_terminateService","startsWith","getComment","attributes","getConnectedSessions","commentThreadId","addUser","commentId","commentThreadRemoved","Permissions","all","add","cloud-services-internal-error: Comments Service is not connected.","commentUpdated","adapter","message","updateComment","comments","cloudservicescommentsadapter-disconnect-not-exist","has","collaboration.channelId","init","setPermissions","_services","get","reconnect","createdAt","plugins","getCommentThread","404","map","_setUpService","_getService","cloud-services-internal-error: Not connected.","removeComment","destroy","cloudservicescommentsadapter-connect-already-connected","assign","removeCommentThread","_fetchMissingUsersForThreads","context","update","commentAdded","_connectService","set","connect","config","addComment","listenTo","addCommentThread","mySessionId","disconnect","keys","code","CommentsService","CommentsRepository","delete","getUser"];var Vi,Fi;Vi=Ui,Fi=164,function(e){for(;--e;)Vi.push(Vi.shift())}(++Fi);const qi=function(e,t){return Ui[e-=0]};class Li extends e.ContextPlugin{static get[qi("0x26")](){return[l,qi("0x1f"),m,n.Users]}constructor(e){super(e),this[qi("0x41")]=new Map}async[qi("0x3f")](){const t=this[qi("0x10")],s=t[qi("0x3")][qi("0x0")](qi("0x1f"));if(t.plugins[qi("0x0")](l).addToReconnectionStack(this),s[qi("0x38")]={getCommentThread:async({channelId:e,threadId:t})=>{const s=await this[qi("0x8")](e)[qi("0x4")](t)[qi("0x22")](Gi);return await this._fetchMissingUsersForThreads([s]),{threadId:s[qi("0x2f")],comments:s.comments[qi("0x6")](zi)}},removeCommentThread:({channelId:e,threadId:t})=>this._getService(e)[qi("0xe")](t)[qi("0x22")](Yi)[qi("0x22")](Gi),addComment:({channelId:e,threadId:t,commentId:s,content:r,attributes:n})=>this[qi("0x8")](e)[qi("0x17")](t,s,r,n)[qi("0x22")](Gi),updateComment:({channelId:e,threadId:t,commentId:s,content:r,attributes:n})=>this[qi("0x8")](e)[qi("0x3a")](t,s,r,n).catch(Yi)[qi("0x22")](Gi),removeComment:({channelId:e,threadId:t,commentId:s})=>this._getService(e)[qi("0xa")](t,s)[qi("0x22")](Yi)[qi("0x22")](Gi)},t instanceof e.Context){const e=t[qi("0x16")][qi("0x0")]("collaboration.channelId"),s=t.plugins.get(m);await this[qi("0x7")](e);const r=await this[qi("0x41")][qi("0x0")](e)[qi("0x2e")]();this[qi("0x18")](s,qi("0x25")+e,((t,{session:r})=>{r.id===s[qi("0x1a")]&&(t.off(),this[qi("0x10")][qi("0x3")].get(qi("0x33"))[qi("0x40")](r.permissions,e))})),s.register(e,r)}}async[qi("0x7")](e){if(this._services[qi("0x3d")](e))throw new t.CKEditorError(qi("0xc"),null,{channelId:e});const s=this[qi("0x10")][qi("0x3")][qi("0x0")](qi("0x1f")),r=new Li.CommentsService(e);this[qi("0x41")][qi("0x14")](e,r),this.listenTo(r,qi("0x32"),((e,{commentThreadId:t})=>{const r=s[qi("0x4")](t);r&&r.remove({isFromAdapter:!0})})),this.listenTo(r,qi("0x12"),((t,r)=>{const n=r[qi("0x2f")];s[qi("0x28")](n)||s[qi("0x19")]({channelId:e,threadId:n,isFromAdapter:!0});const i=s[qi("0x4")](n);i&&i.addComment(Object[qi("0xd")](zi(r),{isFromAdapter:!0}))})),this[qi("0x18")](r,qi("0x37"),((e,{commentThreadId:t,commentId:r,content:n,attributes:i})=>{const o=s[qi("0x4")](t);if(o){const e=o[qi("0x2c")](r);e&&e[qi("0x11")]({content:n,attributes:i,isFromAdapter:!0})}})),this[qi("0x18")](r,"commentRemoved",((e,{commentThreadId:t,commentId:r})=>{const n=s[qi("0x4")](t);if(n){const e=n[qi("0x2c")](r);e&&e[qi("0x23")]({isFromAdapter:!0})}})),await this[qi("0x13")](e)}[qi("0xb")](){if(this.context instanceof e.Context){const e=this[qi("0x10")][qi("0x16")][qi("0x0")](qi("0x3e"));this[qi("0x2a")](e)}}[qi("0x2a")](e){if(!this._services[qi("0x3d")](e))throw new t.CKEditorError(qi("0x3c"),null,{channelId:e});this[qi("0x8")](e)[qi("0x1b")](),this[qi("0x41")][qi("0x20")](e)}async[qi("0x1")](){for(const e of this[qi("0x41")][qi("0x1c")]())await this._connectService(e);if(this[qi("0x10")]instanceof e.Context){const e=this[qi("0x10")][qi("0x16")][qi("0x0")]("collaboration.channelId"),t=this[qi("0x10")].plugins[qi("0x0")](m);t[qi("0x27")](e);const s=await this[qi("0x41")][qi("0x0")](e).getConnectedSessions();t.register(e,s)}}async _connectService(e){const{connection:t}=this[qi("0x10")][qi("0x3")][qi("0x0")](l),s=this[qi("0x10")][qi("0x3")][qi("0x0")](qi("0x1f")),r=this[qi("0x41")][qi("0x0")](e),n=await r[qi("0x15")](t);await this._fetchMissingUsersForThreads(n);const i=new Set(Array[qi("0x24")](s.getCommentThreads({channelId:e}),(e=>e.id)));for(const e of n)i[qi("0x20")](e.commentThreadId);for(const e of i)s.getCommentThread(e)[qi("0x23")]({isFromAdapter:!0});for(const t of n){let r=s[qi("0x4")](t[qi("0x2f")]);r||(r=s[qi("0x19")]({channelId:e,threadId:t[qi("0x2f")],isFromAdapter:!0}));const n=new Set(Array[qi("0x24")](r[qi("0x3b")],(e=>e.id)));for(const e of t[qi("0x3b")])n.delete(e[qi("0x31")]);for(const e of n)r[qi("0x2c")](e)[qi("0x23")]({isFromAdapter:!0});for(const e of t[qi("0x3b")]){const t=r.getComment(e[qi("0x31")]);t?t[qi("0x29")]!==e[qi("0x29")]&&t[qi("0x11")]({content:e[qi("0x29")],isFromAdapter:!0}):r[qi("0x17")](Object[qi("0xd")](zi(e),{isFromAdapter:!0}))}}}_getService(e){if(!this[qi("0x41")][qi("0x3d")](e))throw new t.CKEditorError("cloudservicescommentsadapter-service-not-exist",null,{channelId:e});return this[qi("0x41")][qi("0x0")](e)}[qi("0xf")](e){const t=this[qi("0x10")][qi("0x3")].get(n.Users),{connection:s}=this[qi("0x10")].plugins[qi("0x0")](l),r=new Set;for(const{comments:s}of e)for(const{userId:e}of s)t[qi("0x21")](e)||r[qi("0x35")](e);return Promise[qi("0x34")](Array.from(r,(async e=>{const r=await gi()[qi("0x0")](s,e);t[qi("0x21")](e)||t[qi("0x30")](r)})))}}async function Yi(e){if(qi("0x5")!==e[qi("0x1d")])throw e}function Gi(e){if((t=e)[qi("0x39")].startsWith(qi("0x36"))||t.message[qi("0x2b")](qi("0x9"))||t[qi("0x39")][qi("0x2b")]("cloud-services-internal-error: Request timeout."))return new Promise((()=>{}));var t;throw e}function zi(e){return{threadId:e.commentThreadId,commentId:e[qi("0x31")],content:e[qi("0x29")],createdAt:e[qi("0x2")],authorId:e.userId,attributes:e[qi("0x2d")]}}Li[qi("0x1e")]=Ji();const $i=["attributes","getSuggestion","find","cloud-services-internal-error: Not connected.","init","_fetchMissingUsersForThreads","adapter","_trackChangesService","TrackChangesService","type","all","get","getUser","_waitForServiceReady","state","_saved","values","data","then","requires","editor","isConnected","connect","message","add","delete","addToReconnectionStack","collaboration.channelId","hasSuggestion","set","catch","_bufferedRequests","cloud-services-internal-error: Request timeout.","reconnect","plugins","listenTo","startsWith","addSuggestionData","connection","TrackChangesEditing","off"];var Wi,Hi;Wi=$i,Hi=405,function(e){for(;--e;)Wi.push(Wi.shift())}(++Hi);const Ki=function(e,t){return $i[e-=0]};class Zi extends e.Plugin{static get[Ki("0x18")](){return[Li,Ki("0x3"),l]}constructor(e){super(e),this[Ki("0x24")]=new Map}[Ki("0x9")](){const e=this[Ki("0x19")][Ki("0x27")][Ki("0x10")](l),t=this[Ki("0x19")][Ki("0x27")].get(Ki("0x3")),s=this[Ki("0x19")].config[Ki("0x10")](Ki("0x20"));return e[Ki("0x1f")](this),this[Ki("0xc")]=new Zi.TrackChangesService(s),t[Ki("0xb")]={getSuggestion:async e=>{await this._waitForServiceReady();const t=await this[Ki("0xc")].get(e)[Ki("0x23")](Xi);return await this[Ki("0xa")]([t]),t},addSuggestion:async({id:e,type:t,data:s,originalSuggestionId:r,attributes:n})=>{await this._waitForServiceReady();const i={id:e,type:t,data:s,originalSuggestionId:r,attributes:n},o=await this._trackChangesService[Ki("0x1d")](e,t,s,r,n)[Ki("0x23")]((t=>{if(Qi(t))return new Promise((t=>{this[Ki("0x24")][Ki("0x22")](e,{resolve:t,suggestionData:i})}));throw t}));return this[Ki("0x24")][Ki("0x1e")](e),o},updateSuggestion:async(e,t)=>{if(await this[Ki("0x12")](),"open"!==t[Ki("0x13")])return this[Ki("0xc")].update(e,t)[Ki("0x23")](Xi)}},this[Ki("0x28")](this[Ki("0xc")],"suggestionUpdated",((e,s)=>{t[Ki("0x21")](s.id)&&(t[Ki("0x6")](s.id)[Ki("0x5")]=s[Ki("0x5")])})),this[Ki("0xc")][Ki("0x1b")](e[Ki("0x2")])[Ki("0x17")]((e=>this._fetchMissingUsersForThreads(e)[Ki("0x17")]((()=>{for(const s of e)t.addSuggestionData(s)[Ki("0x14")]=!0}))))}async[Ki("0x26")](){const e=this.editor[Ki("0x27")][Ki("0x10")]("TrackChangesEditing"),{connection:t}=this[Ki("0x19")][Ki("0x27")][Ki("0x10")](l),s=await this[Ki("0xc")].connect(t);await this[Ki("0xa")](s);for(const{suggestionData:e,resolve:t}of this[Ki("0x24")][Ki("0x15")]()){let r=s[Ki("0x7")]((t=>t.id===e.id));r||(r=await this[Ki("0xc")][Ki("0x1d")](e.id,e[Ki("0xe")],e[Ki("0x16")],e.originalSuggestionId)),t(r)}for(const t of s)e[Ki("0x21")](t.id)||e[Ki("0x1")](t)}async[Ki("0x12")](){this[Ki("0xc")][Ki("0x1a")]||await new Promise((e=>{this[Ki("0x28")](this._trackChangesService,"connected",(t=>{t[Ki("0x4")](),e()}))}))}[Ki("0xa")](e){const t=this.editor.plugins[Ki("0x10")](n.Users),{connection:s}=this[Ki("0x19")][Ki("0x27")][Ki("0x10")](l),r=new Set;for(const{authorId:s}of e)t.getUser(s)||r.add(s);return Promise[Ki("0xf")](Array.from(r).map((e=>gi()[Ki("0x10")](s,e)[Ki("0x17")]((s=>{t[Ki("0x11")](e)||t.addUser(s)})))))}}function Xi(e){if(Qi(e))return new Promise((()=>{}));throw e}function Qi(e){return e[Ki("0x1c")][Ki("0x0")](Ki("0x8"))||e[Ki("0x1c")][Ki("0x0")](Ki("0x25"))}Zi[Ki("0xd")]=Mi();const eo=["data","editor","collaboration.channelId","RealTimeCollaborativeComments","ready","get","requires","destroy","Comments","CommentsRepository","switchReadOnly","pluginName","plugins","config","CommentsEditing","once","change:state","init","listenTo"];var to,so;to=eo,so=222,function(e){for(;--e;)to.push(to.shift())}(++so);const ro=function(e,t){return eo[e-=0]};class no extends e.Plugin{static get[ro("0xc")](){return[ro("0xe"),Li,Pi,l]}static get[ro("0x11")](){return ro("0x9")}[ro("0x4")](){const e=this[ro("0x7")][ro("0x12")][ro("0xb")](l),t=this[ro("0x7")][ro("0x12")][ro("0xb")](ro("0x1")),s=this.editor.plugins[ro("0xb")](Li);return this[ro("0x7")][ro("0x6")][ro("0x2")](ro("0xa"),(()=>{this[ro("0x5")](e,ro("0x3"),((e,s,r)=>{t.isThreadsLoadingPaused="connected"!==r}))})),this[ro("0x5")](e,ro("0x3"),((e,t,s)=>{this[ro("0x7")][ro("0x12")][ro("0xb")](ro("0xf"))[ro("0x10")]("connected"!==s)})),s._setUpService(this[ro("0x7")][ro("0x0")][ro("0xb")](ro("0x8")))}[ro("0xd")](){this[ro("0x7")][ro("0x12")].get(Li)._terminateService(this[ro("0x7")][ro("0x0")][ro("0xb")](ro("0x8"))),super.destroy()}}var io,oo,ao=["pluginName","RealTimeCollaborativeTrackChanges","requires","TrackChanges"];io=ao,oo=285,function(e){for(;--e;)io.push(io.shift())}(++oo);var co=function(e,t){return ao[e-=0]};class uo extends e.Plugin{static get[co("0x1")](){return[no,Zi,co("0x2")]}static get[co("0x3")](){return co("0x0")}}var lo=__webpack_require__(8811),ho=__webpack_require__.n(lo),fo=__webpack_require__(8689),po=__webpack_require__.n(fo);const yo=["_createCurrentRevision","diffData","_fetchMissingUsers","adapter","_revisions","change:_isPendingUpdate","once","addRevisionData","getOperations","_fixRevision","_bufferUpdate","_preventResendingRevisionData","plugins","init","config","authorsIds","getUser","_domEmitter","marker","isEmptyCurrent","_offset","message","get","RevisionHistoryService","connect","_oldOffset","_isConnected","then","isBundleUploaded","remove","_handleReconnectionError","_revisionDataBuilder","_isEditorInitialDataDifferent","change:_isConnected","length","stopListening","authors","_lastRequestId","serverHistory","fromVersion","getRevision","_waitForServiceReady","sessionId","reconnect","createdAt","map","affectsData","addUser","RevisionTracker","cloudServices.bundleVersion","revisionsUpdated","connected","toVersion","requires","destroy","catch","off","all","listenTo","set","buildRevisionData","max","updateRevisions","repository","_getLatestVersion","collaboration.channelId","_getLatestVersionFromServerOperations","_revisionHistoryService","currentRevision","has","wrongRequestId","creatorId","initialData","editor","cloud-services-internal-error: Revision History Service is not connected.","isConnected","_bufferedUpdates","_update","editor-initial-data-replaced-with-revision-data","cloud-services-internal-error: Request timeout.","_revisionTracker","connection","_handleRevisionsUpdate","setRevisionData","add","getRevisionDocumentData","baseVersion","bind","startsWith","from"];var mo,vo;mo=yo,vo=124,function(e){for(;--e;)mo.push(mo.shift())}(++vo);const xo=function(e,t){return yo[e-=0]};class _o extends e.Plugin{static get[xo("0x13")](){return[l,Ti,xo("0xe"),m,n.Users]}async[xo("0x45")](){this._lastRequestId=null,this._revisionTracker=this[xo("0x27")].plugins[xo("0x4e")]("RevisionTracker");const e=this[xo("0x27")][xo("0x44")][xo("0x4e")](Ti),s=e[xo("0x4")],r=this[xo("0x27")][xo("0x44")][xo("0x4e")](l);r.addToReconnectionStack(this);const n=this[xo("0x27")][xo("0x46")][xo("0x4e")](xo("0x1f"));this[xo("0x21")]=new(_o[xo("0x4f")])(n),this[xo("0x2e")].setSource({history:s,getLatestVersion:()=>this[xo("0x1e")](),getCurrentRevisionId:()=>e[xo("0x8")]});const i=this[xo("0x27")][xo("0x46")][xo("0x4e")](xo("0xf"))||t.version,o=await po()[xo("0x54")](r.connection,i);this[xo("0x2e")][xo("0x3b")]={getRevision:async({revisionId:e})=>(await this._waitForServiceReady(),await this[xo("0x21")][xo("0x6")](e)),updateRevisions:async e=>{await this[xo("0x7")]();const t=this._revisionTracker[xo("0x22")];if(o){if(0===(e=e.filter((e=>e.id!==t.id))).length)return}else for(const s of e)s.id===t.id&&(s[xo("0x4b")]=s.fromVersion===s[xo("0x12")]);return this[xo("0x21")][xo("0x1c")](e,this._lastRequestId)[xo("0x53")]((e=>{this[xo("0x3")]=e}))[xo("0x15")]((t=>{if(!(go(t)||"400"===t.code&&void 0!==t.data[xo("0x24")]))throw t;for(const t of e)!this._revisionTracker[xo("0x1d")][xo("0x6")](t.id)||this._revisionTracker[xo("0x42")](t.id,t,!1);if(go(t))throw t}))}},this[xo("0x18")](this[xo("0x21")],xo("0x10"),((e,{revisionsData:t,requestId:s})=>{Math[xo("0x1b")](...t[xo("0xb")]((e=>e.toVersion)))>this[xo("0x20")]()-1?this[xo("0x1e")]()[xo("0x53")]((()=>{this[xo("0x30")](t,s)})):this[xo("0x30")](t,s)}));const{revisions:a,requestId:c}=await this[xo("0x21")][xo("0x50")](r[xo("0x2f")]);this._lastRequestId=c,await this[xo("0x3a")](a);for(const e of a)this[xo("0x2e")][xo("0x3f")](e);if(a.length>0){const e=this[xo("0x2e")][xo("0x1d")].getRevision(0),s=await this._revisionTracker[xo("0x33")](e);this[xo("0x58")](this.editor,s)&&((0,t.logWarning)(xo("0x2c")),this[xo("0x27")].config[xo("0x19")](xo("0x26"),s))}this[xo("0x18")](e,xo("0x59"),((t,s,r)=>{r&&(this[xo("0x51")]=e[xo("0x4c")],t.off())})),this._revisionTracker[xo("0x35")]("isEnabled").to(r,"state",(e=>xo("0x11")===e))}async[xo("0x9")](){const e=this.editor[xo("0x44")][xo("0x4e")](l),t=this[xo("0x27")][xo("0x44")][xo("0x4e")](Ti),s=async()=>{const s=this[xo("0x2e")][xo("0x22")],r=s.id,n=r!==t[xo("0x8")];if(n){const e=t._offset-this[xo("0x51")],n=this[xo("0x20")]();if(this[xo("0x2e")][xo("0x57")].reInit(),s[xo("0x12")]+e!==n){const t=s[xo("0x5")]+e,r=this[xo("0x27")][xo("0x44")][xo("0x4e")]("Users"),i=this._revisionTracker[xo("0x1a")]({currentRevision:s,from:t,to:n});i.id=s.id;const o=i[xo("0x47")][xo("0xb")]((e=>r.getUser(e)));s[xo("0x2b")]({...i,authors:o},!0),this[xo("0x2e")][xo("0x42")](s.id,i,!0)}this[xo("0x2e")]._startingVersion=n,s[xo("0x12")]===s[xo("0x5")]&&!this[xo("0x2e")][xo("0x2a")][xo("0x23")](r)&&this[xo("0x2e")][xo("0x1d")][xo("0x3c")][xo("0x55")](r),this[xo("0x2e")][xo("0x38")](n)}const{revisions:i,requestId:o}=await this[xo("0x21")].reconnect(e[xo("0x2f")],this[xo("0x3")]);n&&i.length>0?t[xo("0x56")]():(await this[xo("0x3a")](i),this[xo("0x30")](i,o),this[xo("0x2e")].sendBufferedUpdates())};return t[xo("0x52")]?s():new Promise(((e,r)=>{t[xo("0x3e")](xo("0x59"),(()=>{s()[xo("0x53")](e).catch(r)}))}))}destroy(){this[xo("0x49")]&&this[xo("0x49")][xo("0x1")](),super[xo("0x14")]()}async[xo("0x7")](){this[xo("0x21")][xo("0x29")]||await new Promise((e=>{this[xo("0x18")](this[xo("0x21")],xo("0x11"),(t=>{t[xo("0x16")](),e()}))}))}_getLatestVersionFromServerOperations(){const e=this[xo("0x27")][xo("0x44")][xo("0x4e")](Ti)[xo("0x4")];for(const t of e[xo("0x40")]().reverse())if(xo("0x4a")!==t.type||t[xo("0xc")])return t[xo("0x34")]+1}_isEditorInitialDataDifferent(e,t){let s=e[xo("0x46")][xo("0x4e")](xo("0x26"));if(void 0===s)return!1;"string"==typeof s&&(s={main:s});for(const e of Object.keys(t))if(""!==s[e].trim()&&s[e]!==t[e])return!0;return!1}[xo("0x1e")](){const e=this.editor[xo("0x44")].get(Ti);return new Promise((t=>{e._isPendingUpdate?e[xo("0x3e")](xo("0x3d"),(()=>{t(this._getLatestVersionFromServerOperations())})):t(this[xo("0x20")]())}))}_handleRevisionsUpdate(e,t){const s=this._revisionTracker[xo("0x1d")];this[xo("0x3")]=t;for(const t of e){const e=s[xo("0x6")](t.id);if(e){if((t[xo("0x5")]||t[xo("0x12")])&&(t[xo("0x39")]=null),e===this._revisionTracker.currentRevision){const s=Math[xo("0x1b")](e[xo("0x12")],t.toVersion),r=Math[xo("0x1b")](e[xo("0x5")],t[xo("0x5")]);let n;e.toVersion===t[xo("0x12")]&&e[xo("0x5")]===t[xo("0x5")]?(n=!0,this._preventResendingRevisionData(t)):t.toVersion===s&&t[xo("0x5")]===r?n=!1:(e[xo("0x12")]===s&&e[xo("0x5")]===r||this[xo("0x41")]({revision:e,from:r,to:s}),n=!0),n&&(delete t[xo("0x5")],delete t[xo("0x12")],delete t.diffData,delete t[xo("0xa")],delete t[xo("0x47")])}this._revisionTracker[xo("0x31")](t),this[xo("0x43")](t)}else this[xo("0x2e")][xo("0x3f")](t)}const r=s.getRevisions();r.reverse();for(let e=0;e<r[xo("0x0")]-1;e++){const t=r[e],s=r[e+1];if(t[xo("0x5")]<s[xo("0x12")]){const e=s[xo("0x12")],r=Math[xo("0x1b")](e,t.toVersion);this._fixRevision({revision:t,from:e,to:r})}}}_fixRevision({revision:e,from:t,to:s}={}){const r=this[xo("0x27")].plugins.get("Users"),n=this[xo("0x2e")].buildRevisionData({revision:e,from:t,to:s});n[xo("0x2")]=n[xo("0x47")][xo("0xb")]((e=>r.getUser(e))),e[xo("0x2b")](n)}[xo("0x43")](e){const t={};t.id=e.id;for(const s of Object.keys(e))"id"!==s&&(t[s]=void 0);this._revisionTracker[xo("0x42")](t.id,t,!0)}[xo("0x3a")](e){const t=this[xo("0x27")][xo("0x44")][xo("0x4e")](n.Users),{connection:s}=this.editor[xo("0x44")][xo("0x4e")](l),r=new Set;for(const t of e){for(const e of t[xo("0x47")])i(e);t[xo("0x25")]&&i(t[xo("0x25")])}return Promise[xo("0x17")](Array[xo("0x37")](r,(async e=>{const r=await gi()[xo("0x4e")](s,e);t[xo("0x48")](e)||t[xo("0xd")](r)})));function i(e){t[xo("0x48")](e)||r[xo("0x32")](e)}}}function go(e){return e[xo("0x4d")][xo("0x36")](xo("0x28"))||e[xo("0x4d")][xo("0x36")]("cloud-services-internal-error: Not connected.")||e[xo("0x4d")][xo("0x36")](xo("0x2d"))}_o[xo("0x4f")]=ho();var bo,wo,Oo=["RealTimeCollaborativeRevisionHistory","pluginName","RevisionHistory"];bo=Oo,wo=100,function(e){for(;--e;)bo.push(bo.shift())}(++wo);var So=function(e,t){return Oo[e-=0]};class Eo extends e.Plugin{static get requires(){return[So("0x1"),_o,Pi]}static get[So("0x0")](){return So("0x2")}}var To=Function.prototype,ko=Object.prototype,Co=To.toString,Io=ko.hasOwnProperty,Ao=Co.call(Object);const Ro=function(e){if(!Ke(e)||"[object Object]"!=se(e))return!1;var t=Ht(e);if(null===t)return!0;var s=Io.call(t,"constructor")&&t.constructor;return"function"==typeof s&&s instanceof s&&Co.call(s)==Ao};const No=function(e){return Ke(e)&&1===e.nodeType&&!Ro(e)},jo=["ck-presence-list__counter--hidden","usersCount","set","ck-presence-list__counter","div","bindTemplate","isHidden","setTemplate","CONNECTED_USERS"];var Po,Do;Po=jo,Do=149,function(e){for(;--e;)Po.push(Po.shift())}(++Do);const Mo=function(e,t){return jo[e-=0]};class Bo extends r.View{constructor(e){super(e);const t=this[Mo("0x0")];this[Mo("0x6")](Mo("0x5"),0),this[Mo("0x6")](Mo("0x1"),!0),this[Mo("0x2")]({tag:Mo("0x8"),attributes:{class:["ck",Mo("0x7"),t.if("isHidden",Mo("0x4"))]},children:[{text:t.to(Mo("0x5"),(t=>k(e,Mo("0x3"),t)))}]})}}const Jo=["bindTemplate","createCollection","execute","setTemplate","fire","ck-presence-list__list","div","items"];var Uo,Vo;Uo=Jo,Vo=467,function(e){for(;--e;)Uo.push(Uo.shift())}(++Vo);const Fo=function(e,t){return Jo[e-=0]};class qo extends r.View{constructor(e){super(e),this[Fo("0x4")]=this[Fo("0x6")]();const t=this[Fo("0x5")];this[Fo("0x0")]({tag:Fo("0x3"),attributes:{class:["ck",Fo("0x2")]},children:this[Fo("0x4")],on:{click:t.to((()=>this[Fo("0x1")](Fo("0x7"))))}})}}var Lo=__webpack_require__(3286),Yo={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};x()(Lo.Z,Yo);Lo.Z.locals;const Go=["counterView","inlineListView","set","setTemplate","bindTemplate","ck-reset","isCollapsed","locale","ck-presence-list--collapsed","ck-rounded-corners"];var zo,$o;zo=Go,$o=380,function(e){for(;--e;)zo.push(zo.shift())}(++$o);const Wo=function(e,t){return Go[e-=0]};class Ho extends r.View{constructor(e){super(e);const t=this[Wo("0x4")];this[Wo("0x2")](Wo("0x6"),!0),this[Wo("0x0")]=new Bo(this[Wo("0x7")]),this[Wo("0x1")]=new qo(e),this[Wo("0x3")]({tag:"div",attributes:{class:["ck","ck-presence-list",Wo("0x5"),Wo("0x9"),t.if("isCollapsed",Wo("0x8"))]},children:[this[Wo("0x0")],this[Wo("0x1")]]})}}var Ko,Zo,Xo=["ck-presence-list__dropdown-list","div","ck-presence-list__dropdown-list-wrapper","setTemplate","items"];Ko=Xo,Zo=315,function(e){for(;--e;)Ko.push(Ko.shift())}(++Zo);var Qo=function(e,t){return Xo[e-=0]};class ea extends r.View{constructor(e){super(e),this[Qo("0x4")]=this.createCollection(),this[Qo("0x3")]({tag:Qo("0x1"),attributes:{class:["ck",Qo("0x0")]},children:[{tag:Qo("0x1"),attributes:{class:["ck",Qo("0x2")]},children:this[Qo("0x4")]}]})}}const ta=["button","color","name","fire","execute","span","div","bindTemplate","tag","getBackgroundColorClass","true","ck-presence-list__dropdown-list-item"];var sa,ra;sa=ta,ra=410,function(e){for(;--e;)sa.push(sa.shift())}(++ra);const na=function(e,t){return ta[e-=0]};class ia extends r.View{constructor(e,t,s){super(e);const r=this[na("0x5")];this.userView=new n.UserView(e,t);const i={tag:na("0x4"),attributes:{class:["ck",na("0x9")]},children:[this.userView,{tag:"span",attributes:{class:["ck","ck-user__full-name"]},children:[{text:t[na("0x0")]}]},{tag:na("0x3"),attributes:{class:["ck","ck-presence-list__marker",t[na("0xb")][na("0x7")]()],"aria-hidden":na("0x8")}}]};s&&(i[na("0x6")]=na("0xa"),i.on={click:r.to((()=>this[na("0x1")](na("0x2"))))}),this.setTemplate(i)}}const oa=["setTemplate","ck-tooltip","ck-tooltip_","span","ck-tooltip__text__inner","bindTemplate"];var aa,ca;aa=oa,ca=234,function(e){for(;--e;)aa.push(aa.shift())}(++ca);const ua=function(e,t){return oa[e-=0]};class da extends r.TooltipView{constructor(e){super(e);const t=this[ua("0x5")];this[ua("0x0")]({tag:ua("0x3"),attributes:{class:["ck",ua("0x1"),t.to("position",(e=>ua("0x2")+e))]},children:[{tag:ua("0x3"),attributes:{class:["ck-tooltip__text"]},children:[{tag:ua("0x3"),class:[ua("0x4")],children:[{text:t.to("text")}]}]}]})}}const la=["ck-presence-list__list-item","color","tag","text","tooltipView","name","ck-presence-list__marker","userView","true","getBackgroundColorClass","execute","div","fire","button","setTemplate","bindTemplate","markerView","span"];var ha,fa;ha=la,fa=447,function(e){for(;--e;)ha.push(ha.shift())}(++fa);const pa=function(e,t){return la[e-=0]};class ya extends r.View{constructor(e,t,s){super(e);const r=this[pa("0x0")];this[pa("0xa")]=new n.UserView(e,t),this[pa("0x1")]=new ma(e,t),this[pa("0x7")]=new da(e),this[pa("0x7")][pa("0x6")]=this[pa("0xa")][pa("0x8")];const i={tag:pa("0xe"),attributes:{class:["ck",pa("0x3")]},children:[this[pa("0xa")],this.markerView,this.tooltipView]};s&&(i[pa("0x5")]=pa("0x10"),i.on={click:r.to((()=>this[pa("0xf")](pa("0xd"))))}),this.setTemplate(i)}}class ma extends r.View{constructor(e,t){super(e),this[pa("0x11")]({tag:pa("0x2"),attributes:{class:["ck",pa("0x9"),t[pa("0x4")][pa("0xc")]()],"aria-hidden":pa("0xb")}})}}const va=["render","_handleUserRemove","inlineListView","_createView","bindTo","set","element","unpin","isRendered","add","get","presencelist-collapseat-invalid-format","bodyCollection","hideDropdown","lastConnectedUsers","execute","define","config","presenceDropdownView","listenTo","showDropdown","usersCount","init","isHidden","items","ck ck-presence-list__balloon","presenceList","_handleUserAdd","destroy","isCollapsed","counterView","_allConnectedUsers","locale","presenceList.container","reverse","appendChild","balloonPanelView","presenceList.collapseAt","content","onClick","length","view","plugins","presencelist-missing-container","context","number","using","remove","allConnectedUsers"];var xa,_a;xa=va,_a=185,function(e){for(;--e;)xa.push(xa.shift())}(++_a);const ga=function(e,t){return va[e-=0]};class ba extends e.ContextPlugin{constructor(e){super(e),e[ga("0x1c")][ga("0x1b")](ga("0x25"),{collapseAt:6});const s=e[ga("0x1c")][ga("0x15")](ga("0x30"));if(ga("0x7")!=typeof s)throw new t.CKEditorError(ga("0x16"),this);if(s<1)throw new t.CKEditorError("presencelist-collapseat-invalid-format",this)}static get requires(){return[m]}[ga("0x21")](){const e=this[ga("0x6")];this._allConnectedUsers=e[ga("0x4")][ga("0x15")](m)[ga("0xa")],this[ga("0x10")](ga("0x20"),0),this[ga("0x19")]=new t.Collection,this.balloonPanelView=new r.BalloonPanelView,this[ga("0x2f")].class=ga("0x24"),this[ga("0x3")]=this._createView(),this[ga("0x1d")]=void 0;for(const e of this._allConnectedUsers)this[ga("0x26")](e);this.listenTo(this[ga("0x2a")],ga("0x14"),((e,t)=>{this[ga("0x26")](t)})),this[ga("0x1e")](this[ga("0x2a")],ga("0x9"),((e,t)=>{this[ga("0xc")](t)}))}[ga("0xe")](){const e=this[ga("0x6")],s=new Ho(this.context[ga("0x2b")]),n=this[ga("0x2f")];if(!No(e[ga("0x1c")][ga("0x15")](ga("0x2c"))))throw new t.CKEditorError(ga("0x5"),this);return s.counterView.bind("usersCount").to(this),s.bind(ga("0x28")).to(this,ga("0x20"),(t=>{const r=t>=e.config[ga("0x15")]("presenceList.collapseAt");return s[ga("0x29")][ga("0x22")]=!(1==t||r),r||this[ga("0x18")](),r})),s.inlineListView[ga("0x23")].bindTo(this.lastConnectedUsers)[ga("0x8")]((t=>{const s=e.config[ga("0x15")]("presenceList"),r=new ya(e[ga("0x2b")],t,s[ga("0x1")]);return s[ga("0x1")]&&this[ga("0x1e")](r,ga("0x1a"),(()=>{this[ga("0x3")][ga("0x28")]||s[ga("0x1")](t,r.element)})),r})),this[ga("0x1e")](s[ga("0xd")],ga("0x1a"),(()=>{this[ga("0x1d")]?this[ga("0x18")]():this[ga("0x3")][ga("0x28")]&&this[ga("0x1f")]()})),s[ga("0xb")](),n.render(),(0,r.clickOutsideHandler)({emitter:s,activator:()=>n.isVisible,contextElements:[n.element,s[ga("0xd")][ga("0x11")]],callback:()=>this.hideDropdown()}),e[ga("0x1c")][ga("0x15")](ga("0x2c"))[ga("0x2e")](s[ga("0x11")]),this.bodyCollection=new r.BodyCollection(this[ga("0x6")].locale),this.bodyCollection.attachToDom(),this[ga("0x17")][ga("0x14")](n),s}_handleUserAdd(e){this[ga("0x20")]++,5==this[ga("0x19")].length&&this[ga("0x19")][ga("0x9")](0),this.lastConnectedUsers.add(e)}_handleUserRemove(e){if(this[ga("0x20")]--,this[ga("0x19")].get(e.id)&&(this[ga("0x19")][ga("0x9")](e.id),this[ga("0x19")][ga("0x2")]<this.usersCount))for(const e of Array.from(this[ga("0x2a")])[ga("0x2d")]())if(!this[ga("0x19")][ga("0x15")](e.id))return void this[ga("0x19")][ga("0x14")](e,0)}[ga("0x1f")](){if(this.presenceDropdownView)return;this[ga("0x1d")]=new ea;const e=this[ga("0x6")].config[ga("0x15")]("presenceList");this.presenceDropdownView.items[ga("0xf")](this[ga("0x2a")]).using((t=>{const s=new ia(this.context[ga("0x2b")],t,!!e[ga("0x1")]);return e.onClick&&this[ga("0x1e")](s,"execute",(()=>{e.onClick(t,s[ga("0x11")])})),s})),this[ga("0x2f")][ga("0x0")][ga("0x14")](this[ga("0x1d")]),this[ga("0x2f")].pin({target:this[ga("0x3")][ga("0xd")][ga("0x11")]})}[ga("0x18")](){this.presenceDropdownView&&(this.balloonPanelView[ga("0x12")](),this[ga("0x2f")][ga("0x0")].remove(this[ga("0x1d")]),this[ga("0x1d")][ga("0x27")](),this[ga("0x1d")]=void 0)}destroy(){super[ga("0x27")](),this[ga("0x3")]&&this[ga("0x3")][ga("0x13")]&&this[ga("0x3")][ga("0x27")](),this[ga("0x17")]&&this[ga("0x17")].detachFromDom()}}var wa,Oa,Sa=["pluginName","requires"];wa=Sa,Oa=456,function(e){for(;--e;)wa.push(wa.shift())}(++Oa);var Ea=function(e,t){return Sa[e-=0]};class Ta extends e.ContextPlugin{static get[Ea("0x1")](){return[m,ba]}static get[Ea("0x0")](){return"PresenceList"}}})(),(window.CKEditor5=window.CKEditor5||{}).realTimeCollaboration=__webpack_exports__})();