!function(t){const e=t.en=t.en||{};e.dictionary=Object.assign(e.dictionary||{},{CONNECTED_USERS:["1 connected user (me)","%0 connected users"],PENDING_ACTION_SENDING_DATA:"Sending data to the server.","Synchronization issue":"Synchronization issue","The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.":"The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.","The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.":"The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.","The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor.":"The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor."})}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),
/*!
 * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(()=>{var __webpack_modules__={2299:(t,e,s)=>{"use strict";var n;s.r(e),s.d(e,{NIL:()=>N,parse:()=>y,stringify:()=>d,v1:()=>m,v3:()=>T,v4:()=>k,v5:()=>A,validate:()=>a,version:()=>P});var r=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const a=function(t){return"string"==typeof t&&o.test(t)};for(var c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));const d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!a(s))throw TypeError("Stringified UUID is invalid");return s};var l,h,f=0,p=0;const m=function(t,e,s){var n=e&&s||0,r=e||new Array(16),o=(t=t||{}).node||l,a=void 0!==t.clockseq?t.clockseq:h;if(null==o||null==a){var c=t.random||(t.rng||i)();null==o&&(o=l=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==a&&(a=h=16383&(c[6]<<8|c[7]))}var u=void 0!==t.msecs?t.msecs:Date.now(),m=void 0!==t.nsecs?t.nsecs:p+1,y=u-f+(m-p)/1e4;if(y<0&&void 0===t.clockseq&&(a=a+1&16383),(y<0||u>f)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=u,p=m,h=a;var _=(1e4*(268435455&(u+=122192928e5))+m)%4294967296;r[n++]=_>>>24&255,r[n++]=_>>>16&255,r[n++]=_>>>8&255,r[n++]=255&_;var g=u/4294967296*1e4&268435455;r[n++]=g>>>8&255,r[n++]=255&g,r[n++]=g>>>24&15|16,r[n++]=g>>>16&255,r[n++]=a>>>8|128,r[n++]=255&a;for(var v=0;v<6;++v)r[n+v]=o[v];return e||d(r)};const y=function(t){if(!a(t))throw TypeError("Invalid UUID");var e,s=new Uint8Array(16);return s[0]=(e=parseInt(t.slice(0,8),16))>>>24,s[1]=e>>>16&255,s[2]=e>>>8&255,s[3]=255&e,s[4]=(e=parseInt(t.slice(9,13),16))>>>8,s[5]=255&e,s[6]=(e=parseInt(t.slice(14,18),16))>>>8,s[7]=255&e,s[8]=(e=parseInt(t.slice(19,23),16))>>>8,s[9]=255&e,s[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,s[11]=e/4294967296&255,s[12]=e>>>24&255,s[13]=e>>>16&255,s[14]=e>>>8&255,s[15]=255&e,s};function _(t,e,s){function n(t,n,r,i){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],s=0;s<t.length;++s)e.push(t.charCodeAt(s));return e}(t)),"string"==typeof n&&(n=y(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+t.length);if(o.set(n),o.set(t,n.length),(o=s(o))[6]=15&o[6]|e,o[8]=63&o[8]|128,r){i=i||0;for(var a=0;a<16;++a)r[i+a]=o[a];return r}return d(o)}try{n.name=t}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function g(t){return 14+(t+64>>>9<<4)+1}function v(t,e){var s=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(s>>16)<<16|65535&s}function x(t,e,s,n,r,i){return v((o=v(v(e,t),v(n,i)))<<(a=r)|o>>>32-a,s);var o,a}function b(t,e,s,n,r,i,o){return x(e&s|~e&n,t,e,r,i,o)}function w(t,e,s,n,r,i,o){return x(e&n|s&~n,t,e,r,i,o)}function O(t,e,s,n,r,i,o){return x(e^s^n,t,e,r,i,o)}function S(t,e,s,n,r,i,o){return x(s^(e|~n),t,e,r,i,o)}const E=function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var s=0;s<e.length;++s)t[s]=e.charCodeAt(s)}return function(t){for(var e=[],s=32*t.length,n="0123456789abcdef",r=0;r<s;r+=8){var i=t[r>>5]>>>r%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[g(e)-1]=e;for(var s=1732584193,n=-271733879,r=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=s,c=n,u=r,d=i;s=b(s,n,r,i,t[o],7,-680876936),i=b(i,s,n,r,t[o+1],12,-389564586),r=b(r,i,s,n,t[o+2],17,606105819),n=b(n,r,i,s,t[o+3],22,-1044525330),s=b(s,n,r,i,t[o+4],7,-176418897),i=b(i,s,n,r,t[o+5],12,1200080426),r=b(r,i,s,n,t[o+6],17,-1473231341),n=b(n,r,i,s,t[o+7],22,-45705983),s=b(s,n,r,i,t[o+8],7,1770035416),i=b(i,s,n,r,t[o+9],12,-1958414417),r=b(r,i,s,n,t[o+10],17,-42063),n=b(n,r,i,s,t[o+11],22,-1990404162),s=b(s,n,r,i,t[o+12],7,1804603682),i=b(i,s,n,r,t[o+13],12,-40341101),r=b(r,i,s,n,t[o+14],17,-1502002290),s=w(s,n=b(n,r,i,s,t[o+15],22,1236535329),r,i,t[o+1],5,-165796510),i=w(i,s,n,r,t[o+6],9,-1069501632),r=w(r,i,s,n,t[o+11],14,643717713),n=w(n,r,i,s,t[o],20,-373897302),s=w(s,n,r,i,t[o+5],5,-701558691),i=w(i,s,n,r,t[o+10],9,38016083),r=w(r,i,s,n,t[o+15],14,-660478335),n=w(n,r,i,s,t[o+4],20,-405537848),s=w(s,n,r,i,t[o+9],5,568446438),i=w(i,s,n,r,t[o+14],9,-1019803690),r=w(r,i,s,n,t[o+3],14,-187363961),n=w(n,r,i,s,t[o+8],20,1163531501),s=w(s,n,r,i,t[o+13],5,-1444681467),i=w(i,s,n,r,t[o+2],9,-51403784),r=w(r,i,s,n,t[o+7],14,1735328473),s=O(s,n=w(n,r,i,s,t[o+12],20,-1926607734),r,i,t[o+5],4,-378558),i=O(i,s,n,r,t[o+8],11,-2022574463),r=O(r,i,s,n,t[o+11],16,1839030562),n=O(n,r,i,s,t[o+14],23,-35309556),s=O(s,n,r,i,t[o+1],4,-1530992060),i=O(i,s,n,r,t[o+4],11,1272893353),r=O(r,i,s,n,t[o+7],16,-155497632),n=O(n,r,i,s,t[o+10],23,-1094730640),s=O(s,n,r,i,t[o+13],4,681279174),i=O(i,s,n,r,t[o],11,-358537222),r=O(r,i,s,n,t[o+3],16,-722521979),n=O(n,r,i,s,t[o+6],23,76029189),s=O(s,n,r,i,t[o+9],4,-640364487),i=O(i,s,n,r,t[o+12],11,-421815835),r=O(r,i,s,n,t[o+15],16,530742520),s=S(s,n=O(n,r,i,s,t[o+2],23,-995338651),r,i,t[o],6,-198630844),i=S(i,s,n,r,t[o+7],10,1126891415),r=S(r,i,s,n,t[o+14],15,-1416354905),n=S(n,r,i,s,t[o+5],21,-57434055),s=S(s,n,r,i,t[o+12],6,1700485571),i=S(i,s,n,r,t[o+3],10,-1894986606),r=S(r,i,s,n,t[o+10],15,-1051523),n=S(n,r,i,s,t[o+1],21,-2054922799),s=S(s,n,r,i,t[o+8],6,1873313359),i=S(i,s,n,r,t[o+15],10,-30611744),r=S(r,i,s,n,t[o+6],15,-1560198380),n=S(n,r,i,s,t[o+13],21,1309151649),s=S(s,n,r,i,t[o+4],6,-145523070),i=S(i,s,n,r,t[o+11],10,-1120210379),r=S(r,i,s,n,t[o+2],15,718787259),n=S(n,r,i,s,t[o+9],21,-343485551),s=v(s,a),n=v(n,c),r=v(r,u),i=v(i,d)}return[s,n,r,i]}(function(t){if(0===t.length)return[];for(var e=8*t.length,s=new Uint32Array(g(e)),n=0;n<e;n+=8)s[n>>5]|=(255&t[n/8])<<n%32;return s}(t),8*t.length))};const T=_("v3",48,E);const k=function(t,e,s){var n=(t=t||{}).random||(t.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){s=s||0;for(var r=0;r<16;++r)e[s+r]=n[r];return e}return d(n)};function C(t,e,s,n){switch(t){case 0:return e&s^~e&n;case 1:case 3:return e^s^n;case 2:return e&s^e&n^s&n}}function I(t,e){return t<<e|t>>>32-e}const R=function(t){var e=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var r=0;r<n.length;++r)t.push(n.charCodeAt(r))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),d=0;d<16;++d)u[d]=t[64*c+4*d]<<24|t[64*c+4*d+1]<<16|t[64*c+4*d+2]<<8|t[64*c+4*d+3];a[c]=u}a[o-1][14]=8*(t.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<o;++l){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[l][f];for(var p=16;p<80;++p)h[p]=I(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var m=s[0],y=s[1],_=s[2],g=s[3],v=s[4],x=0;x<80;++x){var b=Math.floor(x/20),w=I(m,5)+C(b,y,_,g)+v+e[b]+h[x]>>>0;v=g,g=_,_=I(y,30)>>>0,y=m,m=w}s[0]=s[0]+m>>>0,s[1]=s[1]+y>>>0,s[2]=s[2]+_>>>0,s[3]=s[3]+g>>>0,s[4]=s[4]+v>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,255&s[0],s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,255&s[1],s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,255&s[2],s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,255&s[3],s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,255&s[4]]};const A=_("v5",80,R),N="00000000-0000-0000-0000-000000000000";const P=function(t){if(!a(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},357:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=s(2209);class r extends n.CKEditorError{constructor(t,e,s=null,n={}){super("cloud-services-internal-error: "+t,e,n),this.code=s}static fromPublicError(t,e){const{message:s,traceId:n="",data:i={},code:o=null}=t;return new r(s+" "+(n?"Error Trace id: "+n+".":""),e,o,i)}}e.default=r},7622:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(2299),i=s(2209),o=n(s(3596)),a=n(s(7026)),c=n(s(7839)),u=n(s(5132)),d=n(s(4148)),l=n(s(223)),h=n(s(2968)),f=n(s(7158)),p=n(s(357)),m=n(s(6314)),y=n(s(6148)),_=n(s(961));e._SERVICE=1;class g{constructor(t,e){if(!t)throw new TypeError('Param "bundleVersion" must be provided.');this._id=null!=e?e:r.v4(),this._isConnected=!1,this._bundleVersion=t}getId(){return this._id}isConnected(){return this._isConnected}connect(t,e={buffers:[],types:[]},s){const n=new c.default(this.getId(),e.buffers,e.types,this._bundleVersion,s);return this._connect(t,n)}reconnect(t,e){if(this.isConnected())throw new p.default("Cannot reconnect to already connected service.",t);return this._connect(t,new d.default(this.getId(),e,this._bundleVersion))}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._connectedSessions&&(this._connectedSessions.disconnect(),this._connectedSessions=void 0),this.fire("disconnected"),this.stopListening())}async getDocumentDetails(){const t=new _.default(this.getId());if(!this._wsGateway)throw new m.default("Collaborative Editing",this);const s=await this._wsGateway._sendRequest(e._SERVICE,_.default.TYPE,o.default.encode(t));return o.default.decode(s,y.default)}async sendOperations(t,s,n){if(!t||!t.types||!t.types.length)throw new p.default("Cannot send empty update.",this._wsGateway);const r="number"==typeof s?s:parseInt(s);if(!Number.isInteger(r)||r<0)throw new p.default("Base version not provided.",this._wsGateway);const i=new u.default(this.getId(),t.buffers,t.types,r,[],n);if(!this._wsGateway||!this._isConnected)throw new m.default("Collaborative Editing",this);const a=await this._wsGateway._sendRequest(e._SERVICE,u.default.TYPE,o.default.encode(i));return o.default.decode(a,l.default)}async getConnectedSessions(){if(!this._isConnected)throw new m.default("Collaborative Editing",this);return this._connectedSessions||(this._connectedSessions=await a.default.getConnectedSessions(this._wsGateway,this._id,e._SERVICE)),this._connectedSessions}static getConnectedSessions(t,s){return a.default.getConnectedSessions(t,s,e._SERVICE)}async _connect(t,s){if(this.isConnected())return;if(t.state!==f.default.STATE_CONNECTED)throw new p.default("WebSocket Gateway is not connected.",t);this._wsGateway=t,this.stopListening(t,"change:state");const n=await t._sendRequest(e._SERVICE,s.constructor.TYPE,o.default.encode(s)),r=o.default.decode(n,h.default);return this.listenTo(t,"change:state",((t,e,s)=>this._onWsGatewayStateChange(s)),{priority:f.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(t,r.channel),this._isConnected=!0,this.fire("connected"),r}_connectToChannel(t,s){this._channel=t._getChannel(e._SERVICE,s),this.listenTo(this._channel,this._channel.getEventName(u.default.TYPE),((t,e)=>{const s=o.default.decode(e,u.default);this.fire("operationsReceived",s.baseVersion,s.data,s.metadata)}))}_onWsGatewayStateChange(t){t===f.default.STATE_DISCONNECTED&&this.disconnect()}}g._SERVICE=e._SERVICE,i.mix(g,i.EmitterMixin),e.default=g},8677:function(t,e,s){"use strict";var n=this&&this.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]])}return s},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(s(5945));class o extends i.default{static toJSON(t){var{createdAt:e}=t,s=n(t,["createdAt"]);const r=Object.assign({},s);return e instanceof Date&&(r.createdAt=e.toISOString()),r}static fromJSON(t){var{createdAt:e}=t,s=n(t,["createdAt"]);const r=Object.assign({},s);return e&&(r.createdAt=new Date(e)),r}}e.default=o,o.DESCRIPTOR_NAME="OperationMetadataDescriptor",o.DESCRIPTOR={fields:{userId:{type:"string",id:1},type:{type:"string",id:2,rule:"optional"},createdAt:{type:"string",id:3,rule:"optional"}}}},6685:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static prepareMetadataForOperations(t,e){if(!(t&&t.length&&e&&e.length))return[];const s=[];let n=0;for(const r of t)if(0!==r){if(!e[n])throw new Error("Missing metadata for a operation");s.push(e[n]),n++}else s.push(s[s.length-1]);return s}static removeUnnecessaryMetadata(t,e){if(!(t&&t.length&&e&&e.length))return[];const s=[];for(let n=0;n<t.length;n++)if(0!==t[n]){if(!e[n])throw new Error("Missing metadata for a operation");s.push(e[n])}return s}}},7839:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s,n,r=""){super(),this.id=t,this.buffers=e,this.types=s,this.bundleVersion=n,this.lastOperationId=r}toJSON(){return{id:this.id,buffers:this.buffers,types:this.types,bundleVersion:this.bundleVersion,lastOperationId:this.lastOperationId}}static fromJSON(t){return new i(t.id,t.buffers,t.types,t.bundleVersion,t.lastOperationId)}}e.default=i,i.TYPE="11",i.READABLE_TYPE_NAME="connectToDocument",i.DESCRIPTOR_NAME="CollaborativeEditingConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},bundleVersion:{type:"string",id:2},buffers:{rule:"repeated",type:"bytes",id:3},types:{rule:"repeated",type:"uint32",id:4},lastOperationId:{type:"string",id:5}}}},4148:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s){super(),this.id=t,this.lastKnowVersion=e,this.bundleVersion=s}toJSON(){return{id:this.id,bundleVersion:this.bundleVersion,lastKnowVersion:this.lastKnowVersion}}static fromJSON(t){return new i(t.id,t.lastKnowVersion,t.bundleVersion)}}e.default=i,i.TYPE="12",i.READABLE_TYPE_NAME="reconnectToDocument",i.DESCRIPTOR_NAME="CollaborativeEditingReconnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},bundleVersion:{type:"string",id:2},lastKnowVersion:{type:"uint32",id:3}}}},5132:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(6685)),o=n(s(8677));class a extends r.default{constructor(t,e,s,n,r=[],i=""){super(),this.id=t,this.buffers=e,this.types=s,this.baseVersion=n,this.metadata=r,this.lastOperationId=i}get data(){return{buffers:this.buffers,types:this.types,baseVersion:this.baseVersion,lastOperationId:this.lastOperationId}}toJSON(){return{id:this.id,buffers:this.buffers,types:this.types,baseVersion:this.baseVersion,metadata:i.default.removeUnnecessaryMetadata(this.types,this.metadata).map(o.default.toJSON),lastOperationId:this.lastOperationId}}static fromJSON(t){return new a(t.id,t.buffers,t.types,t.baseVersion,i.default.prepareMetadataForOperations(t.types,t.metadata).map(o.default.fromJSON),t.lastOperationId)}}e.default=a,a.TYPE="13",a.READABLE_TYPE_NAME="updateDocument",a.DESCRIPTOR_NAME="CollaborativeEditingUpdateMessage",a.DESCRIPTOR={fields:{id:{type:"string",id:1},baseVersion:{type:"uint32",id:2},buffers:{rule:"repeated",type:"bytes",id:3},types:{rule:"repeated",type:"uint32",id:4},metadata:{rule:"repeated",type:"OperationMetadataDescriptor",id:6},lastOperationId:{type:"string",id:7}}}},961:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.documentId=t}get data(){return{documentId:this.documentId}}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="14",i.READABLE_TYPE_NAME="getDocumentDetails",i.DESCRIPTOR_NAME="GetDocumentDetailsMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1},environmentId:{type:"string",id:2}}}},2968:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(6685)),o=n(s(8677));class a extends r.default{constructor(t,e,s=[],n=[],r=0,i=[],o=null,a="",c=""){super(),this.channel=t,this.version=e,this.buffers=s,this.types=n,this.offset=r,this.metadata=i,this.initData=o,this.sessionId=a,this.lastOperationId=c}get data(){return{buffers:this.buffers,types:this.types,baseVersion:this.version-this.types.length,lastOperationId:this.lastOperationId}}get wereChangesApplied(){var t;return!(null===(t=this.types)||void 0===t?void 0:t.length)&&null===this.initData}toJSON(){var t;return{channel:this.channel,version:this.version,sessionId:this.sessionId,buffers:this.buffers,types:this.types,offset:this.offset,metadata:i.default.removeUnnecessaryMetadata(this.types,this.metadata).map(o.default.toJSON),initData:null!==(t=this.initData)&&void 0!==t?t:"",isInitialized:"string"==typeof this.initData,lastOperationId:this.lastOperationId}}static create(t){return new a(t.channel,t.version,t.buffers,t.types,t.offset,t.metadata,t.initData,t.sessionId,t.lastOperationId)}static fromJSON(t){var e;let s=null;return!0===t.isInitialized?s=null!==(e=t.initData)&&void 0!==e?e:"":"boolean"!=typeof t.isInitialized&&t.initData&&(s=t.initData),a.create({channel:t.channel,version:t.version,buffers:t.buffers,types:t.types,offset:t.offset,metadata:i.default.prepareMetadataForOperations(t.types,t.metadata).map(o.default.fromJSON),initData:s,sessionId:t.sessionId,lastOperationId:t.lastOperationId})}}e.default=a,a.DESCRIPTOR_NAME="CollaborativeEditingConnectResponse",a.DESCRIPTOR={fields:{channel:{type:"string",id:1},offset:{type:"uint32",id:2},version:{type:"uint32",id:3},buffers:{rule:"repeated",type:"bytes",id:4},types:{rule:"repeated",type:"uint32",id:5},metadata:{rule:"repeated",type:o.default.DESCRIPTOR_NAME,id:7},initData:{type:"string",id:8},isInitialized:{type:"bool",id:9},sessionId:{type:"string",id:10},lastOperationId:{type:"string",id:11}}}},223:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(6685)),o=n(s(8677));class a extends r.default{constructor(t,e=[],s=[],n=[],r=""){super(),this.version=t,this.buffers=e,this.types=s,this.metadata=n,this.lastOperationId=r}get data(){return{buffers:this.buffers,types:this.types,baseVersion:this.version-this.types.length,lastOperationId:this.lastOperationId}}get wereChangesApplied(){var t;return!(null===(t=this.types)||void 0===t?void 0:t.length)}toJSON(){return{version:this.version,buffers:this.buffers,types:this.types,metadata:i.default.removeUnnecessaryMetadata(this.types,this.metadata).map(o.default.toJSON),lastOperationId:this.lastOperationId}}static fromJSON(t){return new a(t.version,t.buffers,t.types,i.default.prepareMetadataForOperations(t.types,t.metadata).map(o.default.fromJSON),t.lastOperationId)}}e.default=a,a.DESCRIPTOR_NAME="CollaborativeEditingResponse",a.DESCRIPTOR={fields:{version:{type:"uint32",id:1},buffers:{rule:"repeated",type:"bytes",id:2},types:{rule:"repeated",type:"uint32",id:3},metadata:{rule:"repeated",type:"OperationMetadataDescriptor",id:5},lastOperationId:{type:"string",id:6}}}},6148:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e){super(),this.lastDocumentSession=t,this.currentDocumentSession=e}get data(){var t,e,s,n,r;return{lastDocumentSessionId:null===(t=this.lastDocumentSession)||void 0===t?void 0:t.id,lastDocumentSessionOperationId:null===(e=this.lastDocumentSession)||void 0===e?void 0:e.lastOperationId,currentDocumentSessionId:null===(s=this.currentDocumentSession)||void 0===s?void 0:s.id,currentDocumentSessionVersion:null===(n=this.currentDocumentSession)||void 0===n?void 0:n.version,currentDocumentSessionOperationId:null===(r=this.currentDocumentSession)||void 0===r?void 0:r.lastOperationId}}toJSON(){var t,e,s,n,r;return{lastDocumentSessionId:null===(t=this.lastDocumentSession)||void 0===t?void 0:t.id,lastDocumentSessionOperationId:null===(e=this.lastDocumentSession)||void 0===e?void 0:e.lastOperationId,currentDocumentSessionId:null===(s=this.currentDocumentSession)||void 0===s?void 0:s.id,currentDocumentSessionVersion:null===(n=this.currentDocumentSession)||void 0===n?void 0:n.version,currentDocumentSessionOperationId:null===(r=this.currentDocumentSession)||void 0===r?void 0:r.lastOperationId}}static fromJSON(t){const e=t.lastDocumentSessionId?{id:t.lastDocumentSessionId,lastOperationId:t.lastDocumentSessionOperationId}:void 0,s=t.currentDocumentSessionId?{lastOperationId:t.currentDocumentSessionOperationId,version:t.currentDocumentSessionVersion,id:t.currentDocumentSessionId}:void 0;return new i(e,s)}}e.default=i,i.DESCRIPTOR_NAME="GetDocumentDetailsResponse",i.DESCRIPTOR={fields:{lastDocumentSessionId:{type:"string",id:1},lastDocumentSessionOperationId:{type:"string",id:2},currentDocumentSessionId:{type:"string",id:3},currentDocumentSessionVersion:{type:"uint32",id:4},currentDocumentSessionOperationId:{type:"string",id:5}}}},6042:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=s(2209),o=n(s(3596)),a=n(s(5420)),c=n(s(2280)),u=n(s(6376)),d=n(s(7608)),l=n(s(6178)),h=n(s(5711)),f=n(s(7955)),p=n(s(939)),m=n(s(6523)),y=n(s(1926)),_=n(s(7952)),g=r(s(7158)),v=n(s(357)),x=n(s(7026)),b=n(s(6314));e._SERVICE=9;class w{constructor(t){this._documentId=t,this._isConnected=!1}get isConnected(){return this._isConnected}async connect(t){if(this._isConnected)return;if(t.state!==g.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new v.default("WebSocket Gateway is not connected.",t);const s=new u.default(this._documentId);this._wsGateway=t,this.stopListening(t,"change:state");const n=await t._sendRequest(e._SERVICE,u.default.TYPE,o.default.encode(s)),{channel:r,threads:i}=o.default.decode(n,d.default);return this.listenTo(t,"change:state",((t,e,s)=>this._onWsGatewayStateChange(s)),{priority:g.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(t,r),this._isConnected=!0,this.fire("connected"),i}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._connectedSessions&&(this._connectedSessions.disconnect(),this._connectedSessions=void 0),this.fire("disconnected"),this.stopListening())}async addComment(t,e,s,n){const r=new a.default(this._documentId,t,s,e,void 0,void 0,n),i=await this._sendRequest(a.default.TYPE,r);return o.default.decode(i,c.default)}async updateComment(t,e,s,n){const r=void 0!==n,i=new f.default(this._documentId,t,e,s,n,r);await this._sendRequest(f.default.TYPE,i)}async removeComment(t,e){const s=new l.default(this._documentId,t,e);await this._sendRequest(l.default.TYPE,s)}async removeCommentThread(t){const e=new h.default(this._documentId,t);await this._sendRequest(h.default.TYPE,e)}async getCommentThread(t,e=1){const s=new p.default(t,this._documentId);try{const t=await this._sendRequest(p.default.TYPE,s),{comments:e,commentThreadId:n}=o.default.decode(t,m.default);return{comments:e,commentThreadId:n}}catch(s){if(s instanceof v.default&&"404"===s.code&&e<5)return await(n=100*e,new Promise((t=>{setTimeout(t,n)}))),this.getCommentThread(t,e+1);if(s instanceof v.default)throw s;throw new v.default(s.message,this._wsGateway)}var n}async getDocumentThreads(){const t=new y.default(this._documentId),e=await this._sendRequest(y.default.TYPE,t),{threads:s}=o.default.decode(e,_.default);return{threads:s}}async getConnectedSessions(){if(!this._isConnected)throw new b.default("Comments",this);return this._connectedSessions||(this._connectedSessions=await x.default.getConnectedSessions(this._wsGateway,this._documentId,e._SERVICE)),this._connectedSessions}_connectToChannel(t,e){this._channel=t._getChannel(w._SERVICE,e),this._channel&&(this.listenTo(this._channel,this._channel.getEventName(a.default.TYPE),((t,e)=>{const s=o.default.decode(e,a.default);this.fire("commentAdded",s)})),this.listenTo(this._channel,this._channel.getEventName(l.default.TYPE),((t,e)=>{const s=o.default.decode(e,l.default);this.fire("commentRemoved",s)})),this.listenTo(this._channel,this._channel.getEventName(f.default.TYPE),((t,e)=>{const s=o.default.decode(e,f.default);this.fire("commentUpdated",s)})),this.listenTo(this._channel,this._channel.getEventName(h.default.TYPE),((t,e)=>{const s=o.default.decode(e,h.default);this.fire("commentThreadRemoved",s)})))}_onWsGatewayStateChange(t){t===g.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}_sendRequest(t,s){if(!this._wsGateway||!this._isConnected)throw new b.default("Comments",this);return this._wsGateway._sendRequest(e._SERVICE,t,o.default.encode(s))}}w._SERVICE=e._SERVICE,i.mix(w,i.EmitterMixin),e.default=w},2529:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(5945));class i extends r.default{static toJSON(t){var e;return Object.assign(Object.assign({},t),{createdAt:null===(e=t.createdAt)||void 0===e?void 0:e.toISOString(),attributes:t.attributes?JSON.stringify(t.attributes):null})}static fromJSON(t){return Object.assign(Object.assign({},t),{createdAt:new Date(t.createdAt),attributes:t.attributes?JSON.parse(t.attributes):null})}}e.default=i,i.DESCRIPTOR_NAME="CommentDescriptor",i.DESCRIPTOR={fields:{commentId:{id:1,type:"string"},commentThreadId:{id:2,type:"string"},userId:{id:3,type:"string"},content:{id:4,type:"string"},documentId:{id:5,type:"string"},createdAt:{id:6,type:"string"},attributes:{id:7,type:"string"}}}},1578:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(5945)),i=n(s(2529));class o extends r.default{static toJSON(t){var e;return Object.assign(Object.assign({},t),{comments:null===(e=t.comments)||void 0===e?void 0:e.map(i.default.toJSON)})}static fromJSON(t){var e;return Object.assign(Object.assign({},t),{comments:null===(e=t.comments)||void 0===e?void 0:e.map(i.default.fromJSON)})}}e.default=o,o.DESCRIPTOR_NAME="CommentsThreadDescriptor",o.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},comments:{type:"CommentDescriptor",rule:"repeated",id:2}}}},5420:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s,n="",r,i="",o=null){super(),this.documentId=t,this.commentThreadId=e,this.content=s,this.commentId=n,this.userId=i,this.attributes=o,this.createdAt=r?new Date(r):""}toJSON(){return{commentThreadId:this.commentThreadId,content:this.content,documentId:this.documentId,commentId:this.commentId,createdAt:this.createdAt instanceof Date?this.createdAt.toISOString():this.createdAt,userId:this.userId,attributes:JSON.stringify(this.attributes)}}static fromJSON(t){return new i(t.documentId,t.commentThreadId,t.content,t.commentId?t.commentId:void 0,t.createdAt?new Date(t.createdAt):void 0,t.userId?t.userId:void 0,t.attributes?JSON.parse(t.attributes):{})}}e.default=i,i.TYPE="91",i.READABLE_TYPE_NAME="addComment",i.DESCRIPTOR_NAME="CommentsV2AddCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},content:{type:"string",id:2},documentId:{type:"string",id:3},commentId:{type:"string",id:4},createdAt:{type:"string",id:5},userId:{type:"string",id:6},attributes:{type:"string",id:7}}}},6376:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.documentId=t}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="92",i.READABLE_TYPE_NAME="connectToComment",i.DESCRIPTOR_NAME="CommentsV2ConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},939:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e){super(),this.commentThreadId=t,this.documentId=e}toJSON(){return{commentThreadId:this.commentThreadId,documentId:this.documentId}}static fromJSON(t){return new i(t.commentThreadId,t.documentId)}}e.default=i,i.TYPE="93",i.READABLE_TYPE_NAME="getComment",i.DESCRIPTOR_NAME="CommentsV2GetCommentThreadMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},documentId:{type:"string",id:2}}}},1926:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.documentId=t}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="94",i.READABLE_TYPE_NAME="getDocumentThreads",i.DESCRIPTOR_NAME="CommentsV2GetDocumentThreadsMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},6178:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s){super(),this.documentId=t,this.commentThreadId=e,this.commentId=s}toJSON(){return{documentId:this.documentId,commentThreadId:this.commentThreadId,commentId:this.commentId}}static fromJSON(t){return new i(t.documentId,t.commentThreadId,t.commentId)}}e.default=i,i.TYPE="95",i.READABLE_TYPE_NAME="removeComment",i.DESCRIPTOR_NAME="CommentsV2RemoveCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},documentId:{type:"string",id:3}}}},5711:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e){super(),this.documentId=t,this.commentThreadId=e}toJSON(){return{documentId:this.documentId,commentThreadId:this.commentThreadId}}static fromJSON(t){return new i(t.documentId,t.commentThreadId)}}e.default=i,i.TYPE="97",i.READABLE_TYPE_NAME="removeCommentThread",i.DESCRIPTOR_NAME="CommentsV2RemoveCommentThreadMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},documentId:{type:"string",id:2}}}},7955:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s,n,r=null,i=!1){super(),this.documentId=t,this.commentThreadId=e,this.commentId=s,this.content=n,this.attributes=r,this.isAttributesUpdated=i}toJSON(){return{documentId:this.documentId,commentThreadId:this.commentThreadId,commentId:this.commentId,content:this.content,attributes:this.attributes?JSON.stringify(this.attributes):null,isAttributesUpdated:this.isAttributesUpdated}}static fromJSON(t){return new i(t.documentId,t.commentThreadId,t.commentId,t.content,t.attributes?JSON.parse(t.attributes):null,t.isAttributesUpdated)}}e.default=i,i.TYPE="96",i.READABLE_TYPE_NAME="updateComment",i.DESCRIPTOR_NAME="CommentsV2UpdateCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},content:{type:"string",id:3},documentId:{type:"string",id:4},attributes:{type:"string",id:5},isAttributesUpdated:{type:"bool",id:6}}}},2280:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s){super(),this.commentThreadId=t,this.commentId=e,this.createdAt=new Date(s)}toJSON(){return{commentThreadId:this.commentThreadId,commentId:this.commentId,createdAt:this.createdAt.toISOString()}}static fromJSON(t){return new i(t.commentThreadId,t.commentId,t.createdAt)}}e.default=i,i.DESCRIPTOR_NAME="CommentsV2AddCommentResponse",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},createdAt:{type:"string",id:3}}}},7608:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(1578));class o extends r.default{constructor(t,e,s){super(),this.channel=t,this._threads=e,this._threadsV2=s,this.threads=(null==s?void 0:s.length)?s:e}toJSON(){var t,e;return{channel:this.channel,threads:null===(t=this._threads)||void 0===t?void 0:t.map((t=>JSON.stringify(t))),threadsV2:null===(e=this._threadsV2)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e,s;return new o(t.channel,null===(e=t.threads)||void 0===e?void 0:e.map((t=>JSON.parse(t))),null===(s=t.threadsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}e.default=o,o.DESCRIPTOR_NAME="CommentsV2ConnectResponse",o.DESCRIPTOR={fields:{channel:{type:"string",id:1},threads:{type:"string",rule:"repeated",id:2},threadsV2:{type:"CommentsThreadDescriptor",rule:"repeated",id:3}}}},6523:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(2529));class o extends r.default{constructor(t,e,s){super(),this.commentThreadId=t,this._comments=e,this._commentsV2=s,this.comments=(null==s?void 0:s.length)?s:e}toJSON(){var t,e;return{commentThreadId:this.commentThreadId,comments:null===(t=this._comments)||void 0===t?void 0:t.map((t=>JSON.stringify(t))),commentsV2:null===(e=this._commentsV2)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e,s;return new o(t.commentThreadId,null===(e=t.comments)||void 0===e?void 0:e.map((t=>function(t){const e=JSON.parse(t);return Object.assign(Object.assign({},e),{createdAt:new Date(e.createdAt)})}(t))),null===(s=t.commentsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}e.default=o,o.DESCRIPTOR_NAME="CommentsV2GetCommentThreadResponse",o.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},comments:{type:"string",rule:"repeated",id:2},commentsV2:{type:"CommentDescriptor",rule:"repeated",id:3}}}},7952:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(1578));class o extends r.default{constructor(t,e){super(),this._threads=t,this._threadsV2=e,this.threads=(null==e?void 0:e.length)?e:t}toJSON(){var t,e;return{threads:null===(t=this._threads)||void 0===t?void 0:t.map((t=>JSON.stringify(t))),threadsV2:null===(e=this._threadsV2)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e,s;return new o(null===(e=t.threads)||void 0===e?void 0:e.map((t=>function(t){var e;const s=JSON.parse(t),n=Object.assign({},s);return s.comments&&(n.comments=null===(e=s.comments)||void 0===e?void 0:e.map((t=>Object.assign(Object.assign({},t),{createdAt:new Date(t.createdAt)})))),n}(t))),null===(s=t.threadsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}e.default=o,o.DESCRIPTOR_NAME="CommentsV2GetDocumentThreadsResponse",o.DESCRIPTOR={fields:{threads:{type:"string",rule:"repeated",id:1},threadsV2:{type:"CommentsThreadDescriptor",rule:"repeated",id:2}}}},5945:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(...t){}}},6345:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(5945));class i extends r.default{}e.default=i,i.DESCRIPTOR_NAME="KeyValueDescriptor",i.DESCRIPTOR={fields:{key:{type:"string",id:1},value:{type:"string",id:2}}}},6314:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(357));class i extends r.default{constructor(t,e){super(t+" Service is not connected.",e)}}e.default=i},3545:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(5945));class i extends r.default{constructor(...t){super()}static fromJSON(t){throw new TypeError("Must be implemented in a child class!")}}e.default=i,i.TYPE="1000"},3596:function(t,e,s){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(6154)),o=r(s(6783)),a=r(s(8677)),c=r(s(6345)),u=r(s(7618)),d=r(s(2529)),l=r(s(1578)),h=r(s(1706)),f=r(s(9883)),p=[c.default,o.default,a.default,u.default,d.default,l.default,h.default,f.default],m=i.Root.fromJSON({nested:p.reduce(((t,e)=>(t[e.DESCRIPTOR_NAME]=e.DESCRIPTOR,t)),{})});function y(t){return e=t,m.lookup(e.DESCRIPTOR_NAME)||m.addJSON({[e.DESCRIPTOR_NAME]:e.DESCRIPTOR}),m.lookupType(t.DESCRIPTOR_NAME);var e}e.default=class{static decode(t,e){const s=y(e).decode("undefined"==typeof window?t:new Uint8Array(t));return e.fromJSON(Object.assign({},s))}static encode(t){const e=y(t.constructor),s=t.toJSON(),n=e.verify(s);if(n)throw Error(n);return e.encode(e.create(s)).finish()}}},9883:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(5945));class i extends r.default{static create(t){return{revisionId:t.id,name:t.name,creatorId:t.creatorId,createdAt:t.createdAt,fromVersion:t.fromVersion,toVersion:t.toVersion,isEmptyCurrent:t.isEmptyCurrent,diffData:t.diffData?JSON.stringify(t.diffData):void 0,attributes:t.attributes,authorsIds:t.authorsIds}}static toJSON(t){var e;return{revisionId:t.revisionId,name:t.name,creatorId:t.creatorId,authorsIds:t.authorsIds?JSON.stringify(t.authorsIds):void 0,diffData:t.diffData,createdAt:null===(e=t.createdAt)||void 0===e?void 0:e.toISOString(),attributes:t.attributes?JSON.stringify(t.attributes):void 0,toVersion:t.toVersion,fromVersion:t.fromVersion,isEmptyCurrent:t.isEmptyCurrent}}static fromJSON(t){return{revisionId:(t=Object.assign({},t)).revisionId,name:t.name,creatorId:t.creatorId,authorsIds:t.authorsIds?JSON.parse(t.authorsIds):void 0,diffData:t.diffData,createdAt:t.createdAt?new Date(t.createdAt):void 0,attributes:t.attributes?JSON.parse(t.attributes):void 0,toVersion:t.toVersion,fromVersion:t.fromVersion,isEmptyCurrent:t.isEmptyCurrent}}static toObject(t){return function(t){for(const[e,s]of Object.entries(t))void 0===s&&delete t[e];return t}({id:t.revisionId,name:t.name,creatorId:t.creatorId,createdAt:t.createdAt,fromVersion:t.fromVersion,toVersion:t.toVersion,isEmptyCurrent:t.isEmptyCurrent,diffData:t.diffData?JSON.parse(t.diffData):void 0,attributes:t.attributes,authorsIds:t.authorsIds})}}e.default=i,i.DESCRIPTOR_NAME="RevisionDescriptor",i.DESCRIPTOR={fields:{revisionId:{type:"string",id:1},name:{type:"string",id:2},creatorId:{type:"string",id:3},authorsIds:{type:"string",id:4},diffData:{type:"string",id:5},createdAt:{type:"string",id:6},attributes:{type:"string",id:7},toVersion:{type:"uint32",id:8},fromVersion:{type:"uint32",id:9},isEmptyCurrent:{type:"bool",id:10}}}},801:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.documentId=t}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="121",i.READABLE_TYPE_NAME="connectToRevisionHistory",i.DESCRIPTOR_NAME="RevisionHistoryConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},3667:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e){super(),this.documentId=t,this.revisionId=e}toJSON(){return{documentId:this.documentId,revisionId:this.revisionId}}static fromJSON(t){return new i(t.documentId,t.revisionId)}}e.default=i,i.TYPE="123",i.READABLE_TYPE_NAME="getRevision",i.DESCRIPTOR_NAME="RevisionHistoryGetRevisionMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1},revisionId:{type:"string",id:2}}}},8702:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e){super(),this.documentId=t,this.requestId=e}toJSON(){return{documentId:this.documentId,requestId:this.requestId}}static fromJSON(t){return new i(t.documentId,t.requestId)}}e.default=i,i.TYPE="122",i.READABLE_TYPE_NAME="reconnectToRevisionHistory",i.DESCRIPTOR_NAME="RevisionHistoryReconnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1},requestId:{type:"uint32",id:2}}}},6120:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(9883));class o extends r.default{constructor(t,e,s){super(),this.documentId=t,this.requestId=e,this.revisions=s}toJSON(){return{documentId:this.documentId,requestId:this.requestId,revisions:this.revisions.map(i.default.toJSON)}}toObject(){return{documentId:this.documentId,requestId:this.requestId,revisions:this.revisions.map(i.default.toObject)}}static create(t){return new o(t.documentId,t.requestId,t.revisions.map(i.default.create))}static fromJSON(t){return new o(t.documentId,t.requestId,t.revisions.map(i.default.fromJSON))}}e.default=o,o.TYPE="124",o.READABLE_TYPE_NAME="updateRevisions",o.DESCRIPTOR_NAME="RevisionHistoryUpdateRevisionsMessage",o.DESCRIPTOR={fields:{documentId:{type:"string",id:1},requestId:{type:"uint32",id:2},revisions:{type:"RevisionDescriptor",id:3,rule:"repeated"}}}},5218:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(9883));class o extends r.default{constructor(t,e,s){super(),this.channel=t,this.requestId=e,this.revisions=s}toJSON(){return{channel:this.channel,requestId:this.requestId,revisions:this.revisions.map(i.default.toJSON)}}toObject(){return{channel:this.channel,requestId:this.requestId,revisions:this.revisions.map(i.default.toObject)}}static fromJSON(t){return new o(t.channel,t.requestId,t.revisions.map(i.default.fromJSON))}}e.default=o,o.DESCRIPTOR_NAME="RevisionHistoryConnectResponse",o.DESCRIPTOR={fields:{channel:{type:"string",id:1},requestId:{type:"uint32",id:2},revisions:{type:"RevisionDescriptor",id:3,rule:"repeated"}}}},6311:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(9883));class o extends r.default{constructor(t,e,s,n,r,i,o,a,c,u){super(),this.revisionId=t,this.name=e,this.creatorId=s,this.authorsIds=n,this.createdAt=r,this.diffData=i,this.attributes=o,this.fromVersion=a,this.toVersion=c,this.isEmptyCurrent=u}toJSON(){return i.default.toJSON(this)}toObject(){return i.default.toObject(this)}static create(t){return new o(t.revisionId,t.name,t.creatorId,t.authorsIds,t.createdAt,t.diffData,t.attributes,t.fromVersion,t.toVersion,t.isEmptyCurrent)}static fromJSON(t){return new o(t.revisionId,t.name,t.creatorId,t.authorsIds?JSON.parse(t.authorsIds):void 0,t.createdAt?new Date(t.createdAt):void 0,t.diffData,t.attributes?JSON.parse(t.attributes):void 0,t.fromVersion,t.toVersion,t.isEmptyCurrent)}}e.default=o,o.DESCRIPTOR_NAME="RevisionHistoryGetRevisionResponse",o.DESCRIPTOR=i.default.DESCRIPTOR},1655:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.requestId=t}toJSON(){return{requestId:this.requestId}}static fromJSON(t){return new i(t.requestId)}}e.default=i,i.DESCRIPTOR_NAME="RevisionHistoryUpdateRevisionsResponse",i.DESCRIPTOR={fields:{requestId:{type:"uint32",id:1}}}},8811:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=s(2209),o=n(s(3596)),a=n(s(3667)),c=n(s(6311)),u=n(s(6120)),d=n(s(1655)),l=n(s(801)),h=n(s(5218)),f=n(s(8702)),p=n(s(357)),m=r(s(7158)),y=n(s(6314));e._SERVICE=12;class _{constructor(t){this._documentId=t,this._isConnected=!1}get isConnected(){return this._isConnected}connect(t){return this._isConnected?Promise.resolve():this._connect(t,new l.default(this._documentId))}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this.fire("disconnected"),this.stopListening())}reconnect(t,e){if(this.isConnected)throw new p.default("Cannot reconnect to already connected service.",t);return this._connect(t,new f.default(this._documentId,e))}async updateRevisions(t,e){const s=u.default.create({documentId:this._documentId,requestId:e,revisions:t}),n=await this._sendRequest(u.default.TYPE,s),{requestId:r}=o.default.decode(n,d.default);return r}async getRevision(t){const e=new a.default(this._documentId,t),s=await this._sendRequest(a.default.TYPE,e);return o.default.decode(s,c.default).toObject()}async _connect(t,s){if(t.state!==m.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new p.default("WebSocket Gateway is not connected.",t);this._wsGateway=t,this.stopListening(t,"change:state");const n=await t._sendRequest(e._SERVICE,s.constructor.TYPE,o.default.encode(s)),{channel:r,requestId:i,revisions:a}=o.default.decode(n,h.default).toObject();return this.listenTo(t,"change:state",((t,e,s)=>this._onWsGatewayStateChange(s)),{priority:m.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(t,r),this._isConnected=!0,this.fire("connected"),{revisions:a,requestId:i}}_connectToChannel(t,e){this._channel=t._getChannel(_._SERVICE,e),this._channel&&this.listenTo(this._channel,this._channel.getEventName(u.default.TYPE),((t,e)=>{const{documentId:s,requestId:n,revisions:r}=o.default.decode(e,u.default).toObject();this.fire("revisionsUpdated",{documentId:s,requestId:n,revisionsData:r})}))}_onWsGatewayStateChange(t){t===m.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}_sendRequest(t,s){if(!this._wsGateway||!this._isConnected)throw new y.default("Revision History",this);return this._wsGateway._sendRequest(e._SERVICE,t,o.default.encode(s))}}_._SERVICE=e._SERVICE,i.mix(_,i.EmitterMixin),e.default=_},6783:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(5945));class i extends r.default{}e.default=i,i.DESCRIPTOR_NAME="SessionsSocketDescriptor",i.DESCRIPTOR={fields:{session:{type:"string",id:1},user:{type:"string",id:2},role:{id:3,type:"string"},permissions:{rule:"repeated",type:"string",id:4}}}},2366:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e){super(),this.id=t,this.sessionType=e}toJSON(){return{id:this.id,sessionType:this.sessionType}}static fromJSON(t){return new i(t.id,t.sessionType)}}e.default=i,i.TYPE="31",i.READABLE_TYPE_NAME="getConnectedSockets",i.DESCRIPTOR_NAME="SessionsConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},sessionType:{type:"uint32",id:2}}}},2414:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s,n){super(),this.id=t,this.userId=e,this.role=s,this.permissions=n}toJSON(){var t,e,s;return{id:this.id,userId:null!==(t=this.userId)&&void 0!==t?t:void 0,role:null!==(e=this.role)&&void 0!==e?e:void 0,permissions:null!==(s=this.permissions)&&void 0!==s?s:void 0}}static fromJSON(t){return new i(t.id,t.userId,t.role,t.permissions)}}e.default=i,i.TYPE="32",i.READABLE_TYPE_NAME="connectSocket",i.DESCRIPTOR_NAME="SocketConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},userId:{type:"string",id:2},role:{type:"string",id:3},permissions:{rule:"repeated",type:"string",id:4}}}},4194:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.id=t}toJSON(){return{id:this.id}}static fromJSON(t){return new i(t.id)}}e.default=i,i.TYPE="33",i.READABLE_TYPE_NAME="disconnectSocket",i.DESCRIPTOR_NAME="SocketDisconnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1}}}},6145:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e=[]){super(),this.channel=t,this.sockets=e}toJSON(){return{channel:this.channel,sockets:this.sockets.map((t=>({user:t.userId,session:t.id,role:t.role,permissions:t.permissions})))}}static fromJSON(t){return new i(t.channel,t.sockets.map((t=>({id:t.session,userId:t.user,role:t.role,permissions:t.permissions}))))}}e.default=i,i.DESCRIPTOR_NAME="SessionsConnectResponse",i.DESCRIPTOR={fields:{channel:{type:"string",id:1},sockets:{rule:"repeated",type:"SessionsSocketDescriptor",id:2}}}},2690:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(2209),i=s(7026),o=n(s(7530)),a=n(s(7158)),c=n(s(6145)),u=n(s(2366)),d=n(s(2414)),l=n(s(4194)),h=n(s(3596));class f extends r.Collection{constructor(t,e){super({idProperty:"id"}),this._id=t,this._sessionType=e,this._handlers=new Map,this._eventsQueue=[],this._isRunning=!1}async connect(t){this._wsGateway=t,this.stopListening(t,"change:state");const e=new u.default(this._id,this._sessionType);let s;try{const t=await this._wsGateway._sendRequest(i._SERVICE,u.default.TYPE,h.default.encode(e));s=h.default.decode(t,c.default)}catch(t){s=new c.default(this._id,[])}this._connectToChannel(this._wsGateway,s.channel,this._sessionType);const n=await async function(t,e){const s=e.map((t=>t.userId)),n=s.length?await o.default.getMany(t,s):[];return e.map((t=>{const e={id:t.id,role:t.role,permissions:t.permissions};return e.user=t.userId&&n.find((e=>e.id===t.userId))||new o.default,e}))}(this._wsGateway,s.sockets);for(const t of n)super.add(t);this._connected=!0,this.fire("connected"),this.listenTo(this._wsGateway,"change:state",((t,e,s)=>this._onWsGatewayStateChange(s)),{priority:a.default._CHANGE_STATE_EVENT_PRIORITY}),await this._runQueue()}disconnect(t=!0){if(this._connected){for(this._connected=!1,this._eventsQueue=[];this.length;)super.remove(0);this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._wsGateway&&t&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this.fire("disconnected"),t&&this.stopListening()}}add(t,e){throw new TypeError("The collection is read-only.")}remove(t){throw new TypeError("The collection is read-only.")}_connectToChannel(t,e,s){this._channel=t._getChannel(s,e),this._channel&&(this._addHandler(this._channel,d.default.TYPE,(async e=>{const s=h.default.decode(e,d.default);if(-1===this.getIndex(s.id)){const e={id:s.id,role:s.role,permissions:s.permissions};s.userId&&(e.user=await o.default.get(t,s.userId)),super.add(e)}})),this._addHandler(this._channel,l.default.TYPE,(t=>{const e=h.default.decode(t,l.default);-1!==this.getIndex(e.id)&&super.remove(e.id)})))}async _onWsGatewayStateChange(t){t===a.default.STATE_DISCONNECTED&&this.disconnect(!1),t===a.default.STATE_CONNECTED&&await this.connect(this._wsGateway)}async _runQueue(){if(this._isRunning||!this._connected)return;let t;for(this._isRunning=!0;t=this._eventsQueue.shift();){const e=this._handlers.get(t.eventName);e&&await e(t.data)}this._isRunning=!1}_addHandler(t,e,s){const n=t.getEventName(e,!0);this.listenTo(t,n,(async(t,e)=>{const s=t.name;this._eventsQueue.push({eventName:s,data:e}),await this._runQueue()})),this._handlers.set(n,s)}}e.default=f},7026:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(2690));e._SERVICE=3,e.default=class{static async getConnectedSessions(t,e,s){const n=new r.default(e,s);return await n.connect(t),n}}},1706:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(5945));class i extends r.default{static toJSON(t){var e;return Object.assign(Object.assign({},t),{data:t.data?JSON.stringify(t.data):t.data,attributes:t.attributes?JSON.stringify(t.attributes):t.attributes,createdAt:null===(e=t.createdAt)||void 0===e?void 0:e.toISOString()})}static fromJSON(t){return Object.assign(Object.assign({},t),{data:t.data?JSON.parse(t.data):t.data,attributes:t.attributes?JSON.parse(t.attributes):t.attributes,createdAt:t.createdAt?new Date(t.createdAt):void 0})}}e.default=i,i.DESCRIPTOR_NAME="SuggestionDescriptor",i.DESCRIPTOR={fields:{id:{id:1,type:"string"},authorId:{id:2,type:"string"},type:{id:3,type:"string"},createdAt:{id:4,type:"string"},data:{id:5,type:"string"},hasComments:{id:6,type:"bool"},state:{id:7,type:"string"},attributes:{id:8,type:"string"}}}},597:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s,n={},r=null,i=null){super(),this.id=t,this.documentId=e,this.type=s,this.data=n,this.originalSuggestionId=r,this.attributes=i}toJSON(){return{id:this.id,documentId:this.documentId,type:this.type,data:JSON.stringify(this.data),originalSuggestionId:this.originalSuggestionId,attributes:JSON.stringify(this.attributes)}}static fromJSON(t){var e;return new i(t.id,t.documentId,t.type,JSON.parse(t.data),null!==(e=t.originalSuggestionId)&&void 0!==e?e:null,t.attributes?JSON.parse(t.attributes):null)}}e.default=i,i.TYPE="101",i.READABLE_TYPE_NAME="addSuggestion",i.DESCRIPTOR_NAME="TrackChangesAddSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2},type:{type:"string",id:3},data:{type:"string",id:4},originalSuggestionId:{type:"string",id:5},attributes:{type:"string",id:6}}}},144:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.documentId=t}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="105",i.READABLE_TYPE_NAME="connectToSuggestions",i.DESCRIPTOR_NAME="TrackChangesConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},2679:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.documentId=t}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="102",i.READABLE_TYPE_NAME="getAllSuggestions",i.DESCRIPTOR_NAME="TrackChangesGetAllSuggestionMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},1659:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e){super(),this.id=t,this.documentId=e}toJSON(){return{id:this.id,documentId:this.documentId}}static fromJSON(t){return new i(t.id,t.documentId)}}e.default=i,i.TYPE="103",i.READABLE_TYPE_NAME="getSuggestion",i.DESCRIPTOR_NAME="TrackChangesGetSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2}}}},598:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s,n,r,i=null){super(),this.id=t,this.documentId=e,this.hasComments=s,this.isHasCommentsModified=n,this.state=r,this.attributes=i}toJSON(){return{id:this.id,documentId:this.documentId,hasComments:this.hasComments,isHasCommentsModified:this.isHasCommentsModified,state:this.state,attributes:JSON.stringify(this.attributes)}}static fromJSON(t){return new i(t.id,t.documentId,t.hasComments,t.isHasCommentsModified,t.state,t.attributes?JSON.parse(t.attributes):null)}}e.default=i,i.TYPE="104",i.READABLE_TYPE_NAME="updateSuggestion",i.DESCRIPTOR_NAME="TrackChangesUpdateSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2},hasComments:{type:"bool",id:3},isHasCommentsModified:{type:"bool",id:4},state:{type:"string",id:5},attributes:{type:"string",id:6}}}},3111:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s,n,r,i,o={},a=null){super(),this.id=t,this.authorId=e,this.type=s,this.hasComments=r,this.state=i,this.data=o,this.attributes=a,this.createdAt=n?new Date(n):void 0}toJSON(){var t;return{id:this.id,authorId:this.authorId,type:this.type,createdAt:null===(t=this.createdAt)||void 0===t?void 0:t.toISOString(),data:JSON.stringify(this.data),hasComments:this.hasComments,state:this.state,attributes:JSON.stringify(this.attributes)}}static fromJSON(t){return new i(t.id,t.authorId,t.type,t.createdAt,t.hasComments,t.state,JSON.parse(t.data),t.attributes?JSON.parse(t.attributes):null)}}e.default=i,i.DESCRIPTOR_NAME="TrackChangesAddSuggestionResponse",i.DESCRIPTOR={fields:{id:{type:"string",id:1},authorId:{type:"string",id:2},type:{type:"string",id:3},createdAt:{type:"string",id:4},data:{type:"string",id:5},hasComments:{type:"bool",id:6},state:{type:"string",id:7},attributes:{type:"string",id:8}}}},701:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(1706));class o extends r.default{constructor(t,e,s){super(),this.channel=t,this._suggestions=e,this._suggestionsV2=s,this.suggestions=(null==s?void 0:s.length)?s:e}toJSON(){var t,e;return{channel:this.channel,suggestions:null===(t=this._suggestions)||void 0===t?void 0:t.map((t=>JSON.stringify(t))),suggestionsV2:null===(e=this._suggestionsV2)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e,s;return new o(t.channel,null===(e=t.suggestions)||void 0===e?void 0:e.map((t=>JSON.parse(t))),null===(s=t.suggestionsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}e.default=o,o.DESCRIPTOR_NAME="TrackChangesConnectResponse",o.DESCRIPTOR={fields:{channel:{type:"string",id:1},suggestions:{type:"string",rule:"repeated",id:2},suggestionsV2:{type:"SuggestionDescriptor",rule:"repeated",id:3}}}},3390:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545)),i=n(s(1706));class o extends r.default{constructor(t,e){super(),this._suggestions=t,this._suggestionsV2=e,this.suggestions=(null==e?void 0:e.length)?e:t}toJSON(){var t,e;return{suggestions:null===(t=this._suggestions)||void 0===t?void 0:t.map((t=>JSON.stringify(t))),suggestionsV2:null===(e=this._suggestionsV2)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e,s;return new o(null===(e=t.suggestions)||void 0===e?void 0:e.map(a),null===(s=t.suggestionsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}function a(t){const e=JSON.parse(t);return e.createdAt=e.createdAt?new Date(e.createdAt):void 0,e}e.default=o,o.DESCRIPTOR_NAME="TrackChangesGetAllSuggestionsResponse",o.DESCRIPTOR={fields:{suggestions:{type:"string",rule:"repeated",id:1},suggestionsV2:{type:"SuggestionDescriptor",rule:"repeated",id:2}}}},5930:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s,n,r,i,o={},a=null){super(),this.id=t,this.authorId=e,this.type=s,this.hasComments=r,this.state=i,this.data=o,this.attributes=a,this.createdAt=new Date(n)}toJSON(){return{id:this.id,authorId:this.authorId,type:this.type,createdAt:this.createdAt.toISOString(),data:JSON.stringify(this.data),hasComments:this.hasComments,state:this.state,attributes:JSON.stringify(this.attributes)}}static fromJSON(t){return new i(t.id,t.authorId,t.type,t.createdAt,t.hasComments,t.state,JSON.parse(t.data),t.attributes?JSON.parse(t.attributes):null)}}e.default=i,i.DESCRIPTOR_NAME="TrackChangesGetSuggestionResponse",i.DESCRIPTOR={fields:{id:{type:"string",id:1},authorId:{type:"string",id:2},type:{type:"string",id:3},createdAt:{type:"string",id:4},data:{type:"string",id:5},hasComments:{type:"bool",id:6},state:{type:"string",id:7},attributes:{type:"string",id:8}}}},125:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=s(2209),o=n(s(3596)),a=n(s(597)),c=n(s(3111)),u=n(s(1659)),d=n(s(5930)),l=n(s(2679)),h=n(s(3390)),f=n(s(598)),p=n(s(144)),m=n(s(701)),y=n(s(357)),_=r(s(7158)),g=n(s(6314));e._SERVICE=10;class v{constructor(t){this._documentId=t,this._isConnected=!1}get isConnected(){return this._isConnected}async connect(t){if(this._isConnected)return;if(t.state!==_.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new y.default("WebSocket Gateway is not connected.",t);const s=new p.default(this._documentId);this._wsGateway=t,this.stopListening(t,"change:state");const n=await t._sendRequest(e._SERVICE,p.default.TYPE,o.default.encode(s)),r=o.default.decode(n,m.default);return this.listenTo(t,"change:state",((t,e,s)=>this._onWsGatewayStateChange(s)),{priority:_.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(t,r.channel),this._isConnected=!0,this.fire("connected"),r.suggestions}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this.fire("disconnected"),this.stopListening())}async add(t,e,s,n=null,r){const i=new a.default(t,this._documentId,e,s,n,r),u=await this._sendRequest(a.default.TYPE,i);return o.default.decode(u,c.default)}async get(t,e=1){const s=new u.default(t,this._documentId);try{const t=await this._sendRequest(u.default.TYPE,s);return o.default.decode(t,d.default)}catch(s){if(s instanceof y.default&&"404"===s.code&&e<5)return await(n=100*e,new Promise((t=>{setTimeout(t,n)}))),this.get(t,e+1);if(s instanceof y.default)throw s;throw new y.default(s.message,this._wsGateway)}var n}async getAll(){const t=new l.default(this._documentId),e=await this._sendRequest(l.default.TYPE,t),{suggestions:s}=o.default.decode(e,h.default);return s}async update(t,e={}){const{hasComments:s,state:n,attributes:r}=e,i=void 0!==s,o=new f.default(t,this._documentId,s,i,n,r);await this._sendRequest(f.default.TYPE,o)}_connectToChannel(t,e){this._channel=t._getChannel(v._SERVICE,e),this._channel&&this.listenTo(this._channel,this._channel.getEventName(f.default.TYPE),((t,e)=>{const s=o.default.decode(e,f.default);this.fire("suggestionUpdated",s)}))}_onWsGatewayStateChange(t){t===_.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}_sendRequest(t,s){if(!this._wsGateway||!this._isConnected)throw new g.default("Track Changes",this);return this._wsGateway._sendRequest(e._SERVICE,t,o.default.encode(s))}}v._SERVICE=e._SERVICE,i.mix(v,i.EmitterMixin),e.default=v},7618:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(5945));class i extends r.default{}e.default=i,i.DESCRIPTOR_NAME="UserDescriptor",i.DESCRIPTOR={fields:{attributes:{rule:"repeated",type:"KeyValueDescriptor",id:1}}}},7204:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.ids=t}toJSON(){return{ids:this.ids}}static fromJSON(t){return new i(t.ids)}}e.default=i,i.TYPE="22",i.READABLE_TYPE_NAME="getManyUsers",i.DESCRIPTOR_NAME="GetManyUsersMessage",i.DESCRIPTOR={fields:{ids:{id:1,type:"string",rule:"repeated"}}}},1779:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.id=t}toJSON(){return{id:this.id}}static fromJSON(t){return new i(t.id)}}e.default=i,i.TYPE="21",i.READABLE_TYPE_NAME="getUser",i.DESCRIPTOR_NAME="GetUserMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1}}}},624:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.users=t}toJSON(){return{users:this.users.map(o)}}static fromJSON(t){return new i(t.users.map(a))}}function o(t){return{attributes:Object.keys(t).map((e=>({key:e,value:JSON.stringify(t[e])})))}}function a(t){return t.attributes.reduce(((t,e)=>(t[e.key]=e.value?JSON.parse(e.value):null,t)),{})}e.default=i,i.DESCRIPTOR_NAME="GetManyUsersResponse",i.DESCRIPTOR={fields:{users:{rule:"repeated",type:"UserDescriptor",id:1}}}},2184:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t){super(),this.attributes=t}toJSON(){return{attributes:Object.keys(this.attributes).map((t=>({key:t,value:JSON.stringify(this.attributes[t])})))}}static fromJSON(t){const e=t.attributes.reduce(((t,e)=>(t[e.key]=e.value?JSON.parse(e.value):null,t)),{});return new i(e)}}e.default=i,i.DESCRIPTOR_NAME="GetUserResponse",i.DESCRIPTOR={fields:{attributes:{rule:"repeated",type:"KeyValueDescriptor",id:1}}}},7530:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(1779)),i=n(s(2184)),o=n(s(3596)),a=n(s(7204)),c=n(s(624));class u{constructor(t={}){this._attributes=new Map;for(const e of Object.keys(t))"id"!==e?(this._attributes.set(e,t[e]),Object.defineProperty(this,e,{enumerable:!0,configurable:!1,get:()=>this._attributes.get(e)})):this.id=t.id}static fromData(t){return new u(t)}static async get(t,e){const s=new r.default(e);try{const e=await t._sendRequest(u._SERVICE,r.default.TYPE,o.default.encode(s)),n=o.default.decode(e,i.default);return new u(n.attributes)}catch(t){return new u({id:e})}}static async getMany(t,e){const s=new a.default(e);try{const e=await t._sendRequest(u._SERVICE,a.default.TYPE,o.default.encode(s));return o.default.decode(e,c.default).users.map((t=>new u(t)))}catch(t){return e.map((t=>new u({id:t})))}}}u._SERVICE=2,e.default=u},6754:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="31.0.0"},1573:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(2209),i=n(s(3554)),o=n(s(3596));class a{constructor(t,e,s){this._channelName=t,this._wsGateway=e,this._socket=s,this._subscribeToChannel()}remove(){this._socket.off(this._channelName)}getEventName(t,e=!1){let s="";return e&&(s+="all:"),s+="event",t&&(s+=":"+t),s}_subscribeToChannel(){this._socket.on(this._channelName,(t=>{const e=o.default.decode(t,i.default);this.fire(this.getEventName(e.type,!0),e.data,e.socketId),e.socketId!==this._wsGateway.socketId&&this.fire(this.getEventName(e.type),e.data,e.socketId)}))}}r.mix(a,r.EmitterMixin),e.default=a},3554:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e,s){super(),this.type=t,this.socketId=e,this.data=s}toJSON(){return{type:this.type,socketId:this.socketId,data:this.data}}static fromJSON(t){return new i(t.type,t.socketId,t.data)}}e.default=i,i.DESCRIPTOR_NAME="ChannelMessage",i.DESCRIPTOR={fields:{type:{type:"uint32",id:1},socketId:{type:"string",id:2},data:{type:"bytes",id:3}}}},8735:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(4990)),i=n(s(3596));e.default=class{encode(t,e,s,n="/",o={}){if(e.length>2)throw new Error("PacketParser supports only 2 elements in data");const a={type:t,data:e,id:s,nsp:n};return i.default.encode(r.default.create(a,o))}decode(t){const e=i.default.decode(t,r.default);return{packet:{id:e.id,type:e.type,data:e.packetData,nsp:e.nsp},options:{flags:e.options.flags,rooms:e.options.rooms,except:e.options.except}}}}},2854:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new a(t.data,t.data1)}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.BUFFER,o.MessageDataTypes.BUFFER),a.DESCRIPTOR_NAME="BytesBytesPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"bytes",id:1},data1:{type:"bytes",id:2}}}},4253:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new a(t.data,t.data1)}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.NUMBER,o.MessageDataTypes.BUFFER),a.DESCRIPTOR_NAME="NumberBytesPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"bytes",id:2}}}},1433:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new a(t.data,t.data1)}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.NUMBER,o.MessageDataTypes.NUMBER),a.DESCRIPTOR_NAME="NumberNumberPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"uint32",id:2}}}},2272:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1?JSON.stringify(this.data1):void 0}}static fromJSON(t){return new a(t.data,t.data1&&JSON.parse(t.data1))}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.NUMBER,o.MessageDataTypes.OBJECT),a.DESCRIPTOR_NAME="NumberObjectPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"string",id:2}}}},1692:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new a(t.data,t.data1)}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.NUMBER,o.MessageDataTypes.STRING),a.DESCRIPTOR_NAME="NumberStringPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"string",id:2}}}},7239:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data?JSON.stringify(this.data):void 0,data1:this.data1}}static fromJSON(t){return new a(t.data&&JSON.parse(t.data),t.data1)}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.OBJECT,o.MessageDataTypes.BUFFER),a.DESCRIPTOR_NAME="ObjectBufferPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"bytes",id:2}}}},9075:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data?JSON.stringify(this.data):void 0,data1:this.data1?JSON.stringify(this.data1):void 0}}static fromJSON(t){return new a(t.data&&JSON.parse(t.data),t.data1&&JSON.parse(t.data1))}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.OBJECT,o.MessageDataTypes.OBJECT),a.DESCRIPTOR_NAME="ObjectObjectPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},799:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{static create(t,e){throw new TypeError("Must be implemented in a child class!")}}e.default=i,t.exports=i},4990:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3596)),i=n(s(3545)),o=n(s(338)),a=n(s(817)),c=n(s(4253)),u=n(s(6335)),d=n(s(2854)),l=n(s(9769)),h=n(s(2272)),f=n(s(9075)),p=n(s(7239)),m=n(s(1797)),y=n(s(1694)),_=n(s(1433)),g=n(s(1692)),v=[c.default,u.default,d.default,l.default,h.default,f.default,p.default,m.default,y.default,_.default,g.default].reduce(((t,e)=>(t[e.TYPE]=e,t)),{});class x extends i.default{constructor(t,e,s,n="/",r=new o.default){super(),this.type=t,this.data=e,this.id=s,this.nsp=n,this.options=r}get packetData(){return void 0===this.data.data&&void 0===this.data.data1?[]:this.data.data&&void 0===this.data.data1?[this.data.data]:[this.data.data,this.data.data1]}toJSON(){const t=r.default.encode(this.options),e=r.default.encode(this.data);return{type:this.type+10*this.data.constructor.TYPE,id:this.id,nsp:"/"===this.nsp?void 0:this.nsp,data:e,options:t}}static fromJSON(t){const e=Math.floor(t.type/10);return new x(t.type-10*e,r.default.decode(t.data,v[e]),t.id,t.nsp,t.options?r.default.decode(t.options,o.default):new o.default)}static create(t,e={}){var s;const n=a.default.getPacketType(a.default.getType(t.data[0]),a.default.getType(null!==(s=t.data[1])&&void 0!==s?s:t.data[0]));return new x(t.type,v[n].create(t.data[0],t.data[1]),t.id,t.nsp,new o.default(e.flags,e.rooms,e.except))}}e.default=x,x.TYPE=10,x.DESCRIPTOR_NAME="PacketMessage",x.DESCRIPTOR={fields:{type:{type:"uint32",id:1},id:{type:"uint32",id:2},nsp:{type:"string",id:3},data:{type:"bytes",id:4},options:{type:"bytes",id:5}}}},338:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(3545));class i extends r.default{constructor(t,e=[],s=[]){super(),this.flags=t,this.rooms=e,this.except=s}toJSON(){var t,e;return{flags:this.flags?JSON.stringify(this.flags):void 0,rooms:(null===(t=this.rooms)||void 0===t?void 0:t.length)?this.rooms:void 0,except:(null===(e=this.except)||void 0===e?void 0:e.length)?this.except:void 0}}static fromJSON(t){return new i(t.flags&&JSON.parse(t.flags),t.rooms,t.except)}}e.default=i,i.TYPE=11,i.DESCRIPTOR_NAME="PacketOptionsMessage",i.DESCRIPTOR={fields:{flags:{type:"string",id:1},rooms:{type:"string",id:2,rule:"repeated"},except:{type:"string",id:3,rule:"repeated"}}}},6335:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new a(t.data,t.data1)}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.STRING,o.MessageDataTypes.BUFFER),a.DESCRIPTOR_NAME="StringBytesPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"bytes",id:2}}}},1694:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new a(t.data,t.data1)}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.STRING,o.MessageDataTypes.NUMBER),a.DESCRIPTOR_NAME="StringNumberPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"uint32",id:2}}}},9769:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1?JSON.stringify(this.data1):void 0}}static fromJSON(t){return new a(t.data,t.data1&&JSON.parse(t.data1))}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.STRING,o.MessageDataTypes.OBJECT),a.DESCRIPTOR_NAME="StringObjectPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},1797:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(s(799)),o=r(s(817));class a extends i.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new a(t.data,t.data1)}static create(t,e){return new a(t,e)}}e.default=a,a.TYPE=o.default.getPacketType(o.MessageDataTypes.STRING,o.MessageDataTypes.STRING),a.DESCRIPTOR_NAME="StringStringPacketDataMessage",a.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},2069:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(170),i=n(s(8735)),o=n(s(817));e.ENCODED_TYPES=[r.PacketType.EVENT,r.PacketType.ACK,r.PacketType.BINARY_ACK,r.PacketType.BINARY_EVENT];class a extends r.Encoder{constructor(t=new i.default){super(),this._packetParser=t}encode(t){if(e.ENCODED_TYPES.includes(t.type))try{return[this._packetParser.encode(t.type,t.data,t.id,t.nsp)]}catch(t){console.error("Can not properly serialize or deserialize messages. Check the original error.",{originalError:{message:t.message}})}return super.encode(t)}}e.Encoder=a;class c extends r.Decoder{constructor(t=new i.default){super(),this._packetParser=t}add(t){if(!o.default.isBuffer(t))return super.add(t);let e;try{e=this._packetParser.decode(t).packet}catch(e){return super.add(t)}super.emitReserved("decoded",e)}}e.Decoder=c},817:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=!("undefined"==typeof process||!process.versions||!process.versions.node);var n,r;(r=n=e.MessageDataTypes||(e.MessageDataTypes={}))[r.BUFFER=1]="BUFFER",r[r.STRING=2]="STRING",r[r.NUMBER=3]="NUMBER",r[r.OBJECT=4]="OBJECT";class i{static getPacketType(...t){let e=0;for(let s=0;s<t.length;s++)e+=t[s]*Math.pow(10,t.length-s-1);return e}static getType(t){if(i.isBuffer(t))return n.BUFFER;const e=typeof t;return"string"===e?n.STRING:"number"===e?n.NUMBER:n.OBJECT}static isBuffer(t){return s&&Buffer.isBuffer(t)||t instanceof ArrayBuffer||t instanceof Uint8Array||this._isBufferView(t)}static _isBufferView(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}}e.default=i},1113:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(357));class i{constructor(t,e){this._context=t,this._deferredPromise=function(){let t,e;const s=new Promise(((s,n)=>{t=s,e=n}));return{resolve:t,reject:e,promise:s}}(),this.timeout=setTimeout((()=>this.error(new r.default("Request timeout.",this._context))),e)}get promise(){return this._deferredPromise.promise}response(t){this._deferredPromise.resolve(t)}error(t){this._deferredPromise.reject(t)}}e.default=class{constructor(t){this._context=t,this._requests=new Set}async send(t,e=1e4){const s=this._createRequest(e);try{return t(s),await s.promise}finally{this._finishRequest(s)}}errorAll(t){for(const e of this._requests)e.error(t)}_createRequest(t){const e=new i(this._context,t);return this._requests.add(e),e}_finishRequest(t){this._requests.delete(t),clearTimeout(t.timeout)}}},7158:function(t,e,s){"use strict";var n,r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),"E2E_TEST_WINDOW"===(null===(n=s.g.window)||void 0===n?void 0:n.type)&&(s.g.window=void 0);const i=s(8623),o=r(s(9655)),a=s(2209),c=r(s(1573)),u=r(s(7530)),d=r(s(6754)),l=r(s(357)),h=s(2069),f=r(s(1113));var p,m;(m=p=e.WEB_SOCKET_GATEWAY_STATES||(e.WEB_SOCKET_GATEWAY_STATES={})).DISCONNECTED="disconnected",m.CONNECTING="connecting",m.CONNECTED="connected";class y{constructor(t,e,s={},n=i.io,r=u.default.get){if(this._token=e,this._options=s,this._connectionProvider=n,this._userFactory=r,this._requestsManager=new f.default(this),this._channels=new Map,this._connectionAttempt=0,!t)throw new TypeError("Api address must be provided.");if(!this._token)throw new TypeError("Token must be provided.");this._options.requestTimeout||(this._options.requestTimeout=1e4),this._url=o.default(t.replace(/^(?!(?:\w+:)?\/\/)/,"https://")),this.set("state","disconnected"),this.set("socketId",void 0),this.set("me",void 0),this.on("change:state",(async(t,e,s)=>{var n;if(s!==y.STATE_CONNECTED){if(s===y.STATE_DISCONNECTED)return this._requestsManager.errorAll(new l.default("Not connected.",this))}else try{this.me=await this._userFactory.call(u.default,this,null===(n=this._socketAuth)||void 0===n?void 0:n.userId)}catch(t){}}),{priority:y._CHANGE_STATE_EVENT_PRIORITY}),this.on("error",((t,e)=>{this._options.onError?this._options.onError(e):console.log(e)}))}get sessionId(){return this.socketId}disconnect(){var t;this.state!==p.DISCONNECTED&&(null===(t=this._socket)||void 0===t||t.disconnect(),this._socket=void 0,this.state=p.DISCONNECTED)}async reconnect(){this._socket||this.state!==p.DISCONNECTED||(await this._token.refreshToken(),await this._connect())}static async connect(t,e="local.cs.dev:443/ws-v2",s={},n=i.io,r=u.default.get){const o=new y(e,t,s,n,r);return await o._connect(),o}_sendRequest(t,e,s){if(!t)throw new l.default("`serviceName` must be provided.",this);if(this.state!==y.STATE_CONNECTED)throw new l.default("Not connected.",this);if(!this._socketAuth||!this._socketAuth.isAuthenticated)throw new l.default("Not authenticated.",this);const n=new ArrayBuffer(s.length+2),r=new Uint8Array(n);return r[0]=t,r[1]=parseInt(e),r.set(s,2),this._emit(1,r)}_getChannel(t,e){const s=""+t+e;return!this._channels.has(s)&&this._socket&&this._channels.set(s,new c.default(s,this,this._socket)),this._channels.get(s)}_connect(){return new Promise(((t,e)=>{const s=this._setupSocket();!this.socketId&&s.io.on("reconnect_error",(()=>{this._reconnectionAttemptError(e)})),s.once("connect",(async()=>{try{await this._onConnect(),t()}catch(t){e(t)}})),s.connect()}))}_setupSocket(){var t;if(this._socket)return this._socket;const e=this._url.port||("http:"===this._url.protocol?80:443),s=(this._url.protocol||"https:")+"//"+this._url.hostname+":"+e,n=this._connectionProvider(s,{parser:{Encoder:h.Encoder,Decoder:h.Decoder},path:"/ws-v2/ws",transports:["websocket"],timeout:void 0!==this._options.timeout?this._options.timeout:5e3,reconnection:void 0===this._options.autoReconnect||this._options.autoReconnect,reconnectionDelay:1e3,reconnectionDelayMax:5e3,rejectUnauthorized:void 0===this._options.rejectUnauthorized||this._options.rejectUnauthorized,query:{version:d.default},agent:null!==(t=this._options.agent)&&void 0!==t&&t});return this.state=p.CONNECTING,n.on("connect",(()=>{this.socketId=n.id})),n.on("connect_error",this._onError.bind(this)),n.on("disconnect",this._onDisconnect.bind(this)),n.io.on("reconnect",this._onReconnect.bind(this)),n.io.on("reconnect_attempt",(t=>{this.state=p.CONNECTING,this._connectionAttempt=t})),n.on("unauthorized",this._onUnauthorized.bind(this)),this._socket=n,n}_emit(t,e){const s=this._socket;return this._requestsManager.send((n=>{s.emit(t,e,((t,e)=>{if(t)return n.error(l.default.fromPublicError(t,this));n.response(e)}))}),this._options.requestTimeout)}_addAuthData(t,e){this._socketAuth={environmentId:t,userId:e,isAuthenticated:!0}}_removeAuthData(){this._socketAuth=void 0}async _onConnect(){await this._authenticate(this._token.value),this.state=p.CONNECTED;const t=async(t,e,s)=>{try{await this._authenticate(s)}catch(t){}};this._token.on("change:value",t),this._socket.io.off("reconnect_error"),this.on("disconnect",(()=>{this._token.off("change:value",t)}))}async _onReconnect(){await this._token.refreshToken(),await this._onConnect()}_onDisconnect(){this.state=p.DISCONNECTED,this._connectionAttempt=0,this.fire("disconnect");for(const t of this._channels.values())t.remove();this._channels.clear(),void 0===this._options.autoReconnect||this._options.autoReconnect||(this._socket=void 0)}_onError(t){this.fire("error",new l.default(t.message,this,t.code))}_reconnectionAttemptError(t){this._connectionAttempt>=2&&(this.disconnect(),t(new l.default("The number of initial connection attempts exceeded.")))}_onUnauthorized({error:t}){this._removeAuthData(),this.fire("error",l.default.fromPublicError(t,this))}async _authenticate(t){try{const e=await this._emit(2,{token:t});this._addAuthData(e.environmentId,e.userId)}catch(t){throw this._removeAuthData(),t}}}y.STATE_DISCONNECTED=p.DISCONNECTED,y.STATE_CONNECTING=p.CONNECTING,y.STATE_CONNECTED=p.CONNECTED,y._CHANGE_STATE_EVENT_PRIORITY=a.priorities.get("highest")+999999,a.mix(y,a.ObservableMixin),e.default=y},537:t=>{"use strict";t.exports=function(t,e){var s=new Array(arguments.length-1),n=0,r=2,i=!0;for(;r<arguments.length;)s[n++]=arguments[r++];return new Promise((function(r,o){s[n]=function(t){if(i)if(i=!1,t)o(t);else{for(var e=new Array(arguments.length-1),s=0;s<e.length;)e[s++]=arguments[s];r.apply(null,e)}};try{t.apply(e||null,s)}catch(t){i&&(i=!1,o(t))}}))}},9745:(t,e)=>{"use strict";var s=e;s.length=function(t){var e=t.length;if(!e)return 0;for(var s=0;--e%4>1&&"="===t.charAt(e);)++s;return Math.ceil(3*t.length)/4-s};for(var n=new Array(64),r=new Array(123),i=0;i<64;)r[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;s.encode=function(t,e,s){for(var r,i=null,o=[],a=0,c=0;e<s;){var u=t[e++];switch(c){case 0:o[a++]=n[u>>2],r=(3&u)<<4,c=1;break;case 1:o[a++]=n[r|u>>4],r=(15&u)<<2,c=2;break;case 2:o[a++]=n[r|u>>6],o[a++]=n[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=n[r],o[a++]=61,1===c&&(o[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";s.decode=function(t,e,s){for(var n,i=s,a=0,c=0;c<t.length;){var u=t.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=r[u]))throw Error(o);switch(a){case 0:n=u,a=1;break;case 1:e[s++]=n<<2|(48&u)>>4,n=u,a=2;break;case 2:e[s++]=(15&n)<<4|(60&u)>>2,n=u,a=3;break;case 3:e[s++]=(3&n)<<6|u,a=0}}if(1===a)throw Error(o);return s-i},s.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},6348:t=>{"use strict";function e(t,s){"string"==typeof t&&(s=t,t=void 0);var n=[];function r(t){if("string"!=typeof t){var s=i();if(e.verbose&&console.log("codegen: "+s),s="return "+s,t){for(var o=Object.keys(t),a=new Array(o.length+1),c=new Array(o.length),u=0;u<o.length;)a[u]=o[u],c[u]=t[o[u++]];return a[u]=s,Function.apply(null,a).apply(null,c)}return Function(s)()}for(var d=new Array(arguments.length-1),l=0;l<d.length;)d[l]=arguments[++l];if(l=0,t=t.replace(/%([%dfijs])/g,(function(t,e){var s=d[l++];switch(e){case"d":case"f":return String(Number(s));case"i":return String(Math.floor(s));case"j":return JSON.stringify(s);case"s":return String(s)}return"%"})),l!==d.length)throw Error("parameter count mismatch");return n.push(t),r}function i(e){return"function "+(e||s||"")+"("+(t&&t.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return r.toString=i,r}t.exports=e,e.verbose=!1},4459:t=>{"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,s){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:s||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var s=this._listeners[t],n=0;n<s.length;)s[n].fn===e?s.splice(n,1):++n;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var s=[],n=1;n<arguments.length;)s.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,s)}return this}},7803:(t,e,s)=>{"use strict";t.exports=i;var n=s(537),r=s(3229)("fs");function i(t,e,s){return"function"==typeof e?(s=e,e={}):e||(e={}),s?!e.xhr&&r&&r.readFile?r.readFile(t,(function(n,r){return n&&"undefined"!=typeof XMLHttpRequest?i.xhr(t,e,s):n?s(n):s(null,e.binary?r:r.toString("utf8"))})):i.xhr(t,e,s):n(i,this,t,e)}i.xhr=function(t,e,s){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return s(Error("status "+n.status));if(e.binary){var t=n.response;if(!t){t=[];for(var r=0;r<n.responseText.length;++r)t.push(255&n.responseText.charCodeAt(r))}return s(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return s(null,n.responseText)}},e.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",t),n.send()}},897:t=>{"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),s=new Uint8Array(e.buffer),n=128===s[3];function r(t,n,r){e[0]=t,n[r]=s[0],n[r+1]=s[1],n[r+2]=s[2],n[r+3]=s[3]}function i(t,n,r){e[0]=t,n[r]=s[3],n[r+1]=s[2],n[r+2]=s[1],n[r+3]=s[0]}function o(t,n){return s[0]=t[n],s[1]=t[n+1],s[2]=t[n+2],s[3]=t[n+3],e[0]}function a(t,n){return s[3]=t[n],s[2]=t[n+1],s[1]=t[n+2],s[0]=t[n+3],e[0]}t.writeFloatLE=n?r:i,t.writeFloatBE=n?i:r,t.readFloatLE=n?o:a,t.readFloatBE=n?a:o}():function(){function e(t,e,s,n){var r=e<0?1:0;if(r&&(e=-e),0===e)t(1/e>0?0:2147483648,s,n);else if(isNaN(e))t(2143289344,s,n);else if(e>34028234663852886e22)t((r<<31|2139095040)>>>0,s,n);else if(e<11754943508222875e-54)t((r<<31|Math.round(e/1401298464324817e-60))>>>0,s,n);else{var i=Math.floor(Math.log(e)/Math.LN2);t((r<<31|i+127<<23|8388607&Math.round(e*Math.pow(2,-i)*8388608))>>>0,s,n)}}function o(t,e,s){var n=t(e,s),r=2*(n>>31)+1,i=n>>>23&255,o=8388607&n;return 255===i?o?NaN:r*(1/0):0===i?1401298464324817e-60*r*o:r*Math.pow(2,i-150)*(o+8388608)}t.writeFloatLE=e.bind(null,s),t.writeFloatBE=e.bind(null,n),t.readFloatLE=o.bind(null,r),t.readFloatBE=o.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),s=new Uint8Array(e.buffer),n=128===s[7];function r(t,n,r){e[0]=t,n[r]=s[0],n[r+1]=s[1],n[r+2]=s[2],n[r+3]=s[3],n[r+4]=s[4],n[r+5]=s[5],n[r+6]=s[6],n[r+7]=s[7]}function i(t,n,r){e[0]=t,n[r]=s[7],n[r+1]=s[6],n[r+2]=s[5],n[r+3]=s[4],n[r+4]=s[3],n[r+5]=s[2],n[r+6]=s[1],n[r+7]=s[0]}function o(t,n){return s[0]=t[n],s[1]=t[n+1],s[2]=t[n+2],s[3]=t[n+3],s[4]=t[n+4],s[5]=t[n+5],s[6]=t[n+6],s[7]=t[n+7],e[0]}function a(t,n){return s[7]=t[n],s[6]=t[n+1],s[5]=t[n+2],s[4]=t[n+3],s[3]=t[n+4],s[2]=t[n+5],s[1]=t[n+6],s[0]=t[n+7],e[0]}t.writeDoubleLE=n?r:i,t.writeDoubleBE=n?i:r,t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o}():function(){function e(t,e,s,n,r,i){var o=n<0?1:0;if(o&&(n=-n),0===n)t(0,r,i+e),t(1/n>0?0:2147483648,r,i+s);else if(isNaN(n))t(0,r,i+e),t(2146959360,r,i+s);else if(n>17976931348623157e292)t(0,r,i+e),t((o<<31|2146435072)>>>0,r,i+s);else{var a;if(n<22250738585072014e-324)t((a=n/5e-324)>>>0,r,i+e),t((o<<31|a/4294967296)>>>0,r,i+s);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),t(4503599627370496*(a=n*Math.pow(2,-c))>>>0,r,i+e),t((o<<31|c+1023<<20|1048576*a&1048575)>>>0,r,i+s)}}}function o(t,e,s,n,r){var i=t(n,r+e),o=t(n,r+s),a=2*(o>>31)+1,c=o>>>20&2047,u=4294967296*(1048575&o)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}t.writeDoubleLE=e.bind(null,s,0,4),t.writeDoubleBE=e.bind(null,n,4,0),t.readDoubleLE=o.bind(null,r,0,4),t.readDoubleBE=o.bind(null,i,4,0)}(),t}function s(t,e,s){e[s]=255&t,e[s+1]=t>>>8&255,e[s+2]=t>>>16&255,e[s+3]=t>>>24}function n(t,e,s){e[s]=t>>>24,e[s+1]=t>>>16&255,e[s+2]=t>>>8&255,e[s+3]=255&t}function r(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function i(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},3229:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},1272:(t,e)=>{"use strict";var s=e,n=s.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},r=s.normalize=function(t){var e=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),s=n(t),r="";s&&(r=e.shift()+"/");for(var i=0;i<e.length;)".."===e[i]?i>0&&".."!==e[i-1]?e.splice(--i,2):s?e.splice(i,1):++i:"."===e[i]?e.splice(i,1):++i;return r+e.join("/")};s.resolve=function(t,e,s){return s||(e=r(e)),n(e)?e:(s||(t=r(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?r(t+"/"+e):e)}},7986:t=>{"use strict";t.exports=function(t,e,s){var n=s||8192,r=n>>>1,i=null,o=n;return function(s){if(s<1||s>r)return t(s);o+s>n&&(i=t(n),o=0);var a=e.call(i,o,o+=s);return 7&o&&(o=1+(7|o)),a}}},113:(t,e)=>{"use strict";var s=e;s.length=function(t){for(var e=0,s=0,n=0;n<t.length;++n)(s=t.charCodeAt(n))<128?e+=1:s<2048?e+=2:55296==(64512&s)&&56320==(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},s.read=function(t,e,s){if(s-e<1)return"";for(var n,r=null,i=[],o=0;e<s;)(n=t[e++])<128?i[o++]=n:n>191&&n<224?i[o++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[o++]=55296+(n>>10),i[o++]=56320+(1023&n)):i[o++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,i)),o=0);return r?(o&&r.push(String.fromCharCode.apply(String,i.slice(0,o))),r.join("")):String.fromCharCode.apply(String,i.slice(0,o))},s.write=function(t,e,s){for(var n,r,i=s,o=0;o<t.length;++o)(n=t.charCodeAt(o))<128?e[s++]=n:n<2048?(e[s++]=n>>6|192,e[s++]=63&n|128):55296==(64512&n)&&56320==(64512&(r=t.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&r),++o,e[s++]=n>>18|240,e[s++]=n>>12&63|128,e[s++]=n>>6&63|128,e[s++]=63&n|128):(e[s++]=n>>12|224,e[s++]=n>>6&63|128,e[s++]=63&n|128);return s-i}},7227:(t,e,s)=>{"use strict";s.r(e),s.d(e,{decode:()=>a,encode:()=>o});for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<n.length;i++)r[n.charCodeAt(i)]=i;var o=function(t){var e,s=new Uint8Array(t),r=s.length,i="";for(e=0;e<r;e+=3)i+=n[s[e]>>2],i+=n[(3&s[e])<<4|s[e+1]>>4],i+=n[(15&s[e+1])<<2|s[e+2]>>6],i+=n[63&s[e+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},a=function(t){var e,s,n,i,o,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var d=new ArrayBuffer(a),l=new Uint8Array(d);for(e=0;e<c;e+=4)s=r[t.charCodeAt(e)],n=r[t.charCodeAt(e+1)],i=r[t.charCodeAt(e+2)],o=r[t.charCodeAt(e+3)],l[u++]=s<<2|n>>4,l[u++]=(15&n)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return d}},3717:(t,e)=>{function s(t){if(t)return function(t){for(var e in s.prototype)t[e]=s.prototype[e];return t}(t)}e.Emitter=s,s.prototype.on=s.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},s.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<n.length;r++)if((s=n[r])===e||s.fn===e){n.splice(r,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},s.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s){n=0;for(var r=(s=s.slice(0)).length;n<r;++n)s[n].apply(this,e)}return this},s.prototype.emitReserved=s.prototype.emit,s.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},s.prototype.hasListeners=function(t){return!!this.listeners(t).length}},7672:t=>{function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-s:t+s}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}},3286:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});var n=s(7758),r=s.n(n)()((function(t){return t[1]}));r.push([t.id,'.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{-webkit-backface-visibility:hidden;pointer-events:none;position:absolute}.ck.ck-tooltip{display:none;opacity:0;visibility:hidden;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";height:0;width:0}:root{--ck-color-presence-list-dropdown-background:#fff;--ck-color-presence-list-dropdown-arrow-border:#ebebeb;--ck-presence-list-dropdown-list-max-width:250px;--ck-presence-list-dropdown-list-min-width:180px;--ck-presence-list-users-tooltip-max-width:120px;--ck-presence-list-users-tooltip-min-width:25px}.ck.ck-presence-list{align-items:center;display:flex;font-size:var(--ck-font-size-base);margin-right:var(--ck-spacing-standard);transition:margin-right .2s ease-in-out}.ck.ck-presence-list *{box-sizing:border-box}.ck.ck-presence-list__list{display:flex;justify-content:flex-end}.ck.ck-presence-list__counter{color:var(--ck-color-base-text)}.ck.ck-presence-list__counter--hidden{display:none}.ck.ck-presence-list__list-item{background:none;border:0;color:inherit;font:inherit;margin-left:var(--ck-spacing-standard);outline:none;padding:0;position:relative}.ck.ck-presence-list__list-item:hover .ck-tooltip{opacity:1;visibility:visible}.ck.ck-presence-list__list-item .ck.ck-tooltip{display:block}.ck.ck-presence-list__list-item .ck-tooltip__text span{display:block;max-width:var(--ck-presence-list-users-tooltip-max-width);overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap}.ck.ck-presence-list__marker{display:block;height:3px;margin-top:3px;position:relative;width:100%}.ck.ck-presence-list--collapsed .ck-presence-list__list{margin-left:var(--ck-spacing-standard);min-width:calc(var(--ck-user-avatar-size)*1.5)}.ck.ck-presence-list--collapsed .ck-presence-list__list *{cursor:pointer;transition:all .4s ease-in-out}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item{margin-left:calc(var(--ck-user-avatar-size)*-1 + 5px)}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item .ck-tooltip{display:none}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(5){opacity:.15}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(4){opacity:.35}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(3){opacity:.55}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(2){opacity:.75}.ck.ck-presence-list__balloon{--ck-color-panel-border:var(--ck-color-presence-list-dropdown-arrow-border);--ck-color-panel-background:var(--ck-color-presence-list-dropdown-background);animation:fadeIn .3s ease-in-out;background-color:var(--ck-color-presence-list-dropdown-background);border:0;opacity:1}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-wrapper{border-radius:var(--ck-border-radius);max-height:80vh;max-width:var(--ck-presence-list-dropdown-list-max-width);min-width:var(--ck-presence-list-dropdown-list-min-width);overflow-x:hidden;overflow-y:auto}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item{align-items:center;background:none;border:0;color:inherit;display:flex;font:inherit;outline:none;padding:0;padding:var(--ck-spacing-standard);position:relative}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item:first-of-type .ck-presence-list__marker{border-top-left-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item:last-of-type .ck-presence-list__marker{border-bottom-left-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list .ck-user__full-name{color:var(--ck-color-base-text);margin-left:var(--ck-spacing-standard);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list .ck.ck-presence-list__marker{height:100%;left:0;margin:0;position:absolute;width:3px}.ck-presence-list__balloon button.ck-presence-list__dropdown-list-item *,.ck-presence-list__list button.ck-presence-list__list-item *{cursor:pointer}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}',""]);const i=r},9940:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});var n=s(7758),r=s.n(n)()((function(t){return t[1]}));r.push([t.id,".ck .ck-user__marker{cursor:default;display:inline;position:relative}.ck .ck-user__marker:after{color:#fff;content:attr(data-name);display:none;font-family:Georgia,sans-serif;font-size:var(--ck-font-size-base);font-style:normal;font-weight:400;left:0;line-height:1;opacity:0;padding:var(--ck-spacing-small);position:absolute;top:-20px;transition:opacity .2s linear,transform .3s ease-in-out;white-space:nowrap;z-index:99999}.ck .ck-user__marker:hover .ck-user__marker-dot{width:0}.ck .ck-user__marker:hover:after{animation:fadeInLeft .3s ease-in-out;display:block;opacity:1}.ck .ck-user__marker-line{bottom:0;height:100%;position:absolute;width:0}.ck .ck-user__marker-dot{border-radius:50%;cursor:default;display:block;height:var(--ck-user-dot-size);left:50%;position:absolute;top:calc((var(--ck-user-dot-size)/2)*-1);transform:translate(-50%,-50%);width:var(--ck-user-dot-size)}.ck .ck-placeholder .ck-user__marker{display:none}@keyframes fadeInLeft{0%{opacity:0;transform:translateX(-10px)}to{opacity:1;transform:translateX(0)}}",""]);const i=r},7758:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=t(e);return e[2]?"@media ".concat(e[2]," {").concat(s,"}"):s})).join("")},e.i=function(t,s,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);n&&r[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),e.push(c))}},e}},7154:t=>{var e=1e3,s=60*e,n=60*s,r=24*n,i=7*r,o=365.25*r;function a(t,e,s,n){var r=e>=1.5*s;return Math.round(t/s)+" "+n+(r?"s":"")}t.exports=function(t,c){c=c||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*r;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*s;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(t);if("number"===u&&isFinite(t))return c.long?function(t){var i=Math.abs(t);if(i>=r)return a(t,i,r,"day");if(i>=n)return a(t,i,n,"hour");if(i>=s)return a(t,i,s,"minute");if(i>=e)return a(t,i,e,"second");return t+" ms"}(t):function(t){var i=Math.abs(t);if(i>=r)return Math.round(t/r)+"d";if(i>=n)return Math.round(t/n)+"h";if(i>=s)return Math.round(t/s)+"m";if(i>=e)return Math.round(t/e)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},5579:(t,e,s)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;e.splice(1,0,s,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(n++,"%c"===t&&(r=n))})),e.splice(r,0,s)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=s(3847)(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},3847:(t,e,s)=>{t.exports=function(t){function e(t){let s,r,i,o=null;function a(...t){if(!a.enabled)return;const n=a,r=Number(new Date),i=r-(s||r);n.diff=i,n.prev=s,n.curr=r,s=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((s,r)=>{if("%%"===s)return"%";o++;const i=e.formatters[r];if("function"==typeof i){const e=t[o];s=i.call(n,e),t.splice(o,1),o--}return s})),e.formatArgs.call(n,t);(n.log||e.log).apply(n,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=n,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==e.namespaces&&(r=e.namespaces,i=e.enabled(t)),i),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function n(t,s){const n=e(this.namespace+(void 0===s?":":s)+t);return n.log=this.log,n}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let s;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(s=0;s<r;s++)n[s]&&("-"===(t=n[s].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let s,n;for(s=0,n=e.skips.length;s<n;s++)if(e.skips[s].test(t))return!1;for(s=0,n=e.names.length;s<n;s++)if(e.names[s].test(t))return!0;return!1},e.humanize=s(7154),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((s=>{e[s]=t[s]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let s=0;for(let e=0;e<t.length;e++)s=(s<<5)-s+t.charCodeAt(e),s|=0;return e.colors[Math.abs(s)%e.colors.length]},e.enable(e.load()),e}},4568:t=>{try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},9827:(t,e)=>{e.encode=function(t){var e="";for(var s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e},e.decode=function(t){for(var e={},s=t.split("&"),n=0,r=s.length;n<r;n++){var i=s[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},5977:t=>{var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var n=t,r=t.indexOf("["),i=t.indexOf("]");-1!=r&&-1!=i&&(t=t.substring(0,r)+t.substring(r,i).replace(/:/g,";")+t.substring(i,t.length));for(var o,a,c=e.exec(t||""),u={},d=14;d--;)u[s[d]]=c[d]||"";return-1!=r&&-1!=i&&(u.source=n,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=function(t,e){var s=/\/{2,9}/g,n=e.replace(s,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||n.splice(0,1);"/"==e.substr(e.length-1,1)&&n.splice(n.length-1,1);return n}(0,u.path),u.queryKey=(o=u.query,a={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,s){e&&(a[e]=s)})),a),u}},6154:(t,e,s)=>{"use strict";t.exports=s(7278)},6274:(t,e,s)=>{"use strict";var n=e,r=s(4937),i=s(7572);function o(t,e,s,n){if(e.resolvedType)if(e.resolvedType instanceof r){t("switch(d%s){",n);for(var i=e.resolvedType.values,o=Object.keys(i),a=0;a<o.length;++a)e.repeated&&i[o[a]]===e.typeDefault&&t("default:"),t("case%j:",o[a])("case %i:",i[o[a]])("m%s=%j",n,i[o[a]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,s,n);else{var c=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n)}}return t}function a(t,e,s,n){if(e.resolvedType)e.resolvedType instanceof r?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,s,n,n):t("d%s=types[%i].toObject(m%s,o)",n,s,n);else{var i=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n)}}return t}n.fromObject=function(t){var e=t.fieldsArray,s=i.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return s("return new this.ctor");s("var m=new this.ctor");for(var n=0;n<e.length;++n){var a=e[n].resolve(),c=i.safeProp(a.name);a.map?(s("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(s,a,n,c+"[ks[i]]")("}")("}")):a.repeated?(s("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(s,a,n,c+"[i]")("}")("}")):(a.resolvedType instanceof r||s("if(d%s!=null){",c),o(s,a,n,c),a.resolvedType instanceof r||s("}"))}return s("return m")},n.toObject=function(t){var e=t.fieldsArray.slice().sort(i.compareFieldsById);if(!e.length)return i.codegen()("return {}");for(var s=i.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],c=[],u=0;u<e.length;++u)e[u].partOf||(e[u].resolve().repeated?n:e[u].map?o:c).push(e[u]);if(n.length){for(s("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)s("d%s=[]",i.safeProp(n[u].name));s("}")}if(o.length){for(s("if(o.objects||o.defaults){"),u=0;u<o.length;++u)s("d%s={}",i.safeProp(o[u].name));s("}")}if(c.length){for(s("if(o.defaults){"),u=0;u<c.length;++u){var d=c[u],l=i.safeProp(d.name);if(d.resolvedType instanceof r)s("d%s=o.enums===String?%j:%j",l,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)s("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var h="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";s("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",l,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else s("d%s=%j",l,d.typeDefault)}s("}")}var f=!1;for(u=0;u<e.length;++u){d=e[u];var p=t._fieldsArray.indexOf(d);l=i.safeProp(d.name);d.map?(f||(f=!0,s("var ks2")),s("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),a(s,d,p,l+"[ks2[j]]")("}")):d.repeated?(s("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),a(s,d,p,l+"[j]")("}")):(s("if(m%s!=null&&m.hasOwnProperty(%j)){",l,d.name),a(s,d,p,l),d.partOf&&s("if(o.oneofs)")("d%s=%j",i.safeProp(d.partOf.name),d.name)),s("}")}return s("return d")}},4799:(t,e,s)=>{"use strict";t.exports=function(t){var e=i.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter((function(t){return t.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break");e("switch(t>>>3){");for(var s=0;s<t.fieldsArray.length;++s){var a=t._fieldsArray[s].resolve(),c=a.resolvedType instanceof n?"int32":a.type,u="m"+i.safeProp(a.name);e("case %i:",a.id),a.map?(e("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==r.defaults[a.keyType]?e("k=%j",r.defaults[a.keyType]):e("k=null"),void 0!==r.defaults[c]?e("value=%j",r.defaults[c]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===r.basic[c]?e("value=types[%i].decode(r,r.uint32())",s):e("value=r.%s()",c),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==r.long[a.keyType]?e('%s[typeof k==="object"?util.longToHash(k):k]=value',u):e("%s[k]=value",u)):a.repeated?(e("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==r.packed[c]&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===r.basic[c]?e(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,s):e("%s.push(r.%s())",u,c)):void 0===r.basic[c]?e(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,s):e("%s=r.%s()",u,c),e("break")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),s=0;s<t._fieldsArray.length;++s){var d=t._fieldsArray[s];d.required&&e("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",o(d))}return e("return m")};var n=s(4937),r=s(8997),i=s(7572);function o(t){return"missing required '"+t.name+"'"}},6382:(t,e,s)=>{"use strict";t.exports=function(t){for(var e,s=i.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),a=t.fieldsArray.slice().sort(i.compareFieldsById),c=0;c<a.length;++c){var u=a[c].resolve(),d=t._fieldsArray.indexOf(u),l=u.resolvedType instanceof n?"int32":u.type,h=r.basic[l];e="m"+i.safeProp(u.name),u.map?(s("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",e,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|r.mapKey[u.keyType],u.keyType),void 0===h?s("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,e):s(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,l,e),s("}")("}")):u.repeated?(s("if(%s!=null&&%s.length){",e,e),u.packed&&void 0!==r.packed[l]?s("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",e)("w.%s(%s[i])",l,e)("w.ldelim()"):(s("for(var i=0;i<%s.length;++i)",e),void 0===h?o(s,u,d,e+"[i]"):s("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,l,e)),s("}")):(u.optional&&s("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",e,u.name),void 0===h?o(s,u,d,e):s("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,l,e))}return s("return w")};var n=s(4937),r=s(8997),i=s(7572);function o(t,e,s,n){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",s,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",s,n,(e.id<<3|2)>>>0)}},4937:(t,e,s)=>{"use strict";t.exports=o;var n=s(4154);((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var r=s(512),i=s(7572);function o(t,e,s,r,i){if(n.call(this,t,s),e&&"object"!=typeof e)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=i||{},this.reserved=void 0,e)for(var o=Object.keys(e),a=0;a<o.length;++a)"number"==typeof e[o[a]]&&(this.valuesById[this.values[o[a]]=e[o[a]]]=o[a])}o.fromJSON=function(t,e){var s=new o(t,e.values,e.options,e.comment,e.comments);return s.reserved=e.reserved,s},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])},o.prototype.add=function(t,e,s){if(!i.isString(t))throw TypeError("name must be a string");if(!i.isInteger(e))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[e]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return this.comments[t]=s||null,this},o.prototype.remove=function(t){if(!i.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(null==e)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this},o.prototype.isReservedId=function(t){return r.isReservedId(this.reserved,t)},o.prototype.isReservedName=function(t){return r.isReservedName(this.reserved,t)}},5891:(t,e,s)=>{"use strict";t.exports=u;var n=s(4154);((u.prototype=Object.create(n.prototype)).constructor=u).className="Field";var r,i=s(4937),o=s(8997),a=s(7572),c=/^required|optional|repeated$/;function u(t,e,s,r,i,u,d){if(a.isObject(r)?(d=i,u=r,r=i=void 0):a.isObject(i)&&(d=u,u=i,i=void 0),n.call(this,t,u),!a.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!a.isString(s))throw TypeError("type must be a string");if(void 0!==r&&!c.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!a.isString(i))throw TypeError("extend must be a string");"proto3_optional"===r&&(r="optional"),this.rule=r&&"optional"!==r?r:void 0,this.type=s,this.id=e,this.extend=i||void 0,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[s],this.bytes="bytes"===s,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=d}u.fromJSON=function(t,e){return new u(t,e.id,e.type,e.rule,e.extend,e.options,e.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(t,e,s){return"packed"===t&&(this._packed=null),n.prototype.setOption.call(this,t,e,s)},u.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof r?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,t=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,t=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof r&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},u.d=function(t,e,s,n){return"function"==typeof e?e=a.decorateType(e).name:e&&"object"==typeof e&&(e=a.decorateEnum(e).name),function(r,i){a.decorateType(r.constructor).add(new u(i,t,e,s,{default:n}))}},u._configure=function(t){r=t}},7278:(t,e,s)=>{"use strict";var n=t.exports=s(3278);n.build="light",n.load=function(t,e,s){return"function"==typeof e?(s=e,e=new n.Root):e||(e=new n.Root),e.load(t,s)},n.loadSync=function(t,e){return e||(e=new n.Root),e.loadSync(t)},n.encoder=s(6382),n.decoder=s(4799),n.verifier=s(8600),n.converter=s(6274),n.ReflectionObject=s(4154),n.Namespace=s(512),n.Root=s(2613),n.Enum=s(4937),n.Type=s(4560),n.Field=s(5891),n.OneOf=s(3044),n.MapField=s(8911),n.Service=s(877),n.Method=s(4935),n.Message=s(4777),n.wrappers=s(3375),n.types=s(8997),n.util=s(7572),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},3278:(t,e,s)=>{"use strict";var n=e;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=s(2944),n.BufferWriter=s(2178),n.Reader=s(9867),n.BufferReader=s(2676),n.util=s(4155),n.rpc=s(3290),n.roots=s(284),n.configure=r,r()},8911:(t,e,s)=>{"use strict";t.exports=o;var n=s(5891);((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var r=s(8997),i=s(7572);function o(t,e,s,r,o,a){if(n.call(this,t,e,r,void 0,void 0,o,a),!i.isString(s))throw TypeError("keyType must be a string");this.keyType=s,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(t,e){return new o(t,e.id,e.keyType,e.type,e.options,e.comment)},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===r.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(t,e,s){return"function"==typeof s?s=i.decorateType(s).name:s&&"object"==typeof s&&(s=i.decorateEnum(s).name),function(n,r){i.decorateType(n.constructor).add(new o(r,t,e,s))}}},4777:(t,e,s)=>{"use strict";t.exports=r;var n=s(4155);function r(t){if(t)for(var e=Object.keys(t),s=0;s<e.length;++s)this[e[s]]=t[e[s]]}r.create=function(t){return this.$type.create(t)},r.encode=function(t,e){return this.$type.encode(t,e)},r.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)},r.decode=function(t){return this.$type.decode(t)},r.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},r.verify=function(t){return this.$type.verify(t)},r.fromObject=function(t){return this.$type.fromObject(t)},r.toObject=function(t,e){return this.$type.toObject(t,e)},r.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},4935:(t,e,s)=>{"use strict";t.exports=i;var n=s(4154);((i.prototype=Object.create(n.prototype)).constructor=i).className="Method";var r=s(7572);function i(t,e,s,i,o,a,c,u,d){if(r.isObject(o)?(c=o,o=a=void 0):r.isObject(a)&&(c=a,a=void 0),void 0!==e&&!r.isString(e))throw TypeError("type must be a string");if(!r.isString(s))throw TypeError("requestType must be a string");if(!r.isString(i))throw TypeError("responseType must be a string");n.call(this,t,c),this.type=e||"rpc",this.requestType=s,this.requestStream=!!o||void 0,this.responseType=i,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=d}i.fromJSON=function(t,e){return new i(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options,e.comment,e.parsedOptions)},i.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return r.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},512:(t,e,s)=>{"use strict";t.exports=l;var n=s(4154);((l.prototype=Object.create(n.prototype)).constructor=l).className="Namespace";var r,i,o,a=s(5891),c=s(3044),u=s(7572);function d(t,e){if(t&&t.length){for(var s={},n=0;n<t.length;++n)s[t[n].name]=t[n].toJSON(e);return s}}function l(t,e){n.call(this,t,e),this.nested=void 0,this._nestedArray=null}function h(t){return t._nestedArray=null,t}l.fromJSON=function(t,e){return new l(t,e.options).addJSON(e.nested)},l.arrayToJSON=d,l.isReservedId=function(t,e){if(t)for(var s=0;s<t.length;++s)if("string"!=typeof t[s]&&t[s][0]<=e&&t[s][1]>e)return!0;return!1},l.isReservedName=function(t,e){if(t)for(var s=0;s<t.length;++s)if(t[s]===e)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),l.prototype.toJSON=function(t){return u.toObject(["options",this.options,"nested",d(this.nestedArray,t)])},l.prototype.addJSON=function(t){if(t)for(var e,s=Object.keys(t),n=0;n<s.length;++n)e=t[s[n]],this.add((void 0!==e.fields?r.fromJSON:void 0!==e.values?o.fromJSON:void 0!==e.methods?i.fromJSON:void 0!==e.id?a.fromJSON:l.fromJSON)(s[n],e));return this},l.prototype.get=function(t){return this.nested&&this.nested[t]||null},l.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof o)return this.nested[t].values;throw Error("no such enum: "+t)},l.prototype.add=function(t){if(!(t instanceof a&&void 0!==t.extend||t instanceof r||t instanceof o||t instanceof i||t instanceof l||t instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof l&&t instanceof l)||e instanceof r||e instanceof i)throw Error("duplicate name '"+t.name+"' in "+this);for(var s=e.nestedArray,n=0;n<s.length;++n)t.add(s[n]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),h(this)},l.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),h(this)},l.prototype.define=function(t,e){if(u.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var s=this;t.length>0;){var n=t.shift();if(s.nested&&s.nested[n]){if(!((s=s.nested[n])instanceof l))throw Error("path conflicts with non-namespace objects")}else s.add(s=new l(n))}return e&&s.addJSON(e),s},l.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof l?t[e++].resolveAll():t[e++].resolve();return this.resolve()},l.prototype.lookup=function(t,e,s){if("boolean"==typeof e?(s=e,e=void 0):e&&!Array.isArray(e)&&(e=[e]),u.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),e);var n=this.get(t[0]);if(n){if(1===t.length){if(!e||e.indexOf(n.constructor)>-1)return n}else if(n instanceof l&&(n=n.lookup(t.slice(1),e,!0)))return n}else for(var r=0;r<this.nestedArray.length;++r)if(this._nestedArray[r]instanceof l&&(n=this._nestedArray[r].lookup(t,e,!0)))return n;return null===this.parent||s?null:this.parent.lookup(t,e)},l.prototype.lookupType=function(t){var e=this.lookup(t,[r]);if(!e)throw Error("no such type: "+t);return e},l.prototype.lookupEnum=function(t){var e=this.lookup(t,[o]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e},l.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[r,o]);if(!e)throw Error("no such Type or Enum '"+t+"' in "+this);return e},l.prototype.lookupService=function(t){var e=this.lookup(t,[i]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e},l._configure=function(t,e,s){r=t,i=e,o=s}},4154:(t,e,s)=>{"use strict";t.exports=i,i.className="ReflectionObject";var n,r=s(7572);function i(t,e){if(!r.isString(t))throw TypeError("name must be a string");if(e&&!r.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof n&&e._handleAdd(this)},i.prototype.onRemove=function(t){var e=t.root;e instanceof n&&e._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},i.prototype.getOption=function(t){if(this.options)return this.options[t]},i.prototype.setOption=function(t,e,s){return s&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=e),this},i.prototype.setParsedOption=function(t,e,s){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(s){var i=n.find((function(e){return Object.prototype.hasOwnProperty.call(e,t)}));if(i){var o=i[t];r.setProperty(o,s,e)}else(i={})[t]=r.setProperty({},s,e),n.push(i)}else{var a={};a[t]=e,n.push(a)}return this},i.prototype.setOptions=function(t,e){if(t)for(var s=Object.keys(t),n=0;n<s.length;++n)this.setOption(s[n],t[s[n]],e);return this},i.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},i._configure=function(t){n=t}},3044:(t,e,s)=>{"use strict";t.exports=o;var n=s(4154);((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var r=s(5891),i=s(7572);function o(t,e,s,r){if(Array.isArray(e)||(s=e,e=void 0),n.call(this,t,s),void 0!==e&&!Array.isArray(e))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=r}function a(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}o.fromJSON=function(t,e){return new o(t,e.oneof,e.options,e.comment)},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])},o.prototype.add=function(t){if(!(t instanceof r))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,a(this),this},o.prototype.remove=function(t){if(!(t instanceof r))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),(e=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(e,1),t.partOf=null,this},o.prototype.onAdd=function(t){n.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var s=t.get(this.oneof[e]);s&&!s.partOf&&(s.partOf=this,this.fieldsArray.push(s))}a(this)},o.prototype.onRemove=function(t){for(var e,s=0;s<this.fieldsArray.length;++s)(e=this.fieldsArray[s]).parent&&e.parent.remove(e);n.prototype.onRemove.call(this,t)},o.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(e,s){i.decorateType(e.constructor).add(new o(s,t)),Object.defineProperty(e,s,{get:i.oneOfGetter(t),set:i.oneOfSetter(t)})}}},9867:(t,e,s)=>{"use strict";t.exports=c;var n,r=s(4155),i=r.LongBits,o=r.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var u,d="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},l=function(){return r.Buffer?function(t){return(c.create=function(t){return r.Buffer.isBuffer(t)?new n(t):d(t)})(t)}:d};function h(){var t=new i(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new i(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,s=this.pos+t;if(s>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,s):e===s?new this.buf.constructor(0):this._slice.call(this.buf,e,s)},c.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},c.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){n=t,c.create=l(),n._configure();var e=r.Long?"toLong":"toNumber";r.merge(c.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return p.call(this)[e](!0)},sfixed64:function(){return p.call(this)[e](!1)}})}},2676:(t,e,s)=>{"use strict";t.exports=i;var n=s(9867);(i.prototype=Object.create(n.prototype)).constructor=i;var r=s(4155);function i(t){n.call(this,t)}i._configure=function(){r.Buffer&&(i.prototype._slice=r.Buffer.prototype.slice)},i.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},i._configure()},2613:(t,e,s)=>{"use strict";t.exports=l;var n=s(512);((l.prototype=Object.create(n.prototype)).constructor=l).className="Root";var r,i,o,a=s(5891),c=s(4937),u=s(3044),d=s(7572);function l(t){n.call(this,"",t),this.deferred=[],this.files=[]}function h(){}l.fromJSON=function(t,e){return e||(e=new l),t.options&&e.setOptions(t.options),e.addJSON(t.nested)},l.prototype.resolvePath=d.path.resolve,l.prototype.fetch=d.fetch,l.prototype.load=function t(e,s,n){"function"==typeof s&&(n=s,s=void 0);var r=this;if(!n)return d.asPromise(t,r,e,s);var a=n===h;function c(t,e){if(n){var s=n;if(n=null,a)throw t;s(t,e)}}function u(t){var e=t.lastIndexOf("google/protobuf/");if(e>-1){var s=t.substring(e);if(s in o)return s}return null}function l(t,e){try{if(d.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),d.isString(e)){i.filename=t;var n,o=i(e,r,s),l=0;if(o.imports)for(;l<o.imports.length;++l)(n=u(o.imports[l])||r.resolvePath(t,o.imports[l]))&&f(n);if(o.weakImports)for(l=0;l<o.weakImports.length;++l)(n=u(o.weakImports[l])||r.resolvePath(t,o.weakImports[l]))&&f(n,!0)}else r.setOptions(e.options).addJSON(e.nested)}catch(t){c(t)}a||p||c(null,r)}function f(t,e){if(!(r.files.indexOf(t)>-1))if(r.files.push(t),t in o)a?l(t,o[t]):(++p,setTimeout((function(){--p,l(t,o[t])})));else if(a){var s;try{s=d.fs.readFileSync(t).toString("utf8")}catch(t){return void(e||c(t))}l(t,s)}else++p,r.fetch(t,(function(s,i){--p,n&&(s?e?p||c(null,r):c(s):l(t,i))}))}var p=0;d.isString(e)&&(e=[e]);for(var m,y=0;y<e.length;++y)(m=r.resolvePath("",e[y]))&&f(m);if(a)return r;p||c(null,r)},l.prototype.loadSync=function(t,e){if(!d.isNode)throw Error("not supported");return this.load(t,e,h)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(t){return"'extend "+t.extend+"' in "+t.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(t,e){var s=e.parent.lookup(e.extend);if(s){var n=new a(e.fullName,e.id,e.type,e.rule,void 0,e.options);return n.declaringField=e,e.extensionField=n,s.add(n),!0}return!1}l.prototype._handleAdd=function(t){if(t instanceof a)void 0===t.extend||t.extensionField||p(0,t)||this.deferred.push(t);else if(t instanceof c)f.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof u)){if(t instanceof r)for(var e=0;e<this.deferred.length;)p(0,this.deferred[e])?this.deferred.splice(e,1):++e;for(var s=0;s<t.nestedArray.length;++s)this._handleAdd(t._nestedArray[s]);f.test(t.name)&&(t.parent[t.name]=t)}},l.prototype._handleRemove=function(t){if(t instanceof a){if(void 0!==t.extend)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var e=this.deferred.indexOf(t);e>-1&&this.deferred.splice(e,1)}}else if(t instanceof c)f.test(t.name)&&delete t.parent[t.name];else if(t instanceof n){for(var s=0;s<t.nestedArray.length;++s)this._handleRemove(t._nestedArray[s]);f.test(t.name)&&delete t.parent[t.name]}},l._configure=function(t,e,s){r=t,i=e,o=s}},284:t=>{"use strict";t.exports={}},3290:(t,e,s)=>{"use strict";e.Service=s(979)},979:(t,e,s)=>{"use strict";t.exports=r;var n=s(4155);function r(t,e,s){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(s)}(r.prototype=Object.create(n.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function t(e,s,r,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(t,a,e,s,r,i);if(a.rpcImpl)try{return a.rpcImpl(e,s[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(t,s){if(t)return a.emit("error",t,e),o(t);if(null!==s){if(!(s instanceof r))try{s=r[a.responseDelimited?"decodeDelimited":"decode"](s)}catch(t){return a.emit("error",t,e),o(t)}return a.emit("data",s,e),o(null,s)}a.end(!0)}))}catch(t){return a.emit("error",t,e),void setTimeout((function(){o(t)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},r.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},877:(t,e,s)=>{"use strict";t.exports=a;var n=s(512);((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var r=s(4935),i=s(7572),o=s(3290);function a(t,e){n.call(this,t,e),this.methods={},this._methodsArray=null}function c(t){return t._methodsArray=null,t}a.fromJSON=function(t,e){var s=new a(t,e.options);if(e.methods)for(var n=Object.keys(e.methods),i=0;i<n.length;++i)s.add(r.fromJSON(n[i],e.methods[n[i]]));return e.nested&&s.addJSON(e.nested),s.comment=e.comment,s},a.prototype.toJSON=function(t){var e=n.prototype.toJSON.call(this,t),s=!!t&&Boolean(t.keepComments);return i.toObject(["options",e&&e.options||void 0,"methods",n.arrayToJSON(this.methodsArray,t)||{},"nested",e&&e.nested||void 0,"comment",s?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),a.prototype.get=function(t){return this.methods[t]||n.prototype.get.call(this,t)},a.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof r?(this.methods[t.name]=t,t.parent=this,c(this)):n.prototype.add.call(this,t)},a.prototype.remove=function(t){if(t instanceof r){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,c(this)}return n.prototype.remove.call(this,t)},a.prototype.create=function(t,e,s){for(var n,r=new o.Service(t,e,s),a=0;a<this.methodsArray.length;++a){var c=i.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");r[c]=i.codegen(["r","c"],i.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return r}},4560:(t,e,s)=>{"use strict";t.exports=g;var n=s(512);((g.prototype=Object.create(n.prototype)).constructor=g).className="Type";var r=s(4937),i=s(3044),o=s(5891),a=s(8911),c=s(877),u=s(4777),d=s(9867),l=s(2944),h=s(7572),f=s(6382),p=s(4799),m=s(8600),y=s(6274),_=s(3375);function g(t,e){n.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function v(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(g.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var s=this.fields[t[e]],n=s.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=s}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=g.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof u||((t.prototype=new u).constructor=t,h.merge(t.prototype,e)),t.$type=t.prototype.$type=this,h.merge(t,u,!0),this._ctor=t;for(var s=0;s<this.fieldsArray.length;++s)this._fieldsArray[s].resolve();var n={};for(s=0;s<this.oneofsArray.length;++s)n[this._oneofsArray[s].resolve().name]={get:h.oneOfGetter(this._oneofsArray[s].oneof),set:h.oneOfSetter(this._oneofsArray[s].oneof)};s&&Object.defineProperties(t.prototype,n)}}}),g.generateConstructor=function(t){for(var e,s=h.codegen(["p"],t.name),n=0;n<t.fieldsArray.length;++n)(e=t._fieldsArray[n]).map?s("this%s={}",h.safeProp(e.name)):e.repeated&&s("this%s=[]",h.safeProp(e.name));return s("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},g.fromJSON=function(t,e){var s=new g(t,e.options);s.extensions=e.extensions,s.reserved=e.reserved;for(var u=Object.keys(e.fields),d=0;d<u.length;++d)s.add((void 0!==e.fields[u[d]].keyType?a.fromJSON:o.fromJSON)(u[d],e.fields[u[d]]));if(e.oneofs)for(u=Object.keys(e.oneofs),d=0;d<u.length;++d)s.add(i.fromJSON(u[d],e.oneofs[u[d]]));if(e.nested)for(u=Object.keys(e.nested),d=0;d<u.length;++d){var l=e.nested[u[d]];s.add((void 0!==l.id?o.fromJSON:void 0!==l.fields?g.fromJSON:void 0!==l.values?r.fromJSON:void 0!==l.methods?c.fromJSON:n.fromJSON)(u[d],l))}return e.extensions&&e.extensions.length&&(s.extensions=e.extensions),e.reserved&&e.reserved.length&&(s.reserved=e.reserved),e.group&&(s.group=!0),e.comment&&(s.comment=e.comment),s},g.prototype.toJSON=function(t){var e=n.prototype.toJSON.call(this,t),s=!!t&&Boolean(t.keepComments);return h.toObject(["options",e&&e.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,t),"fields",n.arrayToJSON(this.fieldsArray.filter((function(t){return!t.declaringField})),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",e&&e.nested||void 0,"comment",s?this.comment:void 0])},g.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();var s=this.oneofsArray;for(e=0;e<s.length;)s[e++].resolve();return n.prototype.resolveAll.call(this)},g.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},g.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof o&&void 0===t.extend){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),v(this)}return t instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),v(this)):n.prototype.add.call(this,t)},g.prototype.remove=function(t){if(t instanceof o&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),v(this)}if(t instanceof i){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),v(this)}return n.prototype.remove.call(this,t)},g.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},g.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)},g.prototype.create=function(t){return new this.ctor(t)},g.prototype.setup=function(){for(var t=this.fullName,e=[],s=0;s<this.fieldsArray.length;++s)e.push(this._fieldsArray[s].resolve().resolvedType);this.encode=f(this)({Writer:l,types:e,util:h}),this.decode=p(this)({Reader:d,types:e,util:h}),this.verify=m(this)({types:e,util:h}),this.fromObject=y.fromObject(this)({types:e,util:h}),this.toObject=y.toObject(this)({types:e,util:h});var n=_[t];if(n){var r=Object.create(this);r.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(r),r.toObject=this.toObject,this.toObject=n.toObject.bind(r)}return this},g.prototype.encode=function(t,e){return this.setup().encode(t,e)},g.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()},g.prototype.decode=function(t,e){return this.setup().decode(t,e)},g.prototype.decodeDelimited=function(t){return t instanceof d||(t=d.create(t)),this.decode(t,t.uint32())},g.prototype.verify=function(t){return this.setup().verify(t)},g.prototype.fromObject=function(t){return this.setup().fromObject(t)},g.prototype.toObject=function(t,e){return this.setup().toObject(t,e)},g.d=function(t){return function(e){h.decorateType(e,t)}}},8997:(t,e,s)=>{"use strict";var n=e,r=s(7572),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(t,e){var s=0,n={};for(e|=0;s<t.length;)n[i[s+e]]=t[s++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",r.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},7572:(t,e,s)=>{"use strict";var n,r,i=t.exports=s(4155),o=s(284);i.codegen=s(6348),i.fetch=s(7803),i.path=s(1272),i.fs=i.inquire("fs"),i.toArray=function(t){if(t){for(var e=Object.keys(t),s=new Array(e.length),n=0;n<e.length;)s[n]=t[e[n++]];return s}return[]},i.toObject=function(t){for(var e={},s=0;s<t.length;){var n=t[s++],r=t[s++];void 0!==r&&(e[n]=r)}return e};var a=/\\/g,c=/"/g;i.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},i.safeProp=function(t){return!/^[$\w_]+$/.test(t)||i.isReserved(t)?'["'+t.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+t},i.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var u=/_([a-z])/g;i.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(u,(function(t,e){return e.toUpperCase()}))},i.compareFieldsById=function(t,e){return t.id-e.id},i.decorateType=function(t,e){if(t.$type)return e&&t.$type.name!==e&&(i.decorateRoot.remove(t.$type),t.$type.name=e,i.decorateRoot.add(t.$type)),t.$type;n||(n=s(4560));var r=new n(e||t.name);return i.decorateRoot.add(r),r.ctor=t,Object.defineProperty(t,"$type",{value:r,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:r,enumerable:!1}),r};var d=0;i.decorateEnum=function(t){if(t.$type)return t.$type;r||(r=s(4937));var e=new r("Enum"+d++,t);return i.decorateRoot.add(e),Object.defineProperty(t,"$type",{value:e,enumerable:!1}),e},i.setProperty=function(t,e,s){if("object"!=typeof t)throw TypeError("dst must be an object");if(!e)throw TypeError("path must be specified");return function t(e,s,n){var r=s.shift();if(s.length>0)e[r]=t(e[r]||{},s,n);else{var i=e[r];i&&(n=[].concat(i).concat(n)),e[r]=n}return e}(t,e=e.split("."),s)},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(s(2613)))}})},8950:(t,e,s)=>{"use strict";t.exports=r;var n=s(4155);function r(t,e){this.lo=t>>>0,this.hi=e>>>0}var i=r.zero=new r(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(t){if(0===t)return i;var e=t<0;e&&(t=-t);var s=t>>>0,n=(t-s)/4294967296>>>0;return e&&(n=~n>>>0,s=~s>>>0,++s>4294967295&&(s=0,++n>4294967295&&(n=0))),new r(s,n)},r.from=function(t){if("number"==typeof t)return r.fromNumber(t);if(n.isString(t)){if(!n.Long)return r.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new r(t.low>>>0,t.high>>>0):i},r.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,s=~this.hi>>>0;return e||(s=s+1>>>0),-(e+4294967296*s)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;r.fromHash=function(t){return t===o?i:new r((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},r.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},r.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return 0===s?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:s<128?9:10}},4155:function(t,e,s){"use strict";var n=e;function r(t,e,s){for(var n=Object.keys(e),r=0;r<n.length;++r)void 0!==t[n[r]]&&s||(t[n[r]]=e[n[r]]);return t}function i(t){function e(t,s){if(!(this instanceof e))return new e(t,s);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),s&&r(this,s)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}n.asPromise=s(537),n.base64=s(9745),n.EventEmitter=s(4459),n.float=s(897),n.inquire=s(3229),n.utf8=s(113),n.pool=s(7986),n.LongBits=s(8950),n.isNode=Boolean(void 0!==s.g&&s.g&&s.g.process&&s.g.process.versions&&s.g.process.versions.node),n.global=n.isNode&&s.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,e){var s=t[e];return!(null==s||!t.hasOwnProperty(e))&&("object"!=typeof s||(Array.isArray(s)?s.length:Object.keys(s).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var s=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(s.lo,s.hi,e):s.toNumber(Boolean(e))},n.merge=r,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(t){for(var e={},s=0;s<t.length;++s)e[t[s]]=1;return function(){for(var t=Object.keys(this),s=t.length-1;s>-1;--s)if(1===e[t[s]]&&void 0!==this[t[s]]&&null!==this[t[s]])return t[s]}},n.oneOfSetter=function(t){return function(e){for(var s=0;s<t.length;++s)t[s]!==e&&delete this[t[s]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,s){return new t(e,s)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},8600:(t,e,s)=>{"use strict";t.exports=function(t){var e=r.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),s=t.oneofsArray,n={};s.length&&e("var p={}");for(var c=0;c<t.fieldsArray.length;++c){var u=t._fieldsArray[c].resolve(),d="m"+r.safeProp(u.name);if(u.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",d,u.name),u.map)e("if(!util.isObject(%s))",d)("return%j",i(u,"object"))("var k=Object.keys(%s)",d)("for(var i=0;i<k.length;++i){"),a(e,u,"k[i]"),o(e,u,c,d+"[k[i]]")("}");else if(u.repeated)e("if(!Array.isArray(%s))",d)("return%j",i(u,"array"))("for(var i=0;i<%s.length;++i){",d),o(e,u,c,d+"[i]")("}");else{if(u.partOf){var l=r.safeProp(u.partOf.name);1===n[u.partOf.name]&&e("if(p%s===1)",l)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,e("p%s=1",l)}o(e,u,c,d)}u.optional&&e("}")}return e("return null")};var n=s(4937),r=s(7572);function i(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected"}function o(t,e,s,r){if(e.resolvedType)if(e.resolvedType instanceof n){t("switch(%s){",r)("default:")("return%j",i(e,"enum value"));for(var o=Object.keys(e.resolvedType.values),a=0;a<o.length;++a)t("case %i:",e.resolvedType.values[o[a]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",s,r)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",r)("return%j",i(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",i(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',r)("return%j",i(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',r)("return%j",i(e,"boolean"));break;case"string":t("if(!util.isString(%s))",r)("return%j",i(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",i(e,"buffer"))}return t}function a(t,e,s){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",s)("return%j",i(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",s)("return%j",i(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",s)("return%j",i(e,"boolean key"))}return t}},3375:(t,e,s)=>{"use strict";var n=e,r=s(4777);n[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),s=this.lookup(e);if(s){var n="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:s.encode(s.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var s="",n="";if(e&&e.json&&t.type_url&&t.value){n=t.type_url.substring(t.type_url.lastIndexOf("/")+1),s=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var i=this.lookup(n);i&&(t=i.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof r){var o=t.$type.toObject(t,e);return""===s&&(s="type.googleapis.com/"),n=s+("."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName),o["@type"]=n,o}return this.toObject(t,e)}}},2944:(t,e,s)=>{"use strict";t.exports=l;var n,r=s(4155),i=r.LongBits,o=r.base64,a=r.utf8;function c(t,e,s){this.fn=t,this.len=e,this.next=void 0,this.val=s}function u(){}function d(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return r.Buffer?function(){return(l.create=function(){return new n})()}:function(){return new l}};function f(t,e,s){e[s]=255&t}function p(t,e){this.len=t,this.next=void 0,this.val=e}function m(t,e,s){for(;t.hi;)e[s++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[s++]=127&t.lo|128,t.lo=t.lo>>>7;e[s++]=t.lo}function y(t,e,s){e[s]=255&t,e[s+1]=t>>>8&255,e[s+2]=t>>>16&255,e[s+3]=t>>>24}l.create=h(),l.alloc=function(t){return new r.Array(t)},r.Array!==Array&&(l.alloc=r.pool(l.alloc,r.Array.prototype.subarray)),l.prototype._push=function(t,e,s){return this.tail=this.tail.next=new c(t,e,s),this.len+=e,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(t,e,s){for(;t>127;)e[s++]=127&t|128,t>>>=7;e[s]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new p((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this._push(m,10,i.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.uint64=function(t){var e=i.from(t);return this._push(m,e.length(),e)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(t){var e=i.from(t).zzEncode();return this._push(m,e.length(),e)},l.prototype.bool=function(t){return this._push(f,1,t?1:0)},l.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(t){var e=i.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(t){return this._push(r.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this._push(r.float.writeDoubleLE,8,t)};var _=r.Array.prototype.set?function(t,e,s){e.set(t,s)}:function(t,e,s){for(var n=0;n<t.length;++n)e[s+n]=t[n]};l.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(r.isString(t)){var s=l.alloc(e=o.length(t));o.decode(t,s,0),t=s}return this.uint32(e)._push(_,e,t)},l.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},l.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(u,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,e=this.tail,s=this.len;return this.reset().uint32(s),s&&(this.tail.next=t.next,this.tail=e,this.len+=s),this},l.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),s=0;t;)t.fn(t.val,e,s),s+=t.len,t=t.next;return e},l._configure=function(t){n=t,l.create=h(),n._configure()}},2178:(t,e,s)=>{"use strict";t.exports=i;var n=s(2944);(i.prototype=Object.create(n.prototype)).constructor=i;var r=s(4155);function i(){n.call(this)}function o(t,e,s){t.length<40?r.utf8.write(t,e,s):e.utf8Write?e.utf8Write(t,s):e.write(t,s)}i._configure=function(){i.alloc=r._Buffer_allocUnsafe,i.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(t,e,s){e.set(t,s)}:function(t,e,s){if(t.copy)t.copy(e,s,0,t.length);else for(var n=0;n<t.length;)e[s++]=t[n++]}},i.prototype.bytes=function(t){r.isString(t)&&(t=r._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(i.writeBytesBuffer,e,t),this},i.prototype.string=function(t){var e=r.Buffer.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this},i._configure()},1829:(t,e)=>{"use strict";var s=Object.prototype.hasOwnProperty;function n(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function r(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){e=e||"";var n,i,o=[];for(i in"string"!=typeof e&&(e="?"),t)if(s.call(t,i)){if((n=t[i])||null!=n&&!isNaN(n)||(n=""),i=r(i),n=r(n),null===i||null===n)continue;o.push(i+"="+n)}return o.length?e+o.join("&"):""},e.parse=function(t){for(var e,s=/([^=?#&]+)=?([^&]*)/g,r={};e=s.exec(t);){var i=n(e[1]),o=n(e[2]);null===i||null===o||i in r||(r[i]=o)}return r}},3722:t=>{"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},7594:(t,e,s)=>{"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var t={};return function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}t[e]=s}return t[e]}}(),o=[];function a(t){for(var e=-1,s=0;s<o.length;s++)if(o[s].identifier===t){e=s;break}return e}function c(t,e){for(var s={},n=[],r=0;r<t.length;r++){var i=t[r],c=e.base?i[0]+e.base:i[0],u=s[c]||0,d="".concat(c," ").concat(u);s[c]=u+1;var l=a(d),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==l?(o[l].references++,o[l].updater(h)):o.push({identifier:d,updater:y(h,e),references:1}),n.push(d)}return n}function u(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var r=s.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var o=i(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var d,l=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function h(t,e,s,n){var r=s?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=l(e,r);else{var i=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}function f(t,e,s){var n=s.css,r=s.media,i=s.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var p=null,m=0;function y(t,e){var s,n,r;if(e.singleton){var i=m++;s=p||(p=u(e)),n=h.bind(null,s,i,!1),r=h.bind(null,s,i,!0)}else s=u(e),n=f.bind(null,s,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(s)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var s=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<s.length;n++){var r=a(s[n]);o[r].references--}for(var i=c(t,e),u=0;u<s.length;u++){var d=a(s[u]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}s=i}}}},9655:(t,e,s)=>{"use strict";var n=s(3722),r=s(1829),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function l(t){return(t||"").toString().replace(i,"")}var h=[["#","hash"],["?","query"],function(t,e){return m(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function p(t){var e,n=("undefined"!=typeof window?window:void 0!==s.g?s.g:"undefined"!=typeof self?self:{}).location||{},r={},i=typeof(t=t||n);if("blob:"===t.protocol)r=new _(unescape(t.pathname),{});else if("string"===i)for(e in r=new _(t,{}),f)delete r[e];else if("object"===i){for(e in t)e in f||(r[e]=t[e]);void 0===r.slashes&&(r.slashes=a.test(t.href))}return r}function m(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function y(t,e){t=(t=l(t)).replace(o,""),e=e||{};var s,n=u.exec(t),r=n[1]?n[1].toLowerCase():"",i=!!n[2],a=!!n[3],c=0;return i?a?(s=n[2]+n[3]+n[4],c=n[2].length+n[3].length):(s=n[2]+n[4],c=n[2].length):a?(s=n[3]+n[4],c=n[3].length):s=n[4],"file:"===r?c>=2&&(s=s.slice(2)):m(r)?s=n[4]:r?i&&(s=s.slice(2)):c>=2&&m(e.protocol)&&(s=n[4]),{protocol:r,slashes:i||m(r),slashesCount:c,rest:s}}function _(t,e,s){if(t=(t=l(t)).replace(o,""),!(this instanceof _))return new _(t,e,s);var i,a,c,u,f,g,v=h.slice(),x=typeof e,b=this,w=0;for("object"!==x&&"string"!==x&&(s=e,e=null),s&&"function"!=typeof s&&(s=r.parse),i=!(a=y(t||"",e=p(e))).protocol&&!a.slashes,b.slashes=a.slashes||i&&e.slashes,b.protocol=a.protocol||e.protocol||"",t=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||d.test(t))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(b.protocol)))&&(v[3]=[/(.*)/,"pathname"]);w<v.length;w++)"function"!=typeof(u=v[w])?(c=u[0],g=u[1],c!=c?b[g]=t:"string"==typeof c?~(f="@"===c?t.lastIndexOf(c):t.indexOf(c))&&("number"==typeof u[2]?(b[g]=t.slice(0,f),t=t.slice(f+u[2])):(b[g]=t.slice(f),t=t.slice(0,f))):(f=c.exec(t))&&(b[g]=f[1],t=t.slice(0,f.index)),b[g]=b[g]||i&&u[3]&&e[g]||"",u[4]&&(b[g]=b[g].toLowerCase())):t=u(t,b);s&&(b.query=s(b.query)),i&&e.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==e.pathname)&&(b.pathname=function(t,e){if(""===t)return e;for(var s=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=s.length,r=s[n-1],i=!1,o=0;n--;)"."===s[n]?s.splice(n,1):".."===s[n]?(s.splice(n,1),o++):o&&(0===n&&(i=!0),s.splice(n,1),o--);return i&&s.unshift(""),"."!==r&&".."!==r||s.push(""),s.join("/")}(b.pathname,e.pathname)),"/"!==b.pathname.charAt(0)&&m(b.protocol)&&(b.pathname="/"+b.pathname),n(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(f=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,f),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(f+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&m(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}_.prototype={set:function(t,e,s){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(s||r.parse)(e)),i[t]=e;break;case"port":i[t]=e,n(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,c.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!s;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";i[t]=e.charAt(0)!==o?o+e:e}else i[t]=e;break;case"username":case"password":i[t]=encodeURIComponent(e);break;case"auth":var a=e.indexOf(":");~a?(i.username=e.slice(0,a),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=e.slice(a+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(e))}for(var u=0;u<h.length;u++){var d=h[u];d[4]&&(i[d[1]]=i[d[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&m(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=r.stringify);var e,s=this,n=s.host,i=s.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var o=i+(s.protocol&&s.slashes||m(s.protocol)?"//":"");return s.username?(o+=s.username,s.password&&(o+=":"+s.password),o+="@"):s.password?(o+=":"+s.password,o+="@"):"file:"!==s.protocol&&m(s.protocol)&&!n&&"/"!==s.pathname&&(o+="@"),(":"===n[n.length-1]||c.test(s.hostname)&&!s.port)&&(n+=":"),o+=n+s.pathname,(e="object"==typeof s.query?t(s.query):s.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),s.hash&&(o+=s.hash),o}},_.extractProtocol=y,_.location=p,_.trimLeft=l,_.qs=r,t.exports=_},9347:t=>{"use strict";var e,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),n={},r=0,i=0;function o(t){var e="";do{e=s[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function a(){var t=o(+new Date);return t!==e?(r=0,e=t):t+"."+o(r++)}for(;i<64;i++)n[s[i]]=i;a.encode=o,a.decode=function(t){var e=0;for(i=0;i<t.length;i++)e=64*e+n[t.charAt(i)];return e},t.exports=a},2417:(t,e,s)=>{t.exports=s(7720)("./src/collaboration-core.js")},2704:(t,e,s)=>{t.exports=s(7079)("./src/core.js")},1492:(t,e,s)=>{t.exports=s(7079)("./src/engine.js")},9273:(t,e,s)=>{t.exports=s(7079)("./src/ui.js")},2209:(t,e,s)=>{t.exports=s(7079)("./src/utils.js")},7720:t=>{"use strict";t.exports=CKEditor5.collaborationDll},7079:t=>{"use strict";t.exports=CKEditor5.dll},66:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},5769:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.installTimerFunctions=e.transports=e.Transport=e.protocol=e.Socket=void 0;const n=s(1187);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return n.Socket}}),e.protocol=n.Socket.protocol;var r=s(4291);Object.defineProperty(e,"Transport",{enumerable:!0,get:function(){return r.Transport}});var i=s(6449);Object.defineProperty(e,"transports",{enumerable:!0,get:function(){return i.transports}});var o=s(102);Object.defineProperty(e,"installTimerFunctions",{enumerable:!0,get:function(){return o.installTimerFunctions}})},1187:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const r=s(6449),i=s(102),o=n(s(9827)),a=n(s(5977)),c=n(s(5579)),u=s(3717),d=s(4755),l=(0,c.default)("engine.io-client:socket");class h extends u.Emitter{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=(0,a.default)(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=(0,a.default)(e.host).host),(0,i.installTimerFunctions)(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=o.default.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){l('creating transport "%s"',t);const e=function(t){const e={};for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}(this.opts.query);e.EIO=d.protocol,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return l("options: %j",s),new r.transports[t](s)}open(){let t;if(this.opts.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return l("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){l("setting transport %s",t.name),this.transport&&(l("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(t){l('probing transport "%s"',t);let e=this.createTransport(t),s=!1;h.priorWebsocketSuccess=!1;const n=()=>{s||(l('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(n=>{if(!s)if("pong"===n.type&&"probe"===n.data){if(l('probe transport "%s" pong',t),this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;h.priorWebsocketSuccess="websocket"===e.name,l('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{s||"closed"!==this.readyState&&(l("changing transport and sending upgrade packet"),u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{l('probe transport "%s" failed',t);const s=new Error("probe error");s.transport=e.name,this.emitReserved("upgradeError",s)}})))};function r(){s||(s=!0,u(),e.close(),e=null)}const i=s=>{const n=new Error("probe error: "+s);n.transport=e.name,r(),l('probe transport "%s" failed because of error: %s',t,s),this.emitReserved("upgradeError",n)};function o(){i("transport closed")}function a(){i("socket closed")}function c(t){e&&t.name!==e.name&&(l('"%s" works - aborting "%s"',t.name,e.name),r())}const u=()=>{e.removeListener("open",n),e.removeListener("error",i),e.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};e.once("open",n),e.once("error",i),e.once("close",o),this.once("close",a),this.once("upgrading",c),e.open()}onOpen(){if(l("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){l("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(l('socket receive: type "%s", data "%s"',t.type,t.data),this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}else l('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(l("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(t,e,s){return this.sendPacket("message",t,e,s),this}send(t,e,s){return this.sendPacket("message",t,e,s),this}sendPacket(t,e,s,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof s&&(n=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const r={type:t,data:e,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this.onClose("forced close"),l("socket closing - telling transport to close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?s():t()})):this.upgrading?s():t()),this}onError(t){l("socket error %j",t),h.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(l('socket close with reason: "%s"',t),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let s=0;const n=t.length;for(;s<n;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}}e.Socket=h,h.protocol=d.protocol},4291:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Transport=void 0;const r=s(4755),i=s(3717),o=s(102),a=(0,n(s(5579)).default)("engine.io-client:transport");class c extends i.Emitter{constructor(t){super(),this.writable=!1,(0,o.installTimerFunctions)(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const s=new Error(t);return s.type="TransportError",s.description=e,super.emit("error",s),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState?this.write(t):a("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(t){const e=(0,r.decodePacket)(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emit("packet",t)}onClose(){this.readyState="closed",super.emit("close")}}e.Transport=c},6449:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transports=void 0;const n=s(9814),r=s(4199);e.transports={websocket:r.WS,polling:n.XHR}},9814:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Request=e.XHR=void 0;const r=n(s(4582)),i=n(s(5579)),o=n(s(66)),a=s(102),c=s(3717),u=s(3737),d=(0,i.default)("engine.io-client:polling-xhr");function l(){}const h=null!=new r.default({xdomain:!1}).responseType;class f extends u.Polling{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let s=location.port;s||(s=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||s!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=h&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new p(this.uri(),t)}doWrite(t,e){const s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",(t=>{this.onError("xhr post error",t)}))}doPoll(){d("xhr poll");const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t=>{this.onError("xhr poll error",t)})),this.pollXhr=t}}e.XHR=f;class p extends c.Emitter{constructor(t,e){super(),(0,a.installTimerFunctions)(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=(0,a.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new r.default(t);try{d("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},d("xhr data %s",this.data),e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=l,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}abort(){this.cleanup()}}if(e.Request=p,p.requestsCount=0,p.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",m);else if("function"==typeof addEventListener){const t="onpagehide"in o.default?"pagehide":"unload";addEventListener(t,m,!1)}function m(){for(let t in p.requests)p.requests.hasOwnProperty(t)&&p.requests[t].abort()}},3737:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Polling=void 0;const r=s(4291),i=n(s(5579)),o=n(s(9347)),a=n(s(9827)),c=s(4755),u=(0,i.default)("engine.io-client:polling");class d extends r.Transport{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{u("paused"),this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(u("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){u("pre-pause polling complete"),--t||e()}))),this.writable||(u("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){u("pre-pause writing complete"),--t||e()})))}else e()}poll(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){u("polling got data %s",t);(0,c.decodePayload)(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose(),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=()=>{u("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,(0,c.encodePayload)(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let s="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.default)()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(s=":"+this.opts.port);const n=a.default.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}}e.Polling=d},9233:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultBinaryType=e.usingBrowserWebSocket=e.WebSocket=e.nextTick=void 0;const r=n(s(66));e.nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),e.WebSocket=r.default.WebSocket||r.default.MozWebSocket,e.usingBrowserWebSocket=!0,e.defaultBinaryType="arraybuffer"},4199:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WS=void 0;const r=s(4291),i=n(s(9827)),o=n(s(9347)),a=s(102),c=s(9233),u=n(s(5579)),d=s(4755),l=(0,u.default)("engine.io-client:websocket"),h="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class f extends r.Transport{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,s=h?{}:(0,a.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=c.usingBrowserWebSocket&&!h?e?new c.WebSocket(t,e):new c.WebSocket(t):new c.WebSocket(t,e,s)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||c.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],n=e===t.length-1;(0,d.encodePacket)(s,this.supportsBinary,(t=>{const e={};if(!c.usingBrowserWebSocket&&(s.options&&(e.compress=s.options.compress),this.opts.perMessageDeflate)){("string"==typeof t?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(e.compress=!1)}try{c.usingBrowserWebSocket?this.ws.send(t):this.ws.send(t,e)}catch(t){l("websocket closed before onclose event")}n&&(0,c.nextTick)((()=>{this.writable=!0,this.emit("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let s="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(s=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.default)()),this.supportsBinary||(t.b64=1);const n=i.default.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}check(){return!(!c.WebSocket||"__initialize"in c.WebSocket&&this.name===f.prototype.name)}}e.WS=f},4582:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s(4568)),i=n(s(66));e.default=function(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r.default))return new XMLHttpRequest}catch(t){}if(!e)try{return new(i.default[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},102:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.installTimerFunctions=e.pick=void 0;const r=n(s(66));e.pick=function(t,...e){return e.reduce(((e,s)=>(t.hasOwnProperty(s)&&(e[s]=t[s]),e)),{})};const i=setTimeout,o=clearTimeout;e.installTimerFunctions=function(t,e){e.useNativeTimers?(t.setTimeoutFn=i.bind(r.default),t.clearTimeoutFn=o.bind(r.default)):(t.setTimeoutFn=setTimeout.bind(r.default),t.clearTimeoutFn=clearTimeout.bind(r.default))}},9782:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_PACKET=e.PACKET_TYPES_REVERSE=e.PACKET_TYPES=void 0;const s=Object.create(null);e.PACKET_TYPES=s,s.open="0",s.close="1",s.ping="2",s.pong="3",s.message="4",s.upgrade="5",s.noop="6";const n=Object.create(null);e.PACKET_TYPES_REVERSE=n,Object.keys(s).forEach((t=>{n[s[t]]=t}));e.ERROR_PACKET={type:"error",data:"parser error"}},3108:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=s(9782),r=s(7227),i="function"==typeof ArrayBuffer,o=(t,e)=>{if(i){const s=(0,r.decode)(t);return a(s,e)}return{base64:!0,data:t}},a=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t;e.default=(t,e)=>{if("string"!=typeof t)return{type:"message",data:a(t,e)};const s=t.charAt(0);if("b"===s)return{type:"message",data:o(t.substring(1),e)};return n.PACKET_TYPES_REVERSE[s]?t.length>1?{type:n.PACKET_TYPES_REVERSE[s],data:t.substring(1)}:{type:n.PACKET_TYPES_REVERSE[s]}:n.ERROR_PACKET}},4895:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=s(9782),r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),i="function"==typeof ArrayBuffer,o=(t,e)=>{const s=new FileReader;return s.onload=function(){const t=s.result.split(",")[1];e("b"+t)},s.readAsDataURL(t)};e.default=({type:t,data:e},s,a)=>{return r&&e instanceof Blob?s?a(e):o(e,a):i&&(e instanceof ArrayBuffer||(c=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer))?s?a(e):o(new Blob([e]),a):a(n.PACKET_TYPES[t]+(e||""));var c}},4755:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodePayload=e.decodePacket=e.encodePayload=e.encodePacket=e.protocol=void 0;const n=s(4895);e.encodePacket=n.default;const r=s(3108);e.decodePacket=r.default;const i=String.fromCharCode(30);e.encodePayload=(t,e)=>{const s=t.length,r=new Array(s);let o=0;t.forEach(((t,a)=>{(0,n.default)(t,!1,(t=>{r[a]=t,++o===s&&e(r.join(i))}))}))};e.decodePayload=(t,e)=>{const s=t.split(i),n=[];for(let t=0;t<s.length;t++){const i=(0,r.default)(s[t],e);if(n.push(i),"error"===i.type)break}return n},e.protocol=4},8623:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;const r=s(4197),i=s(3288);Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return i.Manager}});const o=s(3232);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=n(s(5579)).default("socket.io-client"),c={};function u(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};const s=r.url(t,e.path||"/socket.io"),n=s.source,o=s.id,u=s.path,d=c[o]&&u in c[o].nsps;let l;return e.forceNew||e["force new connection"]||!1===e.multiplex||d?(a("ignoring socket cache for %s",n),l=new i.Manager(n,e)):(c[o]||(a("new io instance for %s",n),c[o]=new i.Manager(n,e)),l=c[o]),s.query&&!e.query&&(e.query=s.queryKey),l.socket(s.path,e)}e.io=u,e.connect=u,e.default=u,Object.assign(u,{Manager:i.Manager,Socket:o.Socket,io:u,connect:u});var d=s(170);Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return d.protocol}}),t.exports=u},3288:function(t,e,s){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,s,n){void 0===n&&(n=s),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,n){void 0===n&&(n=s),t[n]=e[s]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&n(e,t,s);return r(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const a=s(5769),c=s(3232),u=i(s(170)),d=s(6263),l=o(s(7672)),h=s(3717),f=o(s(5579)).default("socket.io-client:manager");class p extends h.Emitter{constructor(t,e){var s;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,a.installTimerFunctions(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=e.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new l.default({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const n=e.parser||u;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(f("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=new a.Socket(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const n=d.on(e,"open",(function(){s.onopen(),t&&t()})),r=d.on(e,"error",(e=>{f("error"),s.cleanup(),s._readyState="closed",this.emitReserved("error",e),t?t(e):s.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;f("connect attempt will timeout after %d",t),0===t&&n();const s=this.setTimeoutFn((()=>{f("connect attempt timed out after %d",t),n(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(n),this.subs.push(r),this}connect(t){return this.open(t)}onopen(){f("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(d.on(t,"ping",this.onping.bind(this)),d.on(t,"data",this.ondata.bind(this)),d.on(t,"error",this.onerror.bind(this)),d.on(t,"close",this.onclose.bind(this)),d.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){f("error",t),this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s||(s=new c.Socket(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return void f("socket %s is still active, skipping close",t)}this._close()}_packet(t){f("writing packet %j",t);const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){f("cleanup"),this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){f("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){f("closed due to %s",t),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();f("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const s=this.setTimeoutFn((()=>{t.skipReconnect||(f("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(f("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):(f("reconnect success"),t.onreconnect())})))}),e);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}e.Manager=p},6263:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,s){return t.on(e,s),function(){t.off(e,s)}}},3232:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const r=s(170),i=s(6263),o=s(3717),a=n(s(5579)).default("socket.io-client:socket"),c=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class u extends o.Emitter{constructor(t,e,s){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[i.on(t,"open",this.onopen.bind(this)),i.on(t,"packet",this.onpacket.bind(this)),i.on(t,"error",this.onerror.bind(this)),i.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(c.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const s={type:r.PacketType.EVENT,data:e,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++;a("emitting packet with ack id %d",t);const n=e.pop();this._registerAckCallback(t,n),s.id=t}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)?a("discard packet as the transport is not currently writable"):this.connected?this.packet(s):this.sendBuffer.push(s),this.flags={},this}_registerAckCallback(t,e){const s=this.flags.timeout;if(void 0===s)return void(this.acks[t]=e);const n=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&(a("removing packet with ack id %d from the buffer",t),this.sendBuffer.splice(e,1));a("event with ack id %d has timed out after %d ms",t,s),e.call(this,new Error("operation has timed out"))}),s);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(n),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth((t=>{this.packet({type:r.PacketType.CONNECT,data:t})})):this.packet({type:r.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){a("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case r.PacketType.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case r.PacketType.EVENT:case r.PacketType.BINARY_EVENT:this.onevent(t);break;case r.PacketType.ACK:case r.PacketType.BINARY_ACK:this.onack(t);break;case r.PacketType.DISCONNECT:this.ondisconnect();break;case r.PacketType.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];a("emitting event %j",e),null!=t.id&&(a("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let s=!1;return function(...n){s||(s=!0,a("sending ack %j",n),e.packet({type:r.PacketType.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(a("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):a("bad ack %s",t.id)}onconnect(t){a("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>this.packet(t))),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:r.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}e.Socket=u},4197:function(t,e,s){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const r=n(s(5977)),i=n(s(5579)).default("socket.io-client:url");e.url=function(t,e="",s){let n=t;s=s||"undefined"!=typeof location&&location,null==t&&(t=s.protocol+"//"+s.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?s.protocol+t:s.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==s?s.protocol+"//"+t:"https://"+t),i("parse %s",t),n=r.default(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+e,n.href=n.protocol+"://"+o+(s&&s.port===n.port?"":":"+n.port),n}},2830:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;const n=s(3980);function r(t,e){if(!t)return t;if(n.isBinary(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}if(Array.isArray(t)){const s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=r(t[n],e);return s}if("object"==typeof t&&!(t instanceof Date)){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=r(t[n],e));return s}return t}function i(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=i(t[s],e);else if("object"==typeof t)for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=i(t[s],e));return t}e.deconstructPacket=function(t){const e=[],s=t.data,n=t;return n.data=r(s,e),n.attachments=e.length,{packet:n,buffers:e}},e.reconstructPacket=function(t,e){return t.data=i(t.data,e),t.attachments=void 0,t}},170:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const n=s(3717),r=s(2830),i=s(3980),o=s(5579).default("socket.io-parser");var a;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(a=e.PacketType||(e.PacketType={}));e.Encoder=class{encode(t){return o("encoding packet %j",t),t.type!==a.EVENT&&t.type!==a.ACK||!i.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==a.BINARY_EVENT&&t.type!==a.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),o("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=r.deconstructPacket(t),s=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(s),n}};class c extends n.Emitter{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===a.BINARY_EVENT||e.type===a.BINARY_ACK?(this.reconstructor=new u(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!i.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(void 0===a[s.type])throw new Error("unknown packet type "+s.type);if(s.type===a.BINARY_EVENT||s.type===a.BINARY_ACK){const n=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const r=t.substring(n,e);if(r!=Number(r)||"-"!==t.charAt(e))throw new Error("Illegal attachments");s.attachments=Number(r)}if("/"===t.charAt(e+1)){const n=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}s.nsp=t.substring(n,e)}else s.nsp="/";const n=t.charAt(e+1);if(""!==n&&Number(n)==n){const n=e+1;for(;++e;){const s=t.charAt(e);if(null==s||Number(s)!=s){--e;break}if(e===t.length)break}s.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!c.isPayloadValid(s.type,n))throw new Error("invalid payload");s.data=n}return o("decoded %s as %j",t,s),s}static isPayloadValid(t,e){switch(t){case a.CONNECT:return"object"==typeof e;case a.DISCONNECT:return void 0===e;case a.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=c;class u{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},3980:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const s="function"==typeof ArrayBuffer,n=Object.prototype.toString,r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===n.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===n.call(File);function o(t){return s&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||r&&t instanceof Blob||i&&t instanceof File}e.isBinary=o,e.hasBinary=function t(e,s){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let s=0,n=e.length;s<n;s++)if(t(e[s]))return!0;return!1}if(o(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return!0;return!1}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var s=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var s in e)__webpack_require__.o(e,s)&&!__webpack_require__.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CloudServicesCommentsAdapter:()=>Ji,CloudServicesRevisionHistoryAdapter:()=>wo,CloudServicesTrackChangesAdapter:()=>zi,PresenceList:()=>ba,RealTimeCollaborativeComments:()=>Qi,RealTimeCollaborativeEditing:()=>Ii,RealTimeCollaborativeRevisionHistory:()=>Co,RealTimeCollaborativeTrackChanges:()=>ro});var t=__webpack_require__(2704),e=__webpack_require__(2209),s=__webpack_require__(1492),n=__webpack_require__(9273),r=__webpack_require__(2417),i=__webpack_require__(7158),o=__webpack_require__.n(i);const a=["showWarning","websocketgateway-invalid-plugin-interface","requires","create","constructor","real-time-collaboration","addToReconnectionStack","from","token","then","state","all","connected","websocketgateway-missing-token","cloudservices-init","disconnected","isInReconnectionStack","code","listenTo","WebSocketGateway","catch","context","add","Connected users limit exceeded","websocketgateway-plugin-already-registered","function","bind","connection","set","connecting","_isBrowserOffline","delete","init","_shouldPluginsReconnect","_reconnectionStack","_domEmitter","error","websocketgateway-missing-websocket-url","reconnect","plugins","destroy","limitExceeded","connect","webSocketUrl","_reconnect"];var c,u;c=a,u=323,function(t){for(;--t;)c.push(c.shift())}(++u);const d=function(t,e){return a[t-=0]};class l extends t.ContextPlugin{static get[d("0x27")](){return["CloudServices",n.Notification]}static get pluginName(){return d("0xb")}[d("0x18")](){const t=this[d("0xd")],s=t.plugins.get("CloudServices"),r=t[d("0x1f")].get(n.Notification);if(!s[d("0x0")])throw new e.CKEditorError(d("0x5"),this);if(!s[d("0x23")])throw new e.CKEditorError(d("0x1d"),this);return this.set(d("0x2"),d("0x15")),this[d("0x14")](d("0x16"),!1),this[d("0x1a")]=new Set,this[d("0x19")]=!1,this[d("0x1b")]=Object[d("0x28")](e.DomEmitterMixin),this[d("0x1b")][d("0xa")](window,"offline",(()=>this[d("0x16")]=!0)),this._domEmitter[d("0xa")](window,"online",(()=>this[d("0x16")]=!1)),l[d("0xb")][d("0x22")](s[d("0x0")],s[d("0x23")],{disconnectOnUnload:!1}).then((t=>{if(this[d("0x13")]=t,this[d("0x12")](d("0x2")).to(t,d("0x2"),this,d("0x16"),((t,e)=>("connected"!==t&&(this[d("0x19")]=!0),e||d("0x4")!==t?d("0x7"):d("0x7")==this[d("0x2")]&&this[d("0x19")]?(this[d("0x19")]=!1,this._reconnect(),d("0x15")):"connected"))),this[d("0x13")].on(d("0x1c"),((t,s)=>{if(d("0x21")!==s[d("0x9")])throw console[d("0x1c")](s),new e.CKEditorError("cloudservices-init",null,{originalError:s});r[d("0x25")]("The limit of maximum concurrent connections that the collaboration server can handle has been reached. Try opening the document again in a few minutes. Please contact your system administrator if the problem persists.",{title:d("0xf"),namespace:d("0x2a")})})),!t.me)return new Promise((e=>t.on("change:me",e)))}))[d("0xc")]((t=>{throw console[d("0x1c")](t),new e.CKEditorError(d("0x6"),null,{originalError:t})}))}[d("0x2b")](t){if(d("0x11")!=typeof t[d("0x1e")])throw new e.CKEditorError(d("0x26"),this);if(this.isInReconnectionStack(t))throw new e.CKEditorError(d("0x10"),this,{name:t[d("0x29")].pluginName});this[d("0x1a")][d("0xe")](t)}removeFromReconnectionStack(t){this[d("0x1a")][d("0x17")](t)}[d("0x8")](t){return this[d("0x1a")].has(t)}[d("0x24")](){return this.connection[d("0x1e")]()[d("0x1")]((()=>Promise[d("0x3")](Array[d("0x2c")](this[d("0x1a")],(t=>t[d("0x1e")]())))))[d("0x1")]((()=>this[d("0x2")]=d("0x4")))[d("0xc")]((t=>{throw console[d("0x1c")](t),new e.CKEditorError("cloudservices-reconnection-error",this.context)}))}destroy(){this.connection&&this[d("0x13")].disconnect(),this[d("0x2")]=d("0x7"),this._domEmitter.stopListening(),super[d("0x20")]()}}l.WebSocketGateway=o(),l.initialReconnectionInterval=1e3;const h=["channelSessions","sessionId","stopListening","sessions-register-already-registered","channelConnectedUsers","_handleSessionAdd","state","user","mySessionId","defineMe","set","orderNumber","plugins","Sessions","delete","context","getUserSessions","connected","_uniqueUsersCount","sessions-unregister-not-exist","getUserRole","get","init","_registeredSessions","size","_users","allConnectedUsers","add","assign","listenTo","unregister","_createUser","change:state","connection","forEach","addUser","getUser","values","_handleSessionRemove","clear","remove","has","requires"];var f,p;f=h,p=110,function(t){for(;--t;)f.push(f.shift())}(++p);const m=function(t,e){return h[t-=0]};class y extends t.ContextPlugin{static get pluginName(){return m("0x20")}static get[m("0x12")](){return[l,r.Users]}[m("0x29")](){const t=this[m("0x22")],s=t[m("0x1f")][m("0x28")](l);this[m("0x13")]=new Map,this[m("0x17")]=new Map,this[m("0x2")]=new e.Collection,this[m("0x2a")]=new Map,this[m("0x25")]=0,this[m("0x1")]=t[m("0x1f")][m("0x28")](r.Users),this[m("0x5")](s,m("0x8"),((t,e,s)=>{if(m("0x24")!==s)this.channelSessions[m("0xa")]((t=>t[m("0xf")]())),this[m("0x17")][m("0xa")]((t=>t[m("0xf")]())),this[m("0x2")][m("0xf")]();else for(const[t,e]of this[m("0x2a")])for(const s of e)this[m("0x18")](t,s)})),this[m("0x7")](s[m("0x9")].me,!0)}register(t,s){if(this._registeredSessions[m("0x11")](t))throw new e.CKEditorError(m("0x16"),null,{channelId:t});this._registeredSessions.set(t,s),this[m("0x13")].set(t,new e.Collection),this.channelConnectedUsers[m("0x1d")](t,new e.Collection),this.listenTo(s,m("0x3"),((e,s)=>this[m("0x18")](t,s))),this.listenTo(s,m("0x10"),((e,s)=>this[m("0xe")](t,s)));for(const e of s)this._handleSessionAdd(t,e)}[m("0x6")](t){if(!this[m("0x2a")].has(t))throw new e.CKEditorError(m("0x26"),null,{channelId:t});const s=this[m("0x2a")].get(t);this[m("0x15")](s);for(const e of s)m("0x24")===this[m("0x22")].plugins[m("0x28")](l).state&&this[m("0xe")](t,e);this[m("0x2a")][m("0x21")](t),this[m("0x13")][m("0x21")](t),this[m("0x17")][m("0x21")](t)}get[m("0x1b")](){return this[m("0x22")][m("0x1f")][m("0x28")](l)[m("0x9")][m("0x14")]}getUserBySessionId(t){for(const e of this[m("0x13")][m("0xd")]())for(const s of e)if(s.id===t)return s[m("0x1a")]}getUserSessions(t,e){const s=e?[this[m("0x13")][m("0x28")](e)]:this[m("0x13")][m("0xd")](),n=new Set;for(const e of s)for(const s of e)s[m("0x1a")].id===t.id&&n[m("0x3")](s.id);return n}[m("0x27")](t){for(const e of this.channelSessions.values())for(const s of e)if(s.user===t)return s.role}_handleSessionAdd(t,e){if(m("0x24")!==this[m("0x22")][m("0x1f")][m("0x28")](l)[m("0x19")])return;const s=e[m("0x1a")],n=this[m("0x1")][m("0xc")](s.id)||this[m("0x7")](s),r=Object[m("0x4")]({},e,{user:n});this[m("0x13")][m("0x28")](t)[m("0x3")](r);const i=this[m("0x17")].get(t);i.has(n.id)||i[m("0x3")](n),this[m("0x2")][m("0x11")](n.id)||this[m("0x2")][m("0x3")](n),this.fire("sessionAdd:"+t,{channelId:t,session:r})}_handleSessionRemove(t,e){if(m("0x24")!==this[m("0x22")][m("0x1f")].get(l)[m("0x19")])return;const s=this[m("0x17")][m("0x28")](t),n=e[m("0x1a")];this.channelSessions[m("0x28")](t)[m("0x10")](e.id),s.has(n.id)&&!this[m("0x23")](n,t)[m("0x0")]&&s[m("0x10")](n.id),this.allConnectedUsers[m("0x28")](n.id)&&!this[m("0x23")](n)[m("0x0")]&&this[m("0x2")][m("0x10")](n.id)}[m("0x7")](t,e){const s=this[m("0x1")][m("0xb")](t);return e&&this[m("0x1")][m("0x1c")](t.id),s[m("0x1e")]=this._uniqueUsersCount++,s}}var _=__webpack_require__(7594),g=__webpack_require__.n(_),v=__webpack_require__(9940),x={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(v.Z,x);v.Z.locals;const b=["checkChild","getPositions","getNearestSelectionRange","get","$graveyard","toDomElement","user:range","mySessionId","innerHTML","size","schema","user:range:","conversion","enqueueChange","getFirstRange","isSimilar","change:range","toRange","markerRange","getAttribute","user:position","fromRange","isInline","priority","name","model","reconvertMarker","rootName","pluginName","oldRange","createUserMarkerOperations","markerName","color","requires","applyOperation","_createdBatches","for","detach","end","getUserBySessionId","span","editingDowncast","batch","startsWith","getStart","userPositionMarker","undo","split","render","contenteditable","removeMarker","start","markers","hasContent","isObject","getSelectionClass","document","getContainedElement","getCustomProperty","setCustomProperty","parent","element","marker","createRange","set","delete",'&#8203;<span class="ck-user__marker-line"><span class="ck-user__marker-dot"></span></span>',"addMarker","deletionPosition","plugins","createUIElement","orderNumber","type","getMarkerClass","isLimit","editor","root","updateMarker","editing","data-session-id","getRange","UserMarkers","clear","selection","update:user:range","markerToElement","user:position:"];var w,O;w=b,O=322,function(t){for(;--t;)w.push(w.shift())}(++O);const S=function(t,e){return b[t-=0]};class E extends t.Plugin{static get[S("0x3b")](){return[y]}static get[S("0x36")](){return S("0x14")}init(){const t=this.editor,e=t[S("0x8")][S("0x1d")](y);t[S("0x26")][S("0x3e")]("editingDowncast")[S("0x18")]({model:S("0x2e"),view:(s,{writer:n})=>function(t,e,s,n){const r=t[S("0x39")][S("0x49")](":")[2],i=s[S("0x41")](r);if(!i||r===s.mySessionId)return;if(!n[S("0x33")][S("0x24")].checkChild(t[S("0x2c")].start,"$text"))return;const o={class:"ck-user__marker "+i.color[S("0xc")](),"data-name":i[S("0x32")],"data-session-id":r},a=n[S("0x33")].markers.get(t[S("0x39")])[S("0x46")](),c=a.nodeAfter,u=n[S("0x33")].schema;if(c&&u[S("0x50")](c)&&u[S("0x30")](c)&&!n[S("0x33")][S("0x4e")].get(S("0x25")+r)[S("0x13")]().isCollapsed)return;const d=a[S("0x56")];n.model[S("0x24")][S("0xd")](d)&&!n[S("0x33")][S("0x4f")](d)&&(o[S("0x4b")]=!1);const l=function(t,e){const s=t[S("0x9")](S("0x42"),e);return t[S("0x55")]("userPositionMarker",!0,s),s[S("0x4a")]=function(t){const e=this[S("0x1f")](t);return e[S("0x22")]=S("0x5"),e},s[S("0x29")]=function(t){return this[S("0x54")](S("0x47"))&&t[S("0x54")](S("0x47"))&&this[S("0x2d")](S("0x12"))==t[S("0x2d")]("data-session-id")},s}(e,o);return l[S("0x31")]=1e3+i[S("0xa")],l}(s,n,e,t)}),t[S("0x26")][S("0x3e")](S("0x43")).markerToHighlight({model:S("0x20"),view:t=>function(t,e){const s=t[S("0x39")].split(":")[2];if(s===e[S("0x21")])return;const n=e[S("0x41")](s);return n?{id:s,classes:["ck-user__selection",n[S("0x3a")][S("0x51")]()],attributes:{"data-session-id":s},priority:2e3+n[S("0xa")]}:{id:s}}(t,e)}),function(t){const e=t[S("0x33")],n=new Map,r=t[S("0x8")][S("0x1d")](y);e[S("0x4e")].on(S("0x17"),((i,o,a,c)=>{if(!c&&n[S("0x1d")](o[S("0x32")]))return n[S("0x1d")](o[S("0x32")])[S("0x3f")](),void n[S("0x4")](o[S("0x32")]);const u=o[S("0x32")][S("0x49")](":")[2];if(u===r.mySessionId)return;const d=S("0x19")+u;e[S("0x4e")].has(d)&&t[S("0x11")][S("0x34")](d),o.on(S("0x2a"),((t,r,i)=>{if(S("0x1e")!=r.root.rootName&&S("0x1e")==o.getRange()[S("0xf")][S("0x35")]&&!n.has(o.name)){const t=e[S("0x24")][S("0x1c")](i[S("0x7")]);if(t){const r=s.LiveRange[S("0x2f")](t);n[S("0x3")](o[S("0x32")],r),r.on(S("0x2a"),((t,s,i)=>{if(S("0x1e")==r[S("0xf")][S("0x35")]){const t=e.schema[S("0x1c")](i[S("0x7")]);t?(r[S("0x4d")]=t[S("0x4d")],r[S("0x40")]=t[S("0x40")]):(n.delete(o[S("0x32")]),r[S("0x3f")]())}}))}}}))})),e[S("0x52")].on("change",(()=>{n[S("0x23")]>0&&e[S("0x27")]({isUndoable:!1},(t=>{for(const[s,r]of n)"$graveyard"==e.markers[S("0x1d")](s).getRange()[S("0xf")][S("0x35")]&&(T(s[S("0x49")](":")[2],r[S("0x2b")](),e,t),r.detach());n[S("0x15")]()}))}))}(t)}afterInit(){const t=this[S("0xe")],e=t.commands.get(S("0x48"));e&&t[S("0x33")].on(S("0x3c"),((s,n)=>{const r=n[0];if(S("0x1")!=r[S("0xb")]||!r[S("0x32")][S("0x45")]("user:"))return;const i=r[S("0x44")];e[S("0x3d")].has(i)&&(r.newRange=r.oldRange?t[S("0x33")][S("0x2")](r[S("0x37")].start,r[S("0x37")][S("0x40")]):null)}),{priority:"highest"})}[S("0x38")](){const t=this.editor,e=t[S("0x33")][S("0x52")],s=t[S("0x8")][S("0x1d")](y);t[S("0x33")][S("0x27")]({isUndoable:!1},(n=>{const r=S("0x25")+s[S("0x21")],i=S("0x19")+s[S("0x21")],o=t.model.markers.has(r);t[S("0x11")].view.hasDomSelection?T(s[S("0x21")],e[S("0x16")][S("0x28")](),t[S("0x33")],n):o&&(n.removeMarker(r),n[S("0x4c")](i))}))}}function T(t,e,s,n){const r=S("0x25")+t,i=S("0x19")+t,o=e[S("0x53")]();let a=e[S("0x4d")];o&&o.is(S("0x0"),"tableCell")&&(a=function(t,e){for(const s of t[S("0x1b")]())if(e[S("0x24")][S("0x1a")](s,"$text"))return s}(e,s),e=n.createRange(a)),a=n[S("0x2")](a),s[S("0x4e")].has(r)?(n[S("0x10")](r,{range:e}),n[S("0x10")](i,{range:a})):(n.addMarker(r,{range:e,usingOperation:!0}),n[S("0x6")](i,{range:a,usingOperation:!0}))}var k=__webpack_require__(6154),C=__webpack_require__.n(k);const I=function(){this.__data__=[],this.size=0};const R=function(t,e){return t===e||t!=t&&e!=e};const A=function(t,e){for(var s=t.length;s--;)if(R(t[s][0],e))return s;return-1};var N=Array.prototype.splice;const P=function(t){var e=this.__data__,s=A(e,t);return!(s<0)&&(s==e.length-1?e.pop():N.call(e,s,1),--this.size,!0)};const D=function(t){var e=this.__data__,s=A(e,t);return s<0?void 0:e[s][1]};const j=function(t){return A(this.__data__,t)>-1};const M=function(t,e){var s=this.__data__,n=A(s,t);return n<0?(++this.size,s.push([t,e])):s[n][1]=e,this};function B(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var n=t[e];this.set(n[0],n[1])}}B.prototype.clear=I,B.prototype.delete=P,B.prototype.get=D,B.prototype.has=j,B.prototype.set=M;const J=B;const V=function(){this.__data__=new J,this.size=0};const U=function(t){var e=this.__data__,s=e.delete(t);return this.size=e.size,s};const F=function(t){return this.__data__.get(t)};const q=function(t){return this.__data__.has(t)};const L="object"==typeof global&&global&&global.Object===Object&&global;var Y="object"==typeof self&&self&&self.Object===Object&&self;const G=L||Y||Function("return this")();const z=G.Symbol;var H=Object.prototype,W=H.hasOwnProperty,K=H.toString,$=z?z.toStringTag:void 0;const Z=function(t){var e=W.call(t,$),s=t[$];try{t[$]=void 0;var n=!0}catch(t){}var r=K.call(t);return n&&(e?t[$]=s:delete t[$]),r};var X=Object.prototype.toString;const Q=function(t){return X.call(t)};var tt=z?z.toStringTag:void 0;const et=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":tt&&tt in Object(t)?Z(t):Q(t)};const st=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const nt=function(t){if(!st(t))return!1;var e=et(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};const rt=G["__core-js_shared__"];var it,ot=(it=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||""))?"Symbol(src)_1."+it:"";const at=function(t){return!!ot&&ot in t};var ct=Function.prototype.toString;const ut=function(t){if(null!=t){try{return ct.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var dt=/^\[object .+?Constructor\]$/,lt=Function.prototype,ht=Object.prototype,ft=lt.toString,pt=ht.hasOwnProperty,mt=RegExp("^"+ft.call(pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const yt=function(t){return!(!st(t)||at(t))&&(nt(t)?mt:dt).test(ut(t))};const _t=function(t,e){return null==t?void 0:t[e]};const gt=function(t,e){var s=_t(t,e);return yt(s)?s:void 0};const vt=gt(G,"Map");const xt=gt(Object,"create");const bt=function(){this.__data__=xt?xt(null):{},this.size=0};const wt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var Ot=Object.prototype.hasOwnProperty;const St=function(t){var e=this.__data__;if(xt){var s=e[t];return"__lodash_hash_undefined__"===s?void 0:s}return Ot.call(e,t)?e[t]:void 0};var Et=Object.prototype.hasOwnProperty;const Tt=function(t){var e=this.__data__;return xt?void 0!==e[t]:Et.call(e,t)};const kt=function(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=xt&&void 0===e?"__lodash_hash_undefined__":e,this};function Ct(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var n=t[e];this.set(n[0],n[1])}}Ct.prototype.clear=bt,Ct.prototype.delete=wt,Ct.prototype.get=St,Ct.prototype.has=Tt,Ct.prototype.set=kt;const It=Ct;const Rt=function(){this.size=0,this.__data__={hash:new It,map:new(vt||J),string:new It}};const At=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const Nt=function(t,e){var s=t.__data__;return At(e)?s["string"==typeof e?"string":"hash"]:s.map};const Pt=function(t){var e=Nt(this,t).delete(t);return this.size-=e?1:0,e};const Dt=function(t){return Nt(this,t).get(t)};const jt=function(t){return Nt(this,t).has(t)};const Mt=function(t,e){var s=Nt(this,t),n=s.size;return s.set(t,e),this.size+=s.size==n?0:1,this};function Bt(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var n=t[e];this.set(n[0],n[1])}}Bt.prototype.clear=Rt,Bt.prototype.delete=Pt,Bt.prototype.get=Dt,Bt.prototype.has=jt,Bt.prototype.set=Mt;const Jt=Bt;const Vt=function(t,e){var s=this.__data__;if(s instanceof J){var n=s.__data__;if(!vt||n.length<199)return n.push([t,e]),this.size=++s.size,this;s=this.__data__=new Jt(n)}return s.set(t,e),this.size=s.size,this};function Ut(t){var e=this.__data__=new J(t);this.size=e.size}Ut.prototype.clear=V,Ut.prototype.delete=U,Ut.prototype.get=F,Ut.prototype.has=q,Ut.prototype.set=Vt;const Ft=Ut;const qt=function(t,e){for(var s=-1,n=null==t?0:t.length;++s<n&&!1!==e(t[s],s,t););return t};const Lt=function(){try{var t=gt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();const Yt=function(t,e,s){"__proto__"==e&&Lt?Lt(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s};var Gt=Object.prototype.hasOwnProperty;const zt=function(t,e,s){var n=t[e];Gt.call(t,e)&&R(n,s)&&(void 0!==s||e in t)||Yt(t,e,s)};const Ht=function(t,e,s,n){var r=!s;s||(s={});for(var i=-1,o=e.length;++i<o;){var a=e[i],c=n?n(s[a],t[a],a,s,t):void 0;void 0===c&&(c=t[a]),r?Yt(s,a,c):zt(s,a,c)}return s};const Wt=function(t,e){for(var s=-1,n=Array(t);++s<t;)n[s]=e(s);return n};const Kt=function(t){return null!=t&&"object"==typeof t};const $t=function(t){return Kt(t)&&"[object Arguments]"==et(t)};var Zt=Object.prototype,Xt=Zt.hasOwnProperty,Qt=Zt.propertyIsEnumerable;const te=$t(function(){return arguments}())?$t:function(t){return Kt(t)&&Xt.call(t,"callee")&&!Qt.call(t,"callee")};const ee=Array.isArray;const se=function(){return!1};var ne="object"==typeof exports&&exports&&!exports.nodeType&&exports,re=ne&&"object"==typeof module&&module&&!module.nodeType&&module,ie=re&&re.exports===ne?G.Buffer:void 0;const oe=(ie?ie.isBuffer:void 0)||se;var ae=/^(?:0|[1-9]\d*)$/;const ce=function(t,e){var s=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==s||"symbol"!=s&&ae.test(t))&&t>-1&&t%1==0&&t<e};const ue=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var de={};de["[object Float32Array]"]=de["[object Float64Array]"]=de["[object Int8Array]"]=de["[object Int16Array]"]=de["[object Int32Array]"]=de["[object Uint8Array]"]=de["[object Uint8ClampedArray]"]=de["[object Uint16Array]"]=de["[object Uint32Array]"]=!0,de["[object Arguments]"]=de["[object Array]"]=de["[object ArrayBuffer]"]=de["[object Boolean]"]=de["[object DataView]"]=de["[object Date]"]=de["[object Error]"]=de["[object Function]"]=de["[object Map]"]=de["[object Number]"]=de["[object Object]"]=de["[object RegExp]"]=de["[object Set]"]=de["[object String]"]=de["[object WeakMap]"]=!1;const le=function(t){return Kt(t)&&ue(t.length)&&!!de[et(t)]};const he=function(t){return function(e){return t(e)}};var fe="object"==typeof exports&&exports&&!exports.nodeType&&exports,pe=fe&&"object"==typeof module&&module&&!module.nodeType&&module,me=pe&&pe.exports===fe&&L.process;const ye=function(){try{var t=pe&&pe.require&&pe.require("util").types;return t||me&&me.binding&&me.binding("util")}catch(t){}}();var _e=ye&&ye.isTypedArray;const ge=_e?he(_e):le;var ve=Object.prototype.hasOwnProperty;const xe=function(t,e){var s=ee(t),n=!s&&te(t),r=!s&&!n&&oe(t),i=!s&&!n&&!r&&ge(t),o=s||n||r||i,a=o?Wt(t.length,String):[],c=a.length;for(var u in t)!e&&!ve.call(t,u)||o&&("length"==u||r&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ce(u,c))||a.push(u);return a};var be=Object.prototype;const we=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||be)};const Oe=function(t,e){return function(s){return t(e(s))}};const Se=Oe(Object.keys,Object);var Ee=Object.prototype.hasOwnProperty;const Te=function(t){if(!we(t))return Se(t);var e=[];for(var s in Object(t))Ee.call(t,s)&&"constructor"!=s&&e.push(s);return e};const ke=function(t){return null!=t&&ue(t.length)&&!nt(t)};const Ce=function(t){return ke(t)?xe(t):Te(t)};const Ie=function(t,e){return t&&Ht(e,Ce(e),t)};const Re=function(t){var e=[];if(null!=t)for(var s in Object(t))e.push(s);return e};var Ae=Object.prototype.hasOwnProperty;const Ne=function(t){if(!st(t))return Re(t);var e=we(t),s=[];for(var n in t)("constructor"!=n||!e&&Ae.call(t,n))&&s.push(n);return s};const Pe=function(t){return ke(t)?xe(t,!0):Ne(t)};const De=function(t,e){return t&&Ht(e,Pe(e),t)};var je="object"==typeof exports&&exports&&!exports.nodeType&&exports,Me=je&&"object"==typeof module&&module&&!module.nodeType&&module,Be=Me&&Me.exports===je?G.Buffer:void 0,Je=Be?Be.allocUnsafe:void 0;const Ve=function(t,e){if(e)return t.slice();var s=t.length,n=Je?Je(s):new t.constructor(s);return t.copy(n),n};const Ue=function(t,e){var s=-1,n=t.length;for(e||(e=Array(n));++s<n;)e[s]=t[s];return e};const Fe=function(t,e){for(var s=-1,n=null==t?0:t.length,r=0,i=[];++s<n;){var o=t[s];e(o,s,t)&&(i[r++]=o)}return i};const qe=function(){return[]};var Le=Object.prototype.propertyIsEnumerable,Ye=Object.getOwnPropertySymbols;const Ge=Ye?function(t){return null==t?[]:(t=Object(t),Fe(Ye(t),(function(e){return Le.call(t,e)})))}:qe;const ze=function(t,e){return Ht(t,Ge(t),e)};const He=function(t,e){for(var s=-1,n=e.length,r=t.length;++s<n;)t[r+s]=e[s];return t};const We=Oe(Object.getPrototypeOf,Object);const Ke=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)He(e,Ge(t)),t=We(t);return e}:qe;const $e=function(t,e){return Ht(t,Ke(t),e)};const Ze=function(t,e,s){var n=e(t);return ee(t)?n:He(n,s(t))};const Xe=function(t){return Ze(t,Ce,Ge)};const Qe=function(t){return Ze(t,Pe,Ke)};const ts=gt(G,"DataView");const es=gt(G,"Promise");const ss=gt(G,"Set");const ns=gt(G,"WeakMap");var rs="[object Map]",is="[object Promise]",os="[object Set]",as="[object WeakMap]",cs="[object DataView]",us=ut(ts),ds=ut(vt),ls=ut(es),hs=ut(ss),fs=ut(ns),ps=et;(ts&&ps(new ts(new ArrayBuffer(1)))!=cs||vt&&ps(new vt)!=rs||es&&ps(es.resolve())!=is||ss&&ps(new ss)!=os||ns&&ps(new ns)!=as)&&(ps=function(t){var e=et(t),s="[object Object]"==e?t.constructor:void 0,n=s?ut(s):"";if(n)switch(n){case us:return cs;case ds:return rs;case ls:return is;case hs:return os;case fs:return as}return e});const ms=ps;var ys=Object.prototype.hasOwnProperty;const _s=function(t){var e=t.length,s=new t.constructor(e);return e&&"string"==typeof t[0]&&ys.call(t,"index")&&(s.index=t.index,s.input=t.input),s};const gs=G.Uint8Array;const vs=function(t){var e=new t.constructor(t.byteLength);return new gs(e).set(new gs(t)),e};const xs=function(t,e){var s=e?vs(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.byteLength)};var bs=/\w*$/;const ws=function(t){var e=new t.constructor(t.source,bs.exec(t));return e.lastIndex=t.lastIndex,e};var Os=z?z.prototype:void 0,Ss=Os?Os.valueOf:void 0;const Es=function(t){return Ss?Object(Ss.call(t)):{}};const Ts=function(t,e){var s=e?vs(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)};const ks=function(t,e,s){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return vs(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return xs(t,s);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ts(t,s);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return ws(t);case"[object Symbol]":return Es(t)}};var Cs=Object.create;const Is=function(){function t(){}return function(e){if(!st(e))return{};if(Cs)return Cs(e);t.prototype=e;var s=new t;return t.prototype=void 0,s}}();const Rs=function(t){return"function"!=typeof t.constructor||we(t)?{}:Is(We(t))};const As=function(t){return Kt(t)&&"[object Map]"==ms(t)};var Ns=ye&&ye.isMap;const Ps=Ns?he(Ns):As;const Ds=function(t){return Kt(t)&&"[object Set]"==ms(t)};var js=ye&&ye.isSet;const Ms=js?he(js):Ds;var Bs="[object Arguments]",Js="[object Function]",Vs="[object Object]",Us={};Us[Bs]=Us["[object Array]"]=Us["[object ArrayBuffer]"]=Us["[object DataView]"]=Us["[object Boolean]"]=Us["[object Date]"]=Us["[object Float32Array]"]=Us["[object Float64Array]"]=Us["[object Int8Array]"]=Us["[object Int16Array]"]=Us["[object Int32Array]"]=Us["[object Map]"]=Us["[object Number]"]=Us["[object Object]"]=Us["[object RegExp]"]=Us["[object Set]"]=Us["[object String]"]=Us["[object Symbol]"]=Us["[object Uint8Array]"]=Us["[object Uint8ClampedArray]"]=Us["[object Uint16Array]"]=Us["[object Uint32Array]"]=!0,Us["[object Error]"]=Us[Js]=Us["[object WeakMap]"]=!1;const Fs=function t(e,s,n,r,i,o){var a,c=1&s,u=2&s,d=4&s;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!st(e))return e;var l=ee(e);if(l){if(a=_s(e),!c)return Ue(e,a)}else{var h=ms(e),f=h==Js||"[object GeneratorFunction]"==h;if(oe(e))return Ve(e,c);if(h==Vs||h==Bs||f&&!i){if(a=u||f?{}:Rs(e),!c)return u?$e(e,De(a,e)):ze(e,Ie(a,e))}else{if(!Us[h])return i?e:{};a=ks(e,h,c)}}o||(o=new Ft);var p=o.get(e);if(p)return p;o.set(e,a),Ms(e)?e.forEach((function(r){a.add(t(r,s,n,r,e,o))})):Ps(e)&&e.forEach((function(r,i){a.set(i,t(r,s,n,i,e,o))}));var m=l?void 0:(d?u?Qe:Xe:u?Pe:Ce)(e);return qt(m||e,(function(r,i){m&&(r=e[i=r]),zt(a,i,t(r,s,n,i,e,o))})),a};const qs=function(t){return Fs(t,5)},Ls=["build","_description","finish","fromJSON","toObject","decompress","decode","Root","_protobuf","create","registerDescriptor","nested","getDescriptor","_protobufRoot","lookupType"];var Ys,Gs;Ys=Ls,Gs=155,function(t){for(;--t;)Ys.push(Ys.shift())}(++Gs);const zs=function(t,e){return Ls[t-=0]};class Hs{constructor(){this[zs("0xb")]={nested:{}}}[zs("0x5")](t,e){this._description[zs("0x6")][t]=qs(e)}[zs("0xa")](){this[zs("0x8")]=C()[zs("0x2")][zs("0xd")](this[zs("0xb")])}[zs("0x7")](t){if(!this._protobufRoot)throw new e.CKEditorError("protobuffactory-cannot-get-descriptor-before-build",this);return new Ws(this[zs("0x8")][zs("0x9")](t))}}class Ws{constructor(t){this._protobuf=t}compress(t){const e=this[zs("0x3")].verify(t);if(e)throw Error(e);return this[zs("0x3")].encode(this[zs("0x3")][zs("0x4")](t))[zs("0xc")]()}[zs("0x0")](t){return this[zs("0x3")][zs("0xe")](this[zs("0x3")][zs("0x1")](t),{oneofs:!0})}}var Ks,$s,Zs=["bool","Element","Position","repeated","string"];Ks=Zs,$s=139,function(t){for(;--t;)Ks.push(Ks.shift())}(++$s);var Xs=function(t,e){return Zs[t-=0]};const Qs={Position:{fields:{root:{type:Xs("0x0"),id:1},rootMain:{type:"bool",id:2},rootGraveyard:{type:Xs("0x1"),id:3},path:{rule:Xs("0x4"),type:"uint32",id:4},stickiness:{type:Xs("0x0"),id:5}}},Range:{fields:{start:{type:Xs("0x3"),id:1},end:{type:Xs("0x3"),id:2}}},Element:{fields:{name:{type:Xs("0x0"),id:1},children:{rule:Xs("0x4"),type:Xs("0x2"),id:2},data:{type:Xs("0x0"),id:3},attributesBoolean:{keyType:"string",type:Xs("0x1"),id:4},attributesJson:{type:Xs("0x0"),id:5}}}};const tn=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};const en=function(t){return this.__data__.has(t)};function sn(t){var e=-1,s=null==t?0:t.length;for(this.__data__=new Jt;++e<s;)this.add(t[e])}sn.prototype.add=sn.prototype.push=tn,sn.prototype.has=en;const nn=sn;const rn=function(t,e){for(var s=-1,n=null==t?0:t.length;++s<n;)if(e(t[s],s,t))return!0;return!1};const on=function(t,e){return t.has(e)};const an=function(t,e,s,n,r,i){var o=1&s,a=t.length,c=e.length;if(a!=c&&!(o&&c>a))return!1;var u=i.get(t),d=i.get(e);if(u&&d)return u==e&&d==t;var l=-1,h=!0,f=2&s?new nn:void 0;for(i.set(t,e),i.set(e,t);++l<a;){var p=t[l],m=e[l];if(n)var y=o?n(m,p,l,e,t,i):n(p,m,l,t,e,i);if(void 0!==y){if(y)continue;h=!1;break}if(f){if(!rn(e,(function(t,e){if(!on(f,e)&&(p===t||r(p,t,s,n,i)))return f.push(e)}))){h=!1;break}}else if(p!==m&&!r(p,m,s,n,i)){h=!1;break}}return i.delete(t),i.delete(e),h};const cn=function(t){var e=-1,s=Array(t.size);return t.forEach((function(t,n){s[++e]=[n,t]})),s};const un=function(t){var e=-1,s=Array(t.size);return t.forEach((function(t){s[++e]=t})),s};var dn=z?z.prototype:void 0,ln=dn?dn.valueOf:void 0;const hn=function(t,e,s,n,r,i,o){switch(s){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new gs(t),new gs(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return R(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=cn;case"[object Set]":var c=1&n;if(a||(a=un),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;n|=2,o.set(t,e);var d=an(a(t),a(e),n,r,i,o);return o.delete(t),d;case"[object Symbol]":if(ln)return ln.call(t)==ln.call(e)}return!1};var fn=Object.prototype.hasOwnProperty;const pn=function(t,e,s,n,r,i){var o=1&s,a=Xe(t),c=a.length;if(c!=Xe(e).length&&!o)return!1;for(var u=c;u--;){var d=a[u];if(!(o?d in e:fn.call(e,d)))return!1}var l=i.get(t),h=i.get(e);if(l&&h)return l==e&&h==t;var f=!0;i.set(t,e),i.set(e,t);for(var p=o;++u<c;){var m=t[d=a[u]],y=e[d];if(n)var _=o?n(y,m,d,e,t,i):n(m,y,d,t,e,i);if(!(void 0===_?m===y||r(m,y,s,n,i):_)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var g=t.constructor,v=e.constructor;g==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v||(f=!1)}return i.delete(t),i.delete(e),f};var mn="[object Arguments]",yn="[object Array]",_n="[object Object]",gn=Object.prototype.hasOwnProperty;const vn=function(t,e,s,n,r,i){var o=ee(t),a=ee(e),c=o?yn:ms(t),u=a?yn:ms(e),d=(c=c==mn?_n:c)==_n,l=(u=u==mn?_n:u)==_n,h=c==u;if(h&&oe(t)){if(!oe(e))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new Ft),o||ge(t)?an(t,e,s,n,r,i):hn(t,e,c,s,n,r,i);if(!(1&s)){var f=d&&gn.call(t,"__wrapped__"),p=l&&gn.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,y=p?e.value():e;return i||(i=new Ft),r(m,y,s,n,i)}}return!!h&&(i||(i=new Ft),pn(t,e,s,n,r,i))};const xn=function t(e,s,n,r,i){return e===s||(null==e||null==s||!Kt(e)&&!Kt(s)?e!=e&&s!=s:vn(e,s,n,r,t,i))};const bn=function(t,e){return xn(t,e)},wn=["path","length","rootMain","root","nodes","rootGraveyard","$graveyard","main"];var On,Sn;On=wn,Sn=374,function(t){for(;--t;)On.push(On.shift())}(++Sn);const En=function(t,e){return wn[t-=0]};function Tn(t,e){const s=qs(t);return s[En("0x2")][s[En("0x2")][En("0x3")]-1]+=e,s}function kn(t,e){return t[En("0x5")]===e[En("0x5")]&&bn(t[En("0x2")],e[En("0x2")])}function Cn(t){Rn(t,(t=>(En("0x1")==t.root?(t[En("0x4")]=!0,delete t[En("0x5")]):En("0x0")==t[En("0x5")]&&(t[En("0x7")]=!0,delete t[En("0x5")]),t)))}function In(t){Rn(t,(t=>(t[En("0x4")]?(t[En("0x5")]=En("0x1"),delete t[En("0x4")]):t[En("0x7")]&&(t[En("0x5")]=En("0x0"),delete t[En("0x7")]),t)))}function Rn(t,e){for(const s in t){const n=t[s];En("0x6")!==s&&st(n)&&(n.path&&(n.root||n[En("0x4")]||n[En("0x7")])?t[s]=e(n):Rn(n,e))}return t}const An=["operationName","types","decompress","compress","push","_protobufDescriptor","__className","shift","buffers"];var Nn,Pn;Nn=An,Pn=326,function(t){for(;--t;)Nn.push(Nn.shift())}(++Pn);const Dn=function(t,e){return An[t-=0]};class jn{constructor(t,e,s){this.id=t,this[Dn("0x7")]=e,this._protobufDescriptor=s}compress(t,e){const s=e[Dn("0x5")]();Cn(s),t[Dn("0x6")][Dn("0x2")](this[Dn("0x3")][Dn("0x1")](s)),t[Dn("0x8")][Dn("0x2")](this.id)}[Dn("0x0")](t,e){e.types.shift();const s=this[Dn("0x3")][Dn("0x0")](e[Dn("0x6")][Dn("0x5")]());In(s),s[Dn("0x4")]=this[Dn("0x7")],t[Dn("0x2")](s)}}const Mn=["decompress","Range","boolean","Boolean","__className","push","shift","bool","string","Json","newValue","operationName","description","buffers","_protobufDescriptor","stringify","compress","oldValue"];var Bn,Jn;Bn=Mn,Jn=453,function(t){for(;--t;)Bn.push(Bn.shift())}(++Jn);const Vn=function(t,e){return Mn[t-=0]};class Un extends jn{static get[Vn("0x9")](){return{fields:{range:{type:Vn("0x10"),id:1},key:{type:Vn("0x5"),id:2},oldValueBoolean:{type:"bool",id:3},oldValueJson:{type:Vn("0x5"),id:4},newValueBoolean:{type:Vn("0x4"),id:5},newValueJson:{type:"string",id:6},wasUndone:{type:Vn("0x4"),id:7}}}}[Vn("0xd")](t,e){const s=e[Vn("0x3")]();Fn("oldValue",s),Fn(Vn("0x7"),s),Cn(s),t[Vn("0xa")][Vn("0x2")](this[Vn("0xb")].compress(s)),t.types[Vn("0x2")](this.id)}[Vn("0xf")](t,e){const{types:s,buffers:n}=e,r=this._protobufDescriptor.decompress(n[Vn("0x3")]());s.shift(),qn(Vn("0xe"),r),qn(Vn("0x7"),r),In(r),r[Vn("0x1")]=this[Vn("0x8")],t[Vn("0x2")](r)}}function Fn(t,e){const s=e[t];Vn("0x11")==typeof s?e[t+"Boolean"]=s:e[t+Vn("0x6")]=JSON[Vn("0xc")](s)}function qn(t,e){const s=t+"Json";e[s]?(e[t]=JSON.parse(e[s]),delete e[s]):(e[t]=e[t+Vn("0x0")],delete e[t+Vn("0x0")])}const Ln=["bool","description","Position","attributes","push","repeated","attributesBoolean","Element","nodes","types","__className","stringify","decompress","keys","attributesJson","shift","parse","operationName","buffers","children","every","compress"];var Yn,Gn;Yn=Ln,Gn=103,function(t){for(;--t;)Yn.push(Yn.shift())}(++Gn);const zn=function(t,e){return Ln[t-=0]};class Hn extends jn{static get[zn("0x8")](){return{fields:{position:{type:zn("0x9"),id:1},nodes:{rule:zn("0xc"),type:zn("0xe"),id:2},shouldReceiveAttributes:{type:zn("0x7"),id:3},wasUndone:{type:zn("0x7"),id:4}}}}[zn("0x6")](t,e){const s=e.shift();Wn(s[zn("0xf")]),Cn(s),t[zn("0x3")].push(this._protobufDescriptor.compress(s)),t[zn("0x10")][zn("0xb")](this.id)}decompress(t,e){const{types:s,buffers:n}=e,r=this._protobufDescriptor[zn("0x13")](n[zn("0x0")]());s[zn("0x0")](),r[zn("0xf")]||(r.nodes=[]),Kn(r[zn("0xf")]),In(r),r[zn("0x11")]=this[zn("0x2")],t[zn("0xb")](r)}}function Wn(t){for(const e of t){if(e[zn("0xa")]){const t=e[zn("0xa")];$n(t)?e[zn("0xd")]=t:e.attributesJson=JSON[zn("0x12")](t)}e[zn("0x4")]&&Wn(e[zn("0x4")])}}function Kn(t){for(const e of t)(e[zn("0xd")]||e[zn("0x15")])&&(e.attributesBoolean?(e[zn("0xa")]=e.attributesBoolean,delete e[zn("0xd")]):(e[zn("0xa")]=JSON[zn("0x1")](e.attributesJson),delete e[zn("0x15")])),e[zn("0x4")]&&Kn(e.children)}function $n(t){return Object[zn("0x14")](t)[zn("0x5")]((e=>"boolean"==typeof t[e]))}const Zn=["decompress","bool","Range","newRange","oldRange","description","string"];var Xn,Qn;Xn=Zn,Qn=423,function(t){for(;--t;)Xn.push(Xn.shift())}(++Qn);const tr=function(t,e){return Zn[t-=0]};class er extends jn{static get[tr("0x2")](){return{fields:{name:{type:tr("0x3"),id:1},oldRange:{type:tr("0x6"),id:2},newRange:{type:"Range",id:3},affectsData:{type:tr("0x5"),id:4},wasUndone:{type:tr("0x5"),id:5}}}}decompress(t,e){super[tr("0x4")](t,e);const s=t[t.length-1];s[tr("0x1")]||(s[tr("0x1")]=null),s[tr("0x0")]||(s.newRange=null)}}var sr,nr,rr=["Position","description","uint32"];sr=rr,nr=441,function(t){for(;--t;)sr.push(sr.shift())}(++nr);var ir=function(t,e){return rr[t-=0]};class or extends jn{static get[ir("0x1")](){return{fields:{sourcePosition:{type:ir("0x0"),id:1},targetPosition:{type:ir("0x0"),id:2},graveyardPosition:{type:ir("0x0"),id:3},howMany:{type:ir("0x2"),id:4},wasUndone:{type:"bool",id:5}}}}}var ar,cr,ur=["uint32","bool"];ar=ur,cr=150,function(t){for(;--t;)ar.push(ar.shift())}(++cr);var dr=function(t,e){return ur[t-=0]};class lr extends jn{static get description(){return{fields:{sourcePosition:{type:"Position",id:1},howMany:{type:dr("0x0"),id:2},targetPosition:{type:"Position",id:3},wasUndone:{type:dr("0x1"),id:4}}}}}var hr,fr,pr=["string","Position","description","bool"];hr=pr,fr=227,function(t){for(;--t;)hr.push(hr.shift())}(++fr);var mr=function(t,e){return pr[t-=0]};class yr extends jn{static get[mr("0x3")](){return{fields:{position:{type:mr("0x2"),id:1},oldName:{type:mr("0x1"),id:2},newName:{type:mr("0x1"),id:3},wasUndone:{type:mr("0x0"),id:4}}}}}const _r=["range","description","string","root","fields"];var gr,vr;gr=_r,vr=303,function(t){for(;--t;)gr.push(gr.shift())}(++vr);const xr=function(t,e){return _r[t-=0]};class br extends Un{static get[xr("0x3")](){const t=Un[xr("0x3")];return delete t[xr("0x1")][xr("0x2")],t[xr("0x1")][xr("0x0")]={type:xr("0x4"),id:1},t}}var wr,Or,Sr=["Position","bool","uint32","description"];wr=Sr,Or=481,function(t){for(;--t;)wr.push(wr.shift())}(++Or);var Er=function(t,e){return Sr[t-=0]};class Tr extends jn{static get[Er("0x2")](){return{fields:{splitPosition:{type:Er("0x3"),id:1},graveyardPosition:{type:Er("0x3"),id:2},howMany:{type:Er("0x1"),id:3},insertionPosition:{type:Er("0x3"),id:4},wasUndone:{type:Er("0x0"),id:5}}}}}var kr,Cr,Ir=["shift","operationName","push","compress","types"];kr=Ir,Cr=412,function(t){for(;--t;)kr.push(kr.shift())}(++Cr);var Rr=function(t,e){return Ir[t-=0]};class Ar extends jn{[Rr("0x1")](t,e){e[Rr("0x3")](),t[Rr("0x2")].push(this.id)}decompress(t,e){e[Rr("0x2")][Rr("0x3")](),t[Rr("0x0")]({__className:this[Rr("0x4")]})}}const Nr=["length","name","compress","__className","_omittedNamespace","decompress","replace"];var Pr,Dr;Pr=Nr,Dr=207,function(t){for(;--t;)Pr.push(Pr.shift())}(++Dr);const jr=function(t,e){return Nr[t-=0]};class Mr extends er{constructor(t,e,s,n){super(t,e,s),this[jr("0x0")]=n+":"}[jr("0x5")](t,e){return!("MarkerOperation"!=e[0][jr("0x6")]||!e[0][jr("0x4")].startsWith(this[jr("0x0")])||(e[0].name=e[0][jr("0x4")][jr("0x2")](new RegExp("^"+this[jr("0x0")]),""),super[jr("0x5")](t,e),0))}[jr("0x1")](t,e){super[jr("0x1")](t,e);const s=t[t[jr("0x3")]-1];s[jr("0x4")]=this._omittedNamespace+s[jr("0x4")]}}const Br=["length","_compressSingleOperation","_splitCurrent","_compareOperations","types","_combineNext","push","decompress","_context","_decompressSingleOperation","buffers","shift","compress"];var Jr,Vr;Jr=Br,Vr=209,function(t){for(;--t;)Jr.push(Jr.shift())}(++Vr);const Ur=function(t,e){return Br[t-=0]};class Fr{constructor(t,e){this.id=t,this[Ur("0x7")]=e}[Ur("0xb")](t,e){let s;for(;e[Ur("0xc")]>1&&this[Ur("0x2")](e[0],e[1]);)s?(s=this[Ur("0x4")](e[Ur("0xa")](),s),t.types[Ur("0x5")](0)):(s=qs(e[Ur("0xa")]()),t[Ur("0x3")][Ur("0x5")](this.id));return!!s&&(s=this[Ur("0x4")](e[Ur("0xa")](),s),t[Ur("0x3")][Ur("0x5")](0),t[Ur("0x9")][Ur("0x5")](this[Ur("0x0")](s)),!0)}[Ur("0x6")](t,e){const s=this[Ur("0x8")](e);for(;0==e.types[0];)e[Ur("0x3")][Ur("0xa")](),t.push(this[Ur("0x1")](s));t.push(s)}}const qr=["data","buffers","substr","length","InsertOperation","_combineNext","_getCompressorByName","wasUndone","position","keys","decompress","_context","_decompressSingleOperation","nodes","every","attributes","from","compress"];var Lr,Yr;Lr=qr,Yr=488,function(t){for(;--t;)Lr.push(Lr.shift())}(++Yr);const Gr=function(t,e){return qr[t-=0]};class zr extends Fr{[Gr("0x3")](t,e){return e[Gr("0xb")][0][Gr("0x10")]+=t.nodes[0].data,e}_splitCurrent(t){const e=qs(t),s=e.nodes[0],n=t[Gr("0xb")][0],r=Array[Gr("0xe")](n[Gr("0x10")])[0],i=r.length;return s[Gr("0x10")]=r,n.data=n[Gr("0x10")][Gr("0x0")](i),t[Gr("0x6")]=Tn(t[Gr("0x6")],i),e}_compareOperations(t,e){if(Hr(t)&&Hr(e)){const s=t.nodes[0].data[Gr("0x1")],n=kn(Tn(t.position,s),e[Gr("0x6")]),r=t[Gr("0xb")][0],i=e[Gr("0xb")][0];return n&&function(t,e){const s=Object.keys(t[Gr("0xd")]||{}),n=Object[Gr("0x7")](e.attributes||{});return s[Gr("0x1")]===n.length&&s[Gr("0xc")]((s=>e[Gr("0xd")][s]&&e.attributes[s]===t[Gr("0xd")][s]))}(r,i)}return!1}_compressSingleOperation(t){const e={types:[],buffers:[],baseVersion:0};return this[Gr("0x9")][Gr("0x4")](Gr("0x2"))[Gr("0xf")](e,[t]),e[Gr("0x11")][0]}[Gr("0xa")](t){const e=[];return this[Gr("0x9")][Gr("0x4")](Gr("0x2"))[Gr("0x8")](e,t),e[0]}}function Hr(t){return Gr("0x2")==t.__className&&1==t[Gr("0xb")].length&&t[Gr("0xb")][0][Gr("0x10")]&&!t[Gr("0x5")]&&1==Array.from(t[Gr("0xb")][0].data)[Gr("0x1")]}const Wr=["_compareOperations","compress","$graveyard","targetPosition","_getCompressorByName","_compressSingleOperation","wasUndone","__className","MoveOperation","sourcePosition","decompress","buffers","howMany","root"];var Kr,$r;Kr=Wr,$r=357,function(t){for(;--t;)Kr.push(Kr.shift())}(++$r);const Zr=function(t,e){return Wr[t-=0]};class Xr extends Fr{_combineNext(t,e){return e[Zr("0x5")]++,e[Zr("0x2")]=qs(t[Zr("0x2")]),e}_splitCurrent(t){const e=qs(t);return t[Zr("0x5")]--,e.howMany=1,e.sourcePosition=Tn(e[Zr("0x2")],t[Zr("0x5")]),e}[Zr("0x7")](t,e){return!(!Qr(t)||!Qr(e))&&kn(Tn(t[Zr("0x2")],-1),e.sourcePosition)&&kn(t[Zr("0xa")],e[Zr("0xa")])}[Zr("0xc")](t){const e={types:[],buffers:[],baseVersion:0};return this._context[Zr("0xb")](Zr("0x1"))[Zr("0x8")](e,[t]),e[Zr("0x4")][0]}_decompressSingleOperation(t){const e=[];return this._context[Zr("0xb")](Zr("0x1"))[Zr("0x3")](e,t),e[0]}}function Qr(t){return"MoveOperation"==t[Zr("0x0")]&&Zr("0x9")==t[Zr("0xa")][Zr("0x6")]&&1==t[Zr("0x5")]&&!t[Zr("0xd")]}const ti=["targetPosition","_combineNext","howMany","_getCompressorByName","_context","root","wasUndone","_compressSingleOperation","sourcePosition","_decompressSingleOperation","__className","compress","decompress","MoveOperation"];var ei,si;ei=ti,si=367,function(t){for(;--t;)ei.push(ei.shift())}(++si);const ni=function(t,e){return ti[t-=0]};class ri extends Fr{[ni("0xc")](t,e){return e[ni("0xd")]++,e}_splitCurrent(t){const e=qs(t);return e[ni("0xd")]=1,t.howMany--,e}_compareOperations(t,e){return!(!ii(t)||!ii(e))&&kn(t[ni("0x5")],e[ni("0x5")])&&kn(t[ni("0xb")],e[ni("0xb")])}[ni("0x4")](t){const e={types:[],buffers:[],baseVersion:0};return this[ni("0x1")]._getCompressorByName(ni("0xa"))[ni("0x8")](e,[t]),e.buffers[0]}[ni("0x6")](t){const e=[];return this[ni("0x1")][ni("0x0")]("MoveOperation")[ni("0x9")](e,t),e[0]}}function ii(t){return ni("0xa")==t[ni("0x7")]&&"$graveyard"==t[ni("0xb")][ni("0x2")]&&1==t[ni("0xd")]&&!t[ni("0x3")]}const oi=["_decompressSingleOperation","user:","compress","start","startsWith","name","_context","newRange","split","end","user:position:","push","types","oldRange","_compressSingleOperation","MarkerOperation","__className","shift","buffers","toNone","_getCompressorByName"];var ai,ci;ai=oi,ci=494,function(t){for(;--t;)ai.push(ai.shift())}(++ci);const ui=function(t,e){return oi[t-=0]};class di extends Fr{[ui("0xc")](t,e){if(s=e[0],n=e[1],!(s&&n&&ui("0x4")==s[ui("0x5")]&&"MarkerOperation"==n[ui("0x5")]&&s.name[ui("0xe")](ui("0xb"))&&n[ui("0xf")][ui("0xe")](ui("0xb"))&&s[ui("0xf")]!=n[ui("0xf")]))return!1;var s,n;const r=e[ui("0x6")]();return r[ui("0x2")]=null,r[ui("0x11")]&&kn(r[ui("0x11")][ui("0xd")],r[ui("0x11")][ui("0x13")])&&(r[ui("0x11")][ui("0x13")]=null),e[ui("0x6")](),t[ui("0x1")][ui("0x0")](this.id),t.types.push(0),t[ui("0x7")][ui("0x0")](this[ui("0x3")](r)),!0}decompress(t,e){const s=this[ui("0xa")](e);s.newRange&&!s[ui("0x11")][ui("0x13")]&&(s[ui("0x11")][ui("0x13")]=qs(s.newRange.start));const n=qs(s);n.newRange&&(n[ui("0x11")][ui("0xd")].stickiness=ui("0x8"),n[ui("0x11")].end=qs(n[ui("0x11")][ui("0xd")])),n[ui("0xf")]=ui("0x14")+n.name[ui("0x12")](":")[2],e.types.shift(),t.push(s),t[ui("0x0")](n)}[ui("0x3")](t){const e={types:[],buffers:[],baseVersion:0};return this._context[ui("0x9")](ui("0x4")).compress(e,[t]),e[ui("0x7")][0]}[ui("0xa")](t){const e=[];return this[ui("0x10")]._getCompressorByName("MarkerOperation").decompress(e,t),e[0]}}const li=["Position","UserSelectionAction","_registerActionCompressor","_compressorByName","SplitOperation","_compressorById","get","Range","_registerCompressor","baseVersion","suggestion","getDescriptor","_protobufFactory","InsertOperation","TypingAction","SuggestionMarkerOperation","set","no-operations-provided","ForwardDeletingAction","types","registerDescriptor","description","length","DeletingAction","NoOperation","RootAttributeOperation","_registerOperationCompressor","decompress","_getCompressorByName","RenameOperation","comment","MergeOperation","compress","__className","MarkerOperation","CommentMarkerOperation","AttributeOperation"];var hi,fi;hi=li,fi=303,function(t){for(;--t;)hi.push(hi.shift())}(++fi);const pi=function(t,e){return li[t-=0]};class mi{constructor(){this[pi("0x23")]=new Map,this[pi("0x21")]=new Map,this[pi("0x5")]=new Hs,this[pi("0x5")].registerDescriptor(pi("0x1e"),Qs[pi("0x1e")]),this._protobufFactory.registerDescriptor(pi("0x0"),Qs[pi("0x0")]),this[pi("0x5")][pi("0xd")]("Element",Qs.Element),this._protobufFactory[pi("0xd")](pi("0x1d"),Un[pi("0xe")]),this[pi("0x5")][pi("0xd")](pi("0x6"),Hn[pi("0xe")]),this[pi("0x5")][pi("0xd")](pi("0x1b"),er[pi("0xe")]),this[pi("0x5")].registerDescriptor("MergeOperation",or[pi("0xe")]),this._protobufFactory.registerDescriptor("MoveOperation",lr[pi("0xe")]),this[pi("0x5")][pi("0xd")]("RenameOperation",yr[pi("0xe")]),this._protobufFactory[pi("0xd")]("RootAttributeOperation",br.description),this[pi("0x5")][pi("0xd")](pi("0x22"),Tr[pi("0xe")]),this._protobufFactory.build(),this[pi("0x1")](1,"NoOperation",new Ar(1,pi("0x11"))),this[pi("0x13")](10,pi("0x1d"),Un),this[pi("0x13")](11,"InsertOperation",Hn),this._registerOperationCompressor(12,pi("0x1b"),er),this[pi("0x13")](13,pi("0x18"),or),this[pi("0x13")](14,"MoveOperation",lr),this[pi("0x13")](15,pi("0x16"),yr),this._registerOperationCompressor(16,pi("0x12"),br),this._registerOperationCompressor(17,pi("0x22"),Tr);const t=this[pi("0x5")][pi("0x4")]("MarkerOperation");this[pi("0x1")](18,pi("0x1c"),new Mr(18,pi("0x1b"),t,pi("0x17"))),this[pi("0x1")](19,"SuggestionMarkerOperation",new Mr(19,pi("0x1b"),t,pi("0x3"))),this[pi("0x20")](100,"TypingAction",zr),this[pi("0x20")](101,pi("0x10"),Xr),this[pi("0x20")](102,pi("0xb"),ri),this._registerActionCompressor(103,pi("0x1f"),di)}[pi("0x13")](t,e,s){const n=new s(t,e,this[pi("0x5")][pi("0x4")](e));this[pi("0x1")](t,e,n)}[pi("0x20")](t,e,s){const n=new s(t,this);this[pi("0x1")](t,e,n)}[pi("0x1")](t,e,s){this[pi("0x23")][pi("0x9")](t,s),this[pi("0x21")][pi("0x9")](e,s)}_getCompressorByName(t){return this[pi("0x21")].get(t)}[pi("0x19")](t){if(!t||!t[0])throw new e.CKEditorError(pi("0xa"),this);const s={types:[],buffers:[],baseVersion:t[0].baseVersion};for(;t[pi("0xf")];)this[pi("0x15")](pi("0x1f"))[pi("0x19")](s,t)||this[pi("0x15")](pi("0x7")).compress(s,t)||this._getCompressorByName(pi("0x10"))[pi("0x19")](s,t)||this._getCompressorByName(pi("0xb"))[pi("0x19")](s,t)||this[pi("0x15")](pi("0x1c"))[pi("0x19")](s,t)||this[pi("0x15")](pi("0x8"))[pi("0x19")](s,t)||this._getCompressorByName(t[0][pi("0x1a")])[pi("0x19")](s,t);return s}[pi("0x14")](t){const e=[];for(;t.types[pi("0xf")];)this[pi("0x23")][pi("0x24")](t[pi("0xc")][0])[pi("0x14")](e,t);return e.forEach(((e,s)=>e[pi("0x2")]=t[pi("0x2")]+s)),e}}var yi=__webpack_require__(7622),_i=__webpack_require__.n(yi),gi=__webpack_require__(7530),vi=__webpack_require__.n(gi);let xi=1;class bi extends t.Plugin{static get requires(){return[l,y,E,t.PendingActions,r.Users,n.Notification]}static get pluginName(){return"RealTimeCollaborationClient"}get cloudDocumentVersion(){return this._lastServerVersion+this._offset}get _lastServerVersion(){const t=this.serverHistory._operations;return t.length?t[t.length-1].baseVersion+1-this._offset:0}get lastSyncVersion(){const t=this.serverHistory._operations;let e=t.length;for(;e--;){const s=t[e];if(!this._disconnectionOperations.has(s))return s.baseVersion+1-this._offset}return 0}init(){const t=this.editor,n=t.plugins.get(r.Users),i=t.plugins.get(l);if(this._offset=0,this.sessionId=null,this.serverHistory=new s.History,this.editor.config.define("collaboration",{}),this._channelId=t.config.get("collaboration.channelId"),!this._channelId)throw new e.CKEditorError("collaboration-missing-channelid",this);this.listenTo(n,"getOperationAuthor",((t,e)=>{const s=e[0];s._authorId&&(t.return=n.getUser(s._authorId),t.stop()),null===s._authorId&&(t.return=null,t.stop())}),{priority:"high"});const o=t.config.get("cloudServices.bundleVersion")||e.version;this._service=new bi.CollaborativeEditingService(o,this._channelId),this._document=this.editor.model.document,this._compressor=new mi,this._bufferedOperations=[],this._knownOperations=new WeakSet,this.set("_isPendingUpdate",!1),this.set("_hasSynchronizationProblem",!1),this._pendingAction=null,this._hasSelectionChanged=!1,this._sendBufferedOperationsDelayId=null,this._baseBufferDelay=300,this._currentBufferDelay=this._baseBufferDelay,this._lastSyncedOperationId=null,this._disconnectionOperations=new WeakSet,this._operationIdentifier=new Si(this._disconnectionOperations),this.listenTo(t.model.document.selection,"change:range",((t,e)=>{e.directChange&&this._refreshUserSelectionMarkers()})),this.listenTo(t.editing.view,"change:hasDomSelection",(()=>{this._refreshUserSelectionMarkers()})),this._initThrowingOnDataSet(),t.plugins.get(l).addToReconnectionStack(this),t.model.on("applyOperation",((t,e)=>{const s=e[0];s.isDocumentOperation&&(this._saveOperationInBuffer(s),this._shouldSendUpdate()&&this._sendBufferedOperationsDelayed())})),this._setUpDataInit(),this.bind("_isEditingAllowed").to(i,"state",this,"_hasSynchronizationProblem",((t,e)=>"connected"===t&&!e)),this.on("change:_isEditingAllowed",(()=>{this._isEditingAllowed?t.disableReadOnlyMode("rtc-offline"):t.enableReadOnlyMode("rtc-offline")})),this._isEditingAllowed?t.disableReadOnlyMode("rtc-offline"):t.enableReadOnlyMode("rtc-offline"),this.set("_isConnected",!1)}async reconnect(){const t=this.editor.plugins.get(y),e=this.editor.plugins.get(l);try{this._isPendingUpdate=!0,t.unregister(this._channelId);const s=await this._service.reconnect(e.connection,this.lastSyncVersion);await this._handleReconnectionResponse(s)&&(this._isPendingUpdate=!1,this._clearPendingAction());const n=await this._service.getConnectedSessions();t.register(this._channelId,n),this._handleSendingSelectionMarkers(),this._isConnected=!0}catch(t){if("404"===t.code&&this.sessionId)await this._connectAfterSessionHasBeenFlushed();else if("409"===t.code){const t=(0,this.editor.t)("The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.");this._handleReconnectionError(t)}else{if(!(t instanceof wi))throw t;this._handleReconnectionError()}}}destroy(){const t=this.editor.plugins.get(l),e=this.editor.plugins.get(y);this.editor.enableReadOnlyMode("rtc-destroyed"),e.channelSessions.has(this._channelId)&&e.unregister(this._channelId),t.removeFromReconnectionStack(this),this._disconnectService(),super.destroy()}async _handleReconnectionResponse(t){if(this.sessionId!==t.sessionId&&this._lastSyncedOperationId!==t.lastOperationId)throw new wi;return this.sessionId=t.sessionId,this._handleServerResponse([],{...t,wereChangesApplied:!1,data:t.data},"reconnect")}async _connectService(t,e=!1){const{connection:s}=this.editor.plugins.get(l);bi.CollaborativeEditingService.getConnectedSessions(s,this._channelId).then((t=>this._initSessionsHandling(t))).catch((t=>{this._crash("realtimecollaborationclient-init-session-connection-error",t)})),this.listenTo(this._service,"operationsReceived",this._handleReceivedOperations.bind(this)),this.listenTo(this._service,"error",((t,e)=>{this._crash("realtimecollaborationclient-initservice-internal-error",e)})),this.listenTo(this._service,"disconnected",(()=>{this._isConnected=!1}));const n=this._operationIdentifier.getIdOfTheLastOperation(t),r=await this._service.connect(s,this._compressOperations(t),n);if(this.sessionId=r.sessionId,r.wereChangesApplied&&(this._isPendingUpdate=!1,this._clearPendingAction()),e){if(!r.wereChangesApplied)return void this._handleReconnectionError();this._offset=r.offset,this.serverHistory._operations=[],await this._handleServerResponse(t,r,"reconnection: flushed session")}else await this._handleConnectionData(r,t);this._handleSendingSelectionMarkers(),this._isConnected=!0}_handleSendingSelectionMarkers(){const t=this.editor.plugins.get(y),e=t.channelSessions.get(this._channelId);e&&e.length>1?(this._hasSelectionChanged=!0,this._sendBufferedOperationsDelayed()):this.listenTo(t,"sessionAdd:"+this._channelId,(e=>{t.channelSessions.get(this._channelId).length>1&&(this._hasSelectionChanged=!0,this._sendBufferedOperationsDelayed(),e.off())}))}async _handleReceivedOperations(t,e,s,n){if(!this._isPendingUpdate&&this._document.version==e){const t=this._decompressOperations(s,n);await this._fetchMissingUsers(t),this._handleExternalOperations(t,e,s.lastOperationId)||this._crash("realtimecollaborationclient-initservice-incorrect-server-operation")}}async _connectAfterSessionHasBeenFlushed(){this._disconnectService();const t=this.editor.t;let e;try{e=await this._service.getDocumentDetails()}catch(e){const s=t("The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.");return void this._handleReconnectionError(s)}const s=e.currentDocumentSession||e.lastDocumentSession;if(this._lastSyncedOperationId===s.lastOperationId)await this._connectService(this.editor.model.document.history.getOperations(),!0);else{const e=t("The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.");this._handleReconnectionError(e)}}_disconnectService(){this._service.disconnect(),this._bufferedOperations=[],clearTimeout(this._sendBufferedOperationsDelay),this.stopListening(this._service)}_initSessionsHandling(t){const e=this.editor.plugins.get(y);this.listenTo(e,"sessionAdd:"+this._channelId,((t,{session:s})=>{if(s.id===e.mySessionId){t.off();const e=this.editor.plugins.has("CommentsOnly")&&this.editor.plugins.get("CommentsOnly");let n=s.permissions;e&&e.isEnabled&&(n=n.filter((t=>"document:write"!==t))),this.editor.plugins.get("Permissions").setPermissions(n,this._channelId)}})),e.register(this._channelId,t)}_initThrowingOnDataSet(){const t=this.editor.data.set;this.editor.data.set=(...s)=>{if(!s[s.length-1].suppressErrorInCollaboration)throw new e.CKEditorError("realtimecollaborationclient-editor-setdata-and-editor-data-set-are-forbidden-in-real-time-collaboration",this);t.apply(this.editor.data,s)}}_setUpDataInit(){this.editor.data.on("init",((t,[s])=>{if(this._document.version)throw new e.CKEditorError("realtimecollaborationclient-init-document-already-initialized",this);t.stop(),this._setPendingAction();const n=this._getOperationsFromInitData(s);t.return=this._connectService(n).then((()=>{this.editor.data.fire("ready")})).catch((t=>this._crash("realtimecollaborationclient-init-connection-failed",t))).finally((()=>this._clearPendingAction()))}),{priority:"high"})}_fetchMissingUsers(t){const e=this.editor.plugins.get(r.Users),{connection:s}=this.editor.plugins.get(l),n=new Set;for(const s of t)(i=s._authorId)&&!e.getUser(i)&&n.add(i);var i;return Promise.all(Array.from(n,(async t=>{const n=await vi().get(s,t);e.getUser(t)||e.addUser(n)})))}_getOperationsFromInitData(t){const n=this.editor.model,r=[];let i=0;const o="string"==typeof t?{main:t}:t;for(const t of Object.keys(o)){if(!this._document.roots.has(t))throw new e.CKEditorError("realtimecollaborationclient-init-non-existent-root",this);const a=this.editor.data.parse(o[t]),c=this._document.getRoot(t),u=new s.InsertOperation(n.createPositionAt(c,0),a,i++);r.push(u);for(const[t,e]of a.markers){const o=n.createRange(n.createPositionFromPath(c,e.start.path.slice()),n.createPositionFromPath(c,e.end.path.slice())),a=new s.MarkerOperation(t,null,o,n.markers,!0,i++);r.push(a)}}return r}async _handleConnectionData(t,e){let s;this._offset=t.offset;const n=t.wereChangesApplied&&!t.initData;if(n)s=e;else{if(t.initData){const e=this._getOperationsFromInitData(t.initData);this._document.version=-e.length,e.forEach((t=>{t.baseVersion-=e.length})),this._applyOperationsSet(e,!0),this._updateServerHistory(e)}this._document.version=t.data.baseVersion,s=this._decompressOperations(t.data,t.metadata),await this._fetchMissingUsers(s)}t.lastOperationId&&(this._operationIdentifier.setIdForTheLastOperation(s,t.lastOperationId),this._lastSyncedOperationId=t.lastOperationId),this._applyOperationsSet(s,n),this._updateServerHistory(s)}_crash(t,s){throw this._isPendingUpdate=!0,s&&console.error(s),new e.CKEditorError(t,this.editor)}_saveOperationInBuffer(t){this._knownOperations.has(t)||(this._knownOperations.add(t),this._bufferedOperations.push(t),this._pendingAction||"marker"==t.type&&!t.affectsData||this._setPendingAction())}_sendBufferedOperationsDelayed(t=!1){!t&&this._isPendingUpdate||(this._isPendingUpdate=!0,clearTimeout(this._sendBufferedOperationsDelayId),this._sendBufferedOperationsDelayId=setTimeout((()=>{this._sendBufferedOperations().then((t=>{t&&(this._clearPendingAction(),this._isPendingUpdate=!1)})).catch((t=>{if(this._clearPendingAction(),this._isPendingUpdate=!1,!((e=t).message.startsWith("cloud-services-internal-error: Not connected.")||e.message.startsWith("cloud-services-internal-error: Collaborative Editing Service is not connected.")||e.message.startsWith("cloud-services-internal-error: Request timeout.")))throw t;var e}))}),this._currentBufferDelay))}async _sendBufferedOperations(){const t=this.editor.plugins.get(E);if(this._shouldSendSelectionUpdate()&&(t.createUserMarkerOperations(),this._hasSelectionChanged=!1),!this._shouldSendUpdate())return!0;const e=[...this._bufferedOperations];for(const t of e)t.wasUndone=this._document.history.isUndoneOperation(t);const s=this._operationIdentifier.getIdOfTheLastOperation(e),n=xi++,r=this._compressOperations(e),i=await this._service.sendOperations(r,r.baseVersion,s);try{return await this._handleServerResponse(e,i,n)}catch(t){return this._crash("realtimecollaborationclient-sendbufferedoperations",t)}}async _handleServerResponse(t,e,s){if(e.error)throw e.error;let n=!1;if(e.wereChangesApplied)this._bufferedOperations=this._bufferedOperations.filter((e=>!t.includes(e))),this._lastSyncedOperationId=e.lastOperationId,this._updateServerHistory(t),n=!0,this._currentBufferDelay=this._baseBufferDelay;else{const t=this._decompressOperations(e.data,e.metadata).filter((t=>t.baseVersion>=this._lastServerVersion));await this._fetchMissingUsers(t),n=this._handleExternalOperations(t,e.version,e.lastOperationId),this._currentBufferDelay=Math.round(this._currentBufferDelay/2)}return n?!this._shouldSendUpdate()||(this._sendBufferedOperationsDelayed(!0),!1):this._crash("realtimecollaborationclient-handleserverresponse")}_handleExternalOperations(t,e,n){try{const r={document:this._document,useRelations:!1,padWithNoOps:!0},{operationsA:i,operationsB:o,originalOperations:a}=(0,s.transformSets)(t,this._bufferedOperations,r);Oi(i,this._document.version),Oi(o,e);for(const t of i){const e=a.get(t);t._authorId=e?e._authorId:null}this._lastSyncedOperationId=n,this._operationIdentifier.setIdForTheLastOperation(t,n),this._bufferedOperations=[...o],this._applyOperationsSet(i),this._updateServerHistory(t)}catch(t){return console.error(t),!1}return!0}_applyOperationsSet(t,e=!1){this.editor.model.enqueueChange({isUndoable:!1,isLocal:!1},(e=>{for(const s of t)this._knownOperations.add(s),e.batch.addOperation(s),this.editor.model.applyOperation(s)}))}_updateServerHistory(t){t.forEach((t=>{const e=t.clone();e._authorId=t._authorId,e.baseVersion+=this._offset,t.isDisconnection&&this._disconnectionOperations.add(e),this.serverHistory.addOperation(e)}))}_handleReconnectionError(t){const e=this.editor.plugins.get("Notification"),s=this.editor.t;t||(t=s("The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor.")),e.showWarning(t,{title:s("Synchronization issue"),namespace:"real-time-collaboration"}),this._hasSynchronizationProblem=!0,clearTimeout(this._sendBufferedOperationsDelayId),this._bufferedOperations=[],this.editor.plugins.get(l).destroy()}_setPendingAction(){if(!this._pendingAction){const{t:e}=this.editor.locale;this._pendingAction=this.editor.plugins.get(t.PendingActions).add(e({string:"Sending data to the server.",id:"PENDING_ACTION_SENDING_DATA"}))}}_clearPendingAction(){this._pendingAction&&(this.editor.plugins.get(t.PendingActions).remove(this._pendingAction),this._pendingAction=null)}_compressOperations(t){const e=t.map((t=>t.toJSON()));return this._compressor.compress(e)}_decompressOperations(t,e){const n=this._compressor.decompress(t).map(((t,n)=>{const r=s.OperationFactory.fromJSON(t,this._document);return r.wasUndone=t.wasUndone,"cs:removeUser"===e[n].type&&(r.isDisconnection=!0),r}));return this._assignOperationAuthors(n,e),n}_assignOperationAuthors(t,e){for(let s=0;s<t.length;s++)"init"!=e[s].type?t[s]._authorId=e[s].userId:t[s]._authorId=null}_refreshUserSelectionMarkers(){this._hasSelectionChanged=!0,this._shouldSendSelectionUpdate()&&this._sendBufferedOperationsDelayed()}_shouldSendSelectionUpdate(){const t=this.editor.plugins.get(y).channelSessions.get(this._channelId);return!this.editor.isReadOnly&&t&&t.length>1&&this._hasSelectionChanged}_shouldSendUpdate(){return this._bufferedOperations.length>0||this._shouldSendSelectionUpdate()}}class wi extends Error{}function Oi(t,e){for(const s of t)s.baseVersion=e++}bi.CollaborativeEditingService=_i();class Si{constructor(t){this._ignoredOperations=t,this._operationToId=new WeakMap}getIdOfTheLastOperation(t){let s=t.length;for(;s--;){const n=t[s];if(!this._ignoredOperations.has(n)){if(!this._operationToId.has(n)){const t=(0,e.uid)().slice(1,18);this._operationToId.set(n,t)}return this._operationToId.get(n)}}}setIdForTheLastOperation(t,e){if(!e)return;let s=t.length;for(;s--;){const n=t[s];this._ignoredOperations.has(n)||this._operationToId.set(n,e)}}}var Ei,Ti,ki=["requires","RealTimeCollaborativeEditing"];Ei=ki,Ti=443,function(t){for(;--t;)Ei.push(Ei.shift())}(++Ti);var Ci=function(t,e){return ki[t-=0]};class Ii extends t.Plugin{static get[Ci("0x1")](){return[bi]}static get pluginName(){return Ci("0x0")}}var Ri=__webpack_require__(125),Ai=__webpack_require__.n(Ri),Ni=__webpack_require__(6042),Pi=__webpack_require__.n(Ni);const Di=["assign","cloud-services-internal-error: Not connected.","addComment","commentThreadId","cloud-services-internal-error: Request timeout.","register","commentAdded","setPermissions","unregister","cloudservicescommentsadapter-disconnect-not-exist","plugins","addToReconnectionStack","addCommentThread","connect","_connectService","removeComment","has","_terminateService","catch","init","destroy","comments","context","getComment","cloud-services-internal-error: Comments Service is not connected.","_fetchMissingUsersForThreads","hasCommentThread","mySessionId","getCommentThread","_setUpService","_getService","requires","CommentsService","attributes","disconnect","sessionAdd:","adapter","set","commentId","getConnectedSessions","cloudservicescommentsadapter-connect-already-connected","delete","listenTo","config","removeCommentThread","update","commentRemoved","startsWith","CommentsRepository","getCommentThreads","content","commentUpdated","map","collaboration.channelId","Permissions","createdAt","remove","reconnect","message","code","_services","getUser","get","userId","from"];var ji,Mi;ji=Di,Mi=248,function(t){for(;--t;)ji.push(ji.shift())}(++Mi);const Bi=function(t,e){return Di[t-=0]};class Ji extends t.ContextPlugin{static get[Bi("0x2b")](){return[l,Bi("0x3c"),y,r.Users]}constructor(t){super(t),this[Bi("0x7")]=new Map}async[Bi("0x1f")](){const e=this[Bi("0x22")],s=e[Bi("0x16")][Bi("0x9")](Bi("0x3c"));if(e[Bi("0x16")][Bi("0x9")](l)[Bi("0x17")](this),s[Bi("0x30")]={getCommentThread:async({channelId:t,threadId:e})=>{const s=await this._getService(t)[Bi("0x28")](e)[Bi("0x1e")](Ui);return await this._fetchMissingUsersForThreads([s]),{threadId:s[Bi("0xf")],comments:s[Bi("0x21")][Bi("0x40")](Fi)}},removeCommentThread:({channelId:t,threadId:e})=>this[Bi("0x2a")](t)[Bi("0x38")](e).catch(Vi).catch(Ui),addComment:({channelId:t,threadId:e,commentId:s,content:n,attributes:r})=>this._getService(t)[Bi("0xe")](e,s,n,r)[Bi("0x1e")](Ui),updateComment:({channelId:t,threadId:e,commentId:s,content:n,attributes:r})=>this[Bi("0x2a")](t).updateComment(e,s,n,r).catch(Vi)[Bi("0x1e")](Ui),removeComment:({channelId:t,threadId:e,commentId:s})=>this[Bi("0x2a")](t)[Bi("0x1b")](e,s).catch(Vi)[Bi("0x1e")](Ui)},e instanceof t.Context){const t=e[Bi("0x37")][Bi("0x9")](Bi("0x0")),s=e.plugins[Bi("0x9")](y);await this[Bi("0x29")](t);const n=await this[Bi("0x7")].get(t)[Bi("0x33")]();this[Bi("0x36")](s,Bi("0x2f")+t,((e,{session:n})=>{n.id===s[Bi("0x27")]&&(e.off(),this[Bi("0x22")][Bi("0x16")].get(Bi("0x1"))[Bi("0x13")](n.permissions,t))})),s[Bi("0x11")](t,n)}}async _setUpService(t){if(this[Bi("0x7")][Bi("0x1c")](t))throw new e.CKEditorError(Bi("0x34"),null,{channelId:t});const s=this[Bi("0x22")][Bi("0x16")][Bi("0x9")](Bi("0x3c")),n=new(Ji[Bi("0x2c")])(t);this[Bi("0x7")][Bi("0x31")](t,n),this[Bi("0x36")](n,"commentThreadRemoved",((t,{commentThreadId:e})=>{const n=s[Bi("0x28")](e);n&&n[Bi("0x3")]({isFromAdapter:!0})})),this[Bi("0x36")](n,Bi("0x12"),((e,n)=>{const r=n[Bi("0xf")];s[Bi("0x26")](r)||s[Bi("0x18")]({channelId:t,threadId:r,isFromAdapter:!0});const i=s[Bi("0x28")](r);i&&i.addComment(Object[Bi("0xc")](Fi(n),{isFromAdapter:!0}))})),this[Bi("0x36")](n,Bi("0x3f"),((t,{commentThreadId:e,commentId:n,content:r,attributes:i})=>{const o=s[Bi("0x28")](e);if(o){const t=o[Bi("0x23")](n);t&&t.update({content:r,attributes:i,isFromAdapter:!0})}})),this[Bi("0x36")](n,Bi("0x3a"),((t,{commentThreadId:e,commentId:n})=>{const r=s.getCommentThread(e);if(r){const t=r[Bi("0x23")](n);t&&t[Bi("0x3")]({isFromAdapter:!0})}})),await this._connectService(t)}[Bi("0x20")](){if(this[Bi("0x22")]instanceof t.Context){const t=this[Bi("0x22")][Bi("0x37")][Bi("0x9")]("collaboration.channelId");this[Bi("0x1d")](t)}}[Bi("0x1d")](t){if(!this[Bi("0x7")][Bi("0x1c")](t))throw new e.CKEditorError(Bi("0x15"),null,{channelId:t});this._getService(t)[Bi("0x2e")](),this[Bi("0x7")][Bi("0x35")](t)}async[Bi("0x4")](){for(const t of this[Bi("0x7")].keys())await this[Bi("0x1a")](t);if(this.context instanceof t.Context){const t=this[Bi("0x22")][Bi("0x37")].get(Bi("0x0")),e=this[Bi("0x22")][Bi("0x16")][Bi("0x9")](y);e[Bi("0x14")](t);const s=await this._services[Bi("0x9")](t)[Bi("0x33")]();e[Bi("0x11")](t,s)}}async[Bi("0x1a")](t){const{connection:e}=this[Bi("0x22")][Bi("0x16")].get(l),s=this[Bi("0x22")][Bi("0x16")][Bi("0x9")]("CommentsRepository"),n=this[Bi("0x7")][Bi("0x9")](t),r=await n[Bi("0x19")](e);await this[Bi("0x25")](r);const i=new Set(Array[Bi("0xb")](s[Bi("0x3d")]({channelId:t}),(t=>t.id)));for(const t of r)i[Bi("0x35")](t.commentThreadId);for(const t of i)s[Bi("0x28")](t)[Bi("0x3")]({isFromAdapter:!0});for(const e of r){let n=s[Bi("0x28")](e[Bi("0xf")]);n||(n=s[Bi("0x18")]({channelId:t,threadId:e.commentThreadId,isFromAdapter:!0}));const r=new Set(Array[Bi("0xb")](n[Bi("0x21")],(t=>t.id)));for(const t of e[Bi("0x21")])r.delete(t[Bi("0x32")]);for(const t of r)n[Bi("0x23")](t)[Bi("0x3")]({isFromAdapter:!0});for(const t of e.comments){const e=n[Bi("0x23")](t[Bi("0x32")]);e?e[Bi("0x3e")]!==t.content&&e[Bi("0x39")]({content:t[Bi("0x3e")],isFromAdapter:!0}):n[Bi("0xe")](Object.assign(Fi(t),{isFromAdapter:!0}))}}}[Bi("0x2a")](t){if(!this[Bi("0x7")].has(t))throw new e.CKEditorError("cloudservicescommentsadapter-service-not-exist",null,{channelId:t});return this[Bi("0x7")][Bi("0x9")](t)}[Bi("0x25")](t){const e=this.context[Bi("0x16")][Bi("0x9")](r.Users),{connection:s}=this[Bi("0x22")][Bi("0x16")].get(l),n=new Set;for(const{comments:s}of t)for(const{userId:t}of s)e[Bi("0x8")](t)||n.add(t);return Promise.all(Array[Bi("0xb")](n,(async t=>{const n=await vi()[Bi("0x9")](s,t);e[Bi("0x8")](t)||e.addUser(n)})))}}async function Vi(t){if("404"!==t[Bi("0x6")])throw t}function Ui(t){if((e=t).message[Bi("0x3b")](Bi("0x24"))||e[Bi("0x5")][Bi("0x3b")](Bi("0xd"))||e[Bi("0x5")][Bi("0x3b")](Bi("0x10")))return new Promise((()=>{}));var e;throw t}function Fi(t){return{threadId:t[Bi("0xf")],commentId:t[Bi("0x32")],content:t[Bi("0x3e")],createdAt:t[Bi("0x2")],authorId:t[Bi("0xa")],attributes:t[Bi("0x2d")]}}Ji[Bi("0x2c")]=Pi();const qi=["state","originalSuggestionId","find","map","type","connect","connection","message","startsWith","init","requires","get","reconnect","suggestionUpdated","_trackChangesService","_waitForServiceReady","TrackChangesService","plugins","getUser","addSuggestionData","then","_bufferedRequests","hasSuggestion","collaboration.channelId","editor","cloud-services-internal-error: Request timeout.","add","open","all","update","catch","from","addToReconnectionStack","_fetchMissingUsersForThreads","delete","addUser","config","off","_saved","listenTo","isConnected","connected","data","attributes","TrackChangesEditing"];var Li,Yi;Li=qi,Yi=255,function(t){for(;--t;)Li.push(Li.shift())}(++Yi);const Gi=function(t,e){return qi[t-=0]};class zi extends t.Plugin{static get[Gi("0x19")](){return[Ji,"TrackChangesEditing",l]}constructor(t){super(t),this[Gi("0x24")]=new Map}[Gi("0x18")](){const t=this[Gi("0x27")][Gi("0x20")][Gi("0x1a")](l),e=this[Gi("0x27")][Gi("0x20")][Gi("0x1a")](Gi("0xe")),s=this[Gi("0x27")][Gi("0x6")].get(Gi("0x26"));return t[Gi("0x2")](this),this[Gi("0x1d")]=new(zi[Gi("0x1f")])(s),e.adapter={getSuggestion:async t=>{await this[Gi("0x1e")]();const e=await this[Gi("0x1d")][Gi("0x1a")](t)[Gi("0x0")](Hi);return await this[Gi("0x3")]([e]),e},addSuggestion:async({id:t,type:e,data:s,originalSuggestionId:n,attributes:r})=>{await this[Gi("0x1e")]();const i={id:t,type:e,data:s,originalSuggestionId:n,attributes:r},o=await this[Gi("0x1d")][Gi("0x29")](t,e,s,n,r)[Gi("0x0")]((e=>{if(Wi(e))return new Promise((e=>{this[Gi("0x24")].set(t,{resolve:e,suggestionData:i})}));throw e}));return this._bufferedRequests[Gi("0x4")](t),o},updateSuggestion:async(t,e)=>{if(await this[Gi("0x1e")](),Gi("0x2a")!==e[Gi("0xf")])return this[Gi("0x1d")][Gi("0x2c")](t,e)[Gi("0x0")](Hi)}},this[Gi("0x9")](this[Gi("0x1d")],Gi("0x1c"),((t,s)=>{e[Gi("0x25")](s.id)&&(e.getSuggestion(s.id).attributes=s[Gi("0xd")])})),this[Gi("0x1d")][Gi("0x14")](t[Gi("0x15")])[Gi("0x23")]((t=>this._fetchMissingUsersForThreads(t)[Gi("0x23")]((()=>{for(const s of t)e[Gi("0x22")](s)[Gi("0x8")]=!0}))))}async[Gi("0x1b")](){const t=this[Gi("0x27")][Gi("0x20")][Gi("0x1a")](Gi("0xe")),{connection:e}=this[Gi("0x27")].plugins.get(l),s=await this._trackChangesService[Gi("0x14")](e);await this[Gi("0x3")](s);for(const{suggestionData:t,resolve:e}of this[Gi("0x24")].values()){let n=s[Gi("0x11")]((e=>e.id===t.id));n||(n=await this[Gi("0x1d")][Gi("0x29")](t.id,t[Gi("0x13")],t[Gi("0xc")],t[Gi("0x10")])),e(n)}for(const e of s)t[Gi("0x25")](e.id)||t.addSuggestionData(e)}async[Gi("0x1e")](){this[Gi("0x1d")][Gi("0xa")]||await new Promise((t=>{this[Gi("0x9")](this[Gi("0x1d")],Gi("0xb"),(e=>{e[Gi("0x7")](),t()}))}))}_fetchMissingUsersForThreads(t){const e=this[Gi("0x27")][Gi("0x20")][Gi("0x1a")](r.Users),{connection:s}=this[Gi("0x27")].plugins.get(l),n=new Set;for(const{authorId:s}of t)e[Gi("0x21")](s)||n[Gi("0x29")](s);return Promise[Gi("0x2b")](Array[Gi("0x1")](n)[Gi("0x12")]((t=>vi().get(s,t)[Gi("0x23")]((s=>{e.getUser(t)||e[Gi("0x5")](s)})))))}}function Hi(t){if(Wi(t))return new Promise((()=>{}));throw t}function Wi(t){return t.message[Gi("0x17")]("cloud-services-internal-error: Not connected.")||t[Gi("0x16")][Gi("0x17")](Gi("0x28"))}zi[Gi("0x1f")]=Ai();const Ki=["editor","change:state","data","RealTimeCollaborativeComments","get","init","collaboration.channelId","once","pluginName","destroy","ready","requires","config","CommentsEditing","_setUpService","Comments","plugins","switchReadOnly","CommentsRepository"];var $i,Zi;$i=Ki,Zi=321,function(t){for(;--t;)$i.push($i.shift())}(++Zi);const Xi=function(t,e){return Ki[t-=0]};class Qi extends t.Plugin{static get[Xi("0xd")](){return[Xi("0x11"),Ji,Ii,l]}static get[Xi("0xa")](){return Xi("0x5")}[Xi("0x7")](){const t=this[Xi("0x2")][Xi("0x12")].get(l),e=this[Xi("0x2")].plugins.get(Xi("0xf")),s=this[Xi("0x2")][Xi("0x12")][Xi("0x6")](Ji);return this[Xi("0x2")][Xi("0x4")][Xi("0x9")](Xi("0xc"),(()=>{this.listenTo(t,"change:state",((t,s,n)=>{e.isThreadsLoadingPaused="connected"!==n}))})),this.listenTo(t,Xi("0x3"),((t,e,s)=>{this[Xi("0x2")].plugins[Xi("0x6")](Xi("0x1"))[Xi("0x0")]("connected"!==s)})),s[Xi("0x10")](this.editor[Xi("0xe")].get("collaboration.channelId"))}[Xi("0xb")](){this.editor.plugins.get(Ji)._terminateService(this[Xi("0x2")].config[Xi("0x6")](Xi("0x8"))),super[Xi("0xb")]()}}var to,eo,so=["RealTimeCollaborativeTrackChanges","TrackChanges","pluginName"];to=so,eo=140,function(t){for(;--t;)to.push(to.shift())}(++eo);var no=function(t,e){return so[t-=0]};class ro extends t.Plugin{static get requires(){return[Qi,zi,no("0x2")]}static get[no("0x0")](){return no("0x1")}}const io=function(){return G.Date.now()};var oo=/\s/;const ao=function(t){for(var e=t.length;e--&&oo.test(t.charAt(e)););return e};var co=/^\s+/;const uo=function(t){return t?t.slice(0,ao(t)+1).replace(co,""):t};const lo=function(t){return"symbol"==typeof t||Kt(t)&&"[object Symbol]"==et(t)};var ho=/^[-+]0x[0-9a-f]+$/i,fo=/^0b[01]+$/i,po=/^0o[0-7]+$/i,mo=parseInt;const yo=function(t){if("number"==typeof t)return t;if(lo(t))return NaN;if(st(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=st(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=uo(t);var s=fo.test(t);return s||po.test(t)?mo(t.slice(2),s?2:8):ho.test(t)?NaN:+t};var _o=Math.max,go=Math.min;const vo=function(t,e,s){var n,r,i,o,a,c,u=0,d=!1,l=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var s=n,i=r;return n=r=void 0,u=e,o=t.apply(i,s)}function p(t){return u=t,a=setTimeout(y,e),d?f(t):o}function m(t){var s=t-c;return void 0===c||s>=e||s<0||l&&t-u>=i}function y(){var t=io();if(m(t))return _(t);a=setTimeout(y,function(t){var s=e-(t-c);return l?go(s,i-(t-u)):s}(t))}function _(t){return a=void 0,h&&n?f(t):(n=r=void 0,o)}function g(){var t=io(),s=m(t);if(n=arguments,r=this,c=t,s){if(void 0===a)return p(c);if(l)return clearTimeout(a),a=setTimeout(y,e),f(c)}return void 0===a&&(a=setTimeout(y,e)),o}return e=yo(e)||0,st(s)&&(d=!!s.leading,i=(l="maxWait"in s)?_o(yo(s.maxWait)||0,e):i,h="trailing"in s?!!s.trailing:h),g.cancel=function(){void 0!==a&&clearTimeout(a),u=0,n=c=r=a=void 0},g.flush=function(){return void 0===a?o:_(io())},g};var xo=__webpack_require__(8811),bo=__webpack_require__.n(xo);class wo extends t.Plugin{static get requires(){return[l,bi,"RevisionTracker",y,r.Users]}async init(){this._lastRequestId=null,this._revisionTracker=this.editor.plugins.get("RevisionTracker");const t=this.editor.plugins.get(bi),s=t.serverHistory,n=this.editor.plugins.get(l);n.addToReconnectionStack(this);const r=this.editor.config.get("collaboration.channelId");this._revisionHistoryService=new wo.RevisionHistoryService(r),this._revisionTracker.setSource({history:s,getLatestVersion:()=>this._getLatestVersion(),getCurrentRevisionId:()=>t.sessionId}),this._revisionTracker.adapter={getRevision:async({revisionId:t})=>(await this._waitForServiceReady(),await this._revisionHistoryService.getRevision(t)),updateRevisions:async t=>{await this._waitForServiceReady();const e=this._revisionTracker.currentRevision;for(const s of t)s.id===e.id&&(s.isEmptyCurrent=s.fromVersion===s.toVersion);this._revisionHistoryService.updateRevisions(t,this._lastRequestId).then((t=>{this._lastRequestId=t})).catch((e=>{if(!(Oo(e)||"400"===e.code&&void 0!==e.data.wrongRequestId))throw e;for(const e of t)!this._revisionTracker.repository.getRevision(e.id)||this._revisionTracker._bufferUpdate(e.id,e,!1);if(Oo(e))throw e}))}},this.listenTo(this._revisionHistoryService,"revisionsUpdated",((t,{revisionsData:e,requestId:s})=>{Math.max(...e.map((t=>t.toVersion)))>this._getLatestVersionFromServerOperations()-1?this._getLatestVersion().then((()=>{this._handleRevisionsUpdate(e,s)})):this._handleRevisionsUpdate(e,s)}));const{revisions:i,requestId:o}=await this._revisionHistoryService.connect(n.connection);this._lastRequestId=o,await this._fetchMissingUsers(i);for(const t of i)this._revisionTracker.addRevisionData(t);if(i.length>0){const t=this._revisionTracker.repository.getRevision(0),s=await this._revisionTracker.getRevisionDocumentData(t);this._isEditorInitialDataDifferent(this.editor,s)&&((0,e.logWarning)("editor-initial-data-replaced-with-revision-data"),this.editor.config.set("initialData",s))}this.listenTo(t,"change:_isConnected",((e,s,n)=>{n&&(this._oldOffset=t._offset,e.off())})),this.editor.plugins.has("Autosave")||this._initForDocumentStorage(),this._revisionTracker.bind("isEnabled").to(n,"state",(t=>"connected"===t))}async reconnect(){const t=this.editor.plugins.get(l),e=this.editor.plugins.get(bi),s=async()=>{const s=this._revisionTracker.currentRevision,n=s.id,r=n!==e.sessionId;if(r){const t=e._offset-this._oldOffset,r=this._getLatestVersionFromServerOperations();if(this._revisionTracker._revisionDataBuilder.reInit(),s.toVersion+t!==r){const e=s.fromVersion+t,n=this.editor.plugins.get("Users"),i=this._revisionTracker.buildRevisionData({currentRevision:s,from:e,to:r});i.id=s.id;const o=i.authorsIds.map((t=>n.getUser(t)));s._update({...i,authors:o},!0),this._revisionTracker._bufferUpdate(s.id,i,!0)}this._revisionTracker._startingVersion=r,s.toVersion===s.fromVersion&&!this._revisionTracker._bufferedUpdates.has(n)&&this._revisionTracker.repository._revisions.remove(n),this._revisionTracker._createCurrentRevision(r)}const{revisions:i,requestId:o}=await this._revisionHistoryService.reconnect(t.connection,this._lastRequestId);r&&i.length>0?e._handleReconnectionError():(await this._fetchMissingUsers(i),this._handleRevisionsUpdate(i,o),this._revisionTracker.sendBufferedUpdates())};return e._isConnected?s():new Promise(((t,n)=>{e.once("change:_isConnected",(()=>{s().then(t).catch(n)}))}))}destroy(){this._domEmitter&&this._domEmitter.stopListening(),super.destroy()}async _waitForServiceReady(){this._revisionHistoryService.isConnected||await new Promise((t=>{this.listenTo(this._revisionHistoryService,"connected",(e=>{e.off(),t()}))}))}_getLatestVersionFromServerOperations(){const t=this.editor.plugins.get(bi).serverHistory._operations;for(let e=t.length-1;e>=0;e--)if("marker"!==t[e].type||t[e].affectsData)return t[e].baseVersion+1}_isEditorInitialDataDifferent(t,e){let s=t.config.get("initialData");if(void 0===s)return!1;"string"==typeof s&&(s={main:s});for(const t of Object.keys(e))if(s[t]!==e[t])return!0;return!1}_getLatestVersion(){const t=this.editor.plugins.get(bi);return new Promise((e=>{t._isPendingUpdate?t.once("change:_isPendingUpdate",(()=>{e(this._getLatestVersionFromServerOperations())})):e(this._getLatestVersionFromServerOperations())}))}_initForDocumentStorage(){this._domEmitter=Object.create(e.DomEmitterMixin);const t=this.editor.t,s=this.editor.plugins.get("PendingActions");let n=null;const r=vo((()=>{this._revisionTracker.update().finally((()=>{n&&(s.remove(n),n=null)}))}),500);this.listenTo(this.editor,"ready",(()=>{this.listenTo(this.editor.model.document,"change:data",((e,i)=>{i.isLocal&&(n||(n=s.add(t({string:"Unsaved change in revision history.",id:"PENDING_ACTION_REVISION_HISTORY"}))),r())}))})),this._domEmitter.listenTo(window,"beforeunload",((t,e)=>{s.hasAny&&(e.returnValue=s.first.message)}))}_handleRevisionsUpdate(t,e){const s=this._revisionTracker.repository;this._lastRequestId=e;for(const e of t){const t=s.getRevision(e.id);if(t){if((e.fromVersion||e.toVersion)&&(e.diffData=null),t===this._revisionTracker.currentRevision){const s=Math.max(t.toVersion,e.toVersion),n=Math.max(t.fromVersion,e.fromVersion);let r;t.toVersion===e.toVersion&&t.fromVersion===e.fromVersion?(r=!0,this._preventResendingRevisionData(e)):e.toVersion===s&&e.fromVersion===n?r=!1:(t.toVersion===s&&t.fromVersion===n||this._fixRevision({revision:t,from:n,to:s}),r=!0),r&&(delete e.fromVersion,delete e.toVersion,delete e.diffData,delete e.createdAt,delete e.authorsIds)}this._revisionTracker.setRevisionData(e),this._preventResendingRevisionData(e)}else this._revisionTracker.addRevisionData(e)}const n=s.getRevisions();n.reverse();for(let t=0;t<n.length-1;t++){const e=n[t],s=n[t+1];if(e.fromVersion<s.toVersion){const t=s.toVersion;this._fixRevision({revision:e,from:t})}}}_fixRevision({revision:t,from:e,to:s}={}){const n=this.editor.plugins.get("Users"),r=this._revisionTracker.buildRevisionData({revision:t,from:e,to:s});r.authors=r.authorsIds.map((t=>n.getUser(t))),t._update(r)}_preventResendingRevisionData(t){const e={};e.id=t.id;for(const s of Object.keys(t))"id"!==s&&(e[s]=void 0);this._revisionTracker._bufferUpdate(e.id,e,!0)}_fetchMissingUsers(t){const e=this.editor.plugins.get(r.Users),{connection:s}=this.editor.plugins.get(l),n=new Set;for(const e of t){for(const t of e.authorsIds)i(t);e.creatorId&&i(e.creatorId)}return Promise.all(Array.from(n,(async t=>{const n=await vi().get(s,t);e.getUser(t)||e.addUser(n)})));function i(t){e.getUser(t)||n.add(t)}}}function Oo(t){return t.message.startsWith("cloud-services-internal-error: Revision History Service is not connected.")||t.message.startsWith("cloud-services-internal-error: Not connected.")||t.message.startsWith("cloud-services-internal-error: Request timeout.")}wo.RevisionHistoryService=bo();var So,Eo,To=["requires","RevisionHistory","RealTimeCollaborativeRevisionHistory"];So=To,Eo=472,function(t){for(;--t;)So.push(So.shift())}(++Eo);var ko=function(t,e){return To[t-=0]};class Co extends t.Plugin{static get[ko("0x2")](){return[ko("0x0"),wo,Ii]}static get pluginName(){return ko("0x1")}}var Io=Function.prototype,Ro=Object.prototype,Ao=Io.toString,No=Ro.hasOwnProperty,Po=Ao.call(Object);const Do=function(t){if(!Kt(t)||"[object Object]"!=et(t))return!1;var e=We(t);if(null===e)return!0;var s=No.call(e,"constructor")&&e.constructor;return"function"==typeof s&&s instanceof s&&Ao.call(s)==Po};const jo=function(t){return Kt(t)&&1===t.nodeType&&!Do(t)};class Mo extends n.View{constructor(t){super(t);const{t:e}=t,s=this.bindTemplate;this.set("usersCount",0),this.set("isHidden",!0),this.setTemplate({tag:"div",attributes:{class:["ck","ck-presence-list__counter",s.if("isHidden","ck-presence-list__counter--hidden")]},children:[{text:s.to("usersCount",(t=>e({string:"1 connected user (me)",plural:"%0 connected users",id:"CONNECTED_USERS"},t)))}]})}}const Bo=["ck-presence-list__list","execute","createCollection","setTemplate","items","bindTemplate","fire"];var Jo,Vo;Jo=Bo,Vo=334,function(t){for(;--t;)Jo.push(Jo.shift())}(++Vo);const Uo=function(t,e){return Bo[t-=0]};class Fo extends n.View{constructor(t){super(t),this[Uo("0x6")]=this[Uo("0x4")]();const e=this[Uo("0x0")];this[Uo("0x5")]({tag:"div",attributes:{class:["ck",Uo("0x2")]},children:this[Uo("0x6")],on:{click:e.to((()=>this[Uo("0x1")](Uo("0x3"))))}})}}var qo=__webpack_require__(3286),Lo={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(qo.Z,Lo);qo.Z.locals;const Yo=["bindTemplate","set","locale","isCollapsed","inlineListView","counterView","div","ck-reset","setTemplate","ck-presence-list--collapsed"];var Go,zo;Go=Yo,zo=168,function(t){for(;--t;)Go.push(Go.shift())}(++zo);const Ho=function(t,e){return Yo[t-=0]};class Wo extends n.View{constructor(t){super(t);const e=this[Ho("0x2")];this[Ho("0x3")](Ho("0x5"),!0),this.counterView=new Mo(this[Ho("0x4")]),this[Ho("0x6")]=new Fo(t),this[Ho("0x0")]({tag:Ho("0x8"),attributes:{class:["ck","ck-presence-list",Ho("0x9"),"ck-rounded-corners",e.if(Ho("0x5"),Ho("0x1"))]},children:[this[Ho("0x7")],this.inlineListView]})}}var Ko,$o,Zo=["div","setTemplate","createCollection","ck-presence-list__dropdown-list-wrapper","items","ck-presence-list__dropdown-list"];Ko=Zo,$o=309,function(t){for(;--t;)Ko.push(Ko.shift())}(++$o);var Xo=function(t,e){return Zo[t-=0]};class Qo extends n.View{constructor(t){super(t),this[Xo("0x1")]=this[Xo("0x5")](),this[Xo("0x4")]({tag:Xo("0x3"),attributes:{class:["ck",Xo("0x2")]},children:[{tag:"div",attributes:{class:["ck",Xo("0x0")]},children:this.items}]})}}const ta=["fire","color","true","execute","ck-user__full-name","setTemplate","getBackgroundColorClass","bindTemplate","userView","ck-presence-list__marker","button","name","div","ck-presence-list__dropdown-list-item","span"];var ea,sa;ea=ta,sa=420,function(t){for(;--t;)ea.push(ea.shift())}(++sa);const na=function(t,e){return ta[t-=0]};class ra extends n.View{constructor(t,e,s){super(t);const n=this[na("0x7")];this[na("0x8")]=new r.UserView(t,e);const i={tag:na("0xc"),attributes:{class:["ck",na("0xd")]},children:[this[na("0x8")],{tag:na("0xe"),attributes:{class:["ck",na("0x4")]},children:[{text:e[na("0xb")]}]},{tag:na("0xe"),attributes:{class:["ck",na("0x9"),e[na("0x1")][na("0x6")]()],"aria-hidden":na("0x2")}}]};s&&(i.tag=na("0xa"),i.on={click:n.to((()=>this[na("0x0")](na("0x3"))))}),this[na("0x5")](i)}}const ia=["bindTemplate","ck-tooltip__text__inner","span","ck-tooltip","setTemplate","text"];var oa,aa;oa=ia,aa=382,function(t){for(;--t;)oa.push(oa.shift())}(++aa);const ca=function(t,e){return ia[t-=0]};class ua extends n.TooltipView{constructor(t){super(t);const e=this[ca("0x2")];this[ca("0x0")]({tag:ca("0x4"),attributes:{class:["ck",ca("0x5"),e.to("position",(t=>"ck-tooltip_"+t))]},children:[{tag:ca("0x4"),attributes:{class:["ck-tooltip__text"]},children:[{tag:ca("0x4"),class:[ca("0x3")],children:[{text:e.to(ca("0x1"))}]}]}]})}}const da=["fire","text","ck-presence-list__marker","ck-presence-list__list-item","getBackgroundColorClass","span","tooltipView","execute","markerView","name","userView","button","div"];var la,ha;la=da,ha=448,function(t){for(;--t;)la.push(la.shift())}(++ha);const fa=function(t,e){return da[t-=0]};class pa extends n.View{constructor(t,e,s){super(t);const n=this.bindTemplate;this.userView=new r.UserView(t,e),this[fa("0x2")]=new ma(t,e),this.tooltipView=new ua(t),this[fa("0x0")][fa("0x8")]=this.userView[fa("0x3")];const i={tag:fa("0x6"),attributes:{class:["ck",fa("0xa")]},children:[this[fa("0x4")],this[fa("0x2")],this[fa("0x0")]]};s&&(i.tag=fa("0x5"),i.on={click:n.to((()=>this[fa("0x7")](fa("0x1"))))}),this.setTemplate(i)}}class ma extends n.View{constructor(t,e){super(t),this.setTemplate({tag:fa("0xc"),attributes:{class:["ck",fa("0x9"),e.color[fa("0xb")]()],"aria-hidden":"true"}})}}const ya=["destroy","counterView","presenceList","get","items","_handleUserAdd","plugins","appendChild","config","inlineListView","isRendered","unpin","pin","isVisible","element","remove","hideDropdown","isHidden","from","presencelist-missing-container","detachFromDom","bindTo","_createView","lastConnectedUsers","presenceDropdownView","locale","showDropdown","listenTo","usersCount","class","presencelist-collapseat-invalid-format","using","length","context","bodyCollection","presenceList.container","define","reverse","balloonPanelView","add","requires","view","render","number","onClick","content","allConnectedUsers","init","presenceList.collapseAt","_allConnectedUsers","isCollapsed","attachToDom","execute"];var _a,ga;_a=ya,ga=146,function(t){for(;--t;)_a.push(_a.shift())}(++ga);const va=function(t,e){return ya[t-=0]};class xa extends t.ContextPlugin{constructor(t){super(t),t.config[va("0x31")](va("0xf"),{collapseAt:6});const s=t[va("0x15")][va("0x10")](va("0x8"));if(va("0x3")!=typeof s)throw new e.CKEditorError(va("0x2b"),this);if(s<1)throw new e.CKEditorError("presencelist-collapseat-invalid-format",this)}static get[va("0x0")](){return[y]}[va("0x7")](){const t=this[va("0x2e")];this._allConnectedUsers=t[va("0x13")][va("0x10")](y)[va("0x6")],this.set(va("0x29"),0),this[va("0x24")]=new e.Collection,this[va("0x33")]=new n.BalloonPanelView,this[va("0x33")][va("0x2a")]="ck ck-presence-list__balloon",this[va("0x1")]=this[va("0x23")](),this[va("0x25")]=void 0;for(const t of this._allConnectedUsers)this[va("0x12")](t);this[va("0x28")](this[va("0x9")],"add",((t,e)=>{this[va("0x12")](e)})),this[va("0x28")](this[va("0x9")],va("0x1c"),((t,e)=>{this._handleUserRemove(e)}))}[va("0x23")](){const t=this[va("0x2e")],s=new Wo(this[va("0x2e")][va("0x26")]),r=this.balloonPanelView;if(!jo(t[va("0x15")][va("0x10")](va("0x30"))))throw new e.CKEditorError(va("0x20"),this);return s[va("0xe")].bind("usersCount").to(this),s.bind("isCollapsed").to(this,va("0x29"),(e=>{const n=e>=t[va("0x15")].get("presenceList.collapseAt");return s.counterView[va("0x1e")]=!(1==e||n),n||this[va("0x1d")](),n})),s[va("0x16")][va("0x11")][va("0x22")](this.lastConnectedUsers)[va("0x2c")]((e=>{const s=t.config[va("0x10")](va("0xf")),n=new pa(t[va("0x26")],e,s[va("0x4")]);return s[va("0x4")]&&this[va("0x28")](n,"execute",(()=>{this[va("0x1")][va("0xa")]||s[va("0x4")](e,n[va("0x1b")])})),n})),this[va("0x28")](s[va("0x16")],va("0xc"),(()=>{this[va("0x25")]?this.hideDropdown():this[va("0x1")][va("0xa")]&&this[va("0x27")]()})),s.render(),r[va("0x2")](),(0,n.clickOutsideHandler)({emitter:s,activator:()=>r[va("0x1a")],contextElements:[r[va("0x1b")],s[va("0x16")][va("0x1b")]],callback:()=>this[va("0x1d")]()}),t[va("0x15")].get(va("0x30"))[va("0x14")](s.element),this[va("0x2f")]=new n.BodyCollection(this[va("0x2e")][va("0x26")]),this[va("0x2f")][va("0xb")](),this[va("0x2f")][va("0x34")](r),s}[va("0x12")](t){this[va("0x29")]++,5==this.lastConnectedUsers[va("0x2d")]&&this[va("0x24")][va("0x1c")](0),this[va("0x24")][va("0x34")](t)}_handleUserRemove(t){if(this[va("0x29")]--,this.lastConnectedUsers[va("0x10")](t.id)&&(this[va("0x24")][va("0x1c")](t.id),this.lastConnectedUsers[va("0x2d")]<this[va("0x29")]))for(const t of Array[va("0x1f")](this[va("0x9")])[va("0x32")]())if(!this[va("0x24")].get(t.id))return void this[va("0x24")][va("0x34")](t,0)}[va("0x27")](){if(this[va("0x25")])return;this[va("0x25")]=new Qo;const t=this.context[va("0x15")][va("0x10")](va("0xf"));this[va("0x25")][va("0x11")][va("0x22")](this[va("0x9")])[va("0x2c")]((e=>{const s=new ra(this[va("0x2e")][va("0x26")],e,!!t[va("0x4")]);return t[va("0x4")]&&this[va("0x28")](s,va("0xc"),(()=>{t[va("0x4")](e,s.element)})),s})),this[va("0x33")][va("0x5")][va("0x34")](this[va("0x25")]),this[va("0x33")][va("0x19")]({target:this[va("0x1")].inlineListView[va("0x1b")]})}[va("0x1d")](){this[va("0x25")]&&(this.balloonPanelView[va("0x18")](),this.balloonPanelView[va("0x5")].remove(this[va("0x25")]),this[va("0x25")][va("0xd")](),this.presenceDropdownView=void 0)}[va("0xd")](){super.destroy(),this[va("0x1")]&&this.view[va("0x17")]&&this.view[va("0xd")](),this[va("0x2f")]&&this[va("0x2f")][va("0x21")]()}}class ba extends t.ContextPlugin{static get requires(){return[y,xa]}static get pluginName(){return"PresenceList"}}})(),(window.CKEditor5=window.CKEditor5||{}).realTimeCollaboration=__webpack_exports__})();