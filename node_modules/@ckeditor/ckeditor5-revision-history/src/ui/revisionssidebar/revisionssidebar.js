/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x199b=['_sidebarView','config','Compare\x20against\x20selected','init','appendChild','isEnabled','_handleDiffChange','setName','isReady','getEarlierVisibleRevision','name','getRevision','diff','requires','nameRevision','RevisionsSidebar','repository','restoreRevision','change:diff','_handleRevisionSelected','restoreRevisionCallback','selectRevision','_createRevisionActions','action','plugins','bind','focus','highlightRevisions','availableRevisionActions','revisionHistory.revisionActions','get','ready','element','isSelected','isVisible','revisionHistory','_revisionsRepository','select','revisionSetName','_handleRevisionSetName','_revisionViewer','compare','remove','fieldView','locale','timePeriodViews','getIndex','Restore\x20this\x20revision','map','listenTo','add','revisionViews','newRevisionId','getRevisionsInDiff','editor','_handleEditorDataReady','render','Name\x20this\x20revision','compareAgainstSelected','defaultRevisionActions'];(function(_0x28de27,_0x199bf3){const _0x50e9d1=function(_0x3bd936){while(--_0x3bd936){_0x28de27['push'](_0x28de27['shift']());}};_0x50e9d1(++_0x199bf3);}(_0x199b,0x10f));const _0x50e9=function(_0x28de27,_0x199bf3){_0x28de27=_0x28de27-0x0;let _0x50e9d1=_0x199b[_0x28de27];return _0x50e9d1;};import{Plugin as _0x502586}from'ckeditor5/src/core';import _0x3dd665 from'./revisionssidebarview';import _0x2c53c8 from'../../revisionviewer';export default class w extends _0x502586{static get['pluginName'](){return _0x50e9('0x2c');}static get[_0x50e9('0x2a')](){return[_0x2c53c8];}constructor(_0x31c079){super(_0x31c079),this['_revisionViewer']=_0x31c079[_0x50e9('0x35')]['get'](_0x2c53c8),this[_0x50e9('0x5')]=this['_revisionViewer'][_0x50e9('0x2d')],this['_sidebarView']=null;}[_0x50e9('0x20')](){const _0x88bc60=this[_0x50e9('0x5')]['_revisions'],_0x328610=this['_createRevisionActions'](),_0x2cec41=this[_0x50e9('0x17')][_0x50e9('0x1e')][_0x50e9('0x3b')]('revisionHistory.viewerSidebarContainer');this['_sidebarView']=new _0x3dd665(this[_0x50e9('0x17')][_0x50e9('0xd')],_0x88bc60,_0x328610),this[_0x50e9('0x1d')]['on']('revisionSelected',this[_0x50e9('0x30')]['bind'](this)),this[_0x50e9('0x1d')]['on'](_0x50e9('0x7'),this[_0x50e9('0x8')][_0x50e9('0x36')](this)),this[_0x50e9('0x1d')][_0x50e9('0x36')](_0x50e9('0x22'))['to'](this[_0x50e9('0x9')]),this['_sidebarView'][_0x50e9('0xe')]['on']('add',(_0x5730b6,_0xd4fb56)=>{_0xd4fb56[_0x50e9('0x14')]['on'](_0x50e9('0x13'),(_0x5848ed,_0x375ecc)=>{_0x375ecc['bind'](_0x50e9('0x22'),_0x50e9('0x25'))['to'](this[_0x50e9('0x9')]);});}),this['_sidebarView'][_0x50e9('0x19')](),this[_0x50e9('0x12')](this[_0x50e9('0x17')]['data'],_0x50e9('0x0'),this['_handleEditorDataReady'][_0x50e9('0x36')](this)),this['listenTo'](this[_0x50e9('0x9')],_0x50e9('0x2f'),this[_0x50e9('0x23')]['bind'](this)),_0x2cec41[_0x50e9('0x21')](this[_0x50e9('0x1d')][_0x50e9('0x1')]);}['destroy'](){this[_0x50e9('0x1d')]['element'][_0x50e9('0xb')](),this[_0x50e9('0x1d')]['destroy']();}[_0x50e9('0x18')](){const _0xc34bfb=this[_0x50e9('0x5')][_0x50e9('0x28')](0x0);if(_0xc34bfb){const _0x2e4f55=this[_0x50e9('0x5')][_0x50e9('0x26')](_0xc34bfb['id']);this['_revisionViewer']['compare'](_0xc34bfb,_0x2e4f55);}}['_handleRevisionSelected'](_0x403612,_0x56cb4b){const _0x317513=this[_0x50e9('0x5')][_0x50e9('0x28')](_0x56cb4b['id']),_0x2c3ea5=this[_0x50e9('0x5')][_0x50e9('0x26')](_0x317513['id']);this[_0x50e9('0x9')][_0x50e9('0xa')](_0x317513,_0x2c3ea5);}[_0x50e9('0x8')](_0xde1f90,_0x2fddef){this['_revisionsRepository'][_0x50e9('0x28')](_0x2fddef['id'])[_0x50e9('0x24')](_0x2fddef[_0x50e9('0x27')]);}[_0x50e9('0x23')](_0x24c2e4,_0x293408,_0x466d5d){const _0x259d98=this['_revisionsRepository'][_0x50e9('0x16')](_0x466d5d);_0x259d98['length']>0x2?(this['_sidebarView']['highlightRevisions'](_0x259d98),this['_sidebarView'][_0x50e9('0x32')](null)):(this['_sidebarView'][_0x50e9('0x38')]([]),this[_0x50e9('0x1d')][_0x50e9('0x32')](_0x259d98[0x0]));}[_0x50e9('0x33')](){const _0x2e4dd6=this['editor'],_0x48e8a0=w['availableRevisionActions'],_0x2bf80a=_0x2e4dd6[_0x50e9('0x1e')][_0x50e9('0x3b')](_0x50e9('0x3a'))||w[_0x50e9('0x1c')];if(_0x2bf80a['length'])return _0x2bf80a[_0x50e9('0x11')](_0x514656=>{const _0x162d9a='string'==typeof _0x514656?Object['assign']({},_0x48e8a0[_0x514656]):_0x514656;return _0x162d9a[_0x50e9('0x34')]=_0x162d9a[_0x50e9('0x34')][_0x50e9('0x36')](this,_0x2e4dd6),_0x162d9a[_0x50e9('0x3')]&&(_0x162d9a[_0x50e9('0x3')]=_0x162d9a['isVisible']['bind'](this,_0x2e4dd6)),_0x162d9a;});}}w[_0x50e9('0x39')]={'compareAgainstSelected':{'name':_0x50e9('0x1f'),'action':({plugins:_0x6ae438},_0x2c03bd)=>{const _0x4ecdcb=_0x6ae438['get'](_0x2c53c8),_0x855120=_0x4ecdcb[_0x50e9('0x2d')];let _0x4199a5=_0x4ecdcb[_0x50e9('0x29')][_0x50e9('0x15')],_0x1c1525=_0x2c03bd['id'];_0x855120[_0x50e9('0xf')](_0x4199a5)>_0x855120['getIndex'](_0x1c1525)&&([_0x4199a5,_0x1c1525]=[_0x1c1525,_0x4199a5]),_0x4ecdcb[_0x50e9('0xa')](_0x4199a5,_0x1c1525);},'isVisible':({plugins:_0x216d5a},_0x22e5b9)=>{const _0x2f38b4=_0x216d5a['get'](_0x2c53c8);return!(_0x2f38b4['repository'][_0x50e9('0x16')](_0x2f38b4[_0x50e9('0x29')])['length']>0x2)&&!_0x22e5b9[_0x50e9('0x2')];}},'restoreRevision':{'name':_0x50e9('0x10'),'action':(_0x3319db,{id:_0x584d9d})=>{_0x3319db[_0x50e9('0x1e')][_0x50e9('0x3b')](_0x50e9('0x4'))[_0x50e9('0x31')](_0x584d9d);},'isVisible':({plugins:_0x14b649},_0x4b3f32)=>!!_0x14b649[_0x50e9('0x3b')](_0x2c53c8)[_0x50e9('0x2d')]['getLaterVisibleRevision'](_0x4b3f32['id'])},'nameRevision':{'name':_0x50e9('0x1a'),'action':({plugins:_0x1f5747},{id:_0x1ec86d,revisionNameView:_0x59847d})=>{const _0x1453fa=_0x1f5747[_0x50e9('0x3b')](_0x2c53c8),_0x1f7429=_0x1453fa['repository'][_0x50e9('0x26')](_0x1ec86d);_0x1453fa[_0x50e9('0xa')](_0x1ec86d,_0x1f7429),_0x59847d[_0x50e9('0x37')](),_0x59847d[_0x50e9('0xc')][_0x50e9('0x6')]();}}},w[_0x50e9('0x1c')]=[_0x50e9('0x1b'),_0x50e9('0x2e'),_0x50e9('0x2b')];