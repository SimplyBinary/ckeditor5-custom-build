/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x392352}from'ckeditor5/src/core';import{ListView as _0x3cce75,ListItemView as _0x3e0706,ButtonView as st,createDropdown as _0x2066fc}from'ckeditor5/src/ui';import _0x579c91 from'../../revisiontracker';import ut from'./revisionhistorysaverevisionformview';import _0x4902e3 from'../../../theme/icons/revision-history.svg';export default class y extends _0x392352{static get['pluginName'](){return'RevisionHistoryUI';}static get['requires'](){return[_0x579c91];}['init'](){const _0x1e0c73=this['editor'],t=_0x1e0c73['t'],_0x5b244a=_0x1e0c73['plugins']['get']('RevisionTracker');_0x1e0c73['ui']['componentFactory']['add']('revisionHistory',_0x1fde9f=>{const _0x41c9cd=_0x2066fc(_0x1fde9f),_0x6f8dbc=_0x41c9cd['panelView']['children'],_0x63c93d=new _0x3cce75(_0x1fde9f),_0x5bcb0e=new _0x3e0706(_0x1fde9f),_0x22913b=new st(_0x1fde9f),_0x174d0e=new _0x3e0706(_0x1fde9f),_0x131062=new st(_0x1fde9f),_0x3e7c05=new ut(_0x1fde9f);function _0x596fc9(){_0x6f8dbc['length']&&_0x6f8dbc['remove'](0x0),_0x6f8dbc['add'](_0x63c93d);}function _0x582aee(){_0x41c9cd['isOpen']=!0x1,_0x1e0c73['editing']['view']['focus']();}return _0x41c9cd['bind']('isEnabled')['to'](_0x5b244a,'isReady',_0x5b244a,'isEnabled',_0x1e0c73,'isReadOnly',(_0x3b2f1e,_0x584302,_0x5e1650)=>_0x3b2f1e&&_0x584302&&!_0x5e1650),_0x41c9cd['buttonView']['set']({'icon':_0x4902e3,'label':t('Revision\x20history'),'tooltip':!0x0}),_0x22913b['set']({'label':t('Save\x20current\x20revision'),'withText':!0x0}),_0x22913b['bind']('isEnabled')['to'](_0x5b244a,'isReady',_0x5b244a,'isEnabled',_0x1e0c73,'isReadOnly',(_0x449712,_0xd2acb1,_0x255227)=>_0x449712&&_0xd2acb1&&!_0x255227),_0x22913b['on']('execute',()=>function(){_0x6f8dbc['length']&&_0x6f8dbc['remove'](0x0),(_0x3e7c05['reset'](),_0x6f8dbc['add'](_0x3e7c05),_0x3e7c05['focus']());}()),_0x131062['set']({'label':t('Open\x20revision\x20history'),'withText':!0x0}),_0x131062['bind']('isEnabled')['to'](_0x5b244a,'isReady',_0x1e0c73,'isReadOnly',(_0x483bc9,_0x1b0155)=>_0x483bc9&&!_0x1b0155),_0x131062['on']('execute',()=>{_0x1e0c73['config']['get']('revisionHistory')['showRevisionViewerCallback'](),_0x582aee();}),_0x5bcb0e['children']['add'](_0x22913b),_0x174d0e['children']['add'](_0x131062),_0x63c93d['items']['addMany']([_0x5bcb0e,_0x174d0e]),_0x41c9cd['on']('change:isOpen',()=>_0x596fc9()),_0x3e7c05['saveButtonView']['bind']('isEnabled')['to'](_0x5b244a,'isReady',_0x5b244a,'isEnabled',_0x1e0c73,'isReadOnly',(_0x5dd7ff,_0x495bc8,_0x5420d7)=>_0x5dd7ff&&_0x495bc8&&!_0x5420d7),_0x3e7c05['on']('submit',()=>(_0x1e0c73['plugins']['get'](_0x579c91)['saveRevision']({'name':_0x3e7c05['revisionName']}),void _0x582aee())),_0x3e7c05['on']('cancel',()=>_0x596fc9()),_0x3e7c05['render'](),_0x596fc9(),_0x41c9cd;});}}