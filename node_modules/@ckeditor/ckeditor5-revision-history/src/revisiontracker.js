/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1b16=['delete','PENDING_ACTION_REVISION_HISTORY','_pendingAction','name','NEGATIVE_INFINITY','_baseRoots','deletions','_getFromVersion','pluginName','getOperation','tableCell','_authorId','_getVidAttributeName','locale','targetPosition','revision:','parse','_makeIdsRoot','insert','_savedMetaData','model','_touchedMarkers','_fixRange','plugins','getRevision','repository','_handleOperation','document','_copyMarkers','end','values','vid_end','history','newRange','rootName','_transformMarkers','authors','start','getIndex','_isPendingUpdate','roots','_clone','element','revision-end','_baseIdsRoots','parent','_getBaseVids','_handleMoveOperation','bind','saveRevision','getTime','getRevisions','elementEnd','_markers','currentRevision','toVersion','_removePendingAction','_touched','graveyardPosition','addRevisionData','getLatestVersion','_getPreviousFrom','paragraph','_startingVersion','_rootNames','merge','has','attributes','updateRevisions','_cloneOperation','getData','_update','clear','getUser','filter','offsetSize','init','getRoot','$text','_diffRoots','getRootNames','adapter','isEqual','addRevision','buildRevisionData','stringify','createRange','_lastFrom','_initialRevisionId','_getViewJson','getRange','getChildren','update','_handleInsertOperation','source','add','resolve','insertions','keepParagraph','_handleMergeOperation','_getViewObj','get','reverse','_isInit','keys','getRevisionDocumentData','createPositionAfter','from','PendingActions','_createFromRanges','Empty\x20document','remove','affectsData','insertionPosition','vid','reinsert','version','type','RealTimeCollaborationClient','getAttribute','finally','clone','push','editing','requires','data','_appendChild','config','userId','getCurrentRevisionId','_createInitialRevision','oldRange','setSource','_revisionId','marker','_markChanges','root','_source','dataDowncast','getChild','baseVersion','collaboration.channelId','_bufferUpdate','isReady','_saveEmptyMetaData','getAncestors','_saveMetaData','_removeMetaData','_loadRevisionData','getAttributes','position','_fixOperation','_revisionDataBuilder','revision-start','_applyOperations','item','_findInsertionIndex','getMovedRangeStart','createPositionAt','for','forEach','children','map','move','RevisionTracker','Users','fromVersion','_setConversion','sendBufferedUpdates','find','vid_start','size','_removeRevisionMarkers','createdAt','markers','_reset','documentFragment','Initial\x20revision','$graveyard','_fixPosition','_execute','_idsRoots','markerToData','toData','toView','data-revision-','creator','elementStart','offset','text','authorsIds','shift','string','_bufferedUpdates','_insertChild','childCount','_lastTo','startsWith','_startingRevisionId','range','creatorId','_handleSplitOperation','_generateTape','_operations','processor','editor','length','setRevisionData','set','_prepareViewToSave','splitPosition','_calculateMetaData','_setAttribute','createRevision','diffData','isPendingUpdate','split'];(function(_0x3c3933,_0x1b16d4){const _0x66d0c9=function(_0x10cf70){while(--_0x10cf70){_0x3c3933['push'](_0x3c3933['shift']());}};_0x66d0c9(++_0x1b16d4);}(_0x1b16,0x73));const _0x66d0=function(_0x3c3933,_0x1b16d4){_0x3c3933=_0x3c3933-0x0;let _0x66d0c9=_0x1b16[_0x3c3933];return _0x66d0c9;};import{Users as _0x19ad33}from'ckeditor5-collaboration/src/collaboration-core';import{Plugin as _0x5a38a6,PendingActions as _0xe98311}from'ckeditor5/src/core';import{uid as _0x3d8444}from'ckeditor5/src/utils';import{Position as _0xe90ba9,Range as _0x4507e3,Element as _0x346c62,DocumentFragment as _0x1750dc,ViewText as _0x248f4f,ViewElement as _0x56a699,ViewContainerElement as _0xe2d54b,ViewAttributeElement as _0x29d9c9,ViewEmptyElement as _0x51305a,ViewRawElement as _0x3d91b5,ViewUIElement as _0x533800,ViewDocumentFragment as _0x4b09a9}from'ckeditor5/src/engine';import _0x411e33 from'./revisionsrepository';import{getTranslation as _0x4617ea}from'./utils/common-translations';const T={'c':_0xe2d54b,'a':_0x29d9c9,'e':_0x51305a,'r':_0x3d91b5,'u':_0x533800};export default class l extends _0x5a38a6{static get[_0x66d0('0x6e')](){return _0x66d0('0x31');}static get[_0x66d0('0x9')](){return[_0x19ad33,_0x411e33,_0xe98311];}constructor(..._0x406b2b){super(..._0x406b2b),this[_0x66d0('0xb7')]=null,this[_0x66d0('0x5d')](_0x66d0('0x1c'),!0x1),this[_0x66d0('0x5d')]('isEnabled',!0x0),this['currentRevision']=null;const _0xb985b6=_0x3d8444();this[_0x66d0('0x16')]={'history':this[_0x66d0('0x5a')][_0x66d0('0x7a')]['document'][_0x66d0('0x86')],'getLatestVersion':()=>Promise[_0x66d0('0xc6')](this[_0x66d0('0x5a')]['model'][_0x66d0('0x81')]['version']),'getCurrentRevisionId':()=>_0xb985b6},this[_0x66d0('0x25')]=new F(this['editor']),this[_0x66d0('0xbe')]=this['editor'][_0x66d0('0xc')][_0x66d0('0xcb')]('collaboration.channelId')||'initial',this[_0x66d0('0x5d')](_0x66d0('0x64'),!0x1),this[_0x66d0('0x4e')]=new Map();}[_0x66d0('0xb2')](){this[_0x66d0('0x7f')]=this[_0x66d0('0x5a')][_0x66d0('0x7d')][_0x66d0('0xcb')]('RevisionsRepository'),this[_0x66d0('0x34')](),this[_0x66d0('0x5a')][_0x66d0('0xa')]['on']('ready',()=>{if(this[_0x66d0('0x5a')][_0x66d0('0x7d')][_0x66d0('0xa8')](_0x66d0('0x3'))){const _0x5c4d6f=this[_0x66d0('0x16')][_0x66d0('0xe')](),_0x29e25d=this[_0x66d0('0x7f')][_0x66d0('0x7e')](_0x5c4d6f);if(_0x29e25d)this[_0x66d0('0xa5')]=_0x29e25d[_0x66d0('0x33')];else{const _0x450d24=this['_source'][_0x66d0('0x86')][_0x66d0('0x58')][_0x66d0('0x36')](_0x1d2e30=>!_0x1d2e30[_0x66d0('0xcd')]),_0x4c6cfa=_0x450d24?_0x450d24[_0x66d0('0x19')]:this['_source'][_0x66d0('0x86')][_0x66d0('0x1')],_0xacf65=this['repository'][_0x66d0('0x7e')](0x0),_0x3aa725=_0xacf65?_0xacf65[_0x66d0('0x9d')]:0x0;this['_startingVersion']=Math['max'](_0x4c6cfa,_0x3aa725);}}else{const _0x5eec3a=this[_0x66d0('0x7f')]['getRevisions']()['find'](_0x153482=>null===_0x153482['creator']);if(_0x5eec3a){if(this[_0x66d0('0x5a')][_0x66d0('0x7a')][_0x66d0('0x81')]['history'][_0x66d0('0x1')]=_0x5eec3a[_0x66d0('0x9d')],_0x5eec3a[_0x66d0('0x33')]===_0x5eec3a[_0x66d0('0x9d')])this['_source'][_0x66d0('0xe')]=()=>_0x5eec3a['id'];else{const _0x18dc2c=this[_0x66d0('0x5a')][_0x66d0('0x7d')]['get'](_0x66d0('0x32'))['me'];_0x5eec3a[_0x66d0('0x47')]=_0x18dc2c,_0x5eec3a[_0x66d0('0xad')]({'creatorId':_0x18dc2c['id']});}}this['_startingVersion']=this['editor'][_0x66d0('0x7a')][_0x66d0('0x81')][_0x66d0('0x1')];}this['_revisionDataBuilder']['init'](this[_0x66d0('0x16')][_0x66d0('0x86')]),this['_createInitialRevision'](this['_startingVersion']),this['_createCurrentRevision'](this['_startingVersion']),this['adapter']&&this['sendBufferedUpdates']();}),this[_0x66d0('0x96')](_0x66d0('0x1c'))['to'](this,_0x66d0('0x8d'),_0x49dccc=>!_0x49dccc);}[_0x66d0('0x11')](_0x2d0cc6){this[_0x66d0('0x16')]=_0x2d0cc6;}async[_0x66d0('0xc2')](){const _0x190e9c=await this[_0x66d0('0x16')][_0x66d0('0xa2')]();if(_0x190e9c>this[_0x66d0('0x9c')][_0x66d0('0x9d')]){const _0xd65636=this[_0x66d0('0xba')]({'revision':this[_0x66d0('0x9c')],'to':_0x190e9c});_0xd65636[_0x66d0('0x8a')]=_0xd65636['authorsIds'][_0x66d0('0x2f')](_0x53c1aa=>this[_0x66d0('0x5a')][_0x66d0('0x7d')][_0x66d0('0xcb')](_0x66d0('0x32'))[_0x66d0('0xaf')](_0x53c1aa)),this[_0x66d0('0x9c')]['_update'](_0xd65636);}}async[_0x66d0('0x97')](_0x78510d={},_0x5c513d=null){const _0x376109=[];if(_0x5c513d>this['currentRevision'][_0x66d0('0x9d')]&&(_0x5c513d=null),null===_0x5c513d&&(_0x5c513d=await this[_0x66d0('0x16')][_0x66d0('0xa2')]()),this[_0x66d0('0x9c')]['toVersion']<_0x5c513d){const _0x1e6f65=this[_0x66d0('0xba')]({'revision':this['currentRevision'],'from':_0x5c513d,'to':_0x5c513d});_0x1e6f65[_0x66d0('0x8a')]=[],_0x1e6f65[_0x66d0('0x4b')]=[],_0x1e6f65['id']=this[_0x66d0('0x9c')]['id'],this[_0x66d0('0x9c')]['_update'](_0x1e6f65,!0x0),delete _0x1e6f65[_0x66d0('0x8a')],_0x376109[_0x66d0('0x7')](_0x1e6f65);}const _0x4044ca=this['editor'][_0x66d0('0x7d')][_0x66d0('0xcb')](_0x66d0('0x32'))['me'],_0x27a26e=this[_0x66d0('0x6d')](_0x5c513d),_0x2296ff=this[_0x66d0('0xba')]({'from':_0x27a26e,'to':_0x5c513d});_0x78510d['creatorId']=_0x4044ca['id'],_0x78510d['name']=_0x78510d[_0x66d0('0x69')]||null,_0x78510d['id']=_0x78510d['id']||_0x3d8444(),_0x78510d={..._0x78510d,..._0x2296ff};const _0x546c03=this[_0x66d0('0xa1')](_0x78510d);_0x376109[_0x66d0('0x7')](_0x78510d);const _0x4e84d5=this[_0x66d0('0x7f')][_0x66d0('0x8c')](_0x546c03);if(0x0!==_0x4e84d5){const _0x3461af=this[_0x66d0('0x7f')]['getRevision'](_0x4e84d5-0x1);if(_0x3461af['fromVersion']!==_0x5c513d){const _0x2e9fba=this[_0x66d0('0x25')][_0x66d0('0xac')](_0x5c513d,_0x3461af['toVersion']),_0x3d6ea6={'id':_0x3461af['id'],'diffData':_0x2e9fba[_0x66d0('0x63')],'authorsIds':_0x2e9fba[_0x66d0('0x4b')],'authors':_0x2e9fba[_0x66d0('0x4b')][_0x66d0('0x2f')](_0x42d976=>this[_0x66d0('0x5a')][_0x66d0('0x7d')]['get'](_0x66d0('0x32'))[_0x66d0('0xaf')](_0x42d976)),'fromVersion':_0x5c513d};_0x3461af===this[_0x66d0('0x9c')]&&(_0x3d6ea6[_0x66d0('0x3a')]=new Date(_0x78510d[_0x66d0('0x3a')][_0x66d0('0x98')]()+0xa)),_0x3461af[_0x66d0('0xad')](_0x3d6ea6,!0x0),delete _0x3d6ea6[_0x66d0('0x8a')],_0x376109[_0x66d0('0x7')](_0x3d6ea6);}}if(this['adapter']){for(const _0x3d0fc4 of _0x376109)this[_0x66d0('0x1b')](_0x3d0fc4['id'],_0x3d0fc4,!0x0);this[_0x66d0('0x35')]();}return _0x546c03;}['addRevisionData'](_0x22ec24){const _0x586bb3=this[_0x66d0('0x7f')][_0x66d0('0x62')](_0x22ec24);return this[_0x66d0('0xb7')]&&_0x586bb3['on'](_0x66d0('0xad'),(_0x4d64a9,_0x36eb32,_0x5b7562)=>{_0x5b7562||(this[_0x66d0('0x1b')](_0x36eb32['id'],_0x36eb32,!0x0),this[_0x66d0('0x35')]());}),this[_0x66d0('0x7f')][_0x66d0('0xb9')](_0x586bb3,this['_findInsertionIndex'](_0x586bb3)),_0x586bb3;}async[_0x66d0('0xcf')](_0x1ee343){await this[_0x66d0('0x21')](_0x1ee343);const _0x1dd489={};for(const _0x14184c in _0x1ee343['diffData']){const _0x10c979=this[_0x66d0('0x39')](JSON[_0x66d0('0x76')](_0x1ee343[_0x66d0('0x63')][_0x14184c][_0x66d0('0xc7')])),_0x359842=this['editor'][_0x66d0('0x8')]['view']['document'],_0x381389=new _0x4b09a9(_0x359842,_0x10c979[_0x66d0('0x2f')](_0x1ea2e2=>this['_getViewObj'](_0x1ea2e2)));_0x1dd489[_0x14184c]=this[_0x66d0('0x5a')][_0x66d0('0xa')][_0x66d0('0x59')][_0x66d0('0x44')](_0x381389);}return _0x1dd489;}[_0x66d0('0x35')](){if(0x0===this[_0x66d0('0x4e')]['size'])return;if(this['_isPendingUpdate'])return;let _0x52cca9=Array['from'](this[_0x66d0('0x4e')][_0x66d0('0x84')]());this[_0x66d0('0x4e')][_0x66d0('0xae')]();for(let _0x101613=0x0;_0x101613<_0x52cca9[_0x66d0('0x5b')];_0x101613++){const _0x3831ff=_0x52cca9[_0x101613];let _0x375f3b=!0x1;for(const _0x595e51 of Object['keys'](_0x3831ff))void 0x0===_0x3831ff[_0x595e51]?delete _0x3831ff[_0x595e51]:'id'!==_0x595e51&&(_0x375f3b=!0x0);_0x375f3b||(_0x52cca9[_0x101613]=null);}if(_0x52cca9=_0x52cca9['filter'](_0x54a50a=>null!==_0x54a50a),!_0x52cca9['length'])return;for(let _0x3c7d5d=0x0;_0x3c7d5d<_0x52cca9['length'];_0x3c7d5d++){const _0x16d708=_0x52cca9[_0x3c7d5d];void 0x0!==_0x16d708[_0x66d0('0x33')]&&void 0x0===_0x16d708[_0x66d0('0x9d')]&&(_0x16d708[_0x66d0('0x9d')]=this[_0x66d0('0x7f')]['getRevision'](_0x16d708['id'])['toVersion']),void 0x0!==_0x16d708[_0x66d0('0x9d')]&&void 0x0===_0x16d708[_0x66d0('0x33')]&&(_0x16d708[_0x66d0('0x33')]=this[_0x66d0('0x7f')][_0x66d0('0x7e')](_0x16d708['id'])[_0x66d0('0x33')]);}const _0x21a93a=this[_0x66d0('0x5a')][_0x66d0('0xc')][_0x66d0('0xcb')](_0x66d0('0x1a'));this[_0x66d0('0x8d')]=!0x0,this['_addPendingAction'](),this[_0x66d0('0xb7')][_0x66d0('0xaa')](_0x52cca9,_0x21a93a)[_0x66d0('0x5')](()=>{this['_isPendingUpdate']=!0x1;})['then'](_0x3a3b36=>{if(_0x3a3b36)for(const _0x4da7d7 of _0x3a3b36)this[_0x66d0('0x5c')]({'id':_0x4da7d7['id'],'createdAt':_0x4da7d7['createdAt']});this[_0x66d0('0x9e')](),this[_0x66d0('0x35')]();});}['_addPendingAction'](){if(!this[_0x66d0('0x68')]){const _0x22f26d=this[_0x66d0('0x5a')][_0x66d0('0x7d')]['get']('PendingActions');this[_0x66d0('0x68')]=_0x22f26d['add'](_0x4617ea(this[_0x66d0('0x5a')][_0x66d0('0x73')],_0x66d0('0x67')));}}[_0x66d0('0x9e')](){this['_pendingAction']&&(this['editor'][_0x66d0('0x7d')][_0x66d0('0xcb')](_0x66d0('0xd2'))['remove'](this['_pendingAction']),this[_0x66d0('0x68')]=null);}[_0x66d0('0x29')](_0x5e86e9){const _0x2fdabc=this['repository']['getRevisions']();_0x2fdabc[_0x66d0('0xcc')]();let _0x1a4f1b=0x0;for(;_0x1a4f1b<_0x2fdabc[_0x66d0('0x5b')];){const _0x37b199=_0x2fdabc[_0x1a4f1b];if(_0x37b199===this[_0x66d0('0x9c')]){_0x1a4f1b++;continue;}if(_0x37b199['id']===this[_0x66d0('0xbe')])break;const _0x3d80d5=_0x5e86e9[_0x66d0('0x9d')]-_0x37b199[_0x66d0('0x9d')]||_0x5e86e9['fromVersion']-_0x37b199['fromVersion'];if(_0x3d80d5>0x0)break;if(_0x3d80d5<0x0)_0x1a4f1b++;else{if(!_0x5e86e9[_0x66d0('0x47')]&&_0x37b199['creator'])break;if(_0x37b199[_0x66d0('0x47')]||!_0x5e86e9[_0x66d0('0x47')]){if(_0x5e86e9[_0x66d0('0x3a')]>_0x37b199[_0x66d0('0x3a')])break;_0x1a4f1b++;}else _0x1a4f1b++;}}return _0x1a4f1b;}[_0x66d0('0x5c')](_0x431f1f){const _0x433478=this[_0x66d0('0x7f')]['getRevision'](_0x431f1f['id']);if(_0x431f1f[_0x66d0('0x3a')]&&(_0x431f1f[_0x66d0('0x3a')]=new Date(_0x431f1f[_0x66d0('0x3a')])),_0x431f1f[_0x66d0('0x4b')]){const _0x324c03=this['editor'][_0x66d0('0x7d')]['get'](_0x66d0('0x32'));_0x431f1f[_0x66d0('0x8a')]=_0x431f1f[_0x66d0('0x4b')][_0x66d0('0x2f')](_0x3be8d7=>_0x324c03[_0x66d0('0xaf')](_0x3be8d7));}_0x433478[_0x66d0('0xad')](_0x431f1f,!0x0);}['buildRevisionData']({revision:_0x3402d1=null,from:_0x213ccc=null,to:_0x49024b=null}){_0x213ccc=null!==_0x213ccc?_0x213ccc:_0x3402d1[_0x66d0('0x33')],_0x49024b=null!==_0x49024b?_0x49024b:_0x3402d1[_0x66d0('0x9d')];const _0x1c735f=this[_0x66d0('0x25')][_0x66d0('0xac')](_0x213ccc,_0x49024b),_0xcddbce={'diffData':_0x1c735f[_0x66d0('0x63')],'authorsIds':_0x1c735f[_0x66d0('0x4b')],'fromVersion':_0x213ccc,'toVersion':_0x49024b};if(!_0x3402d1||_0x49024b!==_0x3402d1[_0x66d0('0x9d')]){const _0x116036=_0x49024b-0x1,_0x5dae71=this['_source'][_0x66d0('0x86')][_0x66d0('0x6f')](_0x116036);_0xcddbce[_0x66d0('0x3a')]=_0x5dae71&&_0x5dae71['createdAt']||new Date();}return _0xcddbce;}['_loadRevisionData'](_0x164a41){if(!_0x164a41||_0x164a41[_0x66d0('0x63')])return Promise['resolve']();{const _0x2fa21a=this[_0x66d0('0x5a')][_0x66d0('0xc')][_0x66d0('0xcb')](_0x66d0('0x1a'));return this[_0x66d0('0xb7')]['getRevision']({'channelId':_0x2fa21a,'revisionId':_0x164a41['id']})['then'](_0xc3c368=>{_0x164a41[_0x66d0('0x63')]=_0xc3c368[_0x66d0('0x63')];});}}[_0x66d0('0x1b')](_0x30ee74,_0x283514,_0x4842e7){if(this[_0x66d0('0x4e')]['has'](_0x30ee74)){const _0x133310=this[_0x66d0('0x4e')]['get'](_0x30ee74);_0x283514=_0x4842e7?{..._0x133310,..._0x283514}:{..._0x283514,..._0x133310};}this[_0x66d0('0x4e')][_0x66d0('0x5d')](_0x30ee74,_0x283514);}['_getFromVersion'](_0x168988){const _0x3705bd=this[_0x66d0('0x7f')][_0x66d0('0x99')]();_0x3705bd[_0x66d0('0xcc')](),_0x3705bd[_0x66d0('0x4c')]();const _0x3d55d2=_0x3705bd[_0x66d0('0x36')](_0x29dde7=>_0x29dde7[_0x66d0('0x9d')]<=_0x168988)[_0x66d0('0x9d')];return _0x3d55d2<this['_startingVersion']?this[_0x66d0('0xa5')]:_0x3d55d2;}[_0x66d0('0xf')](_0x154ff4){const _0x3546a3=this[_0x66d0('0x7f')][_0x66d0('0x7e')](this[_0x66d0('0x7f')][_0x66d0('0x5b')]-0x1);if(_0x3546a3)this['_initialRevisionId']=_0x3546a3['id'];else{const _0x3f513d=!this[_0x66d0('0x5a')][_0x66d0('0x7a')]['document'][_0x66d0('0x8e')][_0x66d0('0x36')](_0x5c6abf=>this['editor'][_0x66d0('0x7a')]['hasContent'](_0x5c6abf)),_0x5e4616=this[_0x66d0('0x5a')][_0x66d0('0x7d')][_0x66d0('0xcb')](_0x66d0('0x32'))['me']['id'],_0x4393c9=_0x4617ea(this[_0x66d0('0x5a')][_0x66d0('0x73')],_0x3f513d?_0x66d0('0xd4'):_0x66d0('0x3e'));this['_makeRevision']({'from':_0x154ff4,'to':_0x154ff4,'id':this[_0x66d0('0xbe')],'name':_0x4393c9,'creatorId':_0x5e4616});}}['_createCurrentRevision'](_0x2ac7c1){const _0x49586c=this[_0x66d0('0x16')][_0x66d0('0xe')]();this[_0x66d0('0x9c')]=this[_0x66d0('0x7f')][_0x66d0('0x7e')](_0x49586c),this[_0x66d0('0x9c')]||(this[_0x66d0('0x9c')]=this['_makeRevision']({'from':_0x2ac7c1,'to':_0x2ac7c1,'id':_0x49586c,'name':'','creatorId':null}));}['_makeRevision']({name:_0xff92f5,from:_0x54ff66,to:_0x2d1496,creatorId:_0x4942ec,id:_0x1ad207}){const _0x31ab0d=this[_0x66d0('0xba')]({'from':_0x54ff66,'to':_0x2d1496});_0x31ab0d['name']=_0xff92f5,_0x31ab0d[_0x66d0('0x55')]=_0x4942ec,_0x31ab0d['id']=_0x1ad207;const _0xece020=this[_0x66d0('0xa1')](_0x31ab0d);return this['adapter']&&this[_0x66d0('0x1b')](_0x31ab0d['id'],_0x31ab0d,!0x0),_0xece020;}[_0x66d0('0x34')](){this[_0x66d0('0x5a')]['conversion'][_0x66d0('0x2c')](_0x66d0('0x17'))[_0x66d0('0x43')]({'model':'revision'});}[_0x66d0('0x39')](_0x38dfad){return(_0x38dfad=_0x38dfad[_0x66d0('0xb0')](_0x429401=>!_0x429401[_0x66d0('0x69')]||_0x66d0('0x26')!==_0x429401[_0x66d0('0x69')]&&_0x66d0('0x91')!==_0x429401['name']))[_0x66d0('0x2d')](_0x1a88d8=>{_0x66d0('0x4d')!=typeof _0x1a88d8&&(_0x1a88d8[_0x66d0('0x2e')]=this[_0x66d0('0x39')](_0x1a88d8[_0x66d0('0x2e')]),_0x1a88d8[_0x66d0('0xa9')]=_0x1a88d8[_0x66d0('0xa9')][_0x66d0('0xb0')](_0x524cfa=>!_0x524cfa[0x0][_0x66d0('0x52')](_0x66d0('0x46'))));}),_0x38dfad;}[_0x66d0('0xca')](_0x50bf66){const _0x11716b=this[_0x66d0('0x5a')][_0x66d0('0x8')]['view'][_0x66d0('0x81')];if(_0x66d0('0x4d')==typeof _0x50bf66)return new _0x248f4f(_0x11716b,_0x50bf66);{const _0x397269=_0x50bf66[_0x66d0('0x2e')][_0x66d0('0x2f')](_0x6f20e9=>this[_0x66d0('0xca')](_0x6f20e9));return new(T[_0x50bf66[(_0x66d0('0x2'))]]||_0x56a699)(_0x11716b,_0x50bf66[_0x66d0('0x69')],_0x50bf66[_0x66d0('0xa9')],_0x397269);}}}class F{constructor(_0x30e4ef){this[_0x66d0('0x5a')]=_0x30e4ef,this[_0x66d0('0x79')]=new Map(),this[_0x66d0('0xbd')]=-0x1,this[_0x66d0('0x51')]=-0x1,this[_0x66d0('0x9b')]=new Map(),this[_0x66d0('0xb5')]=new Map(),this[_0x66d0('0x6b')]=new Map(),this[_0x66d0('0x42')]=new Map(),this[_0x66d0('0x92')]=new Map(),this[_0x66d0('0x9f')]=new Map(),this[_0x66d0('0x7b')]=new Map(),this[_0x66d0('0x12')]=0x1,this['_rootNames']=this[_0x66d0('0x5a')][_0x66d0('0x7a')][_0x66d0('0x81')][_0x66d0('0xb6')](),this['_rootNames'][_0x66d0('0x7')](_0x66d0('0x3f'));}['init'](_0x3b2861){this['source']=_0x3b2861;const _0x1053a2=new Map();for(const _0x505f7d of this['_rootNames']){const _0x5d88e8=j(this['editor'][_0x66d0('0x7a')]['document'][_0x66d0('0xb3')](_0x505f7d));_0x1053a2[_0x66d0('0x5d')](_0x505f7d,_0x5d88e8);}const _0x5d4591=Array['from'](this[_0x66d0('0x5a')]['model'][_0x66d0('0x3b')])[_0x66d0('0x2f')](_0x2740e6=>[_0x2740e6[_0x66d0('0x69')],_0x2740e6[_0x66d0('0xc0')]()]),_0x4c267e=this[_0x66d0('0xc4')]['version'];this[_0x66d0('0x1f')](_0x4c267e,_0x1053a2,_0x5d4591),this[_0x66d0('0x53')]=this['_revisionId'];}['getData'](_0x10818d,_0x104abf){if(this[_0x66d0('0xbd')]===_0x10818d&&this[_0x66d0('0x51')]<=_0x104abf)this[_0x66d0('0x79')][_0x66d0('0x38')]>0x1&&this['_removeMetaData'](this[_0x66d0('0x51')]),this[_0x66d0('0x27')](this[_0x66d0('0x51')],_0x104abf,!0x0);else{if(!this[_0x66d0('0x79')]['has'](_0x10818d)){const _0x3f0ce9=this[_0x66d0('0xa3')](_0x10818d);this[_0x66d0('0x60')](_0x3f0ce9,_0x10818d,!0x1);}this[_0x66d0('0x60')](_0x10818d,_0x104abf,!0x0);}return this[_0x66d0('0xbd')]=_0x10818d,this[_0x66d0('0x51')]=_0x104abf,this['_getState']();}[_0x66d0('0x1d')](){const _0x2352aa=new Map();for(const _0x7389a9 of this[_0x66d0('0xa6')]){const _0x831376=new _0x1750dc();_0x831376[_0x66d0('0x88')]=_0x7389a9,_0x2352aa[_0x66d0('0x5d')](_0x7389a9,_0x831376);}this[_0x66d0('0x1f')](Number[_0x66d0('0x6a')],_0x2352aa,[]);}[_0x66d0('0x1f')](_0x4a645b,_0x1f11d1,_0x50f54d){const _0x29b063=new Map(_0x1f11d1),_0x30ef98=new Map();for(const [_0x51f218,_0x55b6e5]of _0x50f54d)_0x30ef98['set'](_0x51f218,{'start':_0x55b6e5[_0x66d0('0x8b')][_0x66d0('0x6')](),'end':_0x55b6e5[_0x66d0('0x83')][_0x66d0('0x6')](),'rootName':_0x55b6e5['root'][_0x66d0('0x88')]});this['_savedMetaData'][_0x66d0('0x5d')](_0x4a645b,{'roots':_0x29b063,'markers':_0x30ef98});}[_0x66d0('0x20')](_0x1ba673){this['_savedMetaData'][_0x66d0('0x66')](_0x1ba673);}['reInit'](){this[_0x66d0('0x3c')](),this[_0x66d0('0xbd')]=-0x1,this['_lastTo']=-0x1,this[_0x66d0('0x79')][_0x66d0('0xae')](),this[_0x66d0('0xb2')](this['source']);}['_reset'](){this[_0x66d0('0x9f')][_0x66d0('0xae')](),this[_0x66d0('0x7b')]['clear'](),this[_0x66d0('0xb5')][_0x66d0('0xae')](),this[_0x66d0('0x6b')][_0x66d0('0xae')](),this[_0x66d0('0x42')][_0x66d0('0xae')](),this['_baseIdsRoots'][_0x66d0('0xae')](),this['_markers'][_0x66d0('0xae')](),this[_0x66d0('0x12')]=0x1,this[_0x66d0('0x53')]=this[_0x66d0('0x12')];}['_makeIdsRoot'](_0x42356d,_0x5161cc=null){let _0x41bbde=null;_0x42356d['is'](_0x66d0('0x3d'))||(_0x41bbde=new _0x346c62(_0x42356d[_0x66d0('0x69')],{'vid_start':null===_0x5161cc?this['_revisionId']++:_0x5161cc++}));const _0x155853=[];for(const _0x299103 of _0x42356d[_0x66d0('0xc1')]())if(_0x299103['is'](_0x66d0('0x90'))){_0x155853['push'](this[_0x66d0('0x77')](_0x299103,_0x5161cc));const _0x2e2b6d=_0x155853[_0x155853['length']-0x1];null!==_0x5161cc&&(_0x5161cc=_0x2e2b6d['is'](_0x66d0('0x90'),_0x66d0('0xb4'))?_0x2e2b6d['getAttribute'](_0x66d0('0xd8'))+0x1:_0x2e2b6d[_0x66d0('0x4')](_0x66d0('0x85'))+0x1);}else for(let _0x518658=0x0;_0x518658<_0x299103[_0x66d0('0xb1')];_0x518658++)_0x155853['push'](new _0x346c62('$text',{'vid':null===_0x5161cc?this[_0x66d0('0x12')]++:_0x5161cc++}));if(_0x42356d['is'](_0x66d0('0x3d'))){const _0x3c2ac5=new _0x1750dc(_0x155853);return _0x3c2ac5[_0x66d0('0x88')]=_0x42356d[_0x66d0('0x88')],_0x3c2ac5;}return _0x41bbde[_0x66d0('0x61')](_0x66d0('0x85'),null===_0x5161cc?this['_revisionId']++:_0x5161cc++),_0x41bbde[_0x66d0('0x4f')](0x0,_0x155853),_0x41bbde;}['_calculateMetaData'](_0x54b161,_0x2a9a5a,_0x1e1bd5){this[_0x66d0('0x3c')]();const {roots:_0x53e5cb,markers:_0x4a25d6}=this['_savedMetaData'][_0x66d0('0xcb')](_0x54b161);this['_baseRoots']=new Map(_0x53e5cb);for(const [_0x103503,_0x4df96c]of this[_0x66d0('0x6b')])if(_0x66d0('0x3f')!==_0x103503&&(this[_0x66d0('0xb5')][_0x66d0('0x5d')](_0x103503,j(_0x4df96c)),_0x1e1bd5)){const _0x4b37a2=this[_0x66d0('0x12')];this[_0x66d0('0x42')][_0x66d0('0x5d')](_0x103503,this['_makeIdsRoot'](_0x4df96c)),this['_baseIdsRoots'][_0x66d0('0x5d')](_0x103503,this[_0x66d0('0x77')](_0x4df96c,_0x4b37a2));}this[_0x66d0('0x53')]=this[_0x66d0('0x12')],this[_0x66d0('0xb5')][_0x66d0('0x5d')](_0x66d0('0x3f'),j(this[_0x66d0('0x6b')]['get'](_0x66d0('0x3f')))),_0x1e1bd5&&this[_0x66d0('0x42')][_0x66d0('0x5d')](_0x66d0('0x3f'),this['_makeIdsRoot'](this[_0x66d0('0x6b')][_0x66d0('0xcb')](_0x66d0('0x3f'))));for(const [_0x1c7b4c,_0x12d51a]of _0x4a25d6){const _0x599825=this[_0x66d0('0x6b')][_0x66d0('0xcb')](_0x12d51a['rootName']),_0x52970a=this[_0x66d0('0xb5')][_0x66d0('0xcb')](_0x12d51a['rootName']),_0x9caf9c=new _0x4507e3(this['_fixPosition'](_0x12d51a[_0x66d0('0x8b')],_0x599825),this[_0x66d0('0x40')](_0x12d51a[_0x66d0('0x83')],_0x599825)),_0x3d7c40=this[_0x66d0('0x7c')](_0x9caf9c,_0x52970a);_0x599825[_0x66d0('0x3b')]['set'](_0x1c7b4c,_0x9caf9c),this[_0x66d0('0x9b')][_0x66d0('0x5d')](_0x1c7b4c,_0x3d7c40);}this[_0x66d0('0x27')](_0x54b161,_0x2a9a5a,_0x1e1bd5);}[_0x66d0('0x27')](_0x113427,_0xb3404b,_0x57ec9a){for(const _0x503cc1 of this['source']['getOperations'](_0x113427,_0xb3404b))this['_handleOperation'](_0x503cc1,_0x57ec9a);for(const _0x6aa7d1 of this[_0x66d0('0xb5')][_0x66d0('0x84')]())_0x6aa7d1[_0x66d0('0x3b')][_0x66d0('0xae')]();for(const [_0x4b5dd3,_0x44f494]of this[_0x66d0('0x9b')]){this['_diffRoots'][_0x66d0('0xcb')](_0x44f494[_0x66d0('0x15')][_0x66d0('0x88')])['markers'][_0x66d0('0x5d')](_0x4b5dd3,_0x44f494[_0x66d0('0x6')]());}this['_saveMetaData'](_0xb3404b,Array['from'](this[_0x66d0('0xb5')])['map'](([_0x52eaac,_0xaf47a0])=>[_0x52eaac,j(_0xaf47a0)]),this[_0x66d0('0x9b')]);}[_0x66d0('0xa3')](_0x2bb2d2){const _0x30f8bc=Array[_0x66d0('0xd1')](this[_0x66d0('0x79')][_0x66d0('0xce')]());_0x30f8bc['sort']((_0xf140b6,_0x4c0adc)=>_0xf140b6-_0x4c0adc),_0x30f8bc['reverse']();for(const _0x3ca593 of _0x30f8bc)if(_0x3ca593<_0x2bb2d2)return _0x3ca593;return this[_0x66d0('0x1d')](),Number[_0x66d0('0x6a')];}['_copyMarkers'](_0x3ef39f,_0x2dbb9c){const _0x42439c=Array[_0x66d0('0xd1')](_0x2dbb9c[_0x66d0('0x3b')])[_0x66d0('0x2f')](([_0x57b634,_0x463cce])=>[_0x57b634,this[_0x66d0('0x7c')](_0x463cce,_0x3ef39f)]);_0x3ef39f['markers']=new Map(_0x42439c);}[_0x66d0('0x89')](_0x4a6d96){for(const _0x4510ad of this[_0x66d0('0x9b')][_0x66d0('0x84')]()){const _0x77c37=_0x4510ad['getTransformedByOperation'](_0x4a6d96),_0xfcbe42=_0x4507e3[_0x66d0('0xd3')](_0x77c37);_0x4510ad[_0x66d0('0x8b')]=_0xfcbe42[_0x66d0('0x8b')],_0x4510ad[_0x66d0('0x83')]=_0xfcbe42[_0x66d0('0x83')];}}[_0x66d0('0x80')](_0xaf536b,_0x5ec77c){const _0x1c03c5=this[_0x66d0('0xab')](_0xaf536b,this['_diffRoots']);if(_0x66d0('0x13')!==_0xaf536b[_0x66d0('0x2')]&&(_0x1c03c5[_0x66d0('0x41')](),this[_0x66d0('0x89')](_0x1c03c5)),_0x5ec77c)switch(_0x1c03c5[_0x66d0('0x2')]){case _0x66d0('0x78'):this[_0x66d0('0xc3')](_0xaf536b);break;case _0x66d0('0x30'):case _0x66d0('0xd5'):case _0x66d0('0x0'):this['_handleMoveOperation'](_0xaf536b);break;case _0x66d0('0xa7'):this[_0x66d0('0xc9')](_0xaf536b);break;case _0x66d0('0x65'):this[_0x66d0('0x56')](_0xaf536b);break;case'marker':this['_handleMarkerOperation'](_0xaf536b);}}[_0x66d0('0xab')](_0x26ec82,_0x4c8f32){const _0x3f59f5=_0x26ec82[_0x66d0('0x6')]();return _0x3f59f5[_0x66d0('0x71')]=_0x26ec82[_0x66d0('0x71')],this[_0x66d0('0x24')](_0x3f59f5,_0x4c8f32),_0x3f59f5;}[_0x66d0('0x94')](_0x488f2f){return _0x488f2f[_0x66d0('0x2f')](_0x13cea9=>{const _0x4666af=this[_0x66d0('0x72')](_0x13cea9);return Number(_0x13cea9[_0x66d0('0x28')][_0x66d0('0x4')](_0x4666af));});}['_generateTape'](_0x3c8c9b,_0x1a8f8b){if(_0x3c8c9b['is']('element',_0x66d0('0xb4')))_0x1a8f8b[_0x66d0('0x7')]({'item':_0x3c8c9b,'type':_0x66d0('0x4a')});else{_0x3c8c9b['is'](_0x66d0('0x90'))&&_0x1a8f8b['push']({'item':_0x3c8c9b,'type':_0x66d0('0x48')});for(const _0x4e299c of _0x3c8c9b[_0x66d0('0xc1')]())this['_generateTape'](_0x4e299c,_0x1a8f8b);_0x3c8c9b['is']('element')&&_0x1a8f8b[_0x66d0('0x7')]({'item':_0x3c8c9b,'type':_0x66d0('0x9a')});}return _0x1a8f8b;}['_getState'](){const _0x293ab4=this['editor'][_0x66d0('0x7a')][_0x66d0('0x81')]['getRootNames'](),_0xe6e8b0=new Map(this[_0x66d0('0x9f')]),_0x12fe58=new Map(_0xe6e8b0),_0x2bdb51=new Map(),_0x294db9={'insertions':{},'deletions':{}},_0x1699fc={'insertions':{},'deletions':{}},_0x1f673d=new Map();for(const _0x46ab32 of _0x293ab4){const _0x5e6eb8=this[_0x66d0('0xb5')][_0x66d0('0xcb')](_0x46ab32),_0x277da9=this['_baseRoots']['get'](_0x46ab32);_0x294db9[_0x66d0('0xc7')][_0x46ab32]=j(_0x5e6eb8),_0x294db9[_0x66d0('0x6c')][_0x46ab32]=j(_0x277da9),this[_0x66d0('0x82')](_0x294db9[_0x66d0('0x6c')][_0x46ab32],_0x277da9),this['_copyMarkers'](_0x294db9['insertions'][_0x46ab32],_0x5e6eb8),_0x1699fc[_0x66d0('0xc7')][_0x46ab32]=this[_0x66d0('0x57')](this[_0x66d0('0x42')][_0x66d0('0xcb')](_0x46ab32),[]),_0x1699fc[_0x66d0('0x6c')][_0x46ab32]=this[_0x66d0('0x57')](this['_baseIdsRoots']['get'](_0x46ab32),[]);}for(const _0x309b2e of _0x293ab4){const _0x2992b5=_0x1699fc['insertions'][_0x309b2e];for(const _0x4078d6 of _0x2992b5){const _0x6af321=this[_0x66d0('0x72')](_0x4078d6),_0x52e9d9=_0x4078d6[_0x66d0('0x28')]['getAttribute'](_0x6af321);_0x12fe58[_0x66d0('0x66')](_0x52e9d9),_0x52e9d9>=this['_startingRevisionId']&&_0x2bdb51['set'](_0x52e9d9,_0xe6e8b0[_0x66d0('0xcb')](_0x52e9d9));}}for(const _0x2f3aad of _0x293ab4){const _0x473529=_0x1699fc['insertions'][_0x2f3aad],_0x326ac8=this[_0x66d0('0x94')](_0x1699fc[_0x66d0('0x6c')][_0x2f3aad]);let _0x4e64d7=0x0;for(const _0xbbd258 of _0x473529){const _0x3b54b8=this[_0x66d0('0x72')](_0xbbd258),_0x3b8a78=_0xbbd258[_0x66d0('0x28')][_0x66d0('0x4')](_0x3b54b8);if(!_0x2bdb51['has'](_0x3b8a78)&&!_0x1f673d[_0x66d0('0xa8')](_0x3b8a78)){if(_0x12fe58['has'](_0x3b8a78))_0x4e64d7++;else{if(_0x3b8a78!=_0x326ac8[_0x4e64d7]){const _0x57bf64=_0xe6e8b0['get'](_0x3b8a78)||_0xe6e8b0[_0x66d0('0xcb')](_0x326ac8[_0x4e64d7]);for(;_0x3b8a78!=_0x326ac8[_0x4e64d7];)_0x12fe58[_0x66d0('0xa8')](_0x326ac8[_0x4e64d7])||(_0x1f673d[_0x66d0('0x5d')](_0x326ac8[_0x4e64d7],_0x57bf64),_0xe6e8b0[_0x66d0('0x5d')](_0x326ac8[_0x4e64d7],_0x57bf64)),_0x4e64d7++;}_0x4e64d7++;}}}}for(const _0xfdfea0 of _0x293ab4){const _0x522fdd=_0x1699fc['insertions'][_0xfdfea0];for(const _0x4002a5 of _0x522fdd){const _0x316be=this['_getVidAttributeName'](_0x4002a5),_0x31e309=_0x4002a5[_0x66d0('0x28')]['getAttribute'](_0x316be);if(_0x1f673d[_0x66d0('0xa8')](_0x31e309)){const _0x458e33=_0x1f673d[_0x66d0('0xcb')](_0x31e309);_0x12fe58['has'](_0x31e309)||_0x12fe58[_0x66d0('0x5d')](_0x31e309,{..._0x458e33}),_0x2bdb51[_0x66d0('0x5d')](_0x31e309,{..._0x458e33});}}}for(const _0xa531d7 of _0x12fe58['keys']())_0xa531d7>=this['_startingRevisionId']&&_0x12fe58['delete'](_0xa531d7);const _0x2afcf6=new Map();for(const _0x1c5406 of _0x293ab4){let _0x59aa05=_0x1699fc[_0x66d0('0xc7')][_0x1c5406];for(const _0x59ba8c of _0x59aa05)if(_0x59ba8c[_0x66d0('0x28')]['is'](_0x66d0('0x90'),_0x66d0('0x70'))){const _0x13b949=this[_0x66d0('0x72')](_0x59ba8c),_0x539df1=_0x59ba8c[_0x66d0('0x28')]['getAttribute'](_0x13b949);if(_0x2bdb51[_0x66d0('0xa8')](_0x539df1)){const _0x3d3aa6=_0x59ba8c[_0x66d0('0x28')][_0x66d0('0x93')]['parent'][_0x66d0('0x4')](_0x66d0('0x37')),_0x95cca9=_0x2afcf6[_0x66d0('0xcb')](_0x3d3aa6)||new Set();_0x95cca9[_0x66d0('0xc5')](_0x2bdb51[_0x66d0('0xcb')](_0x539df1)[_0x66d0('0xd')]),_0x2afcf6['set'](_0x3d3aa6,_0x95cca9);}}_0x59aa05=_0x1699fc[_0x66d0('0x6c')][_0x1c5406];for(const _0x581284 of _0x59aa05)if(_0x581284[_0x66d0('0x28')]['is'](_0x66d0('0x90'),_0x66d0('0x70'))){const _0x1c83d5=this[_0x66d0('0x72')](_0x581284),_0x380d51=_0x581284[_0x66d0('0x28')]['getAttribute'](_0x1c83d5);if(_0x12fe58['has'](_0x380d51)){const _0x3fbf7b=_0x581284[_0x66d0('0x28')]['parent']['parent'][_0x66d0('0x4')](_0x66d0('0x37')),_0x5c7cd7=_0x2afcf6['get'](_0x3fbf7b)||new Set();_0x5c7cd7['add'](_0x12fe58[_0x66d0('0xcb')](_0x380d51)[_0x66d0('0xd')]),_0x2afcf6[_0x66d0('0x5d')](_0x3fbf7b,_0x5c7cd7);}}for(const _0xb2086e of _0x2afcf6[_0x66d0('0xce')]())(_0x2bdb51[_0x66d0('0xa8')](_0xb2086e)||_0x12fe58['has'](_0xb2086e))&&_0x2afcf6[_0x66d0('0x66')](_0xb2086e);}for(const _0x351f91 of _0x293ab4){const _0x243f14=_0x1699fc[_0x66d0('0xc7')][_0x351f91];let _0x252141=null,_0x5675a5=null;for(const _0x3e1d8c of _0x243f14){const _0x1413b9=this[_0x66d0('0x72')](_0x3e1d8c),_0x133de2=_0x3e1d8c[_0x66d0('0x28')][_0x66d0('0x4')](_0x1413b9),_0x305da9=_0x2afcf6[_0x66d0('0xcb')](_0x133de2);_0x305da9&&'elementStart'==_0x3e1d8c[_0x66d0('0x2')]&&(_0x252141=Array[_0x66d0('0xd1')](_0x305da9)[0x0],_0x5675a5=_0x3e1d8c[_0x66d0('0x28')][_0x66d0('0x4')](_0x66d0('0x85'))),_0x252141&&(_0x12fe58[_0x66d0('0x5d')](_0x133de2,{'userId':_0x252141}),_0x2bdb51[_0x66d0('0x5d')](_0x133de2,{'userId':_0x252141})),_0x133de2==_0x5675a5&&(_0x252141=null,_0x5675a5=null);}}const _0x21d4ac={},_0x35d7c7=new Set();for(const _0x18cfd6 of _0x293ab4){const _0xef7a54=_0x294db9[_0x66d0('0x6c')][_0x18cfd6],_0x2ecbc6=_0x294db9[_0x66d0('0xc7')][_0x18cfd6];for(const {userId:_0x3c462a}of this[_0x66d0('0x7b')][_0x66d0('0x84')]())null!==_0x3c462a&&_0x35d7c7[_0x66d0('0xc5')](_0x3c462a);this[_0x66d0('0x14')](_0x2ecbc6,_0x1699fc[_0x66d0('0xc7')][_0x18cfd6],_0x2bdb51,'insertion',_0x35d7c7),this[_0x66d0('0x14')](_0xef7a54,_0x1699fc[_0x66d0('0x6c')][_0x18cfd6],_0x12fe58,'deletion',_0x35d7c7),_0x21d4ac[_0x18cfd6]={'insertions':this[_0x66d0('0x5e')](_0x2ecbc6),'deletions':this[_0x66d0('0x5e')](_0xef7a54)};}return{'diffData':_0x21d4ac,'authorsIds':Array['from'](_0x35d7c7)};}['_processRootBeforeSave'](_0x1e8b92){for(const [,_0xa06b96]of _0x1e8b92[_0x66d0('0x3b')]){const _0x5b982e=_0xa06b96[_0x66d0('0x8b')][_0x66d0('0x1e')]()[_0x66d0('0xb0')](_0x320c09=>_0x66d0('0x70')==_0x320c09[_0x66d0('0x69')]);for(const _0x5c4873 of _0x5b982e)0x1==_0x5c4873['childCount']&&_0x5c4873[_0x66d0('0x18')](0x0)['is'](_0x66d0('0x90'),_0x66d0('0xa4'))&&_0x5c4873[_0x66d0('0x18')](0x0)['_setAttribute'](_0x66d0('0xc8'),!0x0);}}['_prepareViewToSave'](_0x5a83d7){this['_processRootBeforeSave'](_0x5a83d7);const _0x5542f8=this[_0x66d0('0x5a')][_0x66d0('0xa')][_0x66d0('0x45')](_0x5a83d7,{}),_0x51025d=Array['from'](_0x5542f8['getChildren']())[_0x66d0('0x2f')](_0x5e7f5a=>this[_0x66d0('0xbf')](_0x5e7f5a));return JSON[_0x66d0('0xbb')](_0x51025d);}[_0x66d0('0xbf')](_0x1c2546){if(_0x1c2546['is']('text'))return _0x1c2546[_0x66d0('0xa')];return{'type':Object[_0x66d0('0xce')](T)[_0x66d0('0x36')](_0x5beb10=>_0x1c2546 instanceof T[_0x5beb10]),'name':_0x1c2546['name'],'attributes':Array[_0x66d0('0xd1')](_0x1c2546[_0x66d0('0x22')]()),'children':Array[_0x66d0('0xd1')](_0x1c2546[_0x66d0('0xc1')]())['map'](_0xe58a3d=>this[_0x66d0('0xbf')](_0xe58a3d))};}[_0x66d0('0x14')](_0x4b3463,_0x41e93a,_0x152359,_0x5e8cc9,_0x2a56a2){let _0x340a02=null,_0x3c7fd9=null,_0x4437c8=0x0;const _0x2440d9=this[_0x66d0('0x5a')][_0x66d0('0x7a')];for(let _0x532562=0x0;_0x532562<_0x41e93a[_0x66d0('0x5b')];_0x532562++){const _0x50b20f=this['_getVidAttributeName'](_0x41e93a[_0x532562]),_0x27fe6b=_0x41e93a[_0x532562][_0x66d0('0x28')][_0x66d0('0x4')](_0x50b20f),_0x1f2882=_0x152359['get'](_0x27fe6b),_0x580841=_0x532562==_0x41e93a[_0x66d0('0x5b')]-0x1;(!_0x340a02&&_0x1f2882&&(_0x340a02=_0x1f2882,_0x3c7fd9=_0x41e93a[_0x532562]),_0x340a02&&(!_0x1f2882||_0x1f2882[_0x66d0('0xd')]!=_0x340a02[_0x66d0('0xd')]))&&(_0xdf47b8(_0x1f2882,B(_0x3c7fd9,_0x4b3463,_0x2440d9),B(_0x41e93a[_0x532562],_0x4b3463,_0x2440d9)),_0x340a02=_0x1f2882||null,_0x3c7fd9=_0x1f2882?_0x41e93a[_0x532562]:null),_0x340a02&&_0x580841&&_0xdf47b8(_0x1f2882,B(_0x3c7fd9,_0x4b3463,_0x2440d9),J(_0x41e93a[_0x532562],_0x4b3463,_0x2440d9));}function _0xdf47b8(_0x2ae1a1,_0x1fd6f2,_0x5bf325){const _0xa68620=_0x340a02[_0x66d0('0xd')],_0x3c8d66=_0x66d0('0x75')+_0x5e8cc9+':'+_0xa68620+':'+_0x4437c8++,_0xc8abc1=_0x2440d9['createRange'](_0x1fd6f2,_0x5bf325);_0x4b3463['markers'][_0x66d0('0x5d')](_0x3c8d66,_0xc8abc1),null!==_0xa68620&&_0x2a56a2['add'](_0xa68620);}}[_0x66d0('0x72')](_0x21470d){switch(_0x21470d[_0x66d0('0x2')]){case'elementStart':return _0x66d0('0x37');case _0x66d0('0x9a'):return'vid_end';default:return'vid';}}[_0x66d0('0x24')](_0x5b7260,_0x265cb5){_0x5b7260[_0x66d0('0x19')]=null;for(const _0x590404 in _0x5b7260){if(_0x5b7260[_0x590404]instanceof _0xe90ba9){const _0x5315ee=_0x265cb5['get'](_0x5b7260[_0x590404]['root'][_0x66d0('0x88')]);_0x5b7260[_0x590404]=this[_0x66d0('0x40')](_0x5b7260[_0x590404],_0x5315ee);}if(_0x5b7260[_0x590404]instanceof _0x4507e3){const _0x26434c=_0x265cb5[_0x66d0('0xcb')](_0x5b7260[_0x590404][_0x66d0('0x15')][_0x66d0('0x88')]);_0x5b7260[_0x590404]=this[_0x66d0('0x7c')](_0x5b7260[_0x590404],_0x26434c);}}_0x5b7260[_0x66d0('0x15')]&&(_0x5b7260['root']=_0x265cb5['get'](_0x5b7260[_0x66d0('0x15')][_0x66d0('0x88')]));}[_0x66d0('0x7c')](_0x4d9ab0,_0x42c53d){return this['editor'][_0x66d0('0x7a')][_0x66d0('0xbc')](this['_fixPosition'](_0x4d9ab0[_0x66d0('0x8b')],_0x42c53d),this[_0x66d0('0x40')](_0x4d9ab0[_0x66d0('0x83')],_0x42c53d));}[_0x66d0('0x40')](_0x29fbf0,_0xb76c9b){return this[_0x66d0('0x5a')][_0x66d0('0x7a')]['createPositionFromPath'](_0xb76c9b,_0x29fbf0['path'],_0x29fbf0['stickiness']);}[_0x66d0('0xc3')](_0xb92be){const _0x4e7abd=this[_0x66d0('0x42')][_0x66d0('0xcb')](_0xb92be[_0x66d0('0x23')][_0x66d0('0x15')][_0x66d0('0x88')]),_0x202a71=this[_0x66d0('0x40')](_0xb92be['position'],_0x4e7abd),_0x412fe8=null===_0xb92be['_authorId']?null:_0xb92be[_0x66d0('0x71')]||this[_0x66d0('0x5a')][_0x66d0('0x7d')][_0x66d0('0xcb')](_0x66d0('0x32'))['me']['id'],_0x251622=_0x202a71[_0x66d0('0x93')],_0x25e627=this[_0x66d0('0x12')],_0x17d7ca=[];for(const _0x3605d6 of _0xb92be['nodes'])if(_0x3605d6['is'](_0x66d0('0x90')))_0x17d7ca[_0x66d0('0x7')](this['_makeIdsRoot'](_0x3605d6));else for(let _0x388cd6=0x0;_0x388cd6<_0x3605d6['offsetSize'];_0x388cd6++)_0x17d7ca[_0x66d0('0x7')](new _0x346c62(_0x66d0('0xb4'),{'vid':this[_0x66d0('0x12')]++}));const _0x18d23a=this['_revisionId'];for(let _0x34faf1=_0x25e627;_0x34faf1<_0x18d23a;_0x34faf1++)this['_touched'][_0x66d0('0x5d')](_0x34faf1,{'userId':_0x412fe8});_0x251622[_0x66d0('0x4f')](_0x202a71[_0x66d0('0x49')],_0x17d7ca);}[_0x66d0('0x95')](_0x582e33){(_0x582e33=this[_0x66d0('0xab')](_0x582e33,this[_0x66d0('0x42')]))[_0x66d0('0x41')]();const _0x1d21b9=null===_0x582e33[_0x66d0('0x71')]?null:_0x582e33[_0x66d0('0x71')]||this[_0x66d0('0x5a')]['plugins']['get'](_0x66d0('0x32'))['me']['id'],_0x349dba=_0x582e33[_0x66d0('0x2a')](),_0x36dd08=_0x349dba['parent'],_0x4a2f48=_0x349dba[_0x66d0('0x49')];!function _0x5f3014(_0x476bf8,_0x389421,_0x43cd7b,_0x6e260d){for(let _0x10c17=_0x43cd7b;_0x10c17<_0x6e260d;_0x10c17++){const _0x212531=_0x389421[_0x66d0('0x18')](_0x10c17);_0x212531['is'](_0x66d0('0x90'),_0x66d0('0xb4'))?_0x476bf8[_0x66d0('0x5d')](_0x212531['getAttribute'](_0x66d0('0xd8')),{'userId':_0x1d21b9}):(_0x476bf8[_0x66d0('0x5d')](_0x212531[_0x66d0('0x4')]('vid_start'),{'userId':_0x1d21b9}),_0x5f3014(_0x476bf8,_0x212531,0x0,_0x212531[_0x66d0('0x50')]),_0x476bf8[_0x66d0('0x5d')](_0x212531[_0x66d0('0x4')](_0x66d0('0x85')),{'userId':_0x1d21b9}));}}(this[_0x66d0('0x9f')],_0x36dd08,_0x4a2f48,_0x4a2f48+_0x582e33['howMany']);}[_0x66d0('0xc9')](_0x1677f6){const _0x52727c=null===(_0x1677f6=this[_0x66d0('0xab')](_0x1677f6,this[_0x66d0('0x42')]))[_0x66d0('0x71')]?null:_0x1677f6[_0x66d0('0x71')]||this[_0x66d0('0x5a')][_0x66d0('0x7d')][_0x66d0('0xcb')](_0x66d0('0x32'))['me']['id'],_0x32d13e=_0x1677f6[_0x66d0('0x74')]['parent'],_0x38df43=_0x1677f6['sourcePosition'][_0x66d0('0x93')],_0x28b287=_0x32d13e[_0x66d0('0x4')](_0x66d0('0x85')),_0x583f4e=_0x38df43[_0x66d0('0x4')](_0x66d0('0x37'));_0x32d13e[_0x66d0('0x61')](_0x66d0('0x85'),_0x38df43[_0x66d0('0x4')](_0x66d0('0x85'))),_0x38df43[_0x66d0('0x61')]('vid_end',_0x28b287),this['_touched']['set'](_0x583f4e,{'userId':_0x52727c}),this[_0x66d0('0x9f')][_0x66d0('0x5d')](_0x28b287,{'userId':_0x52727c}),_0x1677f6[_0x66d0('0x41')]();}[_0x66d0('0x56')](_0x480c6c){const _0x143495=null===(_0x480c6c=this[_0x66d0('0xab')](_0x480c6c,this[_0x66d0('0x42')]))[_0x66d0('0x71')]?null:_0x480c6c[_0x66d0('0x71')]||this[_0x66d0('0x5a')][_0x66d0('0x7d')][_0x66d0('0xcb')]('Users')['me']['id'],_0x38c7=_0x480c6c[_0x66d0('0xa0')],_0xaed92a=_0x480c6c[_0x66d0('0x5f')][_0x66d0('0x93')];_0x480c6c[_0x66d0('0x41')]();const _0x203d89=_0xaed92a[_0x66d0('0x4')]('vid_end'),_0x3ce17f=_0x480c6c[_0x66d0('0xd7')]['nodeAfter'];if(_0x38c7){const _0x59ef0c=_0x3ce17f[_0x66d0('0x4')]('vid_end'),_0x2e1505=_0xaed92a[_0x66d0('0x4')](_0x66d0('0x85'));_0xaed92a[_0x66d0('0x61')](_0x66d0('0x85'),_0x59ef0c),_0x3ce17f[_0x66d0('0x61')](_0x66d0('0x85'),_0x2e1505),this['_touched'][_0x66d0('0x5d')](_0xaed92a[_0x66d0('0x4')](_0x66d0('0x85')),{'userId':_0x143495}),this[_0x66d0('0x9f')][_0x66d0('0x5d')](_0x3ce17f[_0x66d0('0x4')](_0x66d0('0x37')),{'userId':_0x143495});}else{const _0x4de262=this[_0x66d0('0x12')]++,_0x165c5f=this[_0x66d0('0x12')]++;_0xaed92a[_0x66d0('0x61')]('vid_end',_0x4de262),_0x3ce17f[_0x66d0('0x61')]('vid_start',_0x165c5f),_0x3ce17f[_0x66d0('0x61')](_0x66d0('0x85'),_0x203d89),this[_0x66d0('0x9f')][_0x66d0('0x5d')](_0x4de262,{'userId':_0x143495}),this[_0x66d0('0x9f')][_0x66d0('0x5d')](_0x165c5f,{'userId':_0x143495});}}['_handleMarkerOperation'](_0x415212){if(!_0x415212[_0x66d0('0xd6')])return;const _0x776428=(_0x415212=this[_0x66d0('0xab')](_0x415212,this[_0x66d0('0xb5')]))[_0x66d0('0x10')]?_0x415212[_0x66d0('0x10')][_0x66d0('0x15')]:null,_0x72cd66=_0x415212[_0x66d0('0x87')]?_0x415212['newRange'][_0x66d0('0x15')]:null;_0x776428&&this[_0x66d0('0x9b')][_0x66d0('0x66')](_0x415212[_0x66d0('0x69')]),_0x72cd66&&this[_0x66d0('0x9b')][_0x66d0('0x5d')](_0x415212[_0x66d0('0x69')],_0x415212[_0x66d0('0x87')]['clone']());const _0x4a8d8f=null===_0x415212[_0x66d0('0x71')]?null:_0x415212[_0x66d0('0x71')]||this[_0x66d0('0x5a')]['plugins'][_0x66d0('0xcb')](_0x66d0('0x32'))['me']['id'],_0x33ac79=_0x415212[_0x66d0('0x69')];if(!this[_0x66d0('0x7b')][_0x66d0('0xa8')](_0x33ac79))return void this[_0x66d0('0x7b')][_0x66d0('0x5d')](_0x33ac79,{'range':_0x415212['oldRange'],'userId':_0x4a8d8f});const _0x377f89=this[_0x66d0('0x7b')][_0x66d0('0xcb')](_0x33ac79),_0xafb364=_0x377f89[_0x66d0('0x54')],_0x293f3c=_0x415212[_0x66d0('0x87')];null==_0xafb364&&null==_0x293f3c||_0xafb364&&_0x293f3c&&_0xafb364[_0x66d0('0xb8')](_0x293f3c)?this[_0x66d0('0x7b')][_0x66d0('0x66')](_0x415212[_0x66d0('0x69')]):_0x377f89[_0x66d0('0xd')]=_0x4a8d8f;}}function j(_0x4b3ed4){const _0x270991=new _0x1750dc();_0x270991['rootName']=_0x4b3ed4[_0x66d0('0x88')];for(const _0x478ca6 of _0x4b3ed4[_0x66d0('0xc1')]()){const _0x49f8f9=_0x478ca6[_0x66d0('0x8f')](!0x0);_0x270991[_0x66d0('0xb')](_0x49f8f9);}return _0x270991;}function B(_0x36044d,_0x306b87,_0x495b25){const _0x7e574c=_0x66d0('0x9a')==_0x36044d[_0x66d0('0x2')]?_0x495b25[_0x66d0('0x2b')](_0x36044d[_0x66d0('0x28')],_0x66d0('0x83')):_0x495b25['createPositionBefore'](_0x36044d[_0x66d0('0x28')]);return _0x7e574c[_0x66d0('0x15')]=_0x306b87,_0x7e574c;}function J(_0xd2c6f4,_0x3fcb04,_0x54413b){const _0x4737c7=_0x66d0('0x48')==_0xd2c6f4[_0x66d0('0x2')]?_0x54413b[_0x66d0('0x2b')](_0xd2c6f4[_0x66d0('0x28')],0x0):_0x54413b[_0x66d0('0xd0')](_0xd2c6f4[_0x66d0('0x28')]);return _0x4737c7[_0x66d0('0x15')]=_0x3fcb04,_0x4737c7;}