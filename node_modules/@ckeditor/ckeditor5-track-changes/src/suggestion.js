/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2d40=['subType','from','getAllAdjacentSuggestions','toJSON','removeMarker','next','accept','addMarkerName','head','type','removeAttribute','isMultiRange','nodeBefore','length','_onAttributesChange','data','clear','getContainedElement','previous','_model','onAccept','substr','getFirstRange','isIntersectingWithRange','getMarkerNames','isInContent','_onAccept','getRanges','commentThread','createdAt','removeMarkers','get','isIntersecting','onAttributesChange','setAttribute','set','hasComments','getFirstMarker','onDiscard','suggestion:','addMarker','map','start','author','addRange','_markerNames','_onDiscard','change','getItems','add','filter','split','getMultiRangeId','getMarkers','delete','attributes','push','getRange','nodeAfter','size'];(function(_0x1a5f94,_0x2d407a){const _0x4a0817=function(_0xefe65d){while(--_0xefe65d){_0x1a5f94['push'](_0x1a5f94['shift']());}};_0x4a0817(++_0x2d407a);}(_0x2d40,0xd2));const _0x4a08=function(_0x1a5f94,_0x2d407a){_0x1a5f94=_0x1a5f94-0x0;let _0x4a0817=_0x2d40[_0x1a5f94];return _0x4a0817;};import{Element as _0x5d12cd}from'ckeditor5/src/engine';import{ObservableMixin as _0x33a983,mix as _0x5c43bd,uid as _0x72828f}from'ckeditor5/src/utils';import{cloneDeep as _0x19a584,isEqual as _0xb3c651,set as _0x484dcb,unset as _0x216694}from'lodash-es';export default class o{constructor(_0x3ee006,_0x15a8ad){this['id']=_0x15a8ad['id'],this[_0x4a08('0x27')]=_0x15a8ad[_0x4a08('0x27')],this['subType']=_0x15a8ad[_0x4a08('0x1e')]||null,this['author']=_0x15a8ad[_0x4a08('0xd')],this[_0x4a08('0x2d')]=null,this[_0x4a08('0x31')]=_0x3ee006,this[_0x4a08('0x38')]=_0x15a8ad[_0x4a08('0x32')],this[_0x4a08('0x10')]=_0x15a8ad[_0x4a08('0x8')],this['_onAttributesChange']=_0x15a8ad[_0x4a08('0x3')],this['_markerNames']=new Set(),this[_0x4a08('0x5')]('createdAt',null),this[_0x4a08('0x5')](_0x4a08('0x19'),_0x15a8ad['attributes']||{}),this[_0x4a08('0x5')](_0x4a08('0x30'),null),this[_0x4a08('0x5')](_0x4a08('0x23'),null),this['set'](_0x4a08('0x3a'),null),this['set']('_saved',!0x1),this['decorate'](_0x4a08('0x24')),this['decorate']('discard');}get[_0x4a08('0x26')](){let _0x3a28f1=this;for(;_0x3a28f1[_0x4a08('0x30')];)_0x3a28f1=_0x3a28f1[_0x4a08('0x30')];return _0x3a28f1;}get[_0x4a08('0x6')](){return!!this[_0x4a08('0x3a')]&&this['commentThread'][_0x4a08('0x2b')]>0x0;}get[_0x4a08('0x29')](){if(0x0==this['_markerNames'][_0x4a08('0x1d')])return!0x1;return 0x6==Array[_0x4a08('0x1f')](this[_0x4a08('0xf')])[0x0][_0x4a08('0x15')](':')[_0x4a08('0x2b')];}get[_0x4a08('0x37')](){return null!==this['getFirstMarker']();}['addMarkerName'](_0x5bdb86){this[_0x4a08('0xf')][_0x4a08('0x13')](_0x5bdb86);}[_0x4a08('0x36')](){return Array[_0x4a08('0x1f')](this[_0x4a08('0xf')]);}[_0x4a08('0x17')](){return this[_0x4a08('0x36')]()['map'](_0x5263e4=>this[_0x4a08('0x31')]['markers'][_0x4a08('0x1')](_0x5263e4))[_0x4a08('0x14')](_0xf907db=>_0xf907db);}['getFirstMarker'](){return this['getMarkers']()[0x0]||null;}[_0x4a08('0x0')](){this['_model'][_0x4a08('0x11')](_0x1aa196=>{for(const _0xb71398 of this[_0x4a08('0x17')]())_0x1aa196[_0x4a08('0x22')](_0xb71398);}),this[_0x4a08('0xf')][_0x4a08('0x2e')]();}[_0x4a08('0x22')](_0x5a2717){this[_0x4a08('0x31')][_0x4a08('0x11')](_0x524858=>{_0x524858['removeMarker'](_0x5a2717);}),this['_markerNames'][_0x4a08('0x18')](_0x5a2717);}[_0x4a08('0xe')](_0x4a6115){const _0x40f96b=_0x4a08('0x9')+this[_0x4a08('0x27')]+':'+this['subType']+':'+this['id']+':'+this[_0x4a08('0xd')]['id']+':'+o['getMultiRangeId']();this[_0x4a08('0x25')](_0x40f96b),this['_model'][_0x4a08('0x11')](_0x52d499=>{_0x52d499[_0x4a08('0xa')](_0x40f96b,{'range':_0x4a6115,'usingOperation':!0x0,'affectsData':!0x0});});}[_0x4a08('0x35')](_0x22b0c2){for(const _0x14b9bb of this[_0x4a08('0x39')]())if(_0x14b9bb[_0x4a08('0x2')](_0x22b0c2))return!0x0;return!0x1;}['getRanges'](){return this['getMarkers']()[_0x4a08('0xb')](_0x1f29db=>_0x1f29db['getRange']());}[_0x4a08('0x12')](){return this[_0x4a08('0x39')]()['reduce']((_0x5deae0,_0x92817a)=>[..._0x5deae0,..._0x92817a[_0x4a08('0x12')]()],[]);}[_0x4a08('0x34')](){return this[_0x4a08('0x7')]()[_0x4a08('0x1b')]();}[_0x4a08('0x2f')](){const _0x3ef7bd=this[_0x4a08('0x39')]();if(0x1!=_0x3ef7bd[_0x4a08('0x2b')])return null;const _0x9d30d5=_0x3ef7bd[0x0],_0x2b8f67=_0x9d30d5[_0x4a08('0xc')][_0x4a08('0x1c')],_0x3c07a8=_0x9d30d5['end'][_0x4a08('0x2a')];return _0x2b8f67 instanceof _0x5d12cd?_0x2b8f67!=_0x3c07a8?null:_0x2b8f67:null;}[_0x4a08('0x24')](){this['_onAccept'](this[_0x4a08('0x39')](),this[_0x4a08('0x2d')],this[_0x4a08('0x19')]),this[_0x4a08('0x0')]();}['discard'](){this[_0x4a08('0x10')](this[_0x4a08('0x39')](),this[_0x4a08('0x2d')],this['attributes']),this[_0x4a08('0x0')]();}[_0x4a08('0x20')](){const _0x236054=[];let _0x1447e6=this['head'];for(;_0x1447e6;)_0x236054[_0x4a08('0x1a')](_0x1447e6),_0x1447e6=_0x1447e6[_0x4a08('0x23')];return _0x236054;}[_0x4a08('0x4')](_0x42deb7,_0x3207e3){const _0x1f1c65=_0x19a584(this[_0x4a08('0x19')]);_0x484dcb(_0x1f1c65,_0x42deb7,_0x3207e3),_0xb3c651(_0x1f1c65,this[_0x4a08('0x19')])||(this[_0x4a08('0x19')]=_0x1f1c65,this[_0x4a08('0x2c')](_0x1f1c65));}[_0x4a08('0x28')](_0x585881){const _0x3fe5fa=_0x19a584(this[_0x4a08('0x19')]);_0x216694(_0x3fe5fa,_0x585881),_0xb3c651(_0x3fe5fa,this['attributes'])||(this['attributes']=_0x3fe5fa,this[_0x4a08('0x2c')](this[_0x4a08('0x19')]));}[_0x4a08('0x21')](){return{'id':this['id'],'type':this[_0x4a08('0x1e')]?this[_0x4a08('0x27')]+':'+this['subType']:this[_0x4a08('0x27')],'authorId':this[_0x4a08('0xd')]['id'],'createdAt':this[_0x4a08('0x3b')],'hasComments':this[_0x4a08('0x6')],'data':this[_0x4a08('0x2d')],'attributes':this[_0x4a08('0x19')]};}static[_0x4a08('0x16')](){return _0x72828f()[_0x4a08('0x33')](0x1,0x5);}}_0x5c43bd(o,_0x33a983);