/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x589b=['removeMarker','accept','_onAttributesChange','_onAccept','addMarker','push','isInContent','decorate','end','getAllAdjacentSuggestions','getContainedElement','createdAt','isMultiRange','subType','markers','data','length','addMarkerName','getMarkerNames','isIntersectingWithRange','from','author','getRange','change','filter','onDiscard','attributes','set','onAccept','_saved','map','getMultiRangeId','getFirstRange','isIntersecting','discard','previous','suggestion:','commentThread','next','type','split','_markerNames','onAttributesChange','getRanges','_onDiscard','getMarkers','removeMarkers','toJSON','hasComments','clear','removeAttribute','getFirstMarker','_model','delete','getItems','head'];(function(_0x334450,_0x589b54){const _0x57b25f=function(_0x5b3cf1){while(--_0x5b3cf1){_0x334450['push'](_0x334450['shift']());}};_0x57b25f(++_0x589b54);}(_0x589b,0x13b));const _0x57b2=function(_0x334450,_0x589b54){_0x334450=_0x334450-0x0;let _0x57b25f=_0x589b[_0x334450];return _0x57b25f;};import{Element as _0x1507e8}from'ckeditor5/src/engine';import{ObservableMixin as _0x488d66,mix as _0x131de3,uid as _0x10211a}from'ckeditor5/src/utils';import{cloneDeep as _0x48e858,isEqual as _0x2e8fec,set as _0x375b40,unset as _0x592288}from'lodash-es';export default class o{constructor(_0x5290f8,_0x322566){this['id']=_0x322566['id'],this[_0x57b2('0x4')]=_0x322566[_0x57b2('0x4')],this[_0x57b2('0x22')]=_0x322566[_0x57b2('0x22')]||null,this[_0x57b2('0x2a')]=_0x322566[_0x57b2('0x2a')],this['data']=null,this[_0x57b2('0x11')]=_0x5290f8,this['_onAccept']=_0x322566[_0x57b2('0x31')],this[_0x57b2('0x9')]=_0x322566[_0x57b2('0x2e')],this[_0x57b2('0x17')]=_0x322566[_0x57b2('0x7')],this[_0x57b2('0x6')]=new Set(),this['set'](_0x57b2('0x20'),null),this[_0x57b2('0x30')](_0x57b2('0x2f'),_0x322566['attributes']||{}),this['set'](_0x57b2('0x0'),null),this['set']('next',null),this['set'](_0x57b2('0x2'),null),this[_0x57b2('0x30')](_0x57b2('0x32'),!0x1),this['decorate'](_0x57b2('0x16')),this[_0x57b2('0x1c')]('discard');}get['head'](){let _0x4130be=this;for(;_0x4130be[_0x57b2('0x0')];)_0x4130be=_0x4130be[_0x57b2('0x0')];return _0x4130be;}get[_0x57b2('0xd')](){return!!this[_0x57b2('0x2')]&&this[_0x57b2('0x2')][_0x57b2('0x25')]>0x0;}get[_0x57b2('0x21')](){if(0x0==this[_0x57b2('0x6')]['size'])return!0x1;return 0x6==Array['from'](this[_0x57b2('0x6')])[0x0][_0x57b2('0x5')](':')[_0x57b2('0x25')];}get[_0x57b2('0x1b')](){return null!==this['getFirstMarker']();}[_0x57b2('0x26')](_0x2ac597){this[_0x57b2('0x6')]['add'](_0x2ac597);}[_0x57b2('0x27')](){return Array[_0x57b2('0x29')](this['_markerNames']);}[_0x57b2('0xa')](){return this[_0x57b2('0x27')]()[_0x57b2('0x33')](_0x2140df=>this[_0x57b2('0x11')][_0x57b2('0x23')]['get'](_0x2140df))[_0x57b2('0x2d')](_0x55adcb=>_0x55adcb);}['getFirstMarker'](){return this['getMarkers']()[0x0]||null;}[_0x57b2('0xb')](){this['_model'][_0x57b2('0x2c')](_0x262e31=>{for(const _0x14ca33 of this['getMarkers']())_0x262e31[_0x57b2('0x15')](_0x14ca33);}),this[_0x57b2('0x6')][_0x57b2('0xe')]();}['removeMarker'](_0x5a5164){this[_0x57b2('0x11')][_0x57b2('0x2c')](_0x13fef5=>{_0x13fef5[_0x57b2('0x15')](_0x5a5164);}),this[_0x57b2('0x6')][_0x57b2('0x12')](_0x5a5164);}['addRange'](_0x537eb7){const _0x4c2f8b=_0x57b2('0x1')+this['type']+':'+this[_0x57b2('0x22')]+':'+this['id']+':'+this['author']['id']+':'+o[_0x57b2('0x34')]();this[_0x57b2('0x26')](_0x4c2f8b),this[_0x57b2('0x11')][_0x57b2('0x2c')](_0x3164ec=>{_0x3164ec[_0x57b2('0x19')](_0x4c2f8b,{'range':_0x537eb7,'usingOperation':!0x0,'affectsData':!0x0});});}[_0x57b2('0x28')](_0x1a1d83){for(const _0x1a0dd8 of this[_0x57b2('0x8')]())if(_0x1a0dd8[_0x57b2('0x36')](_0x1a1d83))return!0x0;return!0x1;}['getRanges'](){return this[_0x57b2('0xa')]()[_0x57b2('0x33')](_0x429d23=>_0x429d23[_0x57b2('0x2b')]());}['getItems'](){return this[_0x57b2('0x8')]()['reduce']((_0x2ba7e7,_0x516c96)=>[..._0x2ba7e7,..._0x516c96[_0x57b2('0x13')]()],[]);}[_0x57b2('0x35')](){return this[_0x57b2('0x10')]()[_0x57b2('0x2b')]();}[_0x57b2('0x1f')](){const _0x54dffb=this[_0x57b2('0x8')]();if(0x1!=_0x54dffb[_0x57b2('0x25')])return null;const _0x3099a4=_0x54dffb[0x0],_0x5c25e6=_0x3099a4['start']['nodeAfter'],_0x88bfbc=_0x3099a4[_0x57b2('0x1d')]['nodeBefore'];return _0x5c25e6 instanceof _0x1507e8?_0x5c25e6!=_0x88bfbc?null:_0x5c25e6:null;}[_0x57b2('0x16')](){this[_0x57b2('0x18')](this['getRanges'](),this[_0x57b2('0x24')],this[_0x57b2('0x2f')]),this[_0x57b2('0xb')]();}[_0x57b2('0x37')](){this['_onDiscard'](this[_0x57b2('0x8')](),this[_0x57b2('0x24')],this[_0x57b2('0x2f')]),this[_0x57b2('0xb')]();}[_0x57b2('0x1e')](){const _0x39f5e1=[];let _0x5a60=this[_0x57b2('0x14')];for(;_0x5a60;)_0x39f5e1[_0x57b2('0x1a')](_0x5a60),_0x5a60=_0x5a60[_0x57b2('0x3')];return _0x39f5e1;}['setAttribute'](_0xba1bd1,_0x343a00){const _0x5d3032=_0x48e858(this['attributes']);_0x375b40(_0x5d3032,_0xba1bd1,_0x343a00),_0x2e8fec(_0x5d3032,this[_0x57b2('0x2f')])||(this[_0x57b2('0x2f')]=_0x5d3032,this['_onAttributesChange'](_0x5d3032));}[_0x57b2('0xf')](_0x5ef570){const _0x1c5ad3=_0x48e858(this[_0x57b2('0x2f')]);_0x592288(_0x1c5ad3,_0x5ef570),_0x2e8fec(_0x1c5ad3,this[_0x57b2('0x2f')])||(this[_0x57b2('0x2f')]=_0x1c5ad3,this[_0x57b2('0x17')](this['attributes']));}[_0x57b2('0xc')](){return{'id':this['id'],'type':this[_0x57b2('0x22')]?this['type']+':'+this[_0x57b2('0x22')]:this[_0x57b2('0x4')],'authorId':this['author']['id'],'createdAt':this[_0x57b2('0x20')],'hasComments':this[_0x57b2('0xd')],'data':this['data'],'attributes':this['attributes']};}static['getMultiRangeId'](){return _0x10211a()['substr'](0x1,0x5);}}_0x131de3(o,_0x488d66);