/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import Ht from'./basesuggestionthreadview';import{ButtonView as Jt}from'ckeditor5/src/ui';import{icons as Kt}from'ckeditor5/src/core';import{trimHtml as Ut,UserView as Xt}from'ckeditor5-collaboration/src/collaboration-core';export default class Nt extends Ht{constructor(_0x19be61,_0x31a6ca,_0x15849d,_0x113d1b){super(_0x19be61,_0x31a6ca,_0x15849d,_0x113d1b);const {t:t}=_0x19be61;this['set']('type',''),this['bind']('type')['to'](this,'descriptionParts',_0x1a9dd8=>_0x1a9dd8&&_0x1a9dd8[0x0]?_0x1a9dd8[0x0]['type']:''),this['bind']('description')['to'](this,'descriptionParts',this,'isActive',(_0x22c71c,_0x46661e)=>{let _0x2787fd='';for(const _0x27e7bc of _0x22c71c)_0x2787fd+='<p>'+Yt(_0x27e7bc['content'],_0x27e7bc['color'])+'</p>';return _0x46661e?_0x2787fd:Ut(_0x2787fd,{'limit':0x8c});}),this['_descriptionElement']=null,this['acceptButton']=this['_createButton'](t('Accept\x20suggestion'),Kt['check'],'ck-suggestion--accept','acceptSuggestion'),this['discardButton']=this['_createButton'](t('Discard\x20suggestion'),Kt['cancel'],'ck-suggestion--discard','discardSuggestion'),this['userView']=new Xt(_0x19be61,this['_model']['author']),this['userView']['extendTemplate']({'attributes':{'class':['ck-suggestion__user','ck-annotation__user']}}),this['setTemplate'](this['getTemplate']());}['getTemplate'](){const _0x5bc5e9=this['bindTemplate'],_0x383de9={'tag':'div','attributes':{'class':['ck-suggestion-wrapper',_0x5bc5e9['if']('isActive','ck-suggestion-wrapper--active'),_0x5bc5e9['to']('type',_0x3ea1f5=>'ck-suggestion-'+_0x3ea1f5),this['_config']['disableComments']&&'ck-suggestion--disabled-comments'],'data-suggestion-id':this['_model']['id'],'data-thread-id':this['_model']['commentThread']['id'],'data-author-id':this['_model']['author']['id'],'tabindex':-0x1},'children':[{'tag':'div','attributes':{'class':['ck-suggestion','ck-annotation']},'children':[this['userView'],{'tag':'div','attributes':{'class':['ck-suggestion__main','ck-annotation__main']},'children':[{'tag':'div','attributes':{'class':['ck-suggestion__info','ck-annotation__info']},'children':[{'tag':'span','children':[{'text':this['userView']['name']}],'attributes':{'class':['ck-suggestion__info-name','ck-annotation__info-name']}},{'tag':'time','attributes':{'datetime':_0x5bc5e9['to']('createdAt'),'class':['ck-comment__info-time','ck-annotation__info-time']},'children':[{'text':_0x5bc5e9['to']('createdAt',_0x10df94=>this['_config']['formatDateTime'](_0x10df94))}]}]},{'tag':'div','attributes':{'class':['ck-suggestion__actions','ck-annotation__actions']},'children':[this['acceptButton'],this['discardButton']]},{'tag':'div','attributes':{'class':['ck-annotation__content-wrapper']}}]}]}]};return this['commentsListView']&&this['commentThreadInputView']&&_0x383de9['children']['push'](this['commentsListView'],this['commentThreadInputView']),_0x383de9;}['render'](){super['render'](),this['_descriptionElement']=this['element']['querySelector']('.ck-annotation__content-wrapper'),this['_descriptionElement']['innerHTML']=this['description'],this['on']('change:description',(_0x4594d8,_0x1f1615,_0x571569)=>{this['_descriptionElement']['innerHTML']=_0x571569;});}['_createButton'](_0x12a0b0,_0x5d9be8,_0x1bf1c0,_0x8631de){const _0x3600e2=new Jt(this['locale']);return _0x3600e2['set']({'label':_0x12a0b0,'icon':_0x5d9be8,'tooltip':!0x0}),_0x3600e2['extendTemplate']({'attributes':{'class':_0x1bf1c0}}),_0x3600e2['on']('execute',()=>{this['fire'](_0x8631de,this['_model']['id']);}),_0x3600e2['bind']('isEnabled')['to'](this),_0x3600e2;}}function Yt(_0x3c1121,_0xaa85ba){let _0x3fe0dd='';return _0x3fe0dd+=_0x3c1121['split']('*')['map']((_0x41cfe8,_0x47d431)=>_0x47d431%0x2!=0x0?'<span\x20class=\x22ck-suggestion-type\x22>'+Zt(_0x41cfe8)+'</span>':Zt(_0x41cfe8))['join'](''),_0xaa85ba&&(_0x3fe0dd+='<span\x20class=\x22ck-suggestion-color\x22\x20style=\x22background-color:\x20'+_0xaa85ba['value']+'\x22\x20title=\x22'+_0xaa85ba['title']+'\x22></span>'),_0x3fe0dd;}function Zt(_0x3cef22){const _0x292b05=document['createElement']('span');return _0x292b05['innerText']=_0x3cef22,_0x292b05['innerHTML'];}