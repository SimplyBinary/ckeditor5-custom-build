/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x295c39}from'ckeditor5/src/core';import{TreeWalker as Qt}from'ckeditor5/src/engine';export default class x extends _0x295c39{['afterInit'](){const _0x4be724=this['editor'],{t:t}=_0x4be724['locale'];if(!_0x4be724['plugins']['has']('BlockQuoteEditing'))return;const _0x2b6305=_0x4be724['plugins']['get']('TrackChangesEditing'),_0x158426=this['editor']['commands']['get']('blockQuote');_0x2b6305['enableCommand']('blockQuote',(_0x5077c5,_0x2c151={})=>{const _0x15a710=this['editor']['model']['document']['selection'],_0x108cc1=_0x2c151&&void 0x0!==_0x2c151['forceValue']?_0x2c151['forceValue']:!_0x158426['value'];let _0x4bdfc6=[];if(_0x108cc1){const _0x37c09a=Array['from'](_0x15a710['getSelectedBlocks']())['filter'](_0x4a3514=>Bt(_0x4a3514)||function(_0x101434,_0x14a6bf){const _0x3ade75=_0x14a6bf['checkChild'](_0x101434['parent'],'blockQuote'),_0x416f4e=_0x14a6bf['checkChild'](['$root','blockQuote'],_0x101434);return _0x3ade75&&_0x416f4e;}(_0x4a3514,this['editor']['model']['schema']));_0x4bdfc6=Lt(_0x37c09a,_0x4be724['model']);}else{const _0x13a703=Array['from'](_0x15a710['getSelectedBlocks']())['filter'](_0x182719=>Bt(_0x182719));_0x4bdfc6=Lt(_0x13a703,_0x4be724['model']);}_0x4be724['model']['change'](()=>{for(const _0x40bc3b of _0x4bdfc6)_0x2b6305['markBlockFormat'](_0x40bc3b,{'commandName':'blockQuote','commandParams':[{'forceValue':_0x108cc1}]});});}),_0x2b6305['_descriptionFactory']['registerDescriptionCallback'](_0x17cadf=>{const {data:_0x48735e}=_0x17cadf;if(_0x48735e&&'blockQuote'==_0x48735e['commandName']){const _0xd3373d=t({'string':'block\x20quote','id':'ELEMENT_BLOCK_QUOTE'});return _0x48735e['commandParams'][0x0]['forceValue']?{'type':'format','content':t('*Format:*\x20%0',_0xd3373d)}:{'type':'format','content':t('*Remove\x20format:*\x20%0',_0xd3373d)};}});}}function Bt(_0x1e4fa6){return'blockQuote'==_0x1e4fa6['parent']['name'];}function Lt(_0x86b049,_0x445919){let _0x51ca46,_0x24c77e=0x0;const _0x24e5eb=[],_0x261b09=_0x445919['schema'];for(;_0x24c77e<_0x86b049['length'];){const _0x110c53=_0x86b049[_0x24c77e],_0x26fbdc=_0x86b049[_0x24c77e+0x1];_0x51ca46||(_0x51ca46=_0x445919['createPositionBefore'](_0x110c53)),_t(_0x445919,_0x110c53,_0x26fbdc)||(_0x24e5eb['push'](_0x445919['createRange'](_0x51ca46,_0x261b09['isObject'](_0x110c53)?_0x445919['createPositionAfter'](_0x110c53):_0x445919['createPositionAt'](_0x110c53,'end'))),_0x51ca46=null),_0x24c77e++;}return _0x24e5eb;}function _t(_0x55567a,_0x13f619,_0x432c98){if(!_0x432c98)return!0x1;const _0x1e8dd3=_0x55567a['createPositionAfter'](_0x13f619),_0x419918=_0x55567a['createPositionBefore'](_0x432c98),_0x535ed6=new Qt({'boundaries':_0x55567a['createRange'](_0x1e8dd3,_0x419918)});for(const _0x450064 of _0x535ed6)if('text'==_0x450064['type']||_0x55567a['schema']['isLimit'](_0x450064['item']))return!0x1;return!0x0;}