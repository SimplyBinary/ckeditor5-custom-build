/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x19389a}from'ckeditor5/src/core';import ot from'./table';export default class at extends _0x19389a{static get['requires'](){return[ot];}['afterInit'](){const _0x5e922d=this['editor'];if(!_0x5e922d['plugins']['has']('TableEditing'))return;const {t:t}=_0x5e922d['locale'],_0x3ccaca=_0x5e922d['plugins']['get']('TrackChangesEditing'),_0x5e415e=_0x5e922d['plugins']['get']('TableUtils'),_0x4ab39d=_0x5e922d['plugins']['get'](ot);function _0xb489f1({showActiveMarker:_0x51a56b=!0x0,setDataAttribute:_0x56df1e=!0x0}={}){return(_0x17dda8,_0x530aff,_0x2be268)=>{const {type:_0x3472e6,id:_0x480c31}=_0x3ccaca['_splitMarkerName'](_0x530aff['markerName']),_0x2a615d=_0x3ccaca['getSuggestion'](_0x480c31);if(!_0x2a615d['data']||'setTableColumnHeader'!=_0x2a615d['data']['commandName'])return;if(_0x530aff['item'])return void _0x17dda8['stop']();if(!_0x2be268['consumable']['consume'](_0x530aff['markerRange'],_0x17dda8['name']))return;const _0x402830=_0x530aff['markerRange']['start']['nodeAfter'],_0x31844e=_0x530aff['markerRange']['end']['nodeBefore'],_0x4b964a=_0x402830['parent']['parent'],{column:_0x5889f6}=_0x5e415e['getCellLocation'](_0x402830),{column:_0x2f9d23}=_0x5e415e['getCellLocation'](_0x31844e);for(let _0x4277e3=_0x5889f6;_0x4277e3<=_0x2f9d23;_0x4277e3++){const _0x41feb2=_0x5e415e['createTableWalker'](_0x4b964a,{'column':_0x4277e3,'includeAllSlots':!0x1});for(const _0x58a0d0 of _0x41feb2){const _0x4db2e3=_0x58a0d0['cell'],_0x1f51ad=_0x2be268['mapper']['toViewElement'](_0x4db2e3);_0x2be268['writer']['addClass']('ck-suggestion-marker-'+_0x3472e6,_0x1f51ad),_0x56df1e&&_0x2be268['writer']['setAttribute']('data-suggestion',_0x480c31,_0x1f51ad),_0x2be268['mapper']['bindElementToMarker'](_0x1f51ad,_0x530aff['markerName']),_0x51a56b&&(_0x3ccaca['activeMarkers']['includes'](_0x530aff['markerName'])?_0x2be268['writer']['addClass']('ck-suggestion-marker--active',_0x1f51ad):_0x2be268['writer']['removeClass']('ck-suggestion-marker--active',_0x1f51ad));}}};}_0x3ccaca['enableCommand']('setTableRowHeader',(_0x3e969d,_0x58246d)=>{const _0x2b582a=_0x5e415e['getSelectionAffectedTableCells'](_0x5e922d['model']['document']['selection']),_0x8eb13=_0x5e415e['getRowIndexes'](_0x2b582a),_0x5956f7=_0x2b582a[0x0]['findAncestor']('table'),_0xa7b713=_0x5956f7['getAttribute']('headingRows')||0x0,_0x1dbd40=_0x58246d&&null!==_0x58246d['forceValue']?_0x58246d['forceValue']:!_0x5e922d['commands']['get']('setTableRowHeader')['value'],_0xdb7ed4=_0x1dbd40?_0x8eb13['last']:_0x8eb13['first'],_0x480532=_0x5956f7['getChild'](_0xdb7ed4);let _0x95ce98;if(_0x1dbd40){const _0x5a0a34=_0x5956f7['getChild'](_0xa7b713);if(_0x480532['index']<_0x5a0a34['index'])return;_0x95ce98=_0x5e922d['model']['createRange'](_0x5e922d['model']['createPositionBefore'](_0x5a0a34['getChild'](0x0)),_0x5e922d['model']['createPositionAfter'](_0x480532['getChild'](_0x480532['childCount']-0x1)));}else{const _0x2da097=_0x5956f7['getChild'](_0xa7b713-0x1);if(!_0x2da097)return;_0x95ce98=_0x5e922d['model']['createRange'](_0x5e922d['model']['createPositionBefore'](_0x480532['getChild'](0x0)),_0x5e922d['model']['createPositionAfter'](_0x2da097['getChild'](_0x2da097['childCount']-0x1)));}_0x5e922d['model']['change'](()=>{_0x3ccaca['markBlockFormat'](_0x95ce98,{'commandName':'setTableRowHeader','commandParams':[{'forceValue':_0x1dbd40}]},[],'setTableRowHeader');});}),_0x3ccaca['enableCommand']('setTableColumnHeader',(_0x4928d7,_0x4734e1)=>{const _0x2fb17f=_0x5e922d['plugins']['get']('TableUtils'),_0x2c27aa=_0x2fb17f['getSelectionAffectedTableCells'](_0x5e922d['model']['document']['selection']),_0x4b5998=_0x2fb17f['getColumnIndexes'](_0x2c27aa),_0xfaa9bb=_0x2c27aa[0x0]['findAncestor']('table'),_0x227113=_0xfaa9bb['getAttribute']('headingColumns')||0x0,_0x370b8d=_0x4734e1&&null!==_0x4734e1['forceValue']?_0x4734e1['forceValue']:!_0x5e922d['commands']['get']('setTableColumnHeader')['value'];let _0x42f315;const _0x10548d=_0xfaa9bb['getChild'](0x0),_0x48db77=_0x370b8d?_0x4b5998['last']:_0x4b5998['first'],_0x16412a=_0x2fb17f['createTableWalker'](_0xfaa9bb,{'startRow':0x0,'column':_0x48db77,'includeAllSlots':!0x1}),_0x416f02=Array['from'](_0x16412a)[0x0]['cell'];if(_0x370b8d){const _0x1aeef0=_0x10548d['getChild'](_0x227113);if(_0x416f02['isBefore'](_0x1aeef0))return;_0x42f315=_0x5e922d['model']['createRange'](_0x5e922d['model']['createPositionBefore'](_0x1aeef0),_0x5e922d['model']['createPositionAfter'](_0x416f02));}else{const _0x46121c=_0x10548d['getChild'](_0x227113-0x1);if(!_0x46121c)return;_0x42f315=_0x5e922d['model']['createRange'](_0x5e922d['model']['createPositionBefore'](_0x416f02),_0x5e922d['model']['createPositionAfter'](_0x46121c));}_0x5e922d['model']['change'](()=>{_0x3ccaca['markBlockFormat'](_0x42f315,{'commandName':'setTableColumnHeader','commandParams':[{'forceValue':_0x370b8d}]},[],'setTableColumnHeader');});}),_0x5e922d['editing']['downcastDispatcher']['on']('addMarker:suggestion',_0xb489f1(),{'priority':'highest'}),_0x5e922d['data']['downcastDispatcher']['on']('addMarker:suggestion',(_0x44069e,_0x4c3f92,_0x5a1cc5)=>{_0x5a1cc5['options']['showSuggestionHighlights']&&_0xb489f1({'showActiveMarker':!0x1,'setDataAttribute':!0x1})(_0x44069e,_0x4c3f92,_0x5a1cc5);},{'priority':'highest'}),_0x5e922d['editing']['downcastDispatcher']['on']('removeMarker:suggestion',(_0x365ee5,_0x59d199,_0x2d50cf)=>{const {type:_0x27a641,id:_0x5499d5}=_0x3ccaca['_splitMarkerName'](_0x59d199['markerName']),_0x2c2401=_0x3ccaca['getSuggestion'](_0x5499d5);if(!_0x2c2401['data']||'setTableColumnHeader'!=_0x2c2401['data']['commandName'])return;const _0x21d45f=_0x2d50cf['mapper']['markerNameToElements'](_0x59d199['markerName']);if(_0x21d45f)for(const _0x4afa57 of _0x21d45f)_0x2d50cf['writer']['removeClass']('ck-suggestion-marker-'+_0x27a641,_0x4afa57),_0x2d50cf['writer']['removeClass']('ck-suggestion-marker--active',_0x4afa57),_0x2d50cf['writer']['removeAttribute']('data-suggestion',_0x4afa57),_0x2d50cf['mapper']['unbindElementFromMarkerName'](_0x4afa57,_0x59d199['markerName']);},{'priority':'highest'}),_0x3ccaca['_descriptionFactory']['registerDescriptionCallback'](_0x11cf3e=>{const {data:_0x2d52c1}=_0x11cf3e;if(_0x2d52c1){if('setTableRowHeader'==_0x2d52c1['commandName']){const _0x1b18c1=_0x2d52c1['commandParams'][0x0]['forceValue'];return _0x5087f2(t(_0x1b18c1?{'string':'header\x20row','id':'FORMAT_HEADER_ROW'}:{'string':'regular\x20row','id':'FORMAT_REGULAR_ROW'}));}if('setTableColumnHeader'==_0x2d52c1['commandName']){const _0x33b4a5=_0x2d52c1['commandParams'][0x0]['forceValue'];return _0x5087f2(t(_0x33b4a5?{'string':'header\x20column','id':'FORMAT_HEADER_COLUMN'}:{'string':'regular\x20column','id':'FORMAT_REGULAR_COLUMN'}));}}function _0x5087f2(_0xb54cc1){return{'type':'format','content':t('*Format:*\x20%0',_0xb54cc1)};}});const _0x2e391e=_0x4ab39d['_acceptFormatSuggestionCallbackFactory']();_0x3ccaca['_suggestionFactory']['registerCustomCallback']('formatBlock','setTableRowHeader','accept',_0x2e391e),_0x3ccaca['_suggestionFactory']['registerCustomCallback']('formatBlock','setTableColumnHeader','accept',_0x2e391e);}}