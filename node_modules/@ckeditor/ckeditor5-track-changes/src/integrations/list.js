/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x5f30c6}from'ckeditor5/src/core';export default class V extends _0x5f30c6{['afterInit'](){const _0x3361e4=this['editor'];if(!_0x3361e4['plugins']['has']('ListEditing'))return;const _0x46fa8f=_0x3361e4['plugins']['get']('TrackChangesEditing'),_0x51ba07=_0x3361e4['plugins']['has']('TodoListEditing');function _0x3b462b(_0x974dcd){return()=>{const _0x2d3747=_0x3361e4['model']['document']['selection'],_0x221ffd=_0x3361e4['commands']['get'](_0x974dcd);if(_0x221ffd['value'])return void _0x3361e4['execute']('paragraph',{});const _0x370468=_0x974dcd['slice'](0x0,-0x4),_0x1babae=function(_0x850eab,_0x4c02b7,_0x1ebc94){let _0x39802a=Array['from'](_0x850eab)['filter'](_0x2779e5=>function(_0x3360e4,_0x58f3c7){return _0x58f3c7['checkChild'](_0x3360e4['parent'],'listItem')&&!_0x58f3c7['isObject'](_0x3360e4);}(_0x2779e5,_0x1ebc94));_0x39802a=_0x39802a['filter'](_0x5ced91=>!_0x5ced91['is']('element','listItem')||_0x5ced91['getAttribute']('listType')!=_0x4c02b7);const _0x4c377a=new Set();for(const _0x7d0b25 of _0x39802a)_0x7d0b25['is']('element','listItem')?_0x4c377a['add'](Mt(_0x7d0b25)):_0x4c377a['add'](_0x7d0b25);return Array['from'](_0x4c377a);}(_0x2d3747['getSelectedBlocks'](),_0x370468,_0x3361e4['model']['schema']);_0x3361e4['model']['change'](()=>{for(const _0x546d2e of _0x1babae)_0x46fa8f['markBlockFormat'](_0x546d2e,{'commandName':_0x974dcd,'commandParams':[{'forceValue':!_0x221ffd['value']}],'formatGroupId':'blockName'},Pt(_0x546d2e));});};}function _0x1bbbeb(_0x40b830){return()=>{const _0x4b9da2=function(_0x325d31){const _0x43d26f=(_0x325d31=Array['from'](_0x325d31))['findIndex'](_0x48db07=>'listItem'!=_0x48db07['name']);return _0x43d26f>-0x1&&(_0x325d31=_0x325d31['slice'](0x0,_0x43d26f)),_0x325d31;}(_0x3361e4['model']['document']['selection']['getSelectedBlocks']()),_0x47c8ae=_0x3361e4['model']['createRange'](_0x3361e4['model']['createPositionAt'](_0x4b9da2[0x0],'before'),_0x3361e4['model']['createPositionAt'](_0x4b9da2[_0x4b9da2['length']-0x1],'end'));_0x3361e4['model']['change'](()=>{_0x46fa8f['markBlockFormat'](_0x47c8ae,{'commandName':_0x40b830,'commandParams':[],'formatGroupId':'listIndent'},function(_0x1c9c45){const _0x3524d9=new Set();for(const _0x212013 of _0x1c9c45){let _0x3dc996=_0x212013['nextSibling'];for(;_0x3dc996&&_0x3dc996['getAttribute']('listIndent')>_0x212013['getAttribute']('listIndent');)_0x3524d9['add'](_0x3dc996),_0x3dc996=_0x3dc996['nextSibling'];}return Array['from'](_0x3524d9);}(_0x4b9da2));});};}_0x46fa8f['enableCommand']('numberedList',_0x3b462b('numberedList')),_0x46fa8f['enableCommand']('bulletedList',_0x3b462b('bulletedList')),_0x51ba07&&_0x46fa8f['enableCommand']('todoList',_0x3b462b('todoList')),_0x46fa8f['enableCommand']('indentList',_0x1bbbeb('indentList')),_0x46fa8f['enableCommand']('outdentList',_0x1bbbeb('outdentList')),_0x51ba07&&_0x46fa8f['enableCommand']('checkTodoList',()=>{const _0x260f39=_0x3361e4['commands']['get']('checkTodoList'),_0xa83e78=Array['from'](_0x260f39['_selectedElements']);_0xa83e78['filter'](_0x45e2e2=>_0x45e2e2['getAttribute']('todoListChecked')!=_0x260f39['value']),_0x3361e4['model']['change'](()=>{for(const _0x5ae383 of _0xa83e78)_0x46fa8f['markBlockFormat'](_0x5ae383,{'commandName':'checkTodoList','commandParams':[{'forceValue':!_0x260f39['value']}]});});});const {t:t}=_0x3361e4['locale'];_0x46fa8f['_descriptionFactory']['registerElementLabel']('listItem',_0x228c63=>t({'string':'list\x20item','plural':'%0\x20list\x20items','id':'ELEMENT_LIST_ITEM'},_0x228c63)),_0x46fa8f['_descriptionFactory']['registerDescriptionCallback'](_0x46fecb=>{const {data:_0x2d5ed4}=_0x46fecb;if(_0x2d5ed4){if('numberedList'==_0x2d5ed4['commandName']||'bulletedList'==_0x2d5ed4['commandName']||'todoList'==_0x2d5ed4['commandName'])switch(_0x2d5ed4['commandName']['replace']('List','')){case'bulleted':return _0x1972d9(t({'string':'bulleted\x20list','id':'ELEMENT_BULLETED_LIST'}));case'numbered':return _0x1972d9(t({'string':'numbered\x20list','id':'ELEMENT_NUMBERED_LIST'}));case'todo':return _0x1972d9(t({'string':'to-do\x20list','id':'ELEMENT_TODO_LIST'}));}if('indentList'==_0x2d5ed4['commandName'])return{'type':'format','content':t('*Indent:*\x20%0',t({'string':'list\x20item','id':'ELEMENT_LIST_ITEM'}))};if('outdentList'==_0x2d5ed4['commandName'])return{'type':'format','content':t('*Outdent:*\x20%0',t({'string':'list\x20item','id':'ELEMENT_LIST_ITEM'}))};if('checkTodoList'==_0x2d5ed4['commandName'])return _0x2d5ed4['commandParams'][0x0]['forceValue']?{'type':'format','content':t('*Check\x20item*')}:{'type':'format','content':t('*Uncheck\x20item*')};}function _0x1972d9(_0x16c490){return{'type':'format','content':t('*Change\x20to:*\x20%0',_0x16c490)};}});}}function Mt(_0x525eaa){const _0x3271c3=_0x525eaa['getAttribute']('listIndent');if(0x0==_0x3271c3)return _0x525eaa;let _0x49ee55=_0x525eaa;for(;_0x525eaa['previousSibling']&&_0x525eaa['previousSibling']['is']('element','listItem');){const _0x1e2b54=_0x525eaa['previousSibling']['getAttribute']('listIndent');if(_0x1e2b54==_0x3271c3)_0x49ee55=_0x525eaa['previousSibling'];else{if(_0x1e2b54<_0x3271c3)break;}_0x525eaa=_0x525eaa['previousSibling'];}return _0x49ee55;}function Pt(_0x1749c6){const _0x535b08=[];if(_0x1749c6['is']('element','listItem')&&_0x1749c6['getAttribute']('listIndent')>0x0){let _0x5ecd41=_0x1749c6['nextSibling'];for(;_0x5ecd41&&'listItem'==_0x5ecd41['name']&&_0x5ecd41['getAttribute']('listIndent')==_0x1749c6['getAttribute']('listIndent');)_0x535b08['push'](_0x5ecd41),_0x5ecd41=_0x5ecd41['nextSibling'];}return _0x535b08;}