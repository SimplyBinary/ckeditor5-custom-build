/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0xcbe0d0}from'ckeditor5/src/core';import{normalizeColorOptions as Ft}from'ckeditor5/src/ui';import{getRangesWithAttribute as Rt}from'./utils';const zt=[{'pluginName':'FontSizeEditing','commandName':'fontSize'},{'pluginName':'FontFamilyEditing','commandName':'fontFamily'},{'pluginName':'FontColorEditing','commandName':'fontColor'},{'pluginName':'FontBackgroundColorEditing','commandName':'fontBackgroundColor'}];export default class L extends _0xcbe0d0{['afterInit'](){const {t:t}=this['editor']['locale'];for(const {pluginName:_0x164a4c,commandName:_0x174f1b}of zt)this['editor']['plugins']['has'](_0x164a4c)&&this['_enableCommand'](_0x174f1b);this['editor']['plugins']['get']('TrackChangesEditing')['_descriptionFactory']['registerDescriptionCallback'](_0xb5d250=>{const {data:_0x226515}=_0xb5d250;if(null!=_0x226515){if('fontSize'==_0x226515['commandName']){const _0x13bc60=_0x226515['commandParams'][0x0]['value'];if(_0x13bc60){const _0x3e53bd=this['editor']['plugins']['get']('FontSize')['normalizeSizeOptions'](this['editor']['config']['get']('fontSize.options'))['find'](_0x12e3f0=>_0x12e3f0['model']==_0x13bc60)['title'],_0x4e46c9=this['editor']['locale']['_t'](_0x3e53bd)['toLowerCase']();return{'type':'format','content':t('*Set\x20font\x20size:*\x20%0',_0x4e46c9)};}return{'type':'format','content':t('*Reset\x20font\x20size*')};}if('fontFamily'==_0x226515['commandName']){const _0x526075=_0x226515['commandParams'][0x0]['value'];return _0x526075?{'type':'format','content':t('*Set\x20font\x20family:*\x20%0',_0x526075)}:{'type':'format','content':t('*Reset\x20font\x20family*')};}if('fontColor'==_0x226515['commandName']){const _0x292979=_0x226515['commandParams'][0x0]['value'];if(_0x292979){const _0x3965c1=Ft(this['editor']['config']['get']('fontColor.colors'))['find'](_0x267d1c=>_0x267d1c['model']==_0x292979);let _0x5c12ae=_0x292979,_0x207353='';return _0x3965c1&&(_0x5c12ae=_0x3965c1['label'],_0x207353=this['editor']['locale']['_t'](_0x5c12ae)['toLowerCase']()),{'type':'format','content':t('*Set\x20font\x20color:*\x20%0',_0x207353)['trim'](),'color':{'value':_0x292979,'title':_0x207353||_0x5c12ae}};}return{'type':'format','content':t('*Reset\x20font\x20color*')};}if('fontBackgroundColor'==_0x226515['commandName']){const _0x18e398=_0x226515['commandParams'][0x0]['value'];if(_0x18e398){const _0x4dfa19=Ft(this['editor']['config']['get']('fontBackgroundColor.colors'))['find'](_0x570eb5=>_0x570eb5['model']==_0x18e398);let _0x1798f7=_0x18e398,_0x2a4ad1='';return _0x4dfa19&&(_0x1798f7=_0x4dfa19['label'],_0x2a4ad1=this['editor']['locale']['_t'](_0x1798f7)['toLowerCase']()),{'type':'format','content':t('*Set\x20font\x20background\x20color:*\x20%0',_0x2a4ad1)['trim'](),'color':{'value':_0x18e398,'title':_0x2a4ad1||_0x1798f7}};}return{'type':'format','content':t('*Reset\x20font\x20background\x20color*')};}}});}['_enableCommand'](_0x32b725){const _0x2aa470=this['editor'];_0x2aa470['plugins']['get']('TrackChangesEditing')['enableCommand'](_0x32b725,(_0x112504,_0xc7c0b={})=>{const _0x47aba8=_0x2aa470['model']['document']['selection'],_0x495e5b=_0xc7c0b['value'];_0x47aba8['isCollapsed']?_0x112504(_0xc7c0b):_0x2aa470['model']['change'](()=>{const _0x12fccc=Array['from'](_0x47aba8['getRanges']());for(const _0x932277 of _0x12fccc){const _0x1637f8=_0x495e5b?[_0x932277]:Rt(_0x32b725,_0x932277,_0x2aa470['model']);for(const _0x59038f of _0x1637f8)_0x2aa470['plugins']['get']('TrackChangesEditing')['markInlineFormat'](_0x59038f,{'commandName':_0x32b725,'commandParams':[{'value':_0x495e5b}]});}});});}}