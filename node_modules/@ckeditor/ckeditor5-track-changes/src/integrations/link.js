/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x387ba0}from'ckeditor5/src/core';import{findAttributeRange as _0x6c8a7b}from'ckeditor5/src/typing';import{getRangesWithAttribute as Rt}from'./utils';export default class Q extends _0x387ba0{['afterInit'](){const _0x591a88=this['editor'];if(!_0x591a88['plugins']['has']('LinkEditing'))return;const _0x2b0fdb=_0x591a88['plugins']['get']('TrackChangesEditing');_0x2b0fdb['enableCommand']('link',(_0x488891,_0x37ac66)=>{const _0x3e8294=_0x591a88['model']['document']['selection'];let _0x322073=[];if(_0x3e8294['isCollapsed']){if(!_0x3e8294['hasAttribute']('linkHref'))return void _0x488891(_0x37ac66);{const _0x2163c4=_0x6c8a7b(_0x3e8294['getFirstPosition'](),'linkHref',_0x3e8294['getAttribute']('linkHref'),_0x591a88['model']);_0x322073=[_0x2163c4];}}else _0x322073=Array['from'](_0x3e8294['getRanges']());_0x591a88['model']['change'](()=>{for(const _0x46e900 of _0x322073)_0x2b0fdb['markInlineFormat'](_0x46e900,{'commandName':'link','commandParams':[_0x37ac66]});});}),_0x2b0fdb['enableCommand']('unlink',()=>{const _0x1a1628=this['editor']['model'],_0x19f21b=_0x1a1628['document']['selection'];_0x1a1628['change'](()=>{let _0x309be3=[];if(_0x19f21b['isCollapsed'])_0x309be3=[_0x6c8a7b(_0x19f21b['getFirstPosition'](),'linkHref',_0x19f21b['getAttribute']('linkHref'),_0x591a88['model'])];else _0x309be3=Rt('linkHref',_0x19f21b['getFirstRange'](),_0x591a88['model']);for(const _0x13edd7 of _0x309be3)_0x2b0fdb['markInlineFormat'](_0x13edd7,{'commandName':'unlink','commandParams':[]});});}),_0x2b0fdb['_descriptionFactory']['registerDescriptionCallback'](_0x49f92c=>{const {data:_0x2f30a7}=_0x49f92c,{t:t}=_0x591a88['locale'];if(_0x2f30a7){if('link'==_0x2f30a7['commandName'])return{'type':'format','content':t('*Set\x20link:*\x20%0','\x22'+_0x2f30a7['commandParams'][0x0]+'\x22')};return'unlink'==_0x2f30a7['commandName']?{'type':'format','content':t('*Remove\x20link*')}:void 0x0;}});}}