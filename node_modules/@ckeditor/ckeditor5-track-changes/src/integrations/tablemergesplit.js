/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x352c=['afterInit','_suggestionFactory','getRanges','map','value','get','TableUtils','set:isEnabled','accept','splitTableCellVertically','subType','mergeTableCells','_isForcedDefaultExecutionBlock','table','cell','getSelectionAffectedTableCells','commands','highest','editor','_acceptFormatSuggestionCallbackFactory','fromRange','type','enableCommand','_areSelectedCellsMergable','isInContent','mergeTableCellLeft','locale','change','insertion','element','has','containsRange','root','mergeTableCellUp','formatBlock','add','return','getAncestors','length','model','execute','getCellLocation','$graveyard','setSelection','format','TableEditing','tableCell','selection','size','_areMergableCells','low','deletion','_tablePostFixingSubtypes','createTableWalker','getFirstPosition','from','TrackChangesEditing','*Split\x20cell:*\x20horizontally','commandName','*Merge\x20cells*','mergeTableCellDown','markMultiRangeBlockFormat','registerDescriptionCallback','author','filter','document','find','detach','registerCustomCallback','mergeTableCellRight','stop','splitTableCellHorizontally','plugins','rootName','createRangeOn','_descriptionFactory','refresh'];(function(_0x13c0cb,_0x352ca1){const _0x10549a=function(_0x11ad51){while(--_0x11ad51){_0x13c0cb['push'](_0x13c0cb['shift']());}};_0x10549a(++_0x352ca1);}(_0x352c,0xb7));const _0x1054=function(_0x13c0cb,_0x352ca1){_0x13c0cb=_0x13c0cb-0x0;let _0x10549a=_0x352c[_0x13c0cb];return _0x10549a;};import{Plugin as _0x5248e8}from'ckeditor5/src/core';import _0x29f571 from'./table';import{LiveRange as _0x2dc8d7}from'ckeditor5/src/engine';import{getTranslation as _0xb4f6d8}from'../utils/common-translations';export default class at extends _0x5248e8{static get['requires'](){return[_0x29f571];}[_0x1054('0x30')](){const _0x2561d3=this['editor'],_0x21160e=_0x2561d3[_0x1054('0xa')][_0x1054('0x24')][_0x1054('0x12')],_0x29c397=_0x2561d3[_0x1054('0x4a')];if(!_0x2561d3[_0x1054('0x2b')][_0x1054('0x1')](_0x1054('0x10')))return;const _0x4de931=_0x2561d3[_0x1054('0x2b')][_0x1054('0x35')]('TrackChangesEditing'),_0x3f5534=_0x2561d3[_0x1054('0x2b')][_0x1054('0x35')]('TableUtils'),_0x3af322=_0x2561d3['plugins'][_0x1054('0x35')](_0x29f571);_0x3af322[_0x1054('0x17')]['push'](_0x1054('0x3b')),_0x4de931[_0x1054('0x46')](_0x1054('0x3b'),()=>{const _0x13e4fb=_0x3f5534['getSelectionAffectedTableCells'](_0x2561d3[_0x1054('0xa')][_0x1054('0x24')]['selection']);_0x2561d3[_0x1054('0xa')][_0x1054('0x4b')](()=>{_0x4de931['markMultiRangeBlockFormat'](_0x13e4fb,{'commandName':'mergeTableCells','commandParams':[]},[],_0x1054('0x3b'));});}),_0x2561d3['commands']['get']('mergeTableCells')['on'](_0x1054('0xb'),(_0x52966c,_0x82cb86)=>{_0x2561d3['commands'][_0x1054('0x35')]('trackChanges')['value']&&(_0x82cb86[_0x1054('0x9')]>0x0&&_0x82cb86[_0x82cb86[_0x1054('0x9')]-0x1]&&_0x82cb86[_0x82cb86[_0x1054('0x9')]-0x1]['forceDefaultExecution']||_0x4de931[_0x1054('0x3c')]||this[_0x1054('0x47')]()||_0x52966c[_0x1054('0x29')]());},{'priority':_0x1054('0x41')});for(const _0x569e33 of['mergeTableCellUp','mergeTableCellRight',_0x1054('0x1f'),'mergeTableCellLeft']){const _0x365a48=_0x2561d3[_0x1054('0x40')][_0x1054('0x35')](_0x569e33);_0x4de931['enableCommand'](_0x569e33,()=>{const _0x401de0=_0x2561d3[_0x1054('0xa')]['document'][_0x1054('0x12')][_0x1054('0x19')]()[_0x1054('0x8')]()[_0x1054('0x25')](_0x2310c3=>_0x2310c3['is']('element',_0x1054('0x11'))),_0x2dcb93=_0x365a48[_0x1054('0x34')];_0x2561d3[_0x1054('0xa')][_0x1054('0x4b')](()=>{_0x4de931[_0x1054('0x20')]([_0x401de0,_0x2dcb93],{'commandName':_0x1054('0x3b'),'commandParams':[]},[],_0x1054('0x3b'));});});}for(const _0x446c2c of[_0x1054('0x39'),_0x1054('0x2a')]){const _0x52fcc9=_0x2561d3[_0x1054('0x40')]['get'](_0x446c2c);_0x4de931[_0x1054('0x46')](_0x446c2c,()=>{const _0x1cda5f=_0x3f5534[_0x1054('0x3f')](_0x2561d3[_0x1054('0xa')]['document']['selection'])[0x0],_0xdba38=_0x1cda5f['findAncestor'](_0x1054('0x3d')),{column:_0x3b1c1d,row:_0x1cac48}=_0x3f5534[_0x1054('0xc')](_0x1cda5f);let _0x32b2ed=[];if('horizontally'==_0x52fcc9['direction']){const _0x28d6c6=_0x3f5534[_0x1054('0x18')](_0xdba38,{'startRow':_0x1cac48,'endRow':_0x1cac48,'includeAllSlots':!0x0});_0x32b2ed=Array[_0x1054('0x1a')](_0x28d6c6)['map'](_0x5129c3=>_0x5129c3[_0x1054('0x3e')]);}else{const _0x59cc32=_0x3f5534[_0x1054('0x18')](_0xdba38,{'column':_0x3b1c1d,'includeAllSlots':!0x0});_0x32b2ed=Array[_0x1054('0x1a')](_0x59cc32)[_0x1054('0x33')](_0x5495b4=>_0x5495b4[_0x1054('0x3e')]);}_0x2561d3['model']['change'](_0x17ce2e=>{_0x4de931['markBlockFormat'](_0x17ce2e[_0x1054('0x2d')](_0x1cda5f),{'commandName':_0x446c2c,'commandParams':[]},_0x32b2ed,_0x446c2c);});});}_0x4de931[_0x1054('0x2e')][_0x1054('0x21')](_0x5b23e4=>{const {data:_0x54a514}=_0x5b23e4;if(_0x54a514)return'mergeTableCells'==_0x54a514['commandName']?{'type':_0x1054('0xf'),'content':_0xb4f6d8(_0x29c397,_0x1054('0x1e'))}:void 0x0;}),_0x4de931[_0x1054('0x2e')][_0x1054('0x21')](_0x19846b=>{const {data:_0x57c798}=_0x19846b;if(_0x57c798)return'splitTableCellVertically'==_0x57c798[_0x1054('0x1d')]?{'type':_0x1054('0xf'),'content':_0xb4f6d8(_0x29c397,'*Split\x20cell:*\x20vertically')}:_0x1054('0x2a')==_0x57c798['commandName']?{'type':_0x1054('0xf'),'content':_0xb4f6d8(_0x29c397,_0x1054('0x1c'))}:void 0x0;});const _0x9da3e7=_0x3af322[_0x1054('0x43')]();for(const _0x37d7ec of['mergeTableCellUp',_0x1054('0x28'),'mergeTableCellDown',_0x1054('0x49')])_0x4de931[_0x1054('0x31')][_0x1054('0x27')]('formatBlock',_0x37d7ec,_0x1054('0x38'),_0x9da3e7);for(const _0x26a20e of['splitTableCellVertically',_0x1054('0x2a')])_0x4de931['_suggestionFactory'][_0x1054('0x27')]('formatBlock',_0x26a20e,'accept',_0x9da3e7);_0x4de931[_0x1054('0x31')]['registerCustomCallback'](_0x1054('0x5'),_0x1054('0x3b'),_0x1054('0x38'),_0xa28f62=>{_0x2561d3[_0x1054('0xa')][_0x1054('0x4b')](_0x4321cd=>{const _0x21ceee=Array[_0x1054('0x1a')](_0x21160e['getRanges']())[_0x1054('0x33')](_0x571f5b=>_0x2dc8d7[_0x1054('0x44')](_0x571f5b));_0x4321cd['setSelection'](_0xa28f62),_0x2561d3[_0x1054('0x40')]['get'](_0x1054('0x3b'))[_0x1054('0x2f')](),_0x2561d3['execute'](_0x1054('0x3b'),{'forceDefaultExecution':!0x0});const _0x2e6f88=_0x21ceee[_0x1054('0x23')](_0x8c8843=>_0x1054('0xd')!=_0x8c8843[_0x1054('0x3')][_0x1054('0x2c')]);_0x2e6f88['length']>0x0&&_0x4321cd[_0x1054('0xe')](_0x2e6f88);for(const _0x30dc1e of _0x21ceee)_0x30dc1e[_0x1054('0x26')]();});});for(const _0x2091c6 of[_0x1054('0x4'),_0x1054('0x1f'),'mergeTableCellLeft',_0x1054('0x28')]){const _0x4b56d7=_0x2561d3[_0x1054('0x40')][_0x1054('0x35')](_0x2091c6);_0x4b56d7['on'](_0x1054('0x37'),(_0x1b3033,_0x18d126,_0x467878)=>{if(_0x467878){const _0x39c7c5=_0x2561d3[_0x1054('0xa')][_0x1054('0x24')][_0x1054('0x12')]['getFirstPosition']()[_0x1054('0x8')]()[_0x1054('0x25')](_0x127c34=>_0x127c34['is'](_0x1054('0x0'),_0x1054('0x11')));this[_0x1054('0x14')](_0x4b56d7[_0x1054('0x34')],_0x39c7c5)||(_0x1b3033[_0x1054('0x7')]=!0x1,_0x1b3033['stop']());}},{'priority':_0x1054('0x15')});}}[_0x1054('0x47')](){const _0x32459b=this[_0x1054('0x42')][_0x1054('0x40')][_0x1054('0x35')]('mergeTableCells'),_0x2a13bd=this[_0x1054('0x42')][_0x1054('0x2b')][_0x1054('0x35')](_0x1054('0x36'));if(!_0x32459b['isEnabled'])return!0x1;const _0x3925f2=_0x2a13bd[_0x1054('0x3f')](this[_0x1054('0x42')]['model'][_0x1054('0x24')]['selection']);for(const _0x510bea of _0x3925f2)for(const _0x2f25d6 of _0x3925f2)if(_0x510bea!=_0x2f25d6&&!this[_0x1054('0x14')](_0x510bea,_0x2f25d6))return!0x1;return!0x0;}[_0x1054('0x14')](_0x353372,_0x4623c5){const _0x3a4ed2=this[_0x1054('0x42')]['plugins'][_0x1054('0x35')](_0x1054('0x1b')),_0x539c90=this[_0x1054('0x42')][_0x1054('0xa')][_0x1054('0x2d')](_0x353372),_0x944eee=this[_0x1054('0x42')]['model'][_0x1054('0x2d')](_0x4623c5),_0x4d9132=new Set(),_0x235c78=new Set();for(const _0x43ee7f of _0x3a4ed2['getSuggestions']())if((_0x1054('0x4c')==_0x43ee7f[_0x1054('0x45')]||_0x1054('0x16')==_0x43ee7f['type']||_0x1054('0x3b')==_0x43ee7f[_0x1054('0x3a')])&&_0x43ee7f[_0x1054('0x48')])for(const _0x4125e3 of _0x43ee7f[_0x1054('0x32')]())_0x4125e3[_0x1054('0x2')](_0x539c90,!0x0)&&_0x4d9132[_0x1054('0x6')](_0x43ee7f[_0x1054('0x45')]+':'+_0x43ee7f[_0x1054('0x22')]['id']),_0x4125e3[_0x1054('0x2')](_0x944eee,!0x0)&&_0x235c78[_0x1054('0x6')](_0x43ee7f['type']+':'+_0x43ee7f[_0x1054('0x22')]['id']);if(_0x4d9132['size']!=_0x235c78[_0x1054('0x13')])return!0x1;for(const _0x2cf3b0 of _0x4d9132)if(!_0x235c78[_0x1054('0x1')](_0x2cf3b0))return!0x1;return!0x0;}}