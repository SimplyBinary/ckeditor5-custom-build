/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x164b2b}from'ckeditor5/src/core';import{getElementsAffectedByListItemRename as _0x2b4f42}from'./utils';export default class tt extends _0x164b2b{['afterInit'](){const _0x3b9431=this['editor'];if(!_0x3b9431['plugins']['has']('Paragraph'))return;const {t:t}=_0x3b9431['locale'],_0x82ef7c=_0x3b9431['plugins']['get']('TrackChangesEditing');_0x82ef7c['_descriptionFactory']['registerElementLabel']('paragraph',_0x94f017=>t({'string':'paragraph','plural':'%0\x20paragraphs','id':'ELEMENT_PARAGRAPH'},_0x94f017)),_0x82ef7c['enableCommand']('paragraph',(_0x44b38f,_0x648abe={})=>{const _0x35690b=_0x3b9431['model']['document'],_0x239dc5=_0x648abe['selection']||_0x35690b['selection'],_0x169c89=Array['from'](_0x239dc5['getSelectedBlocks']())['filter'](_0x5e8475=>function(_0x5944cb,_0x43dae0){return _0x43dae0['checkChild'](_0x5944cb['parent'],'paragraph')&&!_0x43dae0['isObject'](_0x5944cb)&&'paragraph'!=_0x5944cb['name'];}(_0x5e8475,this['editor']['model']['schema']));_0x3b9431['model']['change'](()=>{for(const _0x78b6a3 of _0x169c89)_0x82ef7c['markBlockFormat'](_0x78b6a3,{'commandName':'paragraph','commandParams':[],'formatGroupId':'blockName'},_0x2b4f42(_0x78b6a3));});}),_0x82ef7c['_descriptionFactory']['registerDescriptionCallback'](_0x19cca5=>{const {data:_0xd7745f}=_0x19cca5;if(_0xd7745f&&'paragraph'==_0xd7745f['commandName'])return{'type':'format','content':t('*Change\x20to:*\x20%0',t({'string':'paragraph','plural':'%0\x20paragraphs','id':'ELEMENT_PARAGRAPH'}))};}),_0x82ef7c['enableCommand']('insertParagraph'),_0x3b9431['editing']['downcastDispatcher']['on']('addMarker:suggestion:insertion',tr(_0x3b9431),{'priority':'highest'}),_0x3b9431['data']['downcastDispatcher']['on']('addMarker:suggestion:insertion',(_0x39ef5e,_0x740aa8,_0x52d844)=>{_0x52d844['options']['showSuggestionHighlights']&&tr(_0x3b9431,{'showActiveMarker':!0x1})(_0x39ef5e,_0x740aa8,_0x52d844);},{'priority':'highest'});const _0x4fac16=_0x82ef7c['_descriptionFactory'];_0x4fac16['registerDescriptionCallback'](_0x25aa2c=>{if('insertion'!==_0x25aa2c['type'])return;const {start:_0xda5eb6,end:_0x5660e6}=_0x25aa2c['getFirstRange']();if(!_0xda5eb6['isTouching'](_0x5660e6)||!_0xda5eb6['nodeAfter'])return;const _0x22cb11=_0x3b9431['model']['schema'],_0x51a23a=_0xda5eb6['nodeAfter'];return _0x22cb11['isBlock'](_0x51a23a)&&!_0x22cb11['isLimit'](_0x51a23a)&&_0x22cb11['checkChild'](_0x51a23a,'$text')?{'type':'insertion','content':t('*Insert:*\x20%0',_0x4fac16['getItemLabel'](_0x51a23a['name'],0x1))}:void 0x0;});}}function tr(_0x18057d,{showActiveMarker:_0x261088=!0x0}={}){return(_0x3544c1,_0x4b957f,_0x2942b6)=>{const _0x5d4c0d=_0x18057d['plugins']['get']('TrackChangesEditing'),_0x537ea9=_0x4b957f['markerRange']['start'],_0x22eeeb=_0x4b957f['markerRange']['end'],_0xe87146=_0x18057d['model']['schema'];if(!_0x537ea9['isTouching'](_0x22eeeb)||!_0x537ea9['nodeAfter'])return;const _0x263e1f=_0x537ea9['nodeAfter'];if(_0xe87146['isBlock'](_0x263e1f)&&!_0xe87146['isLimit'](_0x263e1f)&&_0xe87146['checkChild'](_0x263e1f,'$text')){if(!_0x2942b6['consumable']['consume'](_0x4b957f['markerRange'],_0x3544c1['name']))return;const _0x59862b=_0x2942b6['writer']['createUIElement']('span',{'class':'ck-suggestion-marker-split'}),_0x17c26c=_0x2942b6['mapper']['toViewPosition'](_0x22eeeb);_0x261088&&_0x5d4c0d['activeMarkers']['includes'](_0x4b957f['markerName'])&&_0x2942b6['writer']['addClass']('ck-suggestion-marker--active',_0x59862b),_0x2942b6['writer']['insert'](_0x17c26c,_0x59862b),_0x2942b6['mapper']['bindElementToMarker'](_0x59862b,_0x4b957f['markerName']);}};}