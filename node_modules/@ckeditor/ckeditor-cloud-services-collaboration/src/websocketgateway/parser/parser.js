/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
'use strict';var __importDefault=this&&this['__importDefault']||function(_0x45cfe6){return _0x45cfe6&&_0x45cfe6['__esModule']?_0x45cfe6:{'default':_0x45cfe6};};Object['defineProperty'](exports,'__esModule',{'value':!0x0}),exports['Decoder']=exports['Encoder']=exports['ENCODED_TYPES']=void 0x0;const socket_io_parser_1=require('socket.io-parser'),packetparser_1=__importDefault(require('./packetparser')),parserutils_1=__importDefault(require('./parserutils'));exports['ENCODED_TYPES']=[socket_io_parser_1['PacketType']['EVENT'],socket_io_parser_1['PacketType']['ACK'],socket_io_parser_1['PacketType']['BINARY_ACK'],socket_io_parser_1['PacketType']['BINARY_EVENT']];class Encoder extends socket_io_parser_1['Encoder']{constructor(_0x5e4fe3=new packetparser_1['default']()){super(),this['_packetParser']=_0x5e4fe3;}['encode'](_0x200e5e){if(exports['ENCODED_TYPES']['includes'](_0x200e5e['type']))try{return[this['_packetParser']['encode'](_0x200e5e['type'],_0x200e5e['data'],_0x200e5e['id'],_0x200e5e['nsp'])];}catch(_0x2d5bf0){console['error']('Can\x20not\x20properly\x20serialize\x20or\x20deserialize\x20messages.\x20Check\x20the\x20original\x20error.',{'originalError':{'message':_0x2d5bf0['message']}});}return super['encode'](_0x200e5e);}}exports['Encoder']=Encoder;class Decoder extends socket_io_parser_1['Decoder']{constructor(_0x1ef7b0=new packetparser_1['default']()){super(),this['_packetParser']=_0x1ef7b0;}['add'](_0x11d4d2){if(!parserutils_1['default']['isBuffer'](_0x11d4d2))return super['add'](_0x11d4d2);let _0x2f7c76;try{_0x2f7c76=this['_packetParser']['decode'](_0x11d4d2)['packet'];}catch(_0x3682b4){return super['add'](_0x11d4d2);}super['emitReserved']('decoded',_0x2f7c76);}}exports['Decoder']=Decoder;