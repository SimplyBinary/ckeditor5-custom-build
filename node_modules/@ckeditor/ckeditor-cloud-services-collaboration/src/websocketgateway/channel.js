/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
'use strict';var __importDefault=this&&this['__importDefault']||function(_0x18d774){return _0x18d774&&_0x18d774['__esModule']?_0x18d774:{'default':_0x18d774};};Object['defineProperty'](exports,'__esModule',{'value':!0x0});const utils_1=require('ckeditor5/src/utils'),channelmessage_1=__importDefault(require('./../websocketgateway/messages/channelmessage')),messagescompressor_1=__importDefault(require('./../messagescompressor'));class Channel{constructor(_0x269e91,_0x3621db,_0xe618ee){this['_channelName']=_0x269e91,this['_wsGateway']=_0x3621db,this['_socket']=_0xe618ee,this['_subscribeToChannel']();}['remove'](){this['_socket']['off'](this['_channelName']);}['getEventName'](_0xc734ea,_0x5248d6=!0x1){let _0x419c01='';return _0x5248d6&&(_0x419c01+='all:'),_0x419c01+='event',_0xc734ea&&(_0x419c01+=':'+_0xc734ea),_0x419c01;}['_subscribeToChannel'](){this['_socket']['on'](this['_channelName'],_0x1f6ad1=>{const _0x1ecdf7=messagescompressor_1['default']['decode'](_0x1f6ad1,channelmessage_1['default']);this['fire'](this['getEventName'](_0x1ecdf7['type'],!0x0),_0x1ecdf7['data'],_0x1ecdf7['socketId']),_0x1ecdf7['socketId']!==this['_wsGateway']['socketId']&&this['fire'](this['getEventName'](_0x1ecdf7['type']),_0x1ecdf7['data'],_0x1ecdf7['socketId']);});}}(0x0,utils_1['mix'])(Channel,utils_1['EmitterMixin']),exports['default']=Channel;