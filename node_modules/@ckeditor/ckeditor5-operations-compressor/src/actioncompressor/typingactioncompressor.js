/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0xc619=['keys','attributes','next','compress','_context','data','nodes','_getCompressorByName','wasUndone','length','__className','decompress','_combineNext','_compressSingleOperation','InsertOperation','position','buffers','substr','_compareOperations'];(function(_0x519ea0,_0xc619d3){const _0x56f5f9=function(_0x43896f){while(--_0x43896f){_0x519ea0['push'](_0x519ea0['shift']());}};_0x56f5f9(++_0xc619d3);}(_0xc619,0x1bb));const _0x56f5=function(_0x519ea0,_0xc619d3){_0x519ea0=_0x519ea0-0x0;let _0x56f5f9=_0xc619[_0x519ea0];return _0x56f5f9;};import _0x3cdf5e from'./actioncompressor';import{arePositionsEqual as _0x382d83,getPositionShiftedBy as _0x53f870}from'../utils';import{cloneDeep as _0xcdfcde}from'lodash-es';export default class g extends _0x3cdf5e{[_0x56f5('0x6')](_0x4eb4ac,_0x4b4993){return _0x4b4993['nodes'][0x0][_0x56f5('0x12')]+=_0x4eb4ac['nodes'][0x0]['data'],_0x4b4993;}['_splitCurrent'](_0x501ee3){const _0x5ddf5f=_0xcdfcde(_0x501ee3),_0x7c3a26=_0x5ddf5f['nodes'][0x0],_0x36e2fe=_0x501ee3[_0x56f5('0x0')][0x0],_0x318245=_0x36e2fe['data'][Symbol['iterator']]()[_0x56f5('0xf')]()['value'],_0x3d53c6=_0x318245[_0x56f5('0x3')];return _0x7c3a26[_0x56f5('0x12')]=_0x318245,_0x36e2fe[_0x56f5('0x12')]=_0x36e2fe[_0x56f5('0x12')][_0x56f5('0xb')](_0x3d53c6),_0x501ee3[_0x56f5('0x9')]=_0x53f870(_0x501ee3['position'],_0x3d53c6),_0x5ddf5f;}[_0x56f5('0xc')](_0x45ba8d,_0x2eb3c8){if(S(_0x45ba8d)&&S(_0x2eb3c8)){const _0x2304c2=_0x45ba8d[_0x56f5('0x0')][0x0]['data'][_0x56f5('0x3')],_0xc9ca9b=_0x382d83(_0x53f870(_0x45ba8d[_0x56f5('0x9')],_0x2304c2),_0x2eb3c8[_0x56f5('0x9')]),_0x267578=_0x45ba8d[_0x56f5('0x0')][0x0],_0x5a167f=_0x2eb3c8['nodes'][0x0];return _0xc9ca9b&&function(_0x5dfa91,_0x50f234){const _0x54ee07=Object[_0x56f5('0xd')](_0x5dfa91[_0x56f5('0xe')]||{}),_0x54b915=Object['keys'](_0x50f234[_0x56f5('0xe')]||{});if(_0x54ee07[_0x56f5('0x3')]!==_0x54b915[_0x56f5('0x3')])return!0x1;return _0x54ee07['every'](_0x10110f=>_0x50f234['attributes'][_0x10110f]&&_0x50f234[_0x56f5('0xe')][_0x10110f]===_0x5dfa91[_0x56f5('0xe')][_0x10110f]);}(_0x267578,_0x5a167f);}return!0x1;}[_0x56f5('0x7')](_0x21e7f2){const _0x551ebd={'types':[],'buffers':[],'baseVersion':0x0};return this['_context'][_0x56f5('0x1')](_0x56f5('0x8'))[_0x56f5('0x10')](_0x551ebd,[_0x21e7f2]),_0x551ebd[_0x56f5('0xa')][0x0];}['_decompressSingleOperation'](_0x5c5e48){const _0x981246=[];return this[_0x56f5('0x11')]['_getCompressorByName'](_0x56f5('0x8'))[_0x56f5('0x5')](_0x981246,_0x5c5e48),_0x981246[0x0];}}function S(_0x30ae14){return'InsertOperation'==_0x30ae14[_0x56f5('0x4')]&&0x1==_0x30ae14[_0x56f5('0x0')]['length']&&_0x30ae14['nodes'][0x0]['data']&&!_0x30ae14[_0x56f5('0x2')]&&0x1==Array['from'](_0x30ae14[_0x56f5('0x0')][0x0][_0x56f5('0x12')])[_0x56f5('0x3')];}